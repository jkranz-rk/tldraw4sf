/*! For license information please see main.e74821c7.js.LICENSE.txt */
!function(){var e={1694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var a=i.apply(null,n);a&&e.push(a)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},6724:function(e,t,n){var r=n(9218),i=n(1772),o=TypeError;e.exports=function(e){if(r(e))return e;throw o(i(e)+" is not a function")}},5715:function(e,t,n){var r=n(5028),i=n(4385),o=n(1592).f,a=r("unscopables"),s=Array.prototype;void 0==s[a]&&o(s,a,{configurable:!0,value:i(null)}),e.exports=function(e){s[a][e]=!0}},5466:function(e,t,n){"use strict";var r=n(8424).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},5884:function(e,t,n){var r=n(3931),i=String,o=TypeError;e.exports=function(e){if(r(e))return e;throw o(i(e)+" is not an object")}},488:function(e,t,n){var r=n(5770),i=n(1823),o=n(3385),a=function(e){return function(t,n,a){var s,u=r(t),l=o(u),c=i(a,l);if(e&&n!=n){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===n)return e||c||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},9026:function(e,t,n){var r=n(1941),i=n(1219),o=n(3931),a=n(5028)("species"),s=Array;e.exports=function(e){var t;return r(e)&&(t=e.constructor,(i(t)&&(t===s||r(t.prototype))||o(t)&&null===(t=t[a]))&&(t=void 0)),void 0===t?s:t}},5491:function(e,t,n){var r=n(9026);e.exports=function(e,t){return new(r(e))(0===t?0:t)}},2933:function(e,t,n){var r=n(4932),i=r({}.toString),o=r("".slice);e.exports=function(e){return o(i(e),8,-1)}},7205:function(e,t,n){var r=n(6042),i=n(9218),o=n(2933),a=n(5028)("toStringTag"),s=Object,u="Arguments"==o(function(){return arguments}());e.exports=r?o:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=s(e),a))?n:u?o(t):"Object"==(r=o(t))&&i(t.callee)?"Arguments":r}},189:function(e,t,n){var r=n(3013),i=n(7273),o=n(2573),a=n(1592);e.exports=function(e,t,n){for(var s=i(t),u=a.f,l=o.f,c=0;c<s.length;c++){var d=s[c];r(e,d)||n&&r(n,d)||u(e,d,l(t,d))}}},3873:function(e,t,n){var r=n(1196),i=n(1592),o=n(2037);e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},2037:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},7543:function(e,t,n){var r=n(9218),i=n(1592),o=n(2557),a=n(9131);e.exports=function(e,t,n,s){s||(s={});var u=s.enumerable,l=void 0!==s.name?s.name:t;if(r(n)&&o(n,l,s),s.global)u?e[t]=n:a(t,n);else{try{s.unsafe?e[t]&&(u=!0):delete e[t]}catch(c){}u?e[t]=n:i.f(e,t,{value:n,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return e}},9131:function(e,t,n){var r=n(6840),i=Object.defineProperty;e.exports=function(e,t){try{i(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},1196:function(e,t,n){var r=n(2837);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4363:function(e){var t="object"==typeof document&&document.all,n="undefined"==typeof t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:n}},937:function(e,t,n){var r=n(6840),i=n(3931),o=r.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},6117:function(e){var t=TypeError;e.exports=function(e){if(e>9007199254740991)throw t("Maximum allowed index exceeded");return e}},4839:function(e){e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},5372:function(e,t,n){var r,i,o=n(6840),a=n(4839),s=o.process,u=o.Deno,l=s&&s.versions||u&&u.version,c=l&&l.v8;c&&(i=(r=c.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=+r[1]),e.exports=i},2080:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},7768:function(e,t,n){var r=n(6840),i=n(2573).f,o=n(3873),a=n(7543),s=n(9131),u=n(189),l=n(6673);e.exports=function(e,t){var n,c,d,p,f,h=e.target,v=e.global,g=e.stat;if(n=v?r:g?r[h]||s(h,{}):(r[h]||{}).prototype)for(c in t){if(p=t[c],d=e.dontCallGetSet?(f=i(n,c))&&f.value:n[c],!l(v?c:h+(g?".":"#")+c,e.forced)&&void 0!==d){if(typeof p==typeof d)continue;u(p,d)}(e.sham||d&&d.sham)&&o(p,"sham",!0),a(n,c,p,e)}}},2837:function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},8093:function(e,t,n){"use strict";n(447);var r=n(7926),i=n(7543),o=n(4087),a=n(2837),s=n(5028),u=n(3873),l=s("species"),c=RegExp.prototype;e.exports=function(e,t,n,d){var p=s(e),f=!a((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),h=f&&!a((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[l]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!f||!h||n){var v=r(/./[p]),g=t(p,""[e],(function(e,t,n,i,a){var s=r(e),u=t.exec;return u===o||u===c.exec?f&&!a?{done:!0,value:v(t,n,i)}:{done:!0,value:s(n,t,i)}:{done:!1}}));i(String.prototype,e,g[0]),i(c,p,g[1])}d&&u(c[p],"sham",!0)}},8264:function(e,t,n){"use strict";var r=n(1941),i=n(3385),o=n(6117),a=n(5851);e.exports=function e(t,n,s,u,l,c,d,p){for(var f,h=l,v=0,g=!!d&&a(d,p);v<u;)v in s&&(f=g?g(s[v],v,n):s[v],c>0&&r(f)?h=e(t,n,f,i(f),h,c-1)-1:(o(h+1),t[h]=f),h++),v++;return h}},6339:function(e,t,n){var r=n(4138),i=Function.prototype,o=i.apply,a=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(o):function(){return a.apply(o,arguments)})},5851:function(e,t,n){var r=n(7926),i=n(6724),o=n(4138),a=r(r.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?a(e,t):function(){return e.apply(t,arguments)}}},4138:function(e,t,n){var r=n(2837);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},8513:function(e,t,n){var r=n(4138),i=Function.prototype.call;e.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},3211:function(e,t,n){var r=n(1196),i=n(3013),o=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,s=i(o,"name"),u=s&&"something"===function(){}.name,l=s&&(!r||r&&a(o,"name").configurable);e.exports={EXISTS:s,PROPER:u,CONFIGURABLE:l}},7926:function(e,t,n){var r=n(2933),i=n(4932);e.exports=function(e){if("Function"===r(e))return i(e)}},4932:function(e,t,n){var r=n(4138),i=Function.prototype,o=i.call,a=r&&i.bind.bind(o,o);e.exports=r?a:function(e){return function(){return o.apply(e,arguments)}}},1240:function(e,t,n){var r=n(6840),i=n(9218);e.exports=function(e,t){return arguments.length<2?(n=r[e],i(n)?n:void 0):r[e]&&r[e][t];var n}},3863:function(e,t,n){var r=n(6724),i=n(9055);e.exports=function(e,t){var n=e[t];return i(n)?void 0:r(n)}},7794:function(e,t,n){var r=n(4932),i=n(8385),o=Math.floor,a=r("".charAt),s=r("".replace),u=r("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,c=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,r,d,p){var f=n+e.length,h=r.length,v=c;return void 0!==d&&(d=i(d),v=l),s(p,v,(function(i,s){var l;switch(a(s,0)){case"$":return"$";case"&":return e;case"`":return u(t,0,n);case"'":return u(t,f);case"<":l=d[u(s,1,-1)];break;default:var c=+s;if(0===c)return i;if(c>h){var p=o(c/10);return 0===p?i:p<=h?void 0===r[p-1]?a(s,1):r[p-1]+a(s,1):i}l=r[c-1]}return void 0===l?"":l}))}},6840:function(e,t,n){var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},3013:function(e,t,n){var r=n(4932),i=n(8385),o=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},6196:function(e){e.exports={}},2012:function(e,t,n){var r=n(1240);e.exports=r("document","documentElement")},6707:function(e,t,n){var r=n(1196),i=n(2837),o=n(937);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},1036:function(e,t,n){var r=n(4932),i=n(2837),o=n(2933),a=Object,s=r("".split);e.exports=i((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?s(e,""):a(e)}:a},8589:function(e,t,n){var r=n(4932),i=n(9218),o=n(4460),a=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return a(e)}),e.exports=o.inspectSource},9671:function(e,t,n){var r,i,o,a=n(1615),s=n(6840),u=n(3931),l=n(3873),c=n(3013),d=n(4460),p=n(9378),f=n(6196),h="Object already initialized",v=s.TypeError,g=s.WeakMap;if(a||d.state){var m=d.state||(d.state=new g);m.get=m.get,m.has=m.has,m.set=m.set,r=function(e,t){if(m.has(e))throw v(h);return t.facade=e,m.set(e,t),t},i=function(e){return m.get(e)||{}},o=function(e){return m.has(e)}}else{var y=p("state");f[y]=!0,r=function(e,t){if(c(e,y))throw v(h);return t.facade=e,l(e,y,t),t},i=function(e){return c(e,y)?e[y]:{}},o=function(e){return c(e,y)}}e.exports={set:r,get:i,has:o,enforce:function(e){return o(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!u(t)||(n=i(t)).type!==e)throw v("Incompatible receiver, "+e+" required");return n}}}},1941:function(e,t,n){var r=n(2933);e.exports=Array.isArray||function(e){return"Array"==r(e)}},9218:function(e,t,n){var r=n(4363),i=r.all;e.exports=r.IS_HTMLDDA?function(e){return"function"==typeof e||e===i}:function(e){return"function"==typeof e}},1219:function(e,t,n){var r=n(4932),i=n(2837),o=n(9218),a=n(7205),s=n(1240),u=n(8589),l=function(){},c=[],d=s("Reflect","construct"),p=/^\s*(?:class|function)\b/,f=r(p.exec),h=!p.exec(l),v=function(e){if(!o(e))return!1;try{return d(l,c,e),!0}catch(t){return!1}},g=function(e){if(!o(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return h||!!f(p,u(e))}catch(t){return!0}};g.sham=!0,e.exports=!d||i((function(){var e;return v(v.call)||!v(Object)||!v((function(){e=!0}))||e}))?g:v},6673:function(e,t,n){var r=n(2837),i=n(9218),o=/#|\.prototype\./,a=function(e,t){var n=u[s(e)];return n==c||n!=l&&(i(t)?r(t):!!t)},s=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},u=a.data={},l=a.NATIVE="N",c=a.POLYFILL="P";e.exports=a},9055:function(e){e.exports=function(e){return null===e||void 0===e}},3931:function(e,t,n){var r=n(9218),i=n(4363),o=i.all;e.exports=i.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:r(e)||e===o}:function(e){return"object"==typeof e?null!==e:r(e)}},3608:function(e){e.exports=!1},8287:function(e,t,n){var r=n(1240),i=n(9218),o=n(8946),a=n(7611),s=Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return i(t)&&o(t.prototype,s(e))}},3385:function(e,t,n){var r=n(2347);e.exports=function(e){return r(e.length)}},2557:function(e,t,n){var r=n(4932),i=n(2837),o=n(9218),a=n(3013),s=n(1196),u=n(3211).CONFIGURABLE,l=n(8589),c=n(9671),d=c.enforce,p=c.get,f=String,h=Object.defineProperty,v=r("".slice),g=r("".replace),m=r([].join),y=s&&!i((function(){return 8!==h((function(){}),"length",{value:8}).length})),b=String(String).split("String"),w=e.exports=function(e,t,n){"Symbol("===v(f(t),0,7)&&(t="["+g(f(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!a(e,"name")||u&&e.name!==t)&&(s?h(e,"name",{value:t,configurable:!0}):e.name=t),y&&n&&a(n,"arity")&&e.length!==n.arity&&h(e,"length",{value:n.arity});try{n&&a(n,"constructor")&&n.constructor?s&&h(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(i){}var r=d(e);return a(r,"source")||(r.source=m(b,"string"==typeof t?t:"")),e};Function.prototype.toString=w((function(){return o(this)&&p(this).source||l(this)}),"toString")},1246:function(e){var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var r=+e;return(r>0?n:t)(r)}},4385:function(e,t,n){var r,i=n(5884),o=n(1697),a=n(2080),s=n(6196),u=n(2012),l=n(937),c=n(9378),d="prototype",p="script",f=c("IE_PROTO"),h=function(){},v=function(e){return"<"+p+">"+e+"</"+p+">"},g=function(e){e.write(v("")),e.close();var t=e.parentWindow.Object;return e=null,t},m=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}m="undefined"!=typeof document?document.domain&&r?g(r):function(){var e,t=l("iframe"),n="java"+p+":";return t.style.display="none",u.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(v("document.F=Object")),e.close(),e.F}():g(r);for(var e=a.length;e--;)delete m[d][a[e]];return m()};s[f]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(h[d]=i(e),n=new h,h[d]=null,n[f]=e):n=m(),void 0===t?n:o.f(n,t)}},1697:function(e,t,n){var r=n(1196),i=n(6056),o=n(1592),a=n(5884),s=n(5770),u=n(8084);t.f=r&&!i?Object.defineProperties:function(e,t){a(e);for(var n,r=s(t),i=u(t),l=i.length,c=0;l>c;)o.f(e,n=i[c++],r[n]);return e}},1592:function(e,t,n){var r=n(1196),i=n(6707),o=n(6056),a=n(5884),s=n(4655),u=TypeError,l=Object.defineProperty,c=Object.getOwnPropertyDescriptor,d="enumerable",p="configurable",f="writable";t.f=r?o?function(e,t,n){if(a(e),t=s(t),a(n),"function"===typeof e&&"prototype"===t&&"value"in n&&f in n&&!n[f]){var r=c(e,t);r&&r[f]&&(e[t]=n.value,n={configurable:p in n?n[p]:r[p],enumerable:d in n?n[d]:r[d],writable:!1})}return l(e,t,n)}:l:function(e,t,n){if(a(e),t=s(t),a(n),i)try{return l(e,t,n)}catch(r){}if("get"in n||"set"in n)throw u("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},2573:function(e,t,n){var r=n(1196),i=n(8513),o=n(8306),a=n(2037),s=n(5770),u=n(4655),l=n(3013),c=n(6707),d=Object.getOwnPropertyDescriptor;t.f=r?d:function(e,t){if(e=s(e),t=u(t),c)try{return d(e,t)}catch(n){}if(l(e,t))return a(!i(o.f,e,t),e[t])}},3772:function(e,t,n){var r=n(3080),i=n(2080).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},400:function(e,t){t.f=Object.getOwnPropertySymbols},8946:function(e,t,n){var r=n(4932);e.exports=r({}.isPrototypeOf)},3080:function(e,t,n){var r=n(4932),i=n(3013),o=n(5770),a=n(488).indexOf,s=n(6196),u=r([].push);e.exports=function(e,t){var n,r=o(e),l=0,c=[];for(n in r)!i(s,n)&&i(r,n)&&u(c,n);for(;t.length>l;)i(r,n=t[l++])&&(~a(c,n)||u(c,n));return c}},8084:function(e,t,n){var r=n(3080),i=n(2080);e.exports=Object.keys||function(e){return r(e,i)}},8306:function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);t.f=i?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},7772:function(e,t,n){var r=n(8513),i=n(9218),o=n(3931),a=TypeError;e.exports=function(e,t){var n,s;if("string"===t&&i(n=e.toString)&&!o(s=r(n,e)))return s;if(i(n=e.valueOf)&&!o(s=r(n,e)))return s;if("string"!==t&&i(n=e.toString)&&!o(s=r(n,e)))return s;throw a("Can't convert object to primitive value")}},7273:function(e,t,n){var r=n(1240),i=n(4932),o=n(3772),a=n(400),s=n(5884),u=i([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(s(e)),n=a.f;return n?u(t,n(e)):t}},2781:function(e,t,n){var r=n(8513),i=n(5884),o=n(9218),a=n(2933),s=n(4087),u=TypeError;e.exports=function(e,t){var n=e.exec;if(o(n)){var l=r(n,e,t);return null!==l&&i(l),l}if("RegExp"===a(e))return r(s,e,t);throw u("RegExp#exec called on incompatible receiver")}},4087:function(e,t,n){"use strict";var r=n(8513),i=n(4932),o=n(6124),a=n(7687),s=n(8596),u=n(1778),l=n(4385),c=n(9671).get,d=n(2047),p=n(2063),f=u("native-string-replace",String.prototype.replace),h=RegExp.prototype.exec,v=h,g=i("".charAt),m=i("".indexOf),y=i("".replace),b=i("".slice),w=function(){var e=/a/,t=/b*/g;return r(h,e,"a"),r(h,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),x=s.BROKEN_CARET,k=void 0!==/()??/.exec("")[1];(w||k||x||d||p)&&(v=function(e){var t,n,i,s,u,d,p,S=this,_=c(S),P=o(e),C=_.raw;if(C)return C.lastIndex=S.lastIndex,t=r(v,C,P),S.lastIndex=C.lastIndex,t;var E=_.groups,I=x&&S.sticky,M=r(a,S),T=S.source,j=0,A=P;if(I&&(M=y(M,"y",""),-1===m(M,"g")&&(M+="g"),A=b(P,S.lastIndex),S.lastIndex>0&&(!S.multiline||S.multiline&&"\n"!==g(P,S.lastIndex-1))&&(T="(?: "+T+")",A=" "+A,j++),n=new RegExp("^(?:"+T+")",M)),k&&(n=new RegExp("^"+T+"$(?!\\s)",M)),w&&(i=S.lastIndex),s=r(h,I?n:S,A),I?s?(s.input=b(s.input,j),s[0]=b(s[0],j),s.index=S.lastIndex,S.lastIndex+=s[0].length):S.lastIndex=0:w&&s&&(S.lastIndex=S.global?s.index+s[0].length:i),k&&s&&s.length>1&&r(f,s[0],n,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(s[u]=void 0)})),s&&E)for(s.groups=d=l(null),u=0;u<E.length;u++)d[(p=E[u])[0]]=s[p[1]];return s}),e.exports=v},7687:function(e,t,n){"use strict";var r=n(5884);e.exports=function(){var e=r(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},8596:function(e,t,n){var r=n(2837),i=n(6840).RegExp,o=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),a=o||r((function(){return!i("a","y").sticky})),s=o||r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:s,MISSED_STICKY:a,UNSUPPORTED_Y:o}},2047:function(e,t,n){var r=n(2837),i=n(6840).RegExp;e.exports=r((function(){var e=i(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},2063:function(e,t,n){var r=n(2837),i=n(6840).RegExp;e.exports=r((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},2244:function(e,t,n){var r=n(9055),i=TypeError;e.exports=function(e){if(r(e))throw i("Can't call method on "+e);return e}},9378:function(e,t,n){var r=n(1778),i=n(6520),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},4460:function(e,t,n){var r=n(6840),i=n(9131),o="__core-js_shared__",a=r[o]||i(o,{});e.exports=a},1778:function(e,t,n){var r=n(3608),i=n(4460);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.30.1",mode:r?"pure":"global",copyright:"\xa9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.1/LICENSE",source:"https://github.com/zloirock/core-js"})},8424:function(e,t,n){var r=n(4932),i=n(2128),o=n(6124),a=n(2244),s=r("".charAt),u=r("".charCodeAt),l=r("".slice),c=function(e){return function(t,n){var r,c,d=o(a(t)),p=i(n),f=d.length;return p<0||p>=f?e?"":void 0:(r=u(d,p))<55296||r>56319||p+1===f||(c=u(d,p+1))<56320||c>57343?e?s(d,p):r:e?l(d,p,p+2):c-56320+(r-55296<<10)+65536}};e.exports={codeAt:c(!1),charAt:c(!0)}},166:function(e,t,n){var r=n(5372),i=n(2837);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},1823:function(e,t,n){var r=n(2128),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},5770:function(e,t,n){var r=n(1036),i=n(2244);e.exports=function(e){return r(i(e))}},2128:function(e,t,n){var r=n(1246);e.exports=function(e){var t=+e;return t!==t||0===t?0:r(t)}},2347:function(e,t,n){var r=n(2128),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},8385:function(e,t,n){var r=n(2244),i=Object;e.exports=function(e){return i(r(e))}},6740:function(e,t,n){var r=n(8513),i=n(3931),o=n(8287),a=n(3863),s=n(7772),u=n(5028),l=TypeError,c=u("toPrimitive");e.exports=function(e,t){if(!i(e)||o(e))return e;var n,u=a(e,c);if(u){if(void 0===t&&(t="default"),n=r(u,e,t),!i(n)||o(n))return n;throw l("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},4655:function(e,t,n){var r=n(6740),i=n(8287);e.exports=function(e){var t=r(e,"string");return i(t)?t:t+""}},6042:function(e,t,n){var r={};r[n(5028)("toStringTag")]="z",e.exports="[object z]"===String(r)},6124:function(e,t,n){var r=n(7205),i=String;e.exports=function(e){if("Symbol"===r(e))throw TypeError("Cannot convert a Symbol value to a string");return i(e)}},1772:function(e){var t=String;e.exports=function(e){try{return t(e)}catch(n){return"Object"}}},6520:function(e,t,n){var r=n(4932),i=0,o=Math.random(),a=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++i+o,36)}},7611:function(e,t,n){var r=n(166);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},6056:function(e,t,n){var r=n(1196),i=n(2837);e.exports=r&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},1615:function(e,t,n){var r=n(6840),i=n(9218),o=r.WeakMap;e.exports=i(o)&&/native code/.test(String(o))},5028:function(e,t,n){var r=n(6840),i=n(1778),o=n(3013),a=n(6520),s=n(166),u=n(7611),l=r.Symbol,c=i("wks"),d=u?l.for||l:l&&l.withoutSetter||a;e.exports=function(e){return o(c,e)||(c[e]=s&&o(l,e)?l[e]:d("Symbol."+e)),c[e]}},5470:function(e,t,n){"use strict";var r=n(7768),i=n(8264),o=n(6724),a=n(8385),s=n(3385),u=n(5491);r({target:"Array",proto:!0},{flatMap:function(e){var t,n=a(this),r=s(n);return o(e),(t=u(n,0)).length=i(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},8624:function(e,t,n){"use strict";var r=n(7768),i=n(8264),o=n(8385),a=n(3385),s=n(2128),u=n(5491);r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=o(this),n=a(t),r=u(t,0);return r.length=i(r,t,t,n,0,void 0===e?1:s(e)),r}})},2330:function(e,t,n){n(5715)("flatMap")},9743:function(e,t,n){n(5715)("flat")},447:function(e,t,n){"use strict";var r=n(7768),i=n(4087);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},4178:function(e,t,n){"use strict";var r=n(6339),i=n(8513),o=n(4932),a=n(8093),s=n(2837),u=n(5884),l=n(9218),c=n(9055),d=n(2128),p=n(2347),f=n(6124),h=n(2244),v=n(5466),g=n(3863),m=n(7794),y=n(2781),b=n(5028)("replace"),w=Math.max,x=Math.min,k=o([].concat),S=o([].push),_=o("".indexOf),P=o("".slice),C="$0"==="a".replace(/./,"$0"),E=!!/./[b]&&""===/./[b]("a","$0");a("replace",(function(e,t,n){var o=E?"$":"$0";return[function(e,n){var r=h(this),o=c(e)?void 0:g(e,b);return o?i(o,e,r,n):i(t,f(r),e,n)},function(e,i){var a=u(this),s=f(e);if("string"==typeof i&&-1===_(i,o)&&-1===_(i,"$<")){var c=n(t,a,s,i);if(c.done)return c.value}var h=l(i);h||(i=f(i));var g=a.global;if(g){var b=a.unicode;a.lastIndex=0}for(var C=[];;){var E=y(a,s);if(null===E)break;if(S(C,E),!g)break;""===f(E[0])&&(a.lastIndex=v(s,p(a.lastIndex),b))}for(var I,M="",T=0,j=0;j<C.length;j++){for(var A=f((E=C[j])[0]),O=w(x(d(E.index),s.length),0),z=[],D=1;D<E.length;D++)S(z,void 0===(I=E[D])?I:String(I));var N=E.groups;if(h){var R=k([A],z,O,s);void 0!==N&&S(R,N);var L=f(r(i,void 0,R))}else L=m(A,s,O,z,N,i);O>=T&&(M+=P(s,T,O)+L,T=O+A.length)}return M+P(s,T)}]}),!!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!C||E)},7143:function(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var u,l,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,i),!0;case 5:return c.fn.call(c.context,t,r,i,o),!0;case 6:return c.fn.call(c.context,t,r,i,o,a),!0}for(l=1,u=new Array(d-1);l<d;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var p,f=c.length;for(l=0;l<f;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),d){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,r);break;case 4:c[l].fn.call(c[l].context,t,r,i);break;default:if(!u)for(p=1,u=new Array(d-1);p<d;p++)u[p-1]=arguments[p];c[l].fn.apply(c[l].context,u)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var u=0,l=[],c=s.length;u<c;u++)(s[u].fn!==t||i&&!s[u].once||r&&s[u].context!==r)&&l.push(s[u]);l.length?this._events[o]=1===l.length?l[0]:l:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},2467:function(e,t,n){e=n.nmd(e);var r="__lodash_hash_undefined__",i=1,o=2,a=9007199254740991,s="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",d="[object Date]",p="[object Error]",f="[object Function]",h="[object GeneratorFunction]",v="[object Map]",g="[object Number]",m="[object Null]",y="[object Object]",b="[object Promise]",w="[object Proxy]",x="[object RegExp]",k="[object Set]",S="[object String]",_="[object Symbol]",P="[object Undefined]",C="[object WeakMap]",E="[object ArrayBuffer]",I="[object DataView]",M=/^\[object .+?Constructor\]$/,T=/^(?:0|[1-9]\d*)$/,j={};j["[object Float32Array]"]=j["[object Float64Array]"]=j["[object Int8Array]"]=j["[object Int16Array]"]=j["[object Int32Array]"]=j["[object Uint8Array]"]=j["[object Uint8ClampedArray]"]=j["[object Uint16Array]"]=j["[object Uint32Array]"]=!0,j[s]=j[u]=j[E]=j[c]=j[I]=j[d]=j[p]=j[f]=j[v]=j[g]=j[y]=j[x]=j[k]=j[S]=j[C]=!1;var A="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,O="object"==typeof self&&self&&self.Object===Object&&self,z=A||O||Function("return this")(),D=t&&!t.nodeType&&t,N=D&&e&&!e.nodeType&&e,R=N&&N.exports===D,L=R&&A.process,B=function(){try{return L&&L.binding&&L.binding("util")}catch(e){}}(),F=B&&B.isTypedArray;function U(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function K(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function V(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var W,H,Y=Array.prototype,X=Function.prototype,q=Object.prototype,$=z["__core-js_shared__"],G=X.toString,Q=q.hasOwnProperty,Z=function(){var e=/[^.]+$/.exec($&&$.keys&&$.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),J=q.toString,ee=RegExp("^"+G.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=R?z.Buffer:void 0,ne=z.Symbol,re=z.Uint8Array,ie=q.propertyIsEnumerable,oe=Y.splice,ae=ne?ne.toStringTag:void 0,se=Object.getOwnPropertySymbols,ue=te?te.isBuffer:void 0,le=(W=Object.keys,H=Object,function(e){return W(H(e))}),ce=Le(z,"DataView"),de=Le(z,"Map"),pe=Le(z,"Promise"),fe=Le(z,"Set"),he=Le(z,"WeakMap"),ve=Le(Object,"create"),ge=Ke(ce),me=Ke(de),ye=Ke(pe),be=Ke(fe),we=Ke(he),xe=ne?ne.prototype:void 0,ke=xe?xe.valueOf:void 0;function Se(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function _e(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Pe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ce(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Pe;++t<n;)this.add(e[t])}function Ee(e){var t=this.__data__=new _e(e);this.size=t.size}function Ie(e,t){var n=He(e),r=!n&&We(e),i=!n&&!r&&Ye(e),o=!n&&!r&&!i&&Qe(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=s.length;for(var l in e)!t&&!Q.call(e,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Ue(l,u))||s.push(l);return s}function Me(e,t){for(var n=e.length;n--;)if(Ve(e[n][0],t))return n;return-1}function Te(e){return null==e?void 0===e?P:m:ae&&ae in Object(e)?function(e){var t=Q.call(e,ae),n=e[ae];try{e[ae]=void 0;var r=!0}catch(o){}var i=J.call(e);r&&(t?e[ae]=n:delete e[ae]);return i}(e):function(e){return J.call(e)}(e)}function je(e){return Ge(e)&&Te(e)==s}function Ae(e,t,n,r,a){return e===t||(null==e||null==t||!Ge(e)&&!Ge(t)?e!==e&&t!==t:function(e,t,n,r,a,l){var f=He(e),h=He(t),m=f?u:Fe(e),b=h?u:Fe(t),w=(m=m==s?y:m)==y,P=(b=b==s?y:b)==y,C=m==b;if(C&&Ye(e)){if(!Ye(t))return!1;f=!0,w=!1}if(C&&!w)return l||(l=new Ee),f||Qe(e)?De(e,t,n,r,a,l):function(e,t,n,r,a,s,u){switch(n){case I:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case E:return!(e.byteLength!=t.byteLength||!s(new re(e),new re(t)));case c:case d:case g:return Ve(+e,+t);case p:return e.name==t.name&&e.message==t.message;case x:case S:return e==t+"";case v:var l=K;case k:var f=r&i;if(l||(l=V),e.size!=t.size&&!f)return!1;var h=u.get(e);if(h)return h==t;r|=o,u.set(e,t);var m=De(l(e),l(t),r,a,s,u);return u.delete(e),m;case _:if(ke)return ke.call(e)==ke.call(t)}return!1}(e,t,m,n,r,a,l);if(!(n&i)){var M=w&&Q.call(e,"__wrapped__"),T=P&&Q.call(t,"__wrapped__");if(M||T){var j=M?e.value():e,A=T?t.value():t;return l||(l=new Ee),a(j,A,n,r,l)}}if(!C)return!1;return l||(l=new Ee),function(e,t,n,r,o,a){var s=n&i,u=Ne(e),l=u.length,c=Ne(t),d=c.length;if(l!=d&&!s)return!1;var p=l;for(;p--;){var f=u[p];if(!(s?f in t:Q.call(t,f)))return!1}var h=a.get(e);if(h&&a.get(t))return h==t;var v=!0;a.set(e,t),a.set(t,e);var g=s;for(;++p<l;){var m=e[f=u[p]],y=t[f];if(r)var b=s?r(y,m,f,t,e,a):r(m,y,f,e,t,a);if(!(void 0===b?m===y||o(m,y,n,r,a):b)){v=!1;break}g||(g="constructor"==f)}if(v&&!g){var w=e.constructor,x=t.constructor;w==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x||(v=!1)}return a.delete(e),a.delete(t),v}(e,t,n,r,a,l)}(e,t,n,r,Ae,a))}function Oe(e){return!(!$e(e)||function(e){return!!Z&&Z in e}(e))&&(Xe(e)?ee:M).test(Ke(e))}function ze(e){if(!function(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||q;return e===n}(e))return le(e);var t=[];for(var n in Object(e))Q.call(e,n)&&"constructor"!=n&&t.push(n);return t}function De(e,t,n,r,a,s){var u=n&i,l=e.length,c=t.length;if(l!=c&&!(u&&c>l))return!1;var d=s.get(e);if(d&&s.get(t))return d==t;var p=-1,f=!0,h=n&o?new Ce:void 0;for(s.set(e,t),s.set(t,e);++p<l;){var v=e[p],g=t[p];if(r)var m=u?r(g,v,p,t,e,s):r(v,g,p,e,t,s);if(void 0!==m){if(m)continue;f=!1;break}if(h){if(!U(t,(function(e,t){if(i=t,!h.has(i)&&(v===e||a(v,e,n,r,s)))return h.push(t);var i}))){f=!1;break}}else if(v!==g&&!a(v,g,n,r,s)){f=!1;break}}return s.delete(e),s.delete(t),f}function Ne(e){return function(e,t,n){var r=t(e);return He(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,Ze,Be)}function Re(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function Le(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Oe(n)?n:void 0}Se.prototype.clear=function(){this.__data__=ve?ve(null):{},this.size=0},Se.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Se.prototype.get=function(e){var t=this.__data__;if(ve){var n=t[e];return n===r?void 0:n}return Q.call(t,e)?t[e]:void 0},Se.prototype.has=function(e){var t=this.__data__;return ve?void 0!==t[e]:Q.call(t,e)},Se.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ve&&void 0===t?r:t,this},_e.prototype.clear=function(){this.__data__=[],this.size=0},_e.prototype.delete=function(e){var t=this.__data__,n=Me(t,e);return!(n<0)&&(n==t.length-1?t.pop():oe.call(t,n,1),--this.size,!0)},_e.prototype.get=function(e){var t=this.__data__,n=Me(t,e);return n<0?void 0:t[n][1]},_e.prototype.has=function(e){return Me(this.__data__,e)>-1},_e.prototype.set=function(e,t){var n=this.__data__,r=Me(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Pe.prototype.clear=function(){this.size=0,this.__data__={hash:new Se,map:new(de||_e),string:new Se}},Pe.prototype.delete=function(e){var t=Re(this,e).delete(e);return this.size-=t?1:0,t},Pe.prototype.get=function(e){return Re(this,e).get(e)},Pe.prototype.has=function(e){return Re(this,e).has(e)},Pe.prototype.set=function(e,t){var n=Re(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Ce.prototype.add=Ce.prototype.push=function(e){return this.__data__.set(e,r),this},Ce.prototype.has=function(e){return this.__data__.has(e)},Ee.prototype.clear=function(){this.__data__=new _e,this.size=0},Ee.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Ee.prototype.get=function(e){return this.__data__.get(e)},Ee.prototype.has=function(e){return this.__data__.has(e)},Ee.prototype.set=function(e,t){var n=this.__data__;if(n instanceof _e){var r=n.__data__;if(!de||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Pe(r)}return n.set(e,t),this.size=n.size,this};var Be=se?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}(se(e),(function(t){return ie.call(e,t)})))}:function(){return[]},Fe=Te;function Ue(e,t){return!!(t=null==t?a:t)&&("number"==typeof e||T.test(e))&&e>-1&&e%1==0&&e<t}function Ke(e){if(null!=e){try{return G.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Ve(e,t){return e===t||e!==e&&t!==t}(ce&&Fe(new ce(new ArrayBuffer(1)))!=I||de&&Fe(new de)!=v||pe&&Fe(pe.resolve())!=b||fe&&Fe(new fe)!=k||he&&Fe(new he)!=C)&&(Fe=function(e){var t=Te(e),n=t==y?e.constructor:void 0,r=n?Ke(n):"";if(r)switch(r){case ge:return I;case me:return v;case ye:return b;case be:return k;case we:return C}return t});var We=je(function(){return arguments}())?je:function(e){return Ge(e)&&Q.call(e,"callee")&&!ie.call(e,"callee")},He=Array.isArray;var Ye=ue||function(){return!1};function Xe(e){if(!$e(e))return!1;var t=Te(e);return t==f||t==h||t==l||t==w}function qe(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function $e(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ge(e){return null!=e&&"object"==typeof e}var Qe=F?function(e){return function(t){return e(t)}}(F):function(e){return Ge(e)&&qe(e.length)&&!!j[Te(e)]};function Ze(e){return null!=(t=e)&&qe(t.length)&&!Xe(t)?Ie(e):ze(e);var t}e.exports=function(e,t){return Ae(e,t)}},3881:function(e,t,n){var r="Expected a function",i=NaN,o="[object Symbol]",a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,d="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,p="object"==typeof self&&self&&self.Object===Object&&self,f=d||p||Function("return this")(),h=Object.prototype.toString,v=Math.max,g=Math.min,m=function(){return f.Date.now()};function y(e,t,n){var i,o,a,s,u,l,c=0,d=!1,p=!1,f=!0;if("function"!=typeof e)throw new TypeError(r);function h(t){var n=i,r=o;return i=o=void 0,c=t,s=e.apply(r,n)}function y(e){var n=e-l;return void 0===l||n>=t||n<0||p&&e-c>=a}function x(){var e=m();if(y(e))return k(e);u=setTimeout(x,function(e){var n=t-(e-l);return p?g(n,a-(e-c)):n}(e))}function k(e){return u=void 0,f&&i?h(e):(i=o=void 0,s)}function S(){var e=m(),n=y(e);if(i=arguments,o=this,l=e,n){if(void 0===u)return function(e){return c=e,u=setTimeout(x,t),d?h(e):s}(l);if(p)return u=setTimeout(x,t),h(l)}return void 0===u&&(u=setTimeout(x,t)),s}return t=w(t)||0,b(n)&&(d=!!n.leading,a=(p="maxWait"in n)?v(w(n.maxWait)||0,t):a,f="trailing"in n?!!n.trailing:f),S.cancel=function(){void 0!==u&&clearTimeout(u),c=0,i=l=o=u=void 0},S.flush=function(){return void 0===u?s:k(m())},S}function b(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function w(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&h.call(e)==o}(e))return i;if(b(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=b(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=u.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):s.test(e)?i:+e}e.exports=function(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw new TypeError(r);return b(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),y(e,t,{leading:i,maxWait:t,trailing:o})}},9409:function(e,t,n){var r=200,i="__lodash_hash_undefined__",o="[object Function]",a="[object GeneratorFunction]",s=/^\[object .+?Constructor\]$/,u="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,l="object"==typeof self&&self&&self.Object===Object&&self,c=u||l||Function("return this")();function d(e,t){return!!(e?e.length:0)&&function(e,t,n){if(t!==t)return function(e,t,n,r){var i=e.length,o=n+(r?1:-1);for(;r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}(e,f,n);var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,0)>-1}function p(e,t,n){for(var r=-1,i=e?e.length:0;++r<i;)if(n(t,e[r]))return!0;return!1}function f(e){return e!==e}function h(e,t){return e.has(t)}function v(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var g=Array.prototype,m=Function.prototype,y=Object.prototype,b=c["__core-js_shared__"],w=function(){var e=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),x=m.toString,k=y.hasOwnProperty,S=y.toString,_=RegExp("^"+x.call(k).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),P=g.splice,C=R(c,"Map"),E=R(c,"Set"),I=R(Object,"create");function M(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function T(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function j(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function A(e){var t=-1,n=e?e.length:0;for(this.__data__=new j;++t<n;)this.add(e[t])}function O(e,t){for(var n,r,i=e.length;i--;)if((n=e[i][0])===(r=t)||n!==n&&r!==r)return i;return-1}function z(e){if(!L(e)||(t=e,w&&w in t))return!1;var t,n=function(e){var t=L(e)?S.call(e):"";return t==o||t==a}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}(e)?_:s;return n.test(function(e){if(null!=e){try{return x.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(e))}M.prototype.clear=function(){this.__data__=I?I(null):{}},M.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},M.prototype.get=function(e){var t=this.__data__;if(I){var n=t[e];return n===i?void 0:n}return k.call(t,e)?t[e]:void 0},M.prototype.has=function(e){var t=this.__data__;return I?void 0!==t[e]:k.call(t,e)},M.prototype.set=function(e,t){return this.__data__[e]=I&&void 0===t?i:t,this},T.prototype.clear=function(){this.__data__=[]},T.prototype.delete=function(e){var t=this.__data__,n=O(t,e);return!(n<0)&&(n==t.length-1?t.pop():P.call(t,n,1),!0)},T.prototype.get=function(e){var t=this.__data__,n=O(t,e);return n<0?void 0:t[n][1]},T.prototype.has=function(e){return O(this.__data__,e)>-1},T.prototype.set=function(e,t){var n=this.__data__,r=O(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},j.prototype.clear=function(){this.__data__={hash:new M,map:new(C||T),string:new M}},j.prototype.delete=function(e){return N(this,e).delete(e)},j.prototype.get=function(e){return N(this,e).get(e)},j.prototype.has=function(e){return N(this,e).has(e)},j.prototype.set=function(e,t){return N(this,e).set(e,t),this},A.prototype.add=A.prototype.push=function(e){return this.__data__.set(e,i),this},A.prototype.has=function(e){return this.__data__.has(e)};var D=E&&1/v(new E([,-0]))[1]==1/0?function(e){return new E(e)}:function(){};function N(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function R(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return z(n)?n:void 0}function L(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){return e&&e.length?function(e,t,n){var i=-1,o=d,a=e.length,s=!0,u=[],l=u;if(n)s=!1,o=p;else if(a>=r){var c=t?null:D(e);if(c)return v(c);s=!1,o=h,l=new A}else l=t?[]:u;e:for(;++i<a;){var f=e[i],g=t?t(f):f;if(f=n||0!==f?f:0,s&&g===g){for(var m=l.length;m--;)if(l[m]===g)continue e;t&&l.push(g),u.push(f)}else o(l,g,n)||(l!==u&&l.push(g),u.push(f))}return u}(e):[]}},4235:function(e,t,n){var r,i=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function i(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var o={compressToBase64:function(e){if(null==e)return"";var n=o._compress(e,6,(function(e){return t.charAt(e)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:o._decompress(e.length,32,(function(n){return i(t,e.charAt(n))}))},compressToUTF16:function(t){return null==t?"":o._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:o._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=o.compress(e),n=new Uint8Array(2*t.length),r=0,i=t.length;r<i;r++){var a=t.charCodeAt(r);n[2*r]=a>>>8,n[2*r+1]=a%256}return n},decompressFromUint8Array:function(t){if(null===t||void 0===t)return o.decompress(t);for(var n=new Array(t.length/2),r=0,i=n.length;r<i;r++)n[r]=256*t[2*r]+t[2*r+1];var a=[];return n.forEach((function(t){a.push(e(t))})),o.decompress(a.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":o._compress(e,6,(function(e){return n.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),o._decompress(e.length,32,(function(t){return i(n,e.charAt(t))})))},compress:function(t){return o._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,n){if(null==e)return"";var r,i,o,a={},s={},u="",l="",c="",d=2,p=3,f=2,h=[],v=0,g=0;for(o=0;o<e.length;o+=1)if(u=e.charAt(o),Object.prototype.hasOwnProperty.call(a,u)||(a[u]=p++,s[u]=!0),l=c+u,Object.prototype.hasOwnProperty.call(a,l))c=l;else{if(Object.prototype.hasOwnProperty.call(s,c)){if(c.charCodeAt(0)<256){for(r=0;r<f;r++)v<<=1,g==t-1?(g=0,h.push(n(v)),v=0):g++;for(i=c.charCodeAt(0),r=0;r<8;r++)v=v<<1|1&i,g==t-1?(g=0,h.push(n(v)),v=0):g++,i>>=1}else{for(i=1,r=0;r<f;r++)v=v<<1|i,g==t-1?(g=0,h.push(n(v)),v=0):g++,i=0;for(i=c.charCodeAt(0),r=0;r<16;r++)v=v<<1|1&i,g==t-1?(g=0,h.push(n(v)),v=0):g++,i>>=1}0==--d&&(d=Math.pow(2,f),f++),delete s[c]}else for(i=a[c],r=0;r<f;r++)v=v<<1|1&i,g==t-1?(g=0,h.push(n(v)),v=0):g++,i>>=1;0==--d&&(d=Math.pow(2,f),f++),a[l]=p++,c=String(u)}if(""!==c){if(Object.prototype.hasOwnProperty.call(s,c)){if(c.charCodeAt(0)<256){for(r=0;r<f;r++)v<<=1,g==t-1?(g=0,h.push(n(v)),v=0):g++;for(i=c.charCodeAt(0),r=0;r<8;r++)v=v<<1|1&i,g==t-1?(g=0,h.push(n(v)),v=0):g++,i>>=1}else{for(i=1,r=0;r<f;r++)v=v<<1|i,g==t-1?(g=0,h.push(n(v)),v=0):g++,i=0;for(i=c.charCodeAt(0),r=0;r<16;r++)v=v<<1|1&i,g==t-1?(g=0,h.push(n(v)),v=0):g++,i>>=1}0==--d&&(d=Math.pow(2,f),f++),delete s[c]}else for(i=a[c],r=0;r<f;r++)v=v<<1|1&i,g==t-1?(g=0,h.push(n(v)),v=0):g++,i>>=1;0==--d&&(d=Math.pow(2,f),f++)}for(i=2,r=0;r<f;r++)v=v<<1|1&i,g==t-1?(g=0,h.push(n(v)),v=0):g++,i>>=1;for(;;){if(v<<=1,g==t-1){h.push(n(v));break}g++}return h.join("")},decompress:function(e){return null==e?"":""==e?null:o._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,n,r){var i,o,a,s,u,l,c,d=[],p=4,f=4,h=3,v="",g=[],m={val:r(0),position:n,index:1};for(i=0;i<3;i+=1)d[i]=i;for(a=0,u=Math.pow(2,2),l=1;l!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),a|=(s>0?1:0)*l,l<<=1;switch(a){case 0:for(a=0,u=Math.pow(2,8),l=1;l!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),a|=(s>0?1:0)*l,l<<=1;c=e(a);break;case 1:for(a=0,u=Math.pow(2,16),l=1;l!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),a|=(s>0?1:0)*l,l<<=1;c=e(a);break;case 2:return""}for(d[3]=c,o=c,g.push(c);;){if(m.index>t)return"";for(a=0,u=Math.pow(2,h),l=1;l!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),a|=(s>0?1:0)*l,l<<=1;switch(c=a){case 0:for(a=0,u=Math.pow(2,8),l=1;l!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),a|=(s>0?1:0)*l,l<<=1;d[f++]=e(a),c=f-1,p--;break;case 1:for(a=0,u=Math.pow(2,16),l=1;l!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),a|=(s>0?1:0)*l,l<<=1;d[f++]=e(a),c=f-1,p--;break;case 2:return g.join("")}if(0==p&&(p=Math.pow(2,h),h++),d[c])v=d[c];else{if(c!==f)return null;v=o+o.charAt(0)}g.push(v),d[f++]=o+v.charAt(0),o=v,0==--p&&(p=Math.pow(2,h),h++)}}};return o}();void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)},4463:function(e,t,n){"use strict";var r=n(2791),i=n(5296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},h={};function v(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(h,e)||!d.call(f,e)&&(p.test(e)?h[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,y);g[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,y);g[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,y);g[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),E=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var z=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=z&&e[z]||e["@@iterator"])?e:null}var N,R=Object.assign;function L(e){if(void 0===N)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);N=t&&t[1]||""}return"\n"+N+e}var B=!1;function F(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var u="\n"+i[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=a&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?L(e):""}function U(e){switch(e.tag){case 5:return L(e.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function K(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case P:return"Profiler";case _:return"StrictMode";case M:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case j:return null!==(t=e.displayName||null)?t:K(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return K(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return K(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return R({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function G(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Z(e,t){Q(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return R({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function oe(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function pe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){he.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var me=R({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,_e=null;function Pe(e){if(e=bi(e)){if("function"!==typeof ke)throw Error(o(280));var t=e.stateNode;t&&(t=xi(t),ke(e.stateNode,e.type,t))}}function Ce(e){Se?_e?_e.push(e):_e=[e]:Se=e}function Ee(){if(Se){var e=Se,t=_e;if(_e=Se=null,Pe(e),t)for(e=0;e<t.length;e++)Pe(t[e])}}function Ie(e,t){return e(t)}function Me(){}var Te=!1;function je(e,t,n){if(Te)return e(t,n);Te=!0;try{return Ie(e,t,n)}finally{Te=!1,(null!==Se||null!==_e)&&(Me(),Ee())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Oe=!1;if(c)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch(ce){Oe=!1}function De(e,t,n,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Ne=!1,Re=null,Le=!1,Be=null,Fe={onError:function(e){Ne=!0,Re=e}};function Ue(e,t,n,r,i,o,a,s,u){Ne=!1,Re=null,De.apply(Fe,arguments)}function Ke(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Ke(e)!==e)throw Error(o(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ke(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return We(i),e;if(a===r)return We(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ye(e):null}function Ye(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ye(e);if(null!==t)return t;e=e.sibling}return null}var Xe=i.unstable_scheduleCallback,qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ge=i.unstable_requestPaint,Qe=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var lt=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=dt(s):0!==(o&=a)&&(r=dt(o))}else 0!==(a=n&~i)?r=dt(a):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,kt,St,_t,Pt,Ct=!1,Et=[],It=null,Mt=null,Tt=null,jt=new Map,At=new Map,Ot=[],zt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Mt=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":jt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Nt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Rt(e){var t=yi(e.target);if(null!==t){var n=Ke(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Pt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Lt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Bt(e,t,n){Lt(e)&&n.delete(t)}function Ft(){Ct=!1,null!==It&&Lt(It)&&(It=null),null!==Mt&&Lt(Mt)&&(Mt=null),null!==Tt&&Lt(Tt)&&(Tt=null),jt.forEach(Bt),At.forEach(Bt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ft)))}function Kt(e){function t(t){return Ut(t,e)}if(0<Et.length){Ut(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Ut(It,e),null!==Mt&&Ut(Mt,e),null!==Tt&&Ut(Tt,e),jt.forEach(t),At.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Rt(n),null===n.blockedOn&&Ot.shift()}var Vt=w.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var i=bt,o=Vt.transition;Vt.transition=null;try{bt=1,Xt(e,t,n,r)}finally{bt=i,Vt.transition=o}}function Yt(e,t,n,r){var i=bt,o=Vt.transition;Vt.transition=null;try{bt=4,Xt(e,t,n,r)}finally{bt=i,Vt.transition=o}}function Xt(e,t,n,r){if(Wt){var i=$t(e,t,n,r);if(null===i)Wr(e,t,r,qt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Nt(It,e,t,n,r,i),!0;case"dragenter":return Mt=Nt(Mt,e,t,n,r,i),!0;case"mouseover":return Tt=Nt(Tt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return jt.set(o,Nt(jt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,At.set(o,Nt(At.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<zt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&xt(o),null===(o=$t(e,t,n,r))&&Wr(e,t,r,qt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var qt=null;function $t(e,t,n,r){if(qt=null,null!==(e=yi(e=xe(r))))if(null===(t=Ke(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Gt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Zt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Zt,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return R(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=on(ln),dn=R({},ln,{view:0,detail:0}),pn=on(dn),fn=R({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(an=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=an=0,un=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),hn=on(fn),vn=on(R({},fn,{dataTransfer:0})),gn=on(R({},dn,{relatedTarget:0})),mn=on(R({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=R({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(yn),wn=on(R({},ln,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Pn(){return _n}var Cn=R({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=on(Cn),In=on(R({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Mn=on(R({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pn})),Tn=on(R({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),jn=R({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=on(jn),On=[9,13,27,32],zn=c&&"CompositionEvent"in window,Dn=null;c&&"documentMode"in document&&(Dn=document.documentMode);var Nn=c&&"TextEvent"in window&&!Dn,Rn=c&&(!zn||Dn&&8<Dn&&11>=Dn),Ln=String.fromCharCode(32),Bn=!1;function Fn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Kn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ce(r),0<(t=Yr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,Xn=null;function qn(e){Lr(e,0)}function $n(e){if(X(wi(e)))return e}function Gn(e,t){if("change"===e)return t}var Qn=!1;if(c){var Zn;if(c){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Zn=Jn}else Zn=!1;Qn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Yn&&(Yn.detachEvent("onpropertychange",nr),Xn=Yn=null)}function nr(e){if("value"===e.propertyName&&$n(Xn)){var t=[];Hn(t,Xn,e,xe(e)),je(qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Xn=n,(Yn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Xn)}function or(e,t){if("click"===e)return $n(t)}function ar(e,t){if("input"===e||"change"===e)return $n(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pr(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hr(e){var t=pr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=cr(n,o);var a=cr(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,mr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Yr(mr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Sr={},_r={};function Pr(e){if(Sr[e])return Sr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return Sr[e]=n[t];return e}c&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Cr=Pr("animationend"),Er=Pr("animationiteration"),Ir=Pr("animationstart"),Mr=Pr("transitionend"),Tr=new Map,jr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Tr.set(e,t),u(t,[e])}for(var Or=0;Or<jr.length;Or++){var zr=jr[Or];Ar(zr.toLowerCase(),"on"+(zr[0].toUpperCase()+zr.slice(1)))}Ar(Cr,"onAnimationEnd"),Ar(Er,"onAnimationIteration"),Ar(Ir,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Mr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Rr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,u,l){if(Ue.apply(this,arguments),Ne){if(!Ne)throw Error(o(198));var c=Re;Ne=!1,Re=null,Le||(Le=!0,Be=c)}}(r,t,void 0,e),e.currentTarget=null}function Lr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;Rr(i,s,l),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,l=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;Rr(i,s,l),o=u}}}if(Le)throw e=Be,Le=!1,Be=null,e}function Br(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function Fr(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Kr(e){if(!e[Ur]){e[Ur]=!0,a.forEach((function(t){"selectionchange"!==t&&(Nr.has(t)||Fr(t,!1,e),Fr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Fr("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Gt(t)){case 1:var i=Ht;break;case 4:i=Yt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=yi(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue e}s=s.parentNode}}r=r.return}je((function(){var r=o,i=xe(n),a=[];e:{var s=Tr.get(e);if(void 0!==s){var u=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=En;break;case"focusin":l="focus",u=gn;break;case"focusout":l="blur",u=gn;break;case"beforeblur":case"afterblur":u=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Mn;break;case Cr:case Er:case Ir:u=mn;break;case Mr:u=Tn;break;case"scroll":u=pn;break;case"wheel":u=An;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=In}var c=0!==(4&t),d=!c&&"scroll"===e,p=c?null!==s?s+"Capture":null:s;c=[];for(var f,h=r;null!==h;){var v=(f=h).stateNode;if(5===f.tag&&null!==v&&(f=v,null!==p&&(null!=(v=Ae(h,p))&&c.push(Hr(h,v,f)))),d)break;h=h.return}0<c.length&&(s=new u(s,l,null,n,i),a.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===we||!(l=n.relatedTarget||n.fromElement)||!yi(l)&&!l[hi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?yi(l):null)&&(l!==(d=Ke(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=hn,v="onMouseLeave",p="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(c=In,v="onPointerLeave",p="onPointerEnter",h="pointer"),d=null==u?s:wi(u),f=null==l?s:wi(l),(s=new c(v,h+"leave",u,n,i)).target=d,s.relatedTarget=f,v=null,yi(i)===r&&((c=new c(p,h+"enter",l,n,i)).target=f,c.relatedTarget=d,v=c),d=v,u&&l)e:{for(p=l,h=0,f=c=u;f;f=Xr(f))h++;for(f=0,v=p;v;v=Xr(v))f++;for(;0<h-f;)c=Xr(c),h--;for(;0<f-h;)p=Xr(p),f--;for(;h--;){if(c===p||null!==p&&c===p.alternate)break e;c=Xr(c),p=Xr(p)}c=null}else c=null;null!==u&&qr(a,s,u,c,!1),null!==l&&null!==d&&qr(a,d,l,c,!0)}if("select"===(u=(s=r?wi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var g=Gn;else if(Wn(s))if(Qn)g=ar;else{g=ir;var m=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(e,r))?Hn(a,g,n,i):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ee(s,"number",s.value)),m=r?wi(r):window,e){case"focusin":(Wn(m)||"true"===m.contentEditable)&&(gr=m,mr=r,yr=null);break;case"focusout":yr=mr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(a,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":wr(a,n,i)}var y;if(zn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Kn?Fn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Rn&&"ko"!==n.locale&&(Kn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Kn&&(y=en()):(Zt="value"in(Qt=i)?Qt.value:Qt.textContent,Kn=!0)),0<(m=Yr(r,b)).length&&(b=new wn(b,e,null,n,i),a.push({event:b,listeners:m}),y?b.data=y:null!==(y=Un(n))&&(b.data=y))),(y=Nn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Bn=!0,Ln);case"textInput":return(e=t.data)===Ln&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Kn)return"compositionend"===e||!zn&&Fn(e,t)?(e=en(),Jt=Zt=Qt=null,Kn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Yr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Lr(a,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Yr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Ae(e,n))&&r.unshift(Hr(e,o,i)),null!=(o=Ae(e,t))&&r.push(Hr(e,o,i))),e=e.return}return r}function Xr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=Ae(n,o))&&a.unshift(Hr(n,u,s)):i||null!=(u=Ae(n,o))&&a.push(Hr(n,u,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var $r=/\r\n?/g,Gr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Gr,"")}function Zr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(o(425))}function Jr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Kt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Kt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),pi="__reactFiber$"+di,fi="__reactProps$"+di,hi="__reactContainer$"+di,vi="__reactEvents$"+di,gi="__reactListeners$"+di,mi="__reactHandles$"+di;function yi(e){var t=e[pi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[hi]||n[pi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[pi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[pi]||e[hi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function xi(e){return e[fi]||null}var ki=[],Si=-1;function _i(e){return{current:e}}function Pi(e){0>Si||(e.current=ki[Si],ki[Si]=null,Si--)}function Ci(e,t){Si++,ki[Si]=e.current,e.current=t}var Ei={},Ii=_i(Ei),Mi=_i(!1),Ti=Ei;function ji(e,t){var n=e.type.contextTypes;if(!n)return Ei;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ai(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Pi(Mi),Pi(Ii)}function zi(e,t,n){if(Ii.current!==Ei)throw Error(o(168));Ci(Ii,t),Ci(Mi,n)}function Di(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,V(e)||"Unknown",i));return R({},n,r)}function Ni(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ei,Ti=Ii.current,Ci(Ii,e),Ci(Mi,Mi.current),!0}function Ri(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Di(e,t,Ti),r.__reactInternalMemoizedMergedChildContext=e,Pi(Mi),Pi(Ii),Ci(Ii,e)):Pi(Mi),Ci(Mi,n)}var Li=null,Bi=!1,Fi=!1;function Ui(e){null===Li?Li=[e]:Li.push(e)}function Ki(){if(!Fi&&null!==Li){Fi=!0;var e=0,t=bt;try{var n=Li;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Li=null,Bi=!1}catch(i){throw null!==Li&&(Li=Li.slice(e+1)),Xe(Je,Ki),i}finally{bt=t,Fi=!1}}return null}var Vi=[],Wi=0,Hi=null,Yi=0,Xi=[],qi=0,$i=null,Gi=1,Qi="";function Zi(e,t){Vi[Wi++]=Yi,Vi[Wi++]=Hi,Hi=e,Yi=t}function Ji(e,t,n){Xi[qi++]=Gi,Xi[qi++]=Qi,Xi[qi++]=$i,$i=e;var r=Gi;e=Qi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Gi=1<<32-at(t)+i|n<<i|r,Qi=o+e}else Gi=1<<o|n<<i|r,Qi=e}function eo(e){null!==e.return&&(Zi(e,1),Ji(e,1,0))}function to(e){for(;e===Hi;)Hi=Vi[--Wi],Vi[Wi]=null,Yi=Vi[--Wi],Vi[Wi]=null;for(;e===$i;)$i=Xi[--qi],Xi[qi]=null,Qi=Xi[--qi],Xi[qi]=null,Gi=Xi[--qi],Xi[qi]=null}var no=null,ro=null,io=!1,oo=null;function ao(e,t){var n=Al(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Gi,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Al(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function uo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function lo(e){if(io){var t=ro;if(t){var n=t;if(!so(e,t)){if(uo(e))throw Error(o(418));t=li(n.nextSibling);var r=no;t&&so(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(uo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function co(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function po(e){if(e!==no)return!1;if(!io)return co(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(uo(e))throw fo(),Error(o(418));for(;t;)ao(e,t),t=li(t.nextSibling)}if(co(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?li(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=li(e.nextSibling)}function ho(){ro=no=null,io=!1}function vo(e){null===oo?oo=[e]:oo.push(e)}var go=w.ReactCurrentBatchConfig;function mo(e,t){if(e&&e.defaultProps){for(var n in t=R({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var yo=_i(null),bo=null,wo=null,xo=null;function ko(){xo=wo=bo=null}function So(e){var t=yo.current;Pi(yo),e._currentValue=t}function _o(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Po(e,t){bo=e,xo=wo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ws=!0),e.firstContext=null)}function Co(e){var t=e._currentValue;if(xo!==e)if(e={context:e,memoizedValue:t,next:null},null===wo){if(null===bo)throw Error(o(308));wo=e,bo.dependencies={lanes:0,firstContext:e}}else wo=wo.next=e;return t}var Eo=null;function Io(e){null===Eo?Eo=[e]:Eo.push(e)}function Mo(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Io(t)):(n.next=i.next,i.next=n),t.interleaved=n,To(e,r)}function To(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var jo=!1;function Ao(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Do(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Mu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,To(e,n)}return null===(i=r.interleaved)?(t.next=t,Io(r)):(t.next=i.next,i.next=t),r.interleaved=t,To(e,n)}function No(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ro(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Lo(e,t,n,r){var i=e.updateQueue;jo=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,l=u.next;u.next=null,null===a?o=l:a.next=l,a=u;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(null!==o){var d=i.baseState;for(a=0,c=l=u=null,s=o;;){var p=s.lane,f=s.eventTime;if((r&p)===p){null!==c&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var h=e,v=s;switch(p=t,f=n,v.tag){case 1:if("function"===typeof(h=v.payload)){d=h.call(f,d,p);break e}d=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(p="function"===typeof(h=v.payload)?h.call(f,d,p):h)||void 0===p)break e;d=R({},d,p);break e;case 2:jo=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(p=i.effects)?i.effects=[s]:p.push(s))}else f={eventTime:f,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(l=c=f,u=d):c=c.next=f,a|=p;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(p=s).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}if(null===c&&(u=d),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Ru|=a,e.lanes=a,e.memoizedState=d}}function Bo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Fo=(new r.Component).refs;function Uo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:R({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ko={isMounted:function(e){return!!(e=e._reactInternals)&&Ke(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),o=zo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Do(e,o,i))&&(rl(t,e,i,r),No(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),o=zo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Do(e,o,i))&&(rl(t,e,i,r),No(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tl(),r=nl(e),i=zo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Do(e,i,r))&&(rl(t,e,r,n),No(t,e,r))}};function Vo(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,o))}function Wo(e,t,n){var r=!1,i=Ei,o=t.contextType;return"object"===typeof o&&null!==o?o=Co(o):(i=Ai(t)?Ti:Ii.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?ji(e,i):Ei),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ko,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ho(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ko.enqueueReplaceState(t,t.state,null)}function Yo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Fo,Ao(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Co(o):(o=Ai(t)?Ti:Ii.current,i.context=ji(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Uo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ko.enqueueReplaceState(i,i.state,null),Lo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Xo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===Fo&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function qo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $o(e){return(0,e._init)(e._payload)}function Go(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=zl(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Ll(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var o=n.type;return o===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===A&&$o(o)===t.type)?((r=i(t,n.props)).ref=Xo(e,t,n),r.return=e,r):((r=Dl(n.type,n.key,n.props,null,e.mode,r)).ref=Xo(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Nl(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function p(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ll(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Dl(t.type,t.key,t.props,null,e.mode,n)).ref=Xo(e,null,t),n.return=e,n;case k:return(t=Bl(t,e.mode,n)).return=e,t;case A:return p(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Nl(t,e.mode,n,null)).return=e,t;qo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?l(e,t,n,r):null;case k:return n.key===i?c(e,t,n,r):null;case A:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:d(e,t,n,r,null);qo(e,n)}return null}function h(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return h(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return d(t,e=e.get(n)||null,r,i,null);qo(t,r)}return null}function v(i,o,s,u){for(var l=null,c=null,d=o,v=o=0,g=null;null!==d&&v<s.length;v++){d.index>v?(g=d,d=null):g=d.sibling;var m=f(i,d,s[v],u);if(null===m){null===d&&(d=g);break}e&&d&&null===m.alternate&&t(i,d),o=a(m,o,v),null===c?l=m:c.sibling=m,c=m,d=g}if(v===s.length)return n(i,d),io&&Zi(i,v),l;if(null===d){for(;v<s.length;v++)null!==(d=p(i,s[v],u))&&(o=a(d,o,v),null===c?l=d:c.sibling=d,c=d);return io&&Zi(i,v),l}for(d=r(i,d);v<s.length;v++)null!==(g=h(d,i,v,s[v],u))&&(e&&null!==g.alternate&&d.delete(null===g.key?v:g.key),o=a(g,o,v),null===c?l=g:c.sibling=g,c=g);return e&&d.forEach((function(e){return t(i,e)})),io&&Zi(i,v),l}function g(i,s,u,l){var c=D(u);if("function"!==typeof c)throw Error(o(150));if(null==(u=c.call(u)))throw Error(o(151));for(var d=c=null,v=s,g=s=0,m=null,y=u.next();null!==v&&!y.done;g++,y=u.next()){v.index>g?(m=v,v=null):m=v.sibling;var b=f(i,v,y.value,l);if(null===b){null===v&&(v=m);break}e&&v&&null===b.alternate&&t(i,v),s=a(b,s,g),null===d?c=b:d.sibling=b,d=b,v=m}if(y.done)return n(i,v),io&&Zi(i,g),c;if(null===v){for(;!y.done;g++,y=u.next())null!==(y=p(i,y.value,l))&&(s=a(y,s,g),null===d?c=y:d.sibling=y,d=y);return io&&Zi(i,g),c}for(v=r(i,v);!y.done;g++,y=u.next())null!==(y=h(v,i,g,y.value,l))&&(e&&null!==y.alternate&&v.delete(null===y.key?g:y.key),s=a(y,s,g),null===d?c=y:d.sibling=y,d=y);return e&&v.forEach((function(e){return t(i,e)})),io&&Zi(i,g),c}return function e(r,o,a,u){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var l=a.key,c=o;null!==c;){if(c.key===l){if((l=a.type)===S){if(7===c.tag){n(r,c.sibling),(o=i(c,a.props.children)).return=r,r=o;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===A&&$o(l)===c.type){n(r,c.sibling),(o=i(c,a.props)).ref=Xo(r,c,a),o.return=r,r=o;break e}n(r,c);break}t(r,c),c=c.sibling}a.type===S?((o=Nl(a.props.children,r.mode,u,a.key)).return=r,r=o):((u=Dl(a.type,a.key,a.props,null,r.mode,u)).ref=Xo(r,o,a),u.return=r,r=u)}return s(r);case k:e:{for(c=a.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Bl(a,r.mode,u)).return=r,r=o}return s(r);case A:return e(r,o,(c=a._init)(a._payload),u)}if(te(a))return v(r,o,a,u);if(D(a))return g(r,o,a,u);qo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=Ll(a,r.mode,u)).return=r,r=o),s(r)):n(r,o)}}var Qo=Go(!0),Zo=Go(!1),Jo={},ea=_i(Jo),ta=_i(Jo),na=_i(Jo);function ra(e){if(e===Jo)throw Error(o(174));return e}function ia(e,t){switch(Ci(na,t),Ci(ta,e),Ci(ea,Jo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Pi(ea),Ci(ea,t)}function oa(){Pi(ea),Pi(ta),Pi(na)}function aa(e){ra(na.current);var t=ra(ea.current),n=ue(t,e.type);t!==n&&(Ci(ta,e),Ci(ea,n))}function sa(e){ta.current===e&&(Pi(ea),Pi(ta))}var ua=_i(0);function la(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ca=[];function da(){for(var e=0;e<ca.length;e++)ca[e]._workInProgressVersionPrimary=null;ca.length=0}var pa=w.ReactCurrentDispatcher,fa=w.ReactCurrentBatchConfig,ha=0,va=null,ga=null,ma=null,ya=!1,ba=!1,wa=0,xa=0;function ka(){throw Error(o(321))}function Sa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function _a(e,t,n,r,i,a){if(ha=a,va=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,pa.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ba){a=0;do{if(ba=!1,wa=0,25<=a)throw Error(o(301));a+=1,ma=ga=null,t.updateQueue=null,pa.current=ls,e=n(r,i)}while(ba)}if(pa.current=as,t=null!==ga&&null!==ga.next,ha=0,ma=ga=va=null,ya=!1,t)throw Error(o(300));return e}function Pa(){var e=0!==wa;return wa=0,e}function Ca(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ma?va.memoizedState=ma=e:ma=ma.next=e,ma}function Ea(){if(null===ga){var e=va.alternate;e=null!==e?e.memoizedState:null}else e=ga.next;var t=null===ma?va.memoizedState:ma.next;if(null!==t)ma=t,ga=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ga=e).memoizedState,baseState:ga.baseState,baseQueue:ga.baseQueue,queue:ga.queue,next:null},null===ma?va.memoizedState=ma=e:ma=ma.next=e}return ma}function Ia(e,t){return"function"===typeof t?t(e):t}function Ma(e){var t=Ea(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ga,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var u=s=null,l=null,c=a;do{var d=c.lane;if((ha&d)===d)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var p={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=p,s=r):l=l.next=p,va.lanes|=d,Ru|=d}c=c.next}while(null!==c&&c!==a);null===l?s=r:l.next=u,sr(r,t.memoizedState)||(ws=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,va.lanes|=a,Ru|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ta(e){var t=Ea(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sr(a,t.memoizedState)||(ws=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ja(){}function Aa(e,t){var n=va,r=Ea(),i=t(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,ws=!0),r=r.queue,Wa(Da.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ma&&1&ma.memoizedState.tag){if(n.flags|=2048,Ba(9,za.bind(null,n,r,i,t),void 0,null),null===Tu)throw Error(o(349));0!==(30&ha)||Oa(n,t,i)}return i}function Oa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=va.updateQueue)?(t={lastEffect:null,stores:null},va.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function za(e,t,n,r){t.value=n,t.getSnapshot=r,Na(t)&&Ra(e)}function Da(e,t,n){return n((function(){Na(t)&&Ra(e)}))}function Na(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Ra(e){var t=To(e,1);null!==t&&rl(t,e,1,-1)}function La(e){var t=Ca();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,va,e),[t.memoizedState,e]}function Ba(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=va.updateQueue)?(t={lastEffect:null,stores:null},va.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Fa(){return Ea().memoizedState}function Ua(e,t,n,r){var i=Ca();va.flags|=e,i.memoizedState=Ba(1|t,n,void 0,void 0===r?null:r)}function Ka(e,t,n,r){var i=Ea();r=void 0===r?null:r;var o=void 0;if(null!==ga){var a=ga.memoizedState;if(o=a.destroy,null!==r&&Sa(r,a.deps))return void(i.memoizedState=Ba(t,n,o,r))}va.flags|=e,i.memoizedState=Ba(1|t,n,o,r)}function Va(e,t){return Ua(8390656,8,e,t)}function Wa(e,t){return Ka(2048,8,e,t)}function Ha(e,t){return Ka(4,2,e,t)}function Ya(e,t){return Ka(4,4,e,t)}function Xa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function qa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ka(4,4,Xa.bind(null,t,e),n)}function $a(){}function Ga(e,t){var n=Ea();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Sa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qa(e,t){var n=Ea();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Sa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Za(e,t,n){return 0===(21&ha)?(e.baseState&&(e.baseState=!1,ws=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),va.lanes|=n,Ru|=n,e.baseState=!0),t)}function Ja(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=fa.transition;fa.transition={};try{e(!1),t()}finally{bt=n,fa.transition=r}}function es(){return Ea().memoizedState}function ts(e,t,n){var r=nl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Mo(e,t,n,r))){rl(n,e,r,tl()),os(n,t,r)}}function ns(e,t,n){var r=nl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var u=t.interleaved;return null===u?(i.next=i,Io(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=Mo(e,t,i,r))&&(rl(n,e,r,i=tl()),os(n,t,r))}}function rs(e){var t=e.alternate;return e===va||null!==t&&t===va}function is(e,t){ba=ya=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function os(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var as={readContext:Co,useCallback:ka,useContext:ka,useEffect:ka,useImperativeHandle:ka,useInsertionEffect:ka,useLayoutEffect:ka,useMemo:ka,useReducer:ka,useRef:ka,useState:ka,useDebugValue:ka,useDeferredValue:ka,useTransition:ka,useMutableSource:ka,useSyncExternalStore:ka,useId:ka,unstable_isNewReconciler:!1},ss={readContext:Co,useCallback:function(e,t){return Ca().memoizedState=[e,void 0===t?null:t],e},useContext:Co,useEffect:Va,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ua(4194308,4,Xa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ua(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ua(4,2,e,t)},useMemo:function(e,t){var n=Ca();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ca();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,va,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ca().memoizedState=e},useState:La,useDebugValue:$a,useDeferredValue:function(e){return Ca().memoizedState=e},useTransition:function(){var e=La(!1),t=e[0];return e=Ja.bind(null,e[1]),Ca().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=va,i=Ca();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Tu)throw Error(o(349));0!==(30&ha)||Oa(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Va(Da.bind(null,r,a,e),[e]),r.flags|=2048,Ba(9,za.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Ca(),t=Tu.identifierPrefix;if(io){var n=Qi;t=":"+t+"R"+(n=(Gi&~(1<<32-at(Gi)-1)).toString(32)+n),0<(n=wa++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=xa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Co,useCallback:Ga,useContext:Co,useEffect:Wa,useImperativeHandle:qa,useInsertionEffect:Ha,useLayoutEffect:Ya,useMemo:Qa,useReducer:Ma,useRef:Fa,useState:function(){return Ma(Ia)},useDebugValue:$a,useDeferredValue:function(e){return Za(Ea(),ga.memoizedState,e)},useTransition:function(){return[Ma(Ia)[0],Ea().memoizedState]},useMutableSource:ja,useSyncExternalStore:Aa,useId:es,unstable_isNewReconciler:!1},ls={readContext:Co,useCallback:Ga,useContext:Co,useEffect:Wa,useImperativeHandle:qa,useInsertionEffect:Ha,useLayoutEffect:Ya,useMemo:Qa,useReducer:Ta,useRef:Fa,useState:function(){return Ta(Ia)},useDebugValue:$a,useDeferredValue:function(e){var t=Ea();return null===ga?t.memoizedState=e:Za(t,ga.memoizedState,e)},useTransition:function(){return[Ta(Ia)[0],Ea().memoizedState]},useMutableSource:ja,useSyncExternalStore:Aa,useId:es,unstable_isNewReconciler:!1};function cs(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ps(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fs="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=zo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hu||(Hu=!0,Yu=r),ps(0,t)},n}function vs(e,t,n){(n=zo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ps(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ps(0,t),"function"!==typeof r&&(null===Xu?Xu=new Set([this]):Xu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cl.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=zo(-1,1)).tag=2,Do(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var bs=w.ReactCurrentOwner,ws=!1;function xs(e,t,n,r){t.child=null===e?Zo(t,null,n,r):Qo(t,e.child,n,r)}function ks(e,t,n,r,i){n=n.render;var o=t.ref;return Po(t,i),r=_a(e,t,n,r,o,i),n=Pa(),null===e||ws?(io&&n&&eo(t),t.flags|=1,xs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Ss(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Ol(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dl(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,_s(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(a,r)&&e.ref===t.ref)return Hs(e,t,i)}return t.flags|=1,(e=zl(o,r)).ref=t.ref,e.return=t,t.child=e}function _s(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(ur(o,r)&&e.ref===t.ref){if(ws=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Hs(e,t,i);0!==(131072&e.flags)&&(ws=!0)}}return Es(e,t,n,r,i)}function Ps(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(zu,Ou),Ou|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(zu,Ou),Ou|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ci(zu,Ou),Ou|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ci(zu,Ou),Ou|=r;return xs(e,t,i,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Es(e,t,n,r,i){var o=Ai(n)?Ti:Ii.current;return o=ji(t,o),Po(t,i),n=_a(e,t,n,r,o,i),r=Pa(),null===e||ws?(io&&r&&eo(t),t.flags|=1,xs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Is(e,t,n,r,i){if(Ai(n)){var o=!0;Ni(t)}else o=!1;if(Po(t,i),null===t.stateNode)Ws(e,t),Wo(t,n,r),Yo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,l=n.contextType;"object"===typeof l&&null!==l?l=Co(l):l=ji(t,l=Ai(n)?Ti:Ii.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==l)&&Ho(t,a,r,l),jo=!1;var p=t.memoizedState;a.state=p,Lo(t,r,a,i),u=t.memoizedState,s!==r||p!==u||Mi.current||jo?("function"===typeof c&&(Uo(t,n,c,r),u=t.memoizedState),(s=jo||Vo(t,n,s,r,p,u,l))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Oo(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:mo(t.type,s),a.props=l,d=t.pendingProps,p=a.context,"object"===typeof(u=n.contextType)&&null!==u?u=Co(u):u=ji(t,u=Ai(n)?Ti:Ii.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||p!==u)&&Ho(t,a,r,u),jo=!1,p=t.memoizedState,a.state=p,Lo(t,r,a,i);var h=t.memoizedState;s!==d||p!==h||Mi.current||jo?("function"===typeof f&&(Uo(t,n,f,r),h=t.memoizedState),(l=jo||Vo(t,n,l,r,p,h,u)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,h,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,h,u)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=u,r=l):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return Ms(e,t,n,r,o,i)}function Ms(e,t,n,r,i,o){Cs(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Ri(t,n,!1),Hs(e,t,o);r=t.stateNode,bs.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Qo(t,e.child,null,o),t.child=Qo(t,null,s,o)):xs(e,t,s,o),t.memoizedState=r.state,i&&Ri(t,n,!0),t.child}function Ts(e){var t=e.stateNode;t.pendingContext?zi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&zi(0,t.context,!1),ia(e,t.containerInfo)}function js(e,t,n,r,i){return ho(),vo(i),t.flags|=256,xs(e,t,n,r),t.child}var As,Os,zs,Ds,Ns={dehydrated:null,treeContext:null,retryLane:0};function Rs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ls(e,t,n){var r,i=t.pendingProps,a=ua.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ci(ua,1&a),null===e)return lo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Rl(u,i,0,null),e=Nl(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Rs(n),t.memoizedState=Ns,e):Bs(t,u));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,Fs(e,t,s,r=ds(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Rl({mode:"visible",children:r.children},i,0,null),(a=Nl(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Qo(t,e.child,null,s),t.child.memoizedState=Rs(s),t.memoizedState=Ns,a);if(0===(1&t.mode))return Fs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Fs(e,t,s,r=ds(a=Error(o(419)),r,void 0))}if(u=0!==(s&e.childLanes),ws||u){if(null!==(r=Tu)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,To(e,i),rl(r,e,i,-1))}return gl(),Fs(e,t,s,r=ds(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Il.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ro=li(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Xi[qi++]=Gi,Xi[qi++]=Qi,Xi[qi++]=$i,Gi=e.id,Qi=e.overflow,$i=t),t=Bs(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,a,n);if(s){s=i.fallback,u=t.mode,r=(a=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=zl(a,l)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=zl(r,s):(s=Nl(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Rs(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ns,i}return e=(s=e.child).sibling,i=zl(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Bs(e,t){return(t=Rl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fs(e,t,n,r){return null!==r&&vo(r),Qo(t,e.child,null,n),(e=Bs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Us(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_o(e.return,t,n)}function Ks(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Vs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(xs(e,t,r.children,n),0!==(2&(r=ua.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Us(e,n,t);else if(19===e.tag)Us(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(ua,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===la(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ks(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===la(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ks(t,!0,n,null,o);break;case"together":Ks(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ru|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=zl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=zl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ys(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function qs(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xs(t),null;case 1:case 17:return Ai(t.type)&&Oi(),Xs(t),null;case 3:return r=t.stateNode,oa(),Pi(Mi),Pi(Ii),da(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(po(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(sl(oo),oo=null))),Os(e,t),Xs(t),null;case 5:sa(t);var i=ra(na.current);if(n=t.type,null!==e&&null!=t.stateNode)zs(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Xs(t),null}if(e=ra(ea.current),po(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[pi]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)Br(Dr[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":G(r,a),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Br("invalid",r);break;case"textarea":ie(r,a),Br("invalid",r)}for(var u in ye(n,a),i=null,a)if(a.hasOwnProperty(u)){var l=a[u];"children"===u?"string"===typeof l?r.textContent!==l&&(!0!==a.suppressHydrationWarning&&Zr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==a.suppressHydrationWarning&&Zr(r.textContent,l,e),i=["children",""+l]):s.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&Br("scroll",r)}switch(n){case"input":Y(r),J(r,a,!0);break;case"textarea":Y(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[pi]=t,e[fi]=r,As(e,t,!1,!1),t.stateNode=e;e:{switch(u=be(n,r),n){case"dialog":Br("cancel",e),Br("close",e),i=r;break;case"iframe":case"object":case"embed":Br("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)Br(Dr[i],e);i=r;break;case"source":Br("error",e),i=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),i=r;break;case"details":Br("toggle",e),i=r;break;case"input":G(e,r),i=$(e,r),Br("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=R({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Br("invalid",e)}for(a in ye(n,i),l=i)if(l.hasOwnProperty(a)){var c=l[a];"style"===a?ge(e,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===a?"string"===typeof c?("textarea"!==n||""!==c)&&pe(e,c):"number"===typeof c&&pe(e,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=c&&"onScroll"===a&&Br("scroll",e):null!=c&&b(e,a,c,u))}switch(n){case"input":Y(e),J(e,r,!1);break;case"textarea":Y(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Xs(t),null;case 6:if(e&&null!=t.stateNode)Ds(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=ra(na.current),ra(ea.current),po(t)){if(r=t.stateNode,n=t.memoizedProps,r[pi]=t,(a=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[pi]=t,t.stateNode=r}return Xs(t),null;case 13:if(Pi(ua),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),ho(),t.flags|=98560,a=!1;else if(a=po(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[pi]=t}else ho(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xs(t),a=!1}else null!==oo&&(sl(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ua.current)?0===Du&&(Du=3):gl())),null!==t.updateQueue&&(t.flags|=4),Xs(t),null);case 4:return oa(),Os(e,t),null===e&&Kr(t.stateNode.containerInfo),Xs(t),null;case 10:return So(t.type._context),Xs(t),null;case 19:if(Pi(ua),null===(a=t.memoizedState))return Xs(t),null;if(r=0!==(128&t.flags),null===(u=a.rendering))if(r)Ys(a,!1);else{if(0!==Du||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=la(e))){for(t.flags|=128,Ys(a,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(u=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,e=u.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(ua,1&ua.current|2),t.child}e=e.sibling}null!==a.tail&&Qe()>Vu&&(t.flags|=128,r=!0,Ys(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=la(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ys(a,!0),null===a.tail&&"hidden"===a.tailMode&&!u.alternate&&!io)return Xs(t),null}else 2*Qe()-a.renderingStartTime>Vu&&1073741824!==n&&(t.flags|=128,r=!0,Ys(a,!1),t.lanes=4194304);a.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=a.last)?n.sibling=u:t.child=u,a.last=u)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Qe(),t.sibling=null,n=ua.current,Ci(ua,r?1&n|2:1&n),t):(Xs(t),null);case 22:case 23:return pl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ou)&&(Xs(t),6&t.subtreeFlags&&(t.flags|=8192)):Xs(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function $s(e,t){switch(to(t),t.tag){case 1:return Ai(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return oa(),Pi(Mi),Pi(Ii),da(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return sa(t),null;case 13:if(Pi(ua),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));ho()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Pi(ua),null;case 4:return oa(),null;case 10:return So(t.type._context),null;case 22:case 23:return pl(),null;default:return null}}As=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(){},zs=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ra(ea.current);var o,a=null;switch(n){case"input":i=$(e,i),r=$(e,r),a=[];break;case"select":i=R({},i,{value:void 0}),r=R({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(c in ye(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var u=i[c];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(o in u)!u.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&u[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(a||(a=[]),a.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(a=a||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(a=a||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Br("scroll",e),a||u===l||(a=[])):(a=a||[]).push(c,l))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},Ds=function(e,t,n,r){n!==r&&(t.flags|=4)};var Gs=!1,Qs=!1,Zs="function"===typeof WeakSet?WeakSet:Set,Js=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Pl(e,t,r)}else n.current=null}function tu(e,t,n){try{n()}catch(r){Pl(e,t,r)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&tu(t,n,o)}i=i.next}while(i!==r)}}function iu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ou(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function au(e){var t=e.alternate;null!==t&&(e.alternate=null,au(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[pi],delete t[fi],delete t[vi],delete t[gi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function su(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||su(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}var du=null,pu=!1;function fu(e,t,n){for(n=n.child;null!==n;)hu(e,t,n),n=n.sibling}function hu(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Qs||eu(n,t);case 6:var r=du,i=pu;du=null,fu(e,t,n),pu=i,null!==(du=r)&&(pu?(e=du,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):du.removeChild(n.stateNode));break;case 18:null!==du&&(pu?(e=du,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),Kt(e)):ui(du,n.stateNode));break;case 4:r=du,i=pu,du=n.stateNode.containerInfo,pu=!0,fu(e,t,n),du=r,pu=i;break;case 0:case 11:case 14:case 15:if(!Qs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&tu(n,t,a),i=i.next}while(i!==r)}fu(e,t,n);break;case 1:if(!Qs&&(eu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Pl(n,t,s)}fu(e,t,n);break;case 21:fu(e,t,n);break;case 22:1&n.mode?(Qs=(r=Qs)||null!==n.memoizedState,fu(e,t,n),Qs=r):fu(e,t,n);break;default:fu(e,t,n)}}function vu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zs),t.forEach((function(t){var r=Ml.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:du=u.stateNode,pu=!1;break e;case 3:case 4:du=u.stateNode.containerInfo,pu=!0;break e}u=u.return}if(null===du)throw Error(o(160));hu(a,s,i),du=null,pu=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){Pl(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mu(t,e),t=t.sibling}function mu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gu(t,e),yu(e),4&r){try{ru(3,e,e.return),iu(3,e)}catch(g){Pl(e,e.return,g)}try{ru(5,e,e.return)}catch(g){Pl(e,e.return,g)}}break;case 1:gu(t,e),yu(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(gu(t,e),yu(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var i=e.stateNode;try{pe(i,"")}catch(g){Pl(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===a.type&&null!=a.name&&Q(i,a),be(u,s);var c=be(u,a);for(s=0;s<l.length;s+=2){var d=l[s],p=l[s+1];"style"===d?ge(i,p):"dangerouslySetInnerHTML"===d?de(i,p):"children"===d?pe(i,p):b(i,d,p,c)}switch(u){case"input":Z(i,a);break;case"textarea":oe(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var h=a.value;null!=h?ne(i,!!a.multiple,h,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(g){Pl(e,e.return,g)}}break;case 6:if(gu(t,e),yu(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Pl(e,e.return,g)}}break;case 3:if(gu(t,e),yu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Kt(t.containerInfo)}catch(g){Pl(e,e.return,g)}break;case 4:default:gu(t,e),yu(e);break;case 13:gu(t,e),yu(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Ku=Qe())),4&r&&vu(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Qs=(c=Qs)||d,gu(t,e),Qs=c):gu(t,e),yu(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(Js=e,d=e.child;null!==d;){for(p=Js=d;null!==Js;){switch(h=(f=Js).child,f.tag){case 0:case 11:case 14:case 15:ru(4,f,f.return);break;case 1:eu(f,f.return);var v=f.stateNode;if("function"===typeof v.componentWillUnmount){r=f,n=f.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(g){Pl(r,n,g)}}break;case 5:eu(f,f.return);break;case 22:if(null!==f.memoizedState){ku(p);continue}}null!==h?(h.return=f,Js=h):ku(p)}d=d.sibling}e:for(d=null,p=e;;){if(5===p.tag){if(null===d){d=p;try{i=p.stateNode,c?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(u=p.stateNode,s=void 0!==(l=p.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=ve("display",s))}catch(g){Pl(e,e.return,g)}}}else if(6===p.tag){if(null===d)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(g){Pl(e,e.return,g)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:gu(t,e),yu(e),4&r&&vu(e);case 21:}}function yu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(su(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(pe(i,""),r.flags&=-33),cu(e,uu(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;lu(e,uu(e),a);break;default:throw Error(o(161))}}catch(s){Pl(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bu(e,t,n){Js=e,wu(e,t,n)}function wu(e,t,n){for(var r=0!==(1&e.mode);null!==Js;){var i=Js,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Gs;if(!a){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Qs;s=Gs;var l=Qs;if(Gs=a,(Qs=u)&&!l)for(Js=i;null!==Js;)u=(a=Js).child,22===a.tag&&null!==a.memoizedState?Su(i):null!==u?(u.return=a,Js=u):Su(i);for(;null!==o;)Js=o,wu(o,t,n),o=o.sibling;Js=i,Gs=s,Qs=l}xu(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Js=o):xu(e)}}function xu(e){for(;null!==Js;){var t=Js;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qs||iu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:mo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Bo(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bo(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var p=d.dehydrated;null!==p&&Kt(p)}}}break;default:throw Error(o(163))}Qs||512&t.flags&&ou(t)}catch(f){Pl(t,t.return,f)}}if(t===e){Js=null;break}if(null!==(n=t.sibling)){n.return=t.return,Js=n;break}Js=t.return}}function ku(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Js=n;break}Js=t.return}}function Su(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{iu(4,t)}catch(u){Pl(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Pl(t,i,u)}}var o=t.return;try{ou(t)}catch(u){Pl(t,o,u)}break;case 5:var a=t.return;try{ou(t)}catch(u){Pl(t,a,u)}}}catch(u){Pl(t,t.return,u)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var _u,Pu=Math.ceil,Cu=w.ReactCurrentDispatcher,Eu=w.ReactCurrentOwner,Iu=w.ReactCurrentBatchConfig,Mu=0,Tu=null,ju=null,Au=0,Ou=0,zu=_i(0),Du=0,Nu=null,Ru=0,Lu=0,Bu=0,Fu=null,Uu=null,Ku=0,Vu=1/0,Wu=null,Hu=!1,Yu=null,Xu=null,qu=!1,$u=null,Gu=0,Qu=0,Zu=null,Ju=-1,el=0;function tl(){return 0!==(6&Mu)?Qe():-1!==Ju?Ju:Ju=Qe()}function nl(e){return 0===(1&e.mode)?1:0!==(2&Mu)&&0!==Au?Au&-Au:null!==go.transition?(0===el&&(el=vt()),el):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Gt(e.type)}function rl(e,t,n,r){if(50<Qu)throw Qu=0,Zu=null,Error(o(185));mt(e,n,r),0!==(2&Mu)&&e===Tu||(e===Tu&&(0===(2&Mu)&&(Lu|=n),4===Du&&ul(e,Au)),il(e,r),1===n&&0===Mu&&0===(1&t.mode)&&(Vu=Qe()+500,Bi&&Ki()))}function il(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,u=i[a];-1===u?0!==(s&n)&&0===(s&r)||(i[a]=ft(s,t)):u<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=pt(e,e===Tu?Au:0);if(0===r)null!==n&&qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&qe(n),1===t)0===e.tag?function(e){Bi=!0,Ui(e)}(ll.bind(null,e)):Ui(ll.bind(null,e)),ai((function(){0===(6&Mu)&&Ki()})),n=null;else{switch(wt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Tl(n,ol.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ol(e,t){if(Ju=-1,el=0,0!==(6&Mu))throw Error(o(327));var n=e.callbackNode;if(Sl()&&e.callbackNode!==n)return null;var r=pt(e,e===Tu?Au:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=ml(e,r);else{t=r;var i=Mu;Mu|=2;var a=vl();for(Tu===e&&Au===t||(Wu=null,Vu=Qe()+500,fl(e,t));;)try{bl();break}catch(u){hl(e,u)}ko(),Cu.current=a,Mu=i,null!==ju?t=0:(Tu=null,Au=0,t=Du)}if(0!==t){if(2===t&&(0!==(i=ht(e))&&(r=i,t=al(e,i))),1===t)throw n=Nu,fl(e,0),ul(e,r),il(e,Qe()),n;if(6===t)ul(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=ml(e,r))&&(0!==(a=ht(e))&&(r=a,t=al(e,a))),1===t))throw n=Nu,fl(e,0),ul(e,r),il(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:kl(e,Uu,Wu);break;case 3:if(ul(e,r),(130023424&r)===r&&10<(t=Ku+500-Qe())){if(0!==pt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(kl.bind(null,e,Uu,Wu),t);break}kl(e,Uu,Wu);break;case 4:if(ul(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Pu(r/1960))-r)){e.timeoutHandle=ri(kl.bind(null,e,Uu,Wu),r);break}kl(e,Uu,Wu);break;default:throw Error(o(329))}}}return il(e,Qe()),e.callbackNode===n?ol.bind(null,e):null}function al(e,t){var n=Fu;return e.current.memoizedState.isDehydrated&&(fl(e,t).flags|=256),2!==(e=ml(e,t))&&(t=Uu,Uu=n,null!==t&&sl(t)),e}function sl(e){null===Uu?Uu=e:Uu.push.apply(Uu,e)}function ul(e,t){for(t&=~Bu,t&=~Lu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function ll(e){if(0!==(6&Mu))throw Error(o(327));Sl();var t=pt(e,0);if(0===(1&t))return il(e,Qe()),null;var n=ml(e,t);if(0!==e.tag&&2===n){var r=ht(e);0!==r&&(t=r,n=al(e,r))}if(1===n)throw n=Nu,fl(e,0),ul(e,t),il(e,Qe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kl(e,Uu,Wu),il(e,Qe()),null}function cl(e,t){var n=Mu;Mu|=1;try{return e(t)}finally{0===(Mu=n)&&(Vu=Qe()+500,Bi&&Ki())}}function dl(e){null!==$u&&0===$u.tag&&0===(6&Mu)&&Sl();var t=Mu;Mu|=1;var n=Iu.transition,r=bt;try{if(Iu.transition=null,bt=1,e)return e()}finally{bt=r,Iu.transition=n,0===(6&(Mu=t))&&Ki()}}function pl(){Ou=zu.current,Pi(zu)}function fl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==ju)for(n=ju.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:oa(),Pi(Mi),Pi(Ii),da();break;case 5:sa(r);break;case 4:oa();break;case 13:case 19:Pi(ua);break;case 10:So(r.type._context);break;case 22:case 23:pl()}n=n.return}if(Tu=e,ju=e=zl(e.current,null),Au=Ou=t,Du=0,Nu=null,Bu=Lu=Ru=0,Uu=Fu=null,null!==Eo){for(t=0;t<Eo.length;t++)if(null!==(r=(n=Eo[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}Eo=null}return e}function hl(e,t){for(;;){var n=ju;try{if(ko(),pa.current=as,ya){for(var r=va.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ya=!1}if(ha=0,ma=ga=va=null,ba=!1,wa=0,Eu.current=null,null===n||null===n.return){Du=1,Nu=t,ju=null;break}e:{var a=e,s=n.return,u=n,l=t;if(t=Au,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,d=u,p=d.tag;if(0===(1&d.mode)&&(0===p||11===p||15===p)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=ms(s);if(null!==h){h.flags&=-257,ys(h,s,u,0,t),1&h.mode&&gs(a,c,t),l=c;var v=(t=h).updateQueue;if(null===v){var g=new Set;g.add(l),t.updateQueue=g}else v.add(l);break e}if(0===(1&t)){gs(a,c,t),gl();break e}l=Error(o(426))}else if(io&&1&u.mode){var m=ms(s);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),ys(m,s,u,0,t),vo(cs(l,u));break e}}a=l=cs(l,u),4!==Du&&(Du=2),null===Fu?Fu=[a]:Fu.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Ro(a,hs(0,l,t));break e;case 1:u=l;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Xu||!Xu.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Ro(a,vs(a,u,t));break e}}a=a.return}while(null!==a)}xl(n)}catch(w){t=w,ju===n&&null!==n&&(ju=n=n.return);continue}break}}function vl(){var e=Cu.current;return Cu.current=as,null===e?as:e}function gl(){0!==Du&&3!==Du&&2!==Du||(Du=4),null===Tu||0===(268435455&Ru)&&0===(268435455&Lu)||ul(Tu,Au)}function ml(e,t){var n=Mu;Mu|=2;var r=vl();for(Tu===e&&Au===t||(Wu=null,fl(e,t));;)try{yl();break}catch(i){hl(e,i)}if(ko(),Mu=n,Cu.current=r,null!==ju)throw Error(o(261));return Tu=null,Au=0,Du}function yl(){for(;null!==ju;)wl(ju)}function bl(){for(;null!==ju&&!$e();)wl(ju)}function wl(e){var t=_u(e.alternate,e,Ou);e.memoizedProps=e.pendingProps,null===t?xl(e):ju=t,Eu.current=null}function xl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qs(n,t,Ou)))return void(ju=n)}else{if(null!==(n=$s(n,t)))return n.flags&=32767,void(ju=n);if(null===e)return Du=6,void(ju=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(ju=t);ju=t=e}while(null!==t);0===Du&&(Du=5)}function kl(e,t,n){var r=bt,i=Iu.transition;try{Iu.transition=null,bt=1,function(e,t,n,r){do{Sl()}while(null!==$u);if(0!==(6&Mu))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===Tu&&(ju=Tu=null,Au=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||qu||(qu=!0,Tl(tt,(function(){return Sl(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Iu.transition,Iu.transition=null;var s=bt;bt=1;var u=Mu;Mu|=4,Eu.current=null,function(e,t){if(ei=Wt,fr(e=pr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(x){n=null;break e}var s=0,u=-1,l=-1,c=0,d=0,p=e,f=null;t:for(;;){for(var h;p!==n||0!==i&&3!==p.nodeType||(u=s+i),p!==a||0!==r&&3!==p.nodeType||(l=s+r),3===p.nodeType&&(s+=p.nodeValue.length),null!==(h=p.firstChild);)f=p,p=h;for(;;){if(p===e)break t;if(f===n&&++c===i&&(u=s),f===a&&++d===r&&(l=s),null!==(h=p.nextSibling))break;f=(p=f).parentNode}p=h}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var g=v.memoizedProps,m=v.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:mo(t.type,g),m);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(o(163))}}catch(x){Pl(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}v=nu,nu=!1}(e,n),mu(n,e),hr(ti),Wt=!!ei,ti=ei=null,e.current=n,bu(n,e,i),Ge(),Mu=u,bt=s,Iu.transition=a}else e.current=n;if(qu&&(qu=!1,$u=e,Gu=i),a=e.pendingLanes,0===a&&(Xu=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),il(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hu)throw Hu=!1,e=Yu,Yu=null,e;0!==(1&Gu)&&0!==e.tag&&Sl(),a=e.pendingLanes,0!==(1&a)?e===Zu?Qu++:(Qu=0,Zu=e):Qu=0,Ki()}(e,t,n,r)}finally{Iu.transition=i,bt=r}return null}function Sl(){if(null!==$u){var e=wt(Gu),t=Iu.transition,n=bt;try{if(Iu.transition=null,bt=16>e?16:e,null===$u)var r=!1;else{if(e=$u,$u=null,Gu=0,0!==(6&Mu))throw Error(o(331));var i=Mu;for(Mu|=4,Js=e.current;null!==Js;){var a=Js,s=a.child;if(0!==(16&Js.flags)){var u=a.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for(Js=c;null!==Js;){var d=Js;switch(d.tag){case 0:case 11:case 15:ru(8,d,a)}var p=d.child;if(null!==p)p.return=d,Js=p;else for(;null!==Js;){var f=(d=Js).sibling,h=d.return;if(au(d),d===c){Js=null;break}if(null!==f){f.return=h,Js=f;break}Js=h}}}var v=a.alternate;if(null!==v){var g=v.child;if(null!==g){v.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(null!==g)}}Js=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Js=s;else e:for(;null!==Js;){if(0!==(2048&(a=Js).flags))switch(a.tag){case 0:case 11:case 15:ru(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Js=y;break e}Js=a.return}}var b=e.current;for(Js=b;null!==Js;){var w=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==w)w.return=s,Js=w;else e:for(s=b;null!==Js;){if(0!==(2048&(u=Js).flags))try{switch(u.tag){case 0:case 11:case 15:iu(9,u)}}catch(k){Pl(u,u.return,k)}if(u===s){Js=null;break e}var x=u.sibling;if(null!==x){x.return=u.return,Js=x;break e}Js=u.return}}if(Mu=i,Ki(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(k){}r=!0}return r}finally{bt=n,Iu.transition=t}}return!1}function _l(e,t,n){e=Do(e,t=hs(0,t=cs(n,t),1),1),t=tl(),null!==e&&(mt(e,1,t),il(e,t))}function Pl(e,t,n){if(3===e.tag)_l(e,e,n);else for(;null!==t;){if(3===t.tag){_l(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xu||!Xu.has(r))){t=Do(t,e=vs(t,e=cs(n,e),1),1),e=tl(),null!==t&&(mt(t,1,e),il(t,e));break}}t=t.return}}function Cl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tl(),e.pingedLanes|=e.suspendedLanes&n,Tu===e&&(Au&n)===n&&(4===Du||3===Du&&(130023424&Au)===Au&&500>Qe()-Ku?fl(e,0):Bu|=n),il(e,t)}function El(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tl();null!==(e=To(e,t))&&(mt(e,t,n),il(e,n))}function Il(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),El(e,n)}function Ml(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),El(e,n)}function Tl(e,t){return Xe(e,t)}function jl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Al(e,t,n,r){return new jl(e,t,n,r)}function Ol(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zl(e,t){var n=e.alternate;return null===n?((n=Al(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dl(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Ol(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Nl(n.children,i,a,t);case _:s=8,i|=8;break;case P:return(e=Al(12,n,t,2|i)).elementType=P,e.lanes=a,e;case M:return(e=Al(13,n,t,i)).elementType=M,e.lanes=a,e;case T:return(e=Al(19,n,t,i)).elementType=T,e.lanes=a,e;case O:return Rl(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case E:s=9;break e;case I:s=11;break e;case j:s=14;break e;case A:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Al(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Nl(e,t,n,r){return(e=Al(7,e,r,t)).lanes=n,e}function Rl(e,t,n,r){return(e=Al(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Ll(e,t,n){return(e=Al(6,e,null,t)).lanes=n,e}function Bl(e,t,n){return(t=Al(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ul(e,t,n,r,i,o,a,s,u){return e=new Fl(e,t,n,s,u),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Al(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ao(o),e}function Kl(e){if(!e)return Ei;e:{if(Ke(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ai(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Ai(n))return Di(e,n,t)}return t}function Vl(e,t,n,r,i,o,a,s,u){return(e=Ul(n,r,!0,e,0,o,0,s,u)).context=Kl(null),n=e.current,(o=zo(r=tl(),i=nl(n))).callback=void 0!==t&&null!==t?t:null,Do(n,o,i),e.current.lanes=i,mt(e,i,r),il(e,r),e}function Wl(e,t,n,r){var i=t.current,o=tl(),a=nl(i);return n=Kl(n),null===t.context?t.context=n:t.pendingContext=n,(t=zo(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Do(i,t,a))&&(rl(e,i,a,o),No(e,i,a)),a}function Hl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Yl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xl(e,t){Yl(e,t),(e=e.alternate)&&Yl(e,t)}_u=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Mi.current)ws=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ws=!1,function(e,t,n){switch(t.tag){case 3:Ts(t),ho();break;case 5:aa(t);break;case 1:Ai(t.type)&&Ni(t);break;case 4:ia(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(yo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(ua,1&ua.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ls(e,t,n):(Ci(ua,1&ua.current),null!==(e=Hs(e,t,n))?e.sibling:null);Ci(ua,1&ua.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(ua,ua.current),r)break;return null;case 22:case 23:return t.lanes=0,Ps(e,t,n)}return Hs(e,t,n)}(e,t,n);ws=0!==(131072&e.flags)}else ws=!1,io&&0!==(1048576&t.flags)&&Ji(t,Yi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ws(e,t),e=t.pendingProps;var i=ji(t,Ii.current);Po(t,n),i=_a(null,t,r,e,i,n);var a=Pa();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ai(r)?(a=!0,Ni(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ao(t),i.updater=Ko,t.stateNode=i,i._reactInternals=t,Yo(t,r,e,n),t=Ms(null,t,r,!0,a,n)):(t.tag=0,io&&a&&eo(t),xs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ws(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ol(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===j)return 14}return 2}(r),e=mo(r,e),i){case 0:t=Es(null,t,r,e,n);break e;case 1:t=Is(null,t,r,e,n);break e;case 11:t=ks(null,t,r,e,n);break e;case 14:t=Ss(null,t,r,mo(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Es(e,t,r,i=t.elementType===r?i:mo(r,i),n);case 1:return r=t.type,i=t.pendingProps,Is(e,t,r,i=t.elementType===r?i:mo(r,i),n);case 3:e:{if(Ts(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,Oo(e,t),Lo(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=js(e,t,r,n,i=cs(Error(o(423)),t));break e}if(r!==i){t=js(e,t,r,n,i=cs(Error(o(424)),t));break e}for(ro=li(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=Zo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ho(),r===i){t=Hs(e,t,n);break e}xs(e,t,r,n)}t=t.child}return t;case 5:return aa(t),null===e&&lo(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(t.flags|=32),Cs(e,t),xs(e,t,s,n),t.child;case 6:return null===e&&lo(t),null;case 13:return Ls(e,t,n);case 4:return ia(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Qo(t,null,r,n):xs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ks(e,t,r,i=t.elementType===r?i:mo(r,i),n);case 7:return xs(e,t,t.pendingProps,n),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Ci(yo,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!Mi.current){t=Hs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var u=a.dependencies;if(null!==u){s=a.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===a.tag){(l=zo(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),_o(a.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),_o(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}xs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Po(t,n),r=r(i=Co(i)),t.flags|=1,xs(e,t,r,n),t.child;case 14:return i=mo(r=t.type,t.pendingProps),Ss(e,t,r,i=mo(r.type,i),n);case 15:return _s(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:mo(r,i),Ws(e,t),t.tag=1,Ai(r)?(e=!0,Ni(t)):e=!1,Po(t,n),Wo(t,r,i),Yo(t,r,i,n),Ms(null,t,r,!0,e,n);case 19:return Vs(e,t,n);case 22:return Ps(e,t,n)}throw Error(o(156,t.tag))};var ql="function"===typeof reportError?reportError:function(e){console.error(e)};function $l(e){this._internalRoot=e}function Gl(e){this._internalRoot=e}function Ql(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jl(){}function ec(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=Hl(a);s.call(e)}}Wl(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Hl(a);o.call(e)}}var a=Vl(t,r,e,0,null,!1,0,"",Jl);return e._reactRootContainer=a,e[hi]=a.current,Kr(8===e.nodeType?e.parentNode:e),dl(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Hl(u);s.call(e)}}var u=Ul(e,0,!1,null,0,!1,0,"",Jl);return e._reactRootContainer=u,e[hi]=u.current,Kr(8===e.nodeType?e.parentNode:e),dl((function(){Wl(t,u,n,r)})),u}(n,t,e,i,r);return Hl(a)}Gl.prototype.render=$l.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Wl(e,t,null,null)},Gl.prototype.unmount=$l.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dl((function(){Wl(null,e,null,null)})),t[hi]=null}},Gl.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Rt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),il(t,Qe()),0===(6&Mu)&&(Vu=Qe()+500,Ki()))}break;case 13:dl((function(){var t=To(e,1);if(null!==t){var n=tl();rl(t,e,1,n)}})),Xl(e,1)}},kt=function(e){if(13===e.tag){var t=To(e,134217728);if(null!==t)rl(t,e,134217728,tl());Xl(e,134217728)}},St=function(e){if(13===e.tag){var t=nl(e),n=To(e,t);if(null!==n)rl(n,e,t,tl());Xl(e,t)}},_t=function(){return bt},Pt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(o(90));X(r),Z(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=cl,Me=dl;var tc={usingClientEntryPoint:!1,Events:[bi,wi,xi,Ce,Ee,cl]},nc={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),ot=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ql(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Ql(e))throw Error(o(299));var n=!1,r="",i=ql;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Ul(e,1,!1,null,0,n,0,r,i),e[hi]=t.current,Kr(8===e.nodeType?e.parentNode:e),new $l(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return dl(e)},t.hydrate=function(e,t,n){if(!Zl(t))throw Error(o(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Ql(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=ql;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vl(t,null,e,1,null!=n?n:null,i,0,a,s),e[hi]=t.current,Kr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Gl(t)},t.render=function(e,t,n){if(!Zl(t))throw Error(o(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zl(e))throw Error(o(40));return!!e._reactRootContainer&&(dl((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[hi]=null}))})),!0)},t.unstable_batchedUpdates=cl,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zl(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},6374:function(e,t,n){"use strict";var r=n(2791),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,o={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!u.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:c,props:o,_owner:s.current}}t.Fragment=o,t.jsx=l,t.jsxs=l},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,g={};function m(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||h}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||h}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var w=b.prototype=new y;w.constructor=b,v(w,m.prototype),w.isPureReactComponent=!0;var x=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function P(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)k.call(t,i)&&!_.hasOwnProperty(i)&&(o[i]=t[i]);var u=arguments.length-2;if(1===u)o.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];o.children=l}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===o[i]&&(o[i]=u[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:S.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function M(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return a=a(u=e),e=""===o?"."+I(u,0):o,x(a)?(i="",null!=e&&(i=e.replace(E,"$&/")+"/"),M(a,t,i,"",(function(e){return e}))):null!=a&&(C(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(E,"$&/")+"/")+e)),t.push(a)),1;if(u=0,o=""===o?".":o+":",x(e))for(var l=0;l<e.length;l++){var c=o+I(s=e[l],l);u+=M(s,t,i,c,a)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=M(s=s.value,t,i,c=o+I(s,l++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function T(e,t,n){if(null==e)return e;var r=[],i=0;return M(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function j(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},O={transition:null},z={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:O,ReactCurrentOwner:S};t.Children={map:T,forEach:function(e,t,n){T(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return T(e,(function(){t++})),t},toArray:function(e){return T(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)k.call(t,l)&&!_.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=P,t.createFactory=function(e){var t=P.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:j}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,u=e[s],l=s+1,c=e[l];if(0>o(u,n))l<i&&0>o(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[s]=n,r=s);else{if(!(l<i&&0>o(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],d=1,p=null,f=3,h=!1,v=!1,g=!1,m="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function x(e){if(g=!1,w(e),!v)if(null!==r(l))v=!0,O(k);else{var t=r(c);null!==t&&z(x,t.startTime-e)}}function k(e,n){v=!1,g&&(g=!1,y(C),C=-1),h=!0;var o=f;try{for(w(n),p=r(l);null!==p&&(!(p.expirationTime>n)||e&&!M());){var a=p.callback;if("function"===typeof a){p.callback=null,f=p.priorityLevel;var s=a(p.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?p.callback=s:p===r(l)&&i(l),w(n)}else i(l);p=r(l)}if(null!==p)var u=!0;else{var d=r(c);null!==d&&z(x,d.startTime-n),u=!1}return u}finally{p=null,f=o,h=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,_=!1,P=null,C=-1,E=5,I=-1;function M(){return!(t.unstable_now()-I<E)}function T(){if(null!==P){var e=t.unstable_now();I=e;var n=!0;try{n=P(!0,e)}finally{n?S():(_=!1,P=null)}}else _=!1}if("function"===typeof b)S=function(){b(T)};else if("undefined"!==typeof MessageChannel){var j=new MessageChannel,A=j.port2;j.port1.onmessage=T,S=function(){A.postMessage(null)}}else S=function(){m(T,0)};function O(e){P=e,_||(_=!0,S())}function z(e,n){C=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||h||(v=!0,O(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(c,e),null===r(l)&&e===r(c)&&(g?(y(C),C=-1):g=!0,z(x,o-a))):(e.sortIndex=s,n(l,e),v||h||(v=!0,O(k))),e},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r](o,o.exports,n),o.loaded=!0,o.exports}!function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){a[e]=function(){return r[e]}}));return a.default=function(){return r},n.d(o,a),o}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.nc=void 0,function(){"use strict";var e={};n.r(e),n.d(e,{EMPTY_ARRAY:function(){return re},EffectScheduler:function(){return ze},RESET_VALUE:function(){return fe},atom:function(){return _e},computed:function(){return Oe},getComputedInstance:function(){return Ae},isAtom:function(){return Pe},isSignal:function(){return Re},isUninitialized:function(){return Ee},react:function(){return De},reactor:function(){return Ne},transact:function(){return ke},transaction:function(){return xe},unsafe__withoutCapture:function(){return ue},whyAmIRunning:function(){return pe},withDiff:function(){return Me}});var t=n(2791),r=n.t(t,2),i=n(4164);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:String(t)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(gm){return!1}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){var t=f();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}(this,n)}}n(8624),n(9743),n(5470),n(2330),n(447),n(4178);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){if(e){if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function y(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=m(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function b(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t){var n,r=[],i=y(e);try{e:for(i.s();!(n=i.n()).done;){var o,a=n.value,s=y(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;if(t?t(a,u):a===u)continue e}}catch(l){s.e(l)}finally{s.f()}r.push(a)}}catch(l){i.e(l)}finally{i.f()}return r}function S(e){return e.filter((function(e){return void 0!==e&&null!==e}))}function _(e){return e[e.length-1]}function P(e){return function t(){try{return e.apply(void 0,arguments)}catch(n){throw n instanceof Error&&Error.captureStackTrace&&Error.captureStackTrace(n,t),n}}}var C=P((function(e,t){if(!e)throw new Error(t||"Assertion Error")})),E=P((function(e,t){if(null==e)throw new Error(null!==t&&void 0!==t?t:"value must be defined");return e}));function I(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function M(e){return function(e){if(Array.isArray(e))return g(e)}(e)||I(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){var n=void 0,r=function(){n||((n={}).promise=new Promise((function(e,t){n.resolve=e,n.reject=t}))),clearTimeout(n.timeout);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n.latestArgs=i,n.timeout=setTimeout((function(){var t=n;n=void 0;try{t.resolve(e.apply(void 0,M(t.latestArgs)))}catch(gm){t.reject(gm)}}),t),n.promise};return r.cancel=function(){n&&clearTimeout(n.timeout)},r}var j=new WeakMap;function A(e,t){if("object"===typeof e&&null!==e){var n=j.get(e);n||(n={tags:{},extras:{}},j.set(e,n)),t.tags&&(n.tags=x(x({},n.tags),t.tags)),t.extras&&(n.extras=x(x({},n.extras),t.extras))}}function O(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t+""}function z(e){if(Array.isArray(e))return e}function D(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function N(e,t){return z(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||m(e,t)||D()}function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=0,n=0,r=0,i=0;function o(){var e=t^t<<11;return t=n,n=r,r=i,(i^=(i>>>19^e^e>>>8)>>>0)/4294967296*2}for(var a=0;a<e.length+64;a++)t^=0|e.charCodeAt(a),o();return o}function L(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=N(t,2),o=i[0],a=i[1],s=N(n,2),u=s[0],l=s[1],c=u+(e-o)/(a-o)*(l-u);return r?u<l?Math.max(Math.min(c,l),u):Math.max(Math.min(c,u),l):c}function B(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function F(e,t){if(B(e,t))return e[t]}function U(e){if(!e)return e;if(Array.isArray(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(U(e[r]));return t}if("object"===typeof e){for(var i=Object.keys(e),o=i.length,a={},s=0;s<o;s++){var u=i[s];a[u]=U(e[u])}return a}return e}function K(e){return Object.values(e)}function V(e){return Object.entries(e)}function W(e){return null!==e}function H(e){return null!==e&&void 0!==e}var Y="undefined"!==typeof window&&window.structuredClone?window.structuredClone:function(e){return e?JSON.parse(JSON.stringify(e)):e},X=function(){function e(t){o(this,e),b(this,"nextValue",void 0),b(this,"diff",void 0),this.previousValue=t}return l(e,[{key:"get",value:function(){var e,t,n,r,i,o,a=null!==(e=null===(t=this.diff)||void 0===t||null===(n=t.removed)||void 0===n?void 0:n.size)&&void 0!==e?e:0,s=null!==(r=null===(i=this.diff)||void 0===i||null===(o=i.added)||void 0===o?void 0:o.size)&&void 0!==r?r:0;if(0!==a||0!==s)return{value:this.nextValue,diff:this.diff}}},{key:"_add",value:function(e,t){var n,r,i,o,a;(null!==(n=this.nextValue)&&void 0!==n||(this.nextValue=new Set(this.previousValue)),this.nextValue.add(e),null!==(r=this.diff)&&void 0!==r||(this.diff={}),t)?null===(i=this.diff.removed)||void 0===i||i.delete(e):(null!==(a=(o=this.diff).added)&&void 0!==a||(o.added=new Set),this.diff.added.add(e))}},{key:"add",value:function(e){var t,n=this.previousValue.has(e);if(n){var r,i;if(!(null===(r=this.diff)||void 0===r||null===(i=r.removed)||void 0===i?void 0:i.has(e)))return;return this._add(e,n)}(null===(t=this.nextValue)||void 0===t?void 0:t.has(e))||this._add(e,n)}},{key:"_remove",value:function(e,t){var n,r,i,o,a;(null!==(n=this.nextValue)&&void 0!==n||(this.nextValue=new Set(this.previousValue)),this.nextValue.delete(e),null!==(r=this.diff)&&void 0!==r||(this.diff={}),t)?(null!==(o=(i=this.diff).removed)&&void 0!==o||(i.removed=new Set),this.diff.removed.add(e)):null===(a=this.diff.added)||void 0===a||a.delete(e)}},{key:"remove",value:function(e){var t,n,r=this.previousValue.has(e);if(!r){var i,o;if(!(null===(i=this.diff)||void 0===i||null===(o=i.added)||void 0===o?void 0:o.has(e)))return;return this._remove(e,r)}(null===(t=this.diff)||void 0===t||null===(n=t.removed)||void 0===n?void 0:n.has(e))||this._remove(e,r)}}]),e}(),q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(e)).reduce((function(e,t){return e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"}),"")},$=function(){function e(t,n){var r,i=this;o(this,e),b(this,"createDefaultProperties",void 0),b(this,"migrations",void 0),b(this,"validator",void 0),b(this,"isInstance",(function(e){return(null===e||void 0===e?void 0:e.typeName)===i.typeName})),this.typeName=t,this.createDefaultProperties=n.createDefaultProperties,this.migrations=n.migrations,this.validator=null!==(r=n.validator)&&void 0!==r?r:{validate:function(e){return e}}}return l(e,[{key:"create",value:function(e){for(var t=x(x({},this.createDefaultProperties()),{},{id:this.createId()}),n=0,r=Object.entries(e);n<r.length;n++){var i=N(r[n],2),o=i[0],a=i[1];void 0!==a&&(t[o]=a)}return t.typeName=this.typeName,t}},{key:"clone",value:function(e){return x(x({},Y(e)),{},{id:this.createId()})}},{key:"createId",value:function(){return this.typeName+":"+q()}},{key:"createCustomId",value:function(e){return this.typeName+":"+e}},{key:"isId",value:function(e){if(!e)return!1;for(var t=0;t<this.typeName.length;t++)if(e[t]!==this.typeName[t])return!1;return":"===e[this.typeName.length]}},{key:"withDefaultProperties",value:function(t){return new e(this.typeName,{createDefaultProperties:t,migrations:this.migrations,validator:this.validator})}},{key:"validate",value:function(e){return this.validator.validate(e)}}]),e}();function G(e,t){var n;return new $(e,{createDefaultProperties:function(){return{}},migrations:null!==(n=t.migrations)&&void 0!==n?n:{currentVersion:0,firstVersion:0,migrators:{}},validator:t.validator})}var Q=function(){function e(){o(this,e),b(this,"arraySize",0),b(this,"array",Array(8)),b(this,"set",null)}return l(e,[{key:"isEmpty",get:function(){if(this.array)return 0===this.arraySize;if(this.set)return 0===this.set.size;throw new Error("no set or array")}},{key:"add",value:function(e){if(this.array)return-1===this.array.indexOf(e)&&(this.arraySize<8?(this.array[this.arraySize]=e,this.arraySize++,!0):(this.set=new Set(this.array),this.array=null,this.set.add(e),!0));if(this.set)return!this.set.has(e)&&(this.set.add(e),!0);throw new Error("no set or array")}},{key:"remove",value:function(e){if(this.array){var t=this.array.indexOf(e);return-1!==t&&(this.array[t]=void 0,this.arraySize--,t!==this.arraySize&&(this.array[t]=this.array[this.arraySize],this.array[this.arraySize]=void 0),!0)}if(this.set)return!!this.set.has(e)&&(this.set.delete(e),!0);throw new Error("no set or array")}},{key:"visit",value:function(e){if(this.array)for(var t=0;t<this.arraySize;t++){var n=this.array[t];"undefined"!==typeof n&&e(n)}else{if(!this.set)throw new Error("no set or array");this.set.forEach(e)}}}]),e}();function Z(e){return e&&"object"===typeof e&&"parents"in e}function J(e){for(var t=0,n=e.parents.length;t<n;t++)if(e.parents[t].__unsafe__getWithoutCapture(),e.parents[t].lastChangedEpoch!==e.parentEpochs[t])return!0;return!1}var ee=function e(t,n){if(t.children.remove(n)&&t.children.isEmpty&&Z(t))for(var r=0,i=t.parents.length;r<i;r++)e(t.parents[r],t)},te=function e(t,n){if(t.children.add(n)&&Z(t))for(var r=0,i=t.parents.length;r<i;r++)e(t.parents[r],t)};function ne(e,t){return e===t||Object.is(e,t)||Boolean(e&&t&&"function"===typeof e.equals&&e.equals(t))}var re=Object.freeze([]),ie=Symbol.for("__signia__"),oe=globalThis;oe[ie]?console.error('Multiple versions of signia detected. This will cause unexpected behavior. Please add "resolutions" (yarn/pnpm) or "overrides" (npm) in your package.json to ensure only one version of signia is loaded.'):oe[ie]=!0;var ae=l((function e(t,n){o(this,e),b(this,"offset",0),b(this,"numNewParents",0),b(this,"maybeRemoved",void 0),this.below=t,this.child=n})),se=null;function ue(e){var t=se;se=null;try{return e()}finally{se=t}}function le(e){se=new ae(se,e)}function ce(){var e,t=se;if(se=t.below,t.numNewParents>0||t.offset!==t.child.parents.length){for(var n=t.offset;n<t.child.parents.length;n++){var r=t.child.parents[n];t.child.parents.indexOf(r)>=t.offset&&ee(r,t.child)}if(t.child.parents.length=t.offset,t.child.parentEpochs.length=t.offset,null!==(e=se)&&void 0!==e&&e.maybeRemoved)for(var i=0;i<se.maybeRemoved.length;i++){var o=se.maybeRemoved[i];-1===t.child.parents.indexOf(o)&&ee(o,t.child)}}}function de(e){if(se){var t=se.child.parents.indexOf(e);if(t<0&&(se.numNewParents++,se.child.isActivelyListening&&te(e,se.child)),t<0||t>=se.offset){if(t!==se.offset&&t>0){var n=se.child.parents[se.offset];se.maybeRemoved?-1===se.maybeRemoved.indexOf(n)&&se.maybeRemoved.push(n):se.maybeRemoved=[n]}se.child.parents[se.offset]=e,se.child.parentEpochs[se.offset]=e.lastChangedEpoch,se.offset++}}}function pe(){var e,t=null===(e=se)||void 0===e?void 0:e.child;if(!t)throw new Error("whyAmIRunning() called outside of a reactive context");for(var n=[],r=0;r<t.parents.length;r++){var i=t.parents[r];i.lastChangedEpoch>t.parentEpochs[r]&&n.push(i)}if(0===n.length)console.log(t.name,"is running but none of the parents changed");else{console.log(t.name,"is running because:");var o,a=y(n);try{for(a.s();!(o=a.n()).done;){var s=o.value;console.log("\t",s.name,"changed =>",s.__unsafe__getWithoutCapture())}}catch(u){a.e(u)}finally{a.f()}}}var fe=Symbol("RESET_VALUE"),he=function(){function e(t){o(this,e),b(this,"index",0),b(this,"buffer",void 0),this.capacity=t,this.buffer=new Array(t)}return l(e,[{key:"pushEntry",value:function(e,t,n){void 0!==n&&(n!==fe?(this.buffer[this.index]=[e,t,n],this.index=(this.index+1)%this.capacity):this.clear())}},{key:"clear",value:function(){this.index=0,this.buffer.fill(void 0)}},{key:"getChangesSince",value:function(e){for(var t=this.index,n=this.capacity,r=this.buffer,i=0;i<n;i++){var o=(t-1+n-i)%n,a=r[o];if(!a)return fe;var s=N(a,2),u=s[0],l=s[1];if(0===i&&e>=l)return[];if(u<=e&&e<l){for(var c=i+1,d=new Array(c),p=0;p<c;p++)d[p]=r[(o+p)%n][2];return d}}return fe}}]),e}(),ve=-1,ge=0,me=!1;var ye=function(){function e(t){o(this,e),b(this,"initialAtomValues",new Map),this.parent=t}return l(e,[{key:"isRoot",get:function(){return null===this.parent}},{key:"commit",value:function(){var e=this;if(this.isRoot){var t=this.initialAtomValues;this.initialAtomValues=new Map,be(t.keys())}else this.initialAtomValues.forEach((function(t,n){e.parent.initialAtomValues.has(n)||e.parent.initialAtomValues.set(n,t)}))}},{key:"abort",value:function(){ge++,this.initialAtomValues.forEach((function(e,t){var n;t.set(e),null===(n=t.historyBuffer)||void 0===n||n.clear()})),this.commit()}}]),e}();function be(e){if(me)throw new Error("cannot change atoms during reaction cycle");try{me=!0;var t,n=new Set,r=function e(t){t.lastTraversedEpoch!==ge&&(t.lastTraversedEpoch=ge,"maybeScheduleEffect"in t?n.add(t):t.children.visit(e))},i=y(e);try{for(i.s();!(t=i.n()).done;){t.value.children.visit(r)}}catch(s){i.e(s)}finally{i.f()}var o,a=y(n);try{for(a.s();!(o=a.n()).done;){o.value.maybeScheduleEffect()}}catch(s){a.e(s)}finally{a.f()}}finally{me=!1}}var we=null;function xe(e){var t=new ye(we);we=t;try{var n=!1,r=e((function(){return n=!0}));return n?t.abort():t.commit(),r}catch(gm){throw t.abort(),gm}finally{we=we.parent}}function ke(e){return we?e():xe(e)}var Se=function(){function e(t,n,r){var i;o(this,e),b(this,"isEqual",void 0),b(this,"computeDiff",void 0),b(this,"lastChangedEpoch",ge),b(this,"children",new Q),b(this,"historyBuffer",void 0),this.name=t,this.current=n,this.isEqual=null!==(i=null===r||void 0===r?void 0:r.isEqual)&&void 0!==i?i:null,r&&(r.historyLength&&(this.historyBuffer=new he(r.historyLength)),this.computeDiff=r.computeDiff)}return l(e,[{key:"__unsafe__getWithoutCapture",value:function(){return this.current}},{key:"value",get:function(){return de(this),this.current}},{key:"set",value:function(e,t){var n,r,i,o;if(null!==(n=null===(r=this.isEqual)||void 0===r?void 0:r.call(this,this.current,e))&&void 0!==n?n:ne(this.current,e))return this.current;(ge++,this.historyBuffer)&&this.historyBuffer.pushEntry(this.lastChangedEpoch,ge,null!==(i=null!==t&&void 0!==t?t:null===(o=this.computeDiff)||void 0===o?void 0:o.call(this,this.current,e,this.lastChangedEpoch,ge))&&void 0!==i?i:fe);this.lastChangedEpoch=ge;var a=this.current;return this.current=e,function(e,t){we?we.initialAtomValues.has(e)||we.initialAtomValues.set(e,t):be([e])}(this,a),e}},{key:"update",value:function(e){return this.set(e(this.current))}},{key:"getDiffSince",value:function(e){var t,n;return de(this),e>=this.lastChangedEpoch?re:null!==(t=null===(n=this.historyBuffer)||void 0===n?void 0:n.getChangesSince(e))&&void 0!==t?t:fe}}]),e}();function _e(e,t,n){return new Se(e,t,n)}function Pe(e){return e instanceof Se}var Ce=Symbol("UNINITIALIZED"),Ee=function(e){return e===Ce},Ie=l((function e(t,n){o(this,e),this.value=t,this.diff=n}));function Me(e,t){return new Ie(e,t)}var Te=function(){function e(t,n,r){var i;o(this,e),b(this,"lastChangedEpoch",ve),b(this,"lastTraversedEpoch",ve),b(this,"lastCheckedEpoch",ve),b(this,"parents",[]),b(this,"parentEpochs",[]),b(this,"children",new Q),b(this,"historyBuffer",void 0),b(this,"state",Ce),b(this,"computeDiff",void 0),b(this,"isEqual",void 0),this.name=t,this.derive=n,null!==r&&void 0!==r&&r.historyLength&&(this.historyBuffer=new he(r.historyLength)),this.computeDiff=null===r||void 0===r?void 0:r.computeDiff,this.isEqual=null!==(i=null===r||void 0===r?void 0:r.isEqual)&&void 0!==i?i:ne}return l(e,[{key:"isActivelyListening",get:function(){return!this.children.isEmpty}},{key:"__unsafe__getWithoutCapture",value:function(){var e=this.lastChangedEpoch===ve;if(!e&&(this.lastCheckedEpoch===ge||!J(this)))return this.lastCheckedEpoch=ge,this.state;try{le(this);var t=this.derive(this.state,this.lastCheckedEpoch),n=t instanceof Ie?t.value:t;if(this.state===Ce||!this.isEqual(n,this.state)){if(this.historyBuffer&&!e){var r,i,o=t instanceof Ie?t.diff:void 0;this.historyBuffer.pushEntry(this.lastChangedEpoch,ge,null!==(r=null!==o&&void 0!==o?o:null===(i=this.computeDiff)||void 0===i?void 0:i.call(this,this.state,n,this.lastCheckedEpoch,ge))&&void 0!==r?r:fe)}this.lastChangedEpoch=ge,this.state=n}return this.lastCheckedEpoch=ge,this.state}finally{ce()}}},{key:"value",get:function(){var e=this.__unsafe__getWithoutCapture();return de(this),e}},{key:"getDiffSince",value:function(e){var t,n;return this.value,e>=this.lastChangedEpoch?re:null!==(t=null===(n=this.historyBuffer)||void 0===n?void 0:n.getChangesSince(e))&&void 0!==t?t:fe}}]),e}();function je(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,r=n.get,i=Symbol.for("__signia__computed__"+t);return n.get=function(){var n=this[i];return n||(n=new Te(t,r.bind(this),e),Object.defineProperty(this,i,{enumerable:!1,configurable:!1,writable:!1,value:n})),n.value},n}function Ae(e,t){var n=Symbol.for("__signia__computed__"+t.toString()),r=e[n];return r||(e[t],r=e[n]),r}function Oe(){if(1===arguments.length){var e=arguments[0];return function(t,n,r){return je(e,t,n,r)}}return"string"===typeof arguments[0]?new Te(arguments[0],arguments[1],arguments[2]):je(void 0,arguments[0],arguments[1],arguments[2])}var ze=function(){function e(t,n,r){var i=this;o(this,e),b(this,"_isActivelyListening",!1),b(this,"lastTraversedEpoch",ve),b(this,"lastReactedEpoch",ve),b(this,"_scheduleCount",0),b(this,"parentEpochs",[]),b(this,"parents",[]),b(this,"_scheduleEffect",void 0),b(this,"maybeExecute",(function(){i._isActivelyListening&&i.execute()})),this.name=t,this.runEffect=n,this._scheduleEffect=null===r||void 0===r?void 0:r.scheduleEffect}return l(e,[{key:"isActivelyListening",get:function(){return this._isActivelyListening}},{key:"scheduleCount",get:function(){return this._scheduleCount}},{key:"maybeScheduleEffect",value:function(){this._isActivelyListening&&this.lastReactedEpoch!==ge&&(!this.parents.length||J(this)?this.scheduleEffect():this.lastReactedEpoch=ge)}},{key:"scheduleEffect",value:function(){this._scheduleCount++,this._scheduleEffect?this._scheduleEffect(this.maybeExecute):this.execute()}},{key:"attach",value:function(){this._isActivelyListening=!0;for(var e=0,t=this.parents.length;e<t;e++)te(this.parents[e],this)}},{key:"detach",value:function(){this._isActivelyListening=!1;for(var e=0,t=this.parents.length;e<t;e++)ee(this.parents[e],this)}},{key:"execute",value:function(){try{le(this);var e=this.runEffect(this.lastReactedEpoch);return this.lastReactedEpoch=ge,e}finally{ce()}}}]),e}();function De(e,t,n){var r=new ze(e,t,n);return r.attach(),r.scheduleEffect(),function(){r.detach()}}function Ne(e,t,n){var r=new ze(e,t,n);return{scheduler:r,start:function(e){var t,n=null!==(t=null===e||void 0===e?void 0:e.force)&&void 0!==t&&t;r.attach(),n?r.scheduleEffect():r.maybeScheduleEffect()},stop:function(){r.detach()}}}function Re(e){return e instanceof Se||e instanceof Te}var Le=function(){function e(){o(this,e),b(this,"items",new WeakMap)}return l(e,[{key:"get",value:function(e,t){return this.items.has(e)||this.items.set(e,t(e)),this.items.get(e)}}]),e}();var Be=n(2467);function Fe(e,t){for(var n=0,r=Object.entries(e);n<r.length;n++){var i=N(r[n],2),o=i[0],a=i[1],s=t[o];if("eq"in a&&s!==a.eq)return!1;if("neq"in a&&s===a.neq)return!1;if("gt"in a&&("number"!==typeof s||s<=a.gt))return!1}return!0}function Ue(e,t,n){for(var r=Object.fromEntries(Object.keys(n).map((function(e){return[e,new Set]}))),i=0,o=Object.entries(n);i<o.length;i++){var a=N(o[i],2),s=a[0],u=a[1];if("eq"in u){var l=e.index(t,s).value.get(u.eq);if(l){var c,d=y(l);try{for(d.s();!(c=d.n()).done;){var p=c.value;r[s].add(p)}}catch(T){d.e(T)}finally{d.f()}}}else if("neq"in u){var f,h=y(e.index(t,s).value);try{for(h.s();!(f=h.n()).done;){var v=N(f.value,2),g=v[0],m=v[1];if(g!==u.neq){var b,w=y(m);try{for(w.s();!(b=w.n()).done;){var x=b.value;r[s].add(x)}}catch(T){w.e(T)}finally{w.f()}}}}catch(T){h.e(T)}finally{h.f()}}else if("gt"in u){var k,S=y(e.index(t,s).value);try{for(S.s();!(k=S.n()).done;){var _=N(k.value,2),P=_[0],C=_[1];if(P>u.gt){var E,I=y(C);try{for(I.s();!(E=I.n()).done;){var M=E.value;r[s].add(M)}}catch(T){I.e(T)}finally{I.f()}}}}catch(T){S.e(T)}finally{S.f()}}}return function(e){if(0===e.length)return new Set;var t,n=e[0],r=e.slice(1),i=new Set,o=y(n);try{var a=function(){var e=t.value;r.every((function(t){return t.has(e)}))&&i.add(e)};for(o.s();!(t=o.n()).done;)a()}catch(T){o.e(T)}finally{o.f()}return i}(Object.values(r))}var Ke=function(){function e(t,n){o(this,e),b(this,"indexCache",new Map),b(this,"historyCache",new Map),this.atoms=t,this.history=n}return l(e,[{key:"filterHistory",value:function(e){var t=this;if(this.historyCache.has(e))return this.historyCache.get(e);var n=Oe("filterHistory:"+e,(function(n,r){if(Ee(n))return t.history.value;var i=t.history.getDiffSince(r);if(i===fe)return t.history.value;var o,a={added:{},removed:{},updated:{}},s=0,u=0,l=0,c=y(i);try{for(c.s();!(o=c.n()).done;){for(var d=o.value,p=0,f=Object.values(d.added);p<f.length;p++){var h=f[p];if(h.typeName===e)if(a.removed[h.id]){var v=a.removed[h.id];delete a.removed[h.id],u--,v!==h&&(a.updated[h.id]=[v,h],l++)}else a.added[h.id]=h,s++}for(var g=0,m=Object.values(d.updated);g<m.length;g++){var b=N(m[g],2),w=b[0],x=b[1];x.typeName===e&&(a.added[x.id]?a.added[x.id]=x:a.updated[x.id]?a.updated[x.id]=[a.updated[x.id][0],x]:(a.updated[x.id]=[w,x],l++))}for(var k=0,S=Object.values(d.removed);k<S.length;k++){var _=S[k];_.typeName===e&&(a.added[_.id]?(delete a.added[_.id],s--):a.updated[_.id]?(a.removed[_.id]=a.updated[_.id][0],delete a.updated[_.id],l--,u++):(a.removed[_.id]=_,u++))}}}catch(P){c.e(P)}finally{c.f()}return s||u||l?Me(t.history.value,a):n}),{historyLength:100});return this.historyCache.set(e,n),n}},{key:"index",value:function(e,t){var n=e+":"+t;if(this.indexCache.has(n))return this.indexCache.get(n);var r=this.__uncached_createIndex(e,t);return this.indexCache.set(n,r),r}},{key:"__uncached_createIndex",value:function(e,t){var n=this,r=this.filterHistory(e),i=function(){r.value;for(var i=new Map,o=0,a=Object.values(n.atoms.value);o<a.length;o++){var s=a[o].value;if(s.typeName===e){var u=s[t];i.has(u)||i.set(u,new Set),i.get(u).add(s.id)}}return i};return Oe("index:"+e+":"+t,(function(n,o){if(Ee(n))return i();var a=r.getDiffSince(o);if(a===fe)return i();var s,u=new Map,l=function(e,t){var r,i=u.get(e);i||(i=new X(null!==(r=n.get(e))&&void 0!==r?r:new Set)),i.add(t),u.set(e,i)},c=function(e,t){var r,i=u.get(e);i||(i=new X(null!==(r=n.get(e))&&void 0!==r?r:new Set)),i.remove(t),u.set(e,i)},d=y(a);try{for(d.s();!(s=d.n()).done;){for(var p=s.value,f=0,h=Object.values(p.added);f<h.length;f++){var v=h[f];if(v.typeName===e)l(v[t],v.id)}for(var g=0,m=Object.values(p.updated);g<m.length;g++){var b=N(m[g],2),w=b[0],x=b[1];if(x.typeName===e){var k=w[t],S=x[t];k!==S&&(c(k,x.id),l(S,x.id))}}for(var _=0,P=Object.values(p.removed);_<P.length;_++){var C=P[_];if(C.typeName===e)c(C[t],C.id)}}}catch(z){d.e(z)}finally{d.f()}var E,I=void 0,M=void 0,T=y(u);try{for(T.s();!(E=T.n()).done;){var j=N(E.value,2),A=j[0],O=j[1].get();O&&(I||(I=new Map(n)),M||(M=new Map),0===O.value.size?I.delete(A):I.set(A,O.value),M.set(A,O.diff))}}catch(z){T.e(z)}finally{T.f()}return I&&M?Me(I,M):n}),{historyLength:100})}},{key:"record",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return{}},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"record:"+e+(n?":"+n.toString():""),i=this.ids(e,n,r);return Oe(r,(function(){var e,n=y(i.value);try{for(n.s();!(e=n.n()).done;){var r,o=e.value;return null===(r=t.atoms.value[o])||void 0===r?void 0:r.value}}catch(a){n.e(a)}finally{n.f()}}))}},{key:"records",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return{}},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"records:"+e+(n?":"+n.toString():""),i=this.ids(e,n,"ids:"+r);return Oe(r,(function(){return M(i.value).map((function(e){var n=t.atoms.value[e];if(!n)throw new Error("no atom found for record id: "+e);return n.value}))}))}},{key:"ids",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return{}},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ids:"+e+(n?":"+n.toString():""),i=this.filterHistory(e),o=function(){i.value;var r=n();return 0===Object.keys(r).length?new Set(Object.values(t.atoms.value).flatMap((function(t){var n=t.value;return n.typeName===e?n.id:[]}))):Ue(t,e,r)},a=function(e){var t=o(),n=function(e,t){var n,r={},i=y(t);try{for(i.s();!(n=i.n()).done;){var o,a=n.value;e.has(a)||(null!==(o=r.added)&&void 0!==o||(r.added=new Set),r.added.add(a))}}catch(d){i.e(d)}finally{i.f()}var s,u=y(e);try{for(u.s();!(s=u.n()).done;){var l,c=s.value;t.has(c)||(null!==(l=r.removed)&&void 0!==l||(r.removed=new Set),r.removed.add(c))}}catch(d){u.e(d)}finally{u.f()}return r.added||r.removed?r:void 0}(e,t);return n?Me(t,n):e},s=Oe("ids_query:"+r,n,{isEqual:Be});return Oe("query:"+r,(function(t,n){var r=s.value;if(Ee(t))return o();if(n<s.lastChangedEpoch)return a(t);var u=i.getDiffSince(n);if(u===fe)return a(t);var l,c=new X(t),d=y(u);try{for(d.s();!(l=d.n()).done;){for(var p=l.value,f=0,h=Object.values(p.added);f<h.length;f++){var v=h[f];v.typeName===e&&Fe(r,v)&&c.add(v.id)}for(var g=0,m=Object.values(p.updated);g<m.length;g++){var b=N(m[g],2),w=(b[0],b[1]);w.typeName===e&&(Fe(r,w)?c.add(w.id):c.remove(w.id))}for(var x=0,k=Object.values(p.removed);x<k.length;x++){var S=k[x];S.typeName===e&&c.remove(S.id)}}}catch(P){d.e(P)}finally{d.f()}var _=c.get();return _?Me(_.value,_.diff):t}),{historyLength:50})}},{key:"exec",value:function(e,t){var n=Ue(this,e,t);if(0===n.size)return re;var r=this.atoms.value;return M(n).map((function(e){return r[e].value}))}}]),e}(),Ve=function(){function e(t){var n=this;o(this,e),b(this,"atoms",_e("store_atoms",{})),b(this,"history",_e("history",0,{historyLength:1e3})),b(this,"query",new Ke(this.atoms,this.history)),b(this,"listeners",new Set),b(this,"historyAccumulator",new He),b(this,"historyReactor",void 0),b(this,"schema",void 0),b(this,"props",void 0),b(this,"onAfterCreate",void 0),b(this,"onAfterChange",void 0),b(this,"onBeforeDelete",void 0),b(this,"onAfterDelete",void 0),b(this,"_runCallbacks",!0),b(this,"put",(function(e,t){ke((function(){for(var r,i={},o={},a=n.atoms.__unsafe__getWithoutCapture(),s=null,u=!1,l=0,c=e.length;l<c;l++){var d,p=(null!==(d=s)&&void 0!==d?d:a)[(r=e[l]).id];if(p){var f=p.__unsafe__getWithoutCapture();r=n.schema.validateRecord(n,r,null!==t&&void 0!==t?t:"updateRecord",f),p.set(r);var h=p.__unsafe__getWithoutCapture();f!==h&&(u=!0,i[r.id]=[f,h])}else u=!0,o[(r=n.schema.validateRecord(n,r,null!==t&&void 0!==t?t:"createRecord",null)).id]=r,s||(s=x({},a)),s[r.id]=_e("atom:"+r.id,r)}if(s&&n.atoms.set(s),u){n.updateHistory({added:o,updated:i,removed:{}});var v=n.onAfterCreate,g=n.onAfterChange;v&&n._runCallbacks&&Object.values(o).forEach((function(e){v(e)})),g&&n._runCallbacks&&Object.values(i).forEach((function(e){var t=N(e,2),n=t[0],r=t[1];g(n,r)}))}}))})),b(this,"remove",(function(e){ke((function(){if(n.onBeforeDelete&&n._runCallbacks){var t,r=y(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,o=n.atoms.__unsafe__getWithoutCapture()[i];o&&n.onBeforeDelete(o.value)}}catch(l){r.e(l)}finally{r.f()}}var a=void 0;if(n.atoms.update((function(t){var n,r,i=void 0,o=y(e);try{for(o.s();!(r=o.n()).done;){var s=r.value;s in t&&(i||(i=x({},t)),a||(a={}),delete i[s],a[s]=t[s].value)}}catch(l){o.e(l)}finally{o.f()}return null!==(n=i)&&void 0!==n?n:t})),a&&(n.updateHistory({added:{},updated:{},removed:a}),n.onAfterDelete&&n._runCallbacks))for(var s=0,u=e.length;s<u;s++)n.onAfterDelete(a[e[s]])}))})),b(this,"get",(function(e){var t;return null===(t=n.atoms.value[e])||void 0===t?void 0:t.value})),b(this,"unsafeGetWithoutCapture",(function(e){var t;return null===(t=n.atoms.value[e])||void 0===t?void 0:t.__unsafe__getWithoutCapture()})),b(this,"serialize",(function(e){for(var t={},r=0,i=Object.entries(n.atoms.value);r<i.length;r++){var o=N(i[r],2),a=o[0],s=o[1].value;("function"!==typeof e||e(s))&&(t[a]=s)}return t})),b(this,"deserialize",(function(e){ke((function(){n.clear(),n.put(Object.values(e))}))})),b(this,"allRecords",(function(){return Object.values(n.atoms.value).map((function(e){return e.value}))})),b(this,"clear",(function(){n.remove(Object.keys(n.atoms.value))})),b(this,"update",(function(e,t){var r=n.atoms.value[e];r?n.put([t(r.__unsafe__getWithoutCapture())]):console.error("Record ".concat(e," not found. This is probably an error"))})),b(this,"has",(function(e){return!!n.atoms.value[e]})),b(this,"listen",(function(e){return n._flushHistory(),n.listeners.add(e),n.historyReactor.scheduler.isActivelyListening||n.historyReactor.start(),function(){n.listeners.delete(e),0===n.listeners.size&&n.historyReactor.stop()}})),b(this,"isMergingRemoteChanges",!1),b(this,"mergeRemoteChanges",(function(e){if(n.isMergingRemoteChanges)return e();try{n.isMergingRemoteChanges=!0,ke(e)}finally{n.isMergingRemoteChanges=!1}})),b(this,"createComputedCache",(function(e,t){var r=new Le;return{get:function(i){var o=n.atoms.value[i];if(o)return r.get(o,(function(){return Oe(e+":"+i,(function(){return t(o.value)}))})).value}}})),b(this,"createSelectedComputedCache",(function(e,t,r){var i=new Le;return{get:function(o){var a=n.atoms.value[o];if(a){var s=Oe(e+":"+o+":selector",(function(){return t(a.value)}));return i.get(a,(function(){return Oe(e+":"+o,(function(){return r(s.value)}))})).value}}}})),b(this,"_isPossiblyCorrupted",!1);var r=t.initialData,i=t.schema;this.schema=i,this.props=t.props,r&&this.atoms.set(Object.fromEntries(Object.entries(r).map((function(e){var t=N(e,2),r=t[0],i=t[1];return[r,_e("atom:"+r,n.schema.validateRecord(n,i,"initialize",null))]})))),this.historyReactor=Ne("Store.historyReactor",(function(){n.history.value,n._flushHistory()}),{scheduleEffect:function(e){return requestAnimationFrame(e)}})}return l(e,[{key:"_flushHistory",value:function(){var e=this;if(this.historyAccumulator.hasChanges()){var t,n=y(this.historyAccumulator.flush());try{var r=function(){var n=t.value,r=n.changes,i=n.source;e.listeners.forEach((function(e){return e({changes:r,source:i})}))};for(n.s();!(t=n.n()).done;)r()}catch(i){n.e(i)}finally{n.f()}}}},{key:"updateHistory",value:function(e){this.historyAccumulator.add({changes:e,source:this.isMergingRemoteChanges?"remote":"user"}),0===this.listeners.size&&this.historyAccumulator.clear(),this.history.set(this.history.value+1,e)}},{key:"validate",value:function(e){var t=this;this.allRecords().forEach((function(n){return t.schema.validateRecord(t,n,e,null)}))}},{key:"extractingChanges",value:function(e){var t=[],n=this.historyAccumulator.intercepting((function(e){return t.push(e.changes)}));try{return ke(e),We(t)}finally{n()}}},{key:"applyDiff",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this._runCallbacks;try{this._runCallbacks=n,ke((function(){var n=Object.values(e.added).concat(Object.values(e.updated).map((function(e){var t=N(e,2);t[0];return t[1]}))),r=Object.keys(e.removed);n.length&&t.put(n),r.length&&t.remove(r)}))}finally{this._runCallbacks=r}}},{key:"ensureStoreIsUsable",value:function(){this.schema.ensureStoreIsUsable(this)}},{key:"markAsPossiblyCorrupted",value:function(){this._isPossiblyCorrupted=!0}},{key:"isPossiblyCorrupted",value:function(){return this._isPossiblyCorrupted}}]),e}();function We(e){var t,n={added:{},removed:{},updated:{}},r=y(e);try{for(r.s();!(t=r.n()).done;){for(var i=t.value,o=0,a=Object.entries(i.added);o<a.length;o++){var s=N(a[o],2),u=s[0],l=s[1];if(n.removed[u]){var c=n.removed[u];delete n.removed[u],c!==l&&(n.updated[u]=[c,l])}else n.added[u]=l}for(var d=0,p=Object.entries(i.updated);d<p.length;d++){var f=N(p[d],2),h=f[0],v=N(f[1],2),g=(v[0],v[1]);n.added[h]?(n.added[h]=g,delete n.updated[h],delete n.removed[h]):n.updated[h]?(n.updated[h][1]=g,delete n.removed[h]):(n.updated[h]=i.updated[h],delete n.removed[h])}for(var m=0,b=Object.entries(i.removed);m<b.length;m++){var w=N(b[m],2),x=w[0],k=w[1];n.added[x]?delete n.added[x]:n.updated[x]?(n.removed[x]=n.updated[x][0],delete n.updated[x]):n.removed[x]=k}}}catch(S){r.e(S)}finally{r.f()}return n}var He=function(){function e(){o(this,e),b(this,"_history",[]),b(this,"_inteceptors",new Set)}return l(e,[{key:"intercepting",value:function(e){var t=this;return this._inteceptors.add(e),function(){t._inteceptors.delete(e)}}},{key:"add",value:function(e){this._history.push(e);var t,n=y(this._inteceptors);try{for(n.s();!(t=n.n()).done;){(0,t.value)(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"flush",value:function(){var e=function(e){for(var t,n=[],r=e[0],i=1,o=e.length;i<o;i++)t=e[i],r.source!==t.source?(n.push(r),r=t):r={source:r.source,changes:We([r.changes,t.changes])};return n.push(r),n}(this._history);return this._history=[],e}},{key:"clear",value:function(){this._history=[]}},{key:"hasChanges",value:function(){return this._history.length>0}},{key:"ensureStoreIsUsable",value:function(){}}]),e}();function Ye(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Xe=["typeName","id"];function qe(e){var t=e.firstVersion;return{currentVersion:e.currentVersion,firstVersion:t,migrators:e.migrators,subTypeKey:e.subTypeKey,subTypeMigrations:e.subTypeMigrations}}var $e=function(e){return e.IncompatibleSubtype="incompatible-subtype",e.UnknownType="unknown-type",e.TargetVersionTooNew="target-version-too-new",e.TargetVersionTooOld="target-version-too-old",e.MigrationError="migration-error",e.UnrecognizedSubtype="unrecognized-subtype",e}($e||{});function Ge(e){var t=e.record,n=e.migrations,r=e.fromVersion,i=e.toVersion,o=r;if(!function(e){return"object"===typeof e&&null!==e&&"id"in e&&"typeName"in e}(t))throw new Error("[migrateRecord] object is not a record");for(var a=t.typeName,s=t.id,u=Ye(t,Xe);o<i;){var l=o+1,c=n.migrators[l];if(!c)return{type:"error",reason:"target-version-too-new"};u=c.up(u),o=l}for(;o>i;){var d=o-1,p=n.migrators[o];if(!p)return{type:"error",reason:"target-version-too-old"};u=p.down(u),o=d}return{type:"success",value:x(x({},u),{},{id:s,typeName:a})}}var Qe=function(){function e(t,n){o(this,e),this.types=t,this.options=n}return l(e,[{key:"currentStoreVersion",get:function(){var e,t;return null!==(e=null===(t=this.options.snapshotMigrations)||void 0===t?void 0:t.currentVersion)&&void 0!==e?e:0}},{key:"validateRecord",value:function(e,t,n,r){try{var i=F(this.types,t.typeName);if(!i)throw new Error("Missing definition for record type ".concat(t.typeName));return i.validate(t)}catch(o){if(this.options.onValidationFailure)return this.options.onValidationFailure({store:e,record:t,phase:n,recordBefore:r,error:o});throw o}}},{key:"migratePersistedRecord",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"up",i=F(this.types,e.typeName),o=t.recordVersions[e.typeName];if(!o||!i)return{type:"error",reason:$e.UnknownType};var a=i.migrations.currentVersion,s=o.version;if(a!==s){var u=Ge("up"===r?{record:e,migrations:i.migrations,fromVersion:s,toVersion:a}:{record:e,migrations:i.migrations,fromVersion:a,toVersion:s});if("error"===u.type)return u;e=u.value}if(!i.migrations.subTypeKey)return{type:"success",value:e};var l=null===(n=i.migrations.subTypeMigrations)||void 0===n?void 0:n[e[i.migrations.subTypeKey]],c="subTypeVersions"in o?o.subTypeVersions[e[i.migrations.subTypeKey]]:null;if(void 0===l)return{type:"error",reason:$e.UnrecognizedSubtype};if(null==c)return{type:"error",reason:$e.IncompatibleSubtype};var d=Ge("up"===r?{record:e,migrations:l,fromVersion:c,toVersion:l.currentVersion}:{record:e,migrations:l,fromVersion:l.currentVersion,toVersion:c});return"error"===d.type?d:{type:"success",value:d.value}}},{key:"migrateStoreSnapshot",value:function(e,t){var n,r=this.options.snapshotMigrations;if(!r)return{type:"success",value:e};var i=r.currentVersion,o=null!==(n=t.storeVersion)&&void 0!==n?n:0;if(i<o)return{type:"error",reason:$e.TargetVersionTooOld};if(i>o){var a=function(e){for(var t=e.value,n=e.migrations,r=e.fromVersion,i=e.toVersion,o=r;o<i;){var a=o+1,s=n.migrators[a];if(!s)return{type:"error",reason:"target-version-too-new"};t=s.up(t),o=a}for(;o>i;){var u=o-1,l=n.migrators[o];if(!l)return{type:"error",reason:"target-version-too-old"};t=l.down(t),o=u}return{type:"success",value:t}}({value:e,migrations:r,fromVersion:o,toVersion:i});if("error"===a.type)return a;e=a.value}for(var s=[],u=0,l=Object.values(e);u<l.length;u++){var c=l[u],d=this.migratePersistedRecord(c,t);if("error"===d.type)return d;d.value&&d.value!==c&&s.push(d.value)}if(s.length){e=x({},e);var p,f=y(s);try{for(f.s();!(p=f.n()).done;){var h=p.value;e[h.id]=h}}catch(v){f.e(v)}finally{f.f()}}return{type:"success",value:e}}},{key:"ensureStoreIsUsable",value:function(e){var t,n;null===(t=(n=this.options).ensureStoreIsUsable)||void 0===t||t.call(n,e)}},{key:"serialize",value:function(){var e,t;return{schemaVersion:1,storeVersion:null!==(e=null===(t=this.options.snapshotMigrations)||void 0===t?void 0:t.currentVersion)&&void 0!==e?e:0,recordVersions:Object.fromEntries(K(this.types).map((function(e){return[e.typeName,e.migrations.subTypeKey&&e.migrations.subTypeMigrations?{version:e.migrations.currentVersion,subTypeKey:e.migrations.subTypeKey,subTypeVersions:e.migrations.subTypeMigrations?Object.fromEntries(Object.entries(e.migrations.subTypeMigrations).map((function(e){var t=N(e,2);return[t[0],t[1].currentVersion]}))):void 0}:{version:e.migrations.currentVersion}]})))}}},{key:"serializeEarliestVersion",value:function(){var e,t;return{schemaVersion:1,storeVersion:null!==(e=null===(t=this.options.snapshotMigrations)||void 0===t?void 0:t.firstVersion)&&void 0!==e?e:0,recordVersions:Object.fromEntries(K(this.types).map((function(e){return[e.typeName,e.migrations.subTypeKey&&e.migrations.subTypeMigrations?{version:e.migrations.firstVersion,subTypeKey:e.migrations.subTypeKey,subTypeVersions:e.migrations.subTypeMigrations?Object.fromEntries(Object.entries(e.migrations.subTypeMigrations).map((function(e){var t=N(e,2);return[t[0],t[1].firstVersion]}))):void 0}:{version:e.migrations.firstVersion}]})))}}}],[{key:"create",value:function(t,n){return new e(t,null!==n&&void 0!==n?n:{})}}]),e}(),Ze=function(e,t){if(e.schemaVersion>t.schemaVersion)return 1;if(e.schemaVersion<t.schemaVersion)return-1;if(e.storeVersion>t.storeVersion)return 1;if(e.storeVersion<t.storeVersion)return-1;for(var n=0,r=Object.keys(e.recordVersions);n<r.length;n++){var i=r[n],o=e.recordVersions[i],a=t.recordVersions[i];if(o.version>a.version)return 1;if(o.version<a.version)return-1;if("subTypeVersions"in o&&!("subTypeVersions"in a))return 1;if(!("subTypeVersions"in o)&&"subTypeVersions"in a)return-1;if("subTypeVersions"in o&&"subTypeVersions"in a)for(var s=0,u=Object.keys(o.subTypeVersions);s<u.length;s++){var l=u[s],c=o.subTypeVersions[l],d=a.subTypeVersions[l];if(c>d)return 1;if(c<d)return-1}}return 0};function Je(e,t,n){return Je=f()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&c(i,n.prototype),i},Je.apply(null,arguments)}function et(e){var t="function"===typeof Map?new Map:void 0;return et=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Je(e,arguments,p(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),c(r,e)},et(e)}var tt=function(e){d(n,e);var t=v(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];o(this,n);var a=function(e){if(!e.length)return null;var t,n="",r=y(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;"number"===typeof i?n+=".".concat(i):i.startsWith("(")?n.endsWith(")")?n="".concat(n.slice(0,-1),", ").concat(i.slice(1)):n+=i:n+=".".concat(i)}}catch(o){r.e(o)}finally{r.f()}return n.startsWith(".")?n.slice(1):n}(i),s=e.split("\n").map((function(e,t){return 0===t?e:"  ".concat(e)})).join("\n");return b(h(r=t.call(this,i?"At ".concat(a,": ").concat(s):s)),"name","ValidationError"),r.rawMessage=e,r.path=i,r}return l(n)}(et(Error));function nt(e,t){try{return t()}catch(n){if(n instanceof tt)throw new tt(n.rawMessage,[e].concat(M(n.path)));throw new tt(n.toString(),[e])}}function rt(e){if(null===e)return"null";if(Array.isArray(e))return"an array";var t=typeof e;switch(t){case"bigint":case"boolean":case"function":case"number":case"string":case"symbol":return"a ".concat(t);case"object":return"an ".concat(t);case"undefined":return"undefined";default:!function(e,t){var n=t&&e&&"object"===typeof e&&t in e?e[t]:e;throw new Error("Unknown switch case ".concat(n))}(t)}}var it=function(){function e(t){o(this,e),this.validationFn=t}return l(e,[{key:"validate",value:function(e){return this.validationFn(e)}},{key:"nullable",value:function(){var t=this;return new e((function(e){return null===e?null:t.validate(e)}))}},{key:"optional",value:function(){var t=this;return new e((function(e){if(void 0!==e)return t.validate(e)}))}},{key:"refine",value:function(t){var n=this;return new e((function(e){return t(n.validate(e))}))}},{key:"check",value:function(e,t){return"string"===typeof e?this.refine((function(n){return nt("(check ".concat(e,")"),(function(){return t(n)})),n})):this.refine((function(t){return e(t),t}))}}]),e}(),ot=function(e){d(n,e);var t=v(n);function n(e){var r;return o(this,n),r=t.call(this,(function(t){for(var n=mt.validate(t),r=function(t){nt(t,(function(){return e.validate(n[t])}))},i=0;i<n.length;i++)r(i);return n})),r.itemValidator=e,r}return l(n,[{key:"nonEmpty",value:function(){return this.check((function(e){if(0===e.length)throw new tt("Expected a non-empty array")}))}},{key:"lengthGreaterThan1",value:function(){return this.check((function(e){if(e.length<=1)throw new tt("Expected an array with length greater than 1")}))}}]),n}(it),at=function(e){d(n,e);var t=v(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o(this,n),(r=t.call(this,(function(t){if("object"!==typeof t||null===t)throw new tt("Expected object, got ".concat(rt(t)));for(var n=function(){var e=N(o[r],2),n=e[0],i=e[1];nt(n,(function(){i.validate(F(t,n))}))},r=0,o=Object.entries(e);r<o.length;r++)n();if(!i)for(var a=0,s=Object.keys(t);a<s.length;a++){var u=s[a];if(!B(e,u))throw new tt("Unexpected property",[u])}return t}))).config=e,r.shouldAllowUnknownProperties=i,r}return l(n,[{key:"allowUnknownProperties",value:function(){return new n(this.config,!0)}},{key:"extend",value:function(e){return new n(x(x({},this.config),e))}}]),n}(it),st=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return o(this,n),(a=t.call(this,(function(t){if("object"!==typeof t||null===t)throw new tt("Expected an object, got ".concat(rt(t)),[]);var n=F(t,e);if("string"!==typeof n)throw new tt('Expected a string for key "'.concat(e,'", got ').concat(rt(n)));var i=B(r,n)?r[n]:void 0;return void 0===i?a.unknownValueValidation(t,n):nt("(".concat(e," = ").concat(n,")"),(function(){return i.validate(t)}))}))).key=e,a.config=r,a.unknownValueValidation=i,a}return l(n,[{key:"validateUnknownVariants",value:function(e){return new n(this.key,this.config,e)}}]),n}(it),ut=function(e){d(n,e);var t=v(n);function n(e,r){var i;return o(this,n),(i=t.call(this,(function(t){if("object"!==typeof t||null===t)throw new tt("Expected object, got ".concat(rt(t)));for(var n=function(){var t=N(o[i],2),n=t[0],a=t[1];nt(n,(function(){e.validate(n),r.validate(a)}))},i=0,o=Object.entries(t);i<o.length;i++)n();return t}))).keyValidator=e,i.valueValidator=r,i}return l(n)}(it);function lt(e){return new it((function(t){if(typeof t!==e)throw new tt("Expected ".concat(e,", got ").concat(rt(t)));return t}))}new it((function(e){return e})),new it((function(e){return e}));var ct=lt("string"),dt=lt("number").check((function(e){if(Number.isNaN(e))throw new tt("Expected a number, got NaN");if(!Number.isFinite(e))throw new tt("Expected a finite number, got ".concat(e))})),pt=dt.check((function(e){if(e<0)throw new tt("Expected a positive number, got ".concat(e))})),ft=dt.check((function(e){if(e<=0)throw new tt("Expected a non-zero positive number, got ".concat(e))})),ht=dt.check((function(e){if(!Number.isInteger(e))throw new tt("Expected an integer, got ".concat(e))})),vt=(ht.check((function(e){if(e<0)throw new tt("Expected a positive integer, got ".concat(e))})),ht.check((function(e){if(e<=0)throw new tt("Expected a non-zero positive integer, got ".concat(e))})),lt("boolean"));lt("bigint");function gt(e){return new it((function(t){if(t!==e)throw new tt("Expected ".concat(e,", got ").concat(JSON.stringify(t)));return e}))}var mt=new it((function(e){if(!Array.isArray(e))throw new tt("Expected an array, got ".concat(rt(e)));return e}));function yt(e){return new ot(e)}new it((function(e){if("object"!==typeof e||null===e)throw new tt("Expected object, got ".concat(rt(e)));return e}));function bt(e){return new at(e)}function wt(e,t){return new ut(e,t)}function xt(e,t){return new st(e,t,(function(n,r){throw new tt("Expected one of ".concat(Object.keys(t).map((function(e){return JSON.stringify(e)})).join(" or "),", got ").concat(JSON.stringify(r)),[e])}))}function kt(e,t){return new it((function(n){return nt(n&&"object"===typeof n&&"id"in n&&"string"===typeof n.id?"".concat(e,"(id = ").concat(n.id,")"):e,(function(){return t.validate(n)}))}))}function St(e){return new it((function(t){if(!e.has(t)){var n=Array.from(e,(function(e){return JSON.stringify(e)})).join(" or ");throw new tt("Expected ".concat(n,", got ").concat(t))}return t}))}var _t=bt({x:dt,y:dt,z:dt.optional()}),Pt=bt({x:dt,y:dt,w:dt,h:dt}),Ct=new Set(["color","labelColor","dash","fill","size","opacity","font","align","icon","geo","arrowheadStart","arrowheadEnd","spline"]),Et=new Set(["black","grey","light-violet","violet","blue","light-blue","yellow","orange","green","light-green","light-red","red"]),It=new Set(["draw","solid","dashed","dotted"]),Mt=new Set(["none","semi","solid","pattern"]),Tt=new Set(["s","m","l","xl"]),jt=new Set(["0.1","0.25","0.5","0.75","1"]),At=new Set(["draw","sans","serif","mono"]),Ot=new Set(["start","middle","end","justify"]),zt=new Set(["rectangle","ellipse","triangle","diamond","pentagon","hexagon","octagon","star","rhombus","rhombus-2","oval","trapezoid","arrow-right","arrow-left","arrow-up","arrow-down","x-box"]),Dt=new Set(["arrow","triangle","square","dot","pipe","diamond","inverted","bar","none"]),Nt=new Set(["cubic","line"]),Rt=new Set(["activity","airplay","alert-circle","alert-octagon","alert-triangle","align-center","align-justify","align-left","align-right","anchor","aperture","archive","arrow-down-circle","arrow-down-left","arrow-down-right","arrow-down","arrow-left-circle","arrow-left","arrow-right-circle","arrow-right","arrow-up-circle","arrow-up-left","arrow-up-right","arrow-up","at-sign","award","bar-chart-2","bar-chart","battery-charging","battery","bell-off","bell","bluetooth","bold","book-open","book","bookmark","geo","briefcase","calendar","camera-off","camera","cast","check-circle","check-square","check","chevron-down","chevron-left","chevron-right","chevron-up","chevrons-down","chevrons-left","chevrons-right","chevrons-up","chrome","circle","clipboard","clock","cloud-drizzle","cloud-lightning","cloud-off","cloud-rain","cloud-snow","cloud","codepen","codesandbox","coffee","columns","command","compass","copy","corner-down-left","corner-down-right","corner-left-down","corner-left-up","corner-right-down","corner-right-up","corner-up-left","corner-up-right","cpu","credit-card","crop","crosshair","database","delete","disc","divide-circle","divide-square","divide","dollar-sign","download-cloud","download","dribbble","droplet","edit-2","edit-3","edit","external-link","eye-off","eye","facebook","fast-forward","feather","figma","file-minus","file-plus","file-text","file","film","filter","flag","folder-minus","folder-plus","folder","framer","frown","gift","git-branch","git-commit","git-merge","git-pull-request","github","gitlab","globe","grid","hard-drive","hash","headphones","heart","help-circle","hexagon","home","image","inbox","info","instagram","italic","key","layers","layout","life-buoy","link-2","link","linkedin","list","loader","lock","log-in","log-out","mail","map-pin","map","maximize-2","maximize","meh","menu","message-circle","message-square","mic-off","mic","minimize-2","minimize","minus-circle","minus-square","minus","monitor","moon","more-horizontal","more-vertical","mouse-pointer","move","music","navigation-2","navigation","octagon","package","paperclip","pause-circle","pause","pen-tool","percent","phone-call","phone-forwarded","phone-incoming","phone-missed","phone-off","phone-outgoing","phone","pie-chart","play-circle","play","plus-circle","plus-square","plus","pocket","power","printer","radio","refresh-ccw","refresh-cw","repeat","rewind","rotate-ccw","rotate-cw","rss","save","scissors","search","send","server","settings","share-2","share","shield-off","shield","shopping-bag","shopping-cart","shuffle","sidebar","skip-back","skip-forward","slack","slash","sliders","smartphone","smile","speaker","square","star","stop-circle","sun","sunrise","sunset","table","tablet","tag","target","terminal","thermometer","thumbs-down","thumbs-up","toggle-left","toggle-right","tool","trash-2","trash","trello","trending-down","trending-up","triangle","truck","tv","twitch","twitter","type","umbrella","underline","unlock","upload-cloud","upload","user-check","user-minus","user-plus","user-x","user","users","video-off","video","voicemail","volume-1","volume-2","volume-x","volume","watch","wifi-off","wifi","wind","x-circle","x-octagon","x-square","x","youtube","zap-off","zap","zoom-in","zoom-out"]);function Lt(e){return ct.refine((function(t){if(!t.startsWith("".concat(e,":")))throw new Error("".concat(e,' ID must start with "').concat(e,':"'));return t}))}var Bt,Ft,Ut=Lt("user"),Kt=Lt("asset"),Vt=Lt("page"),Wt=Lt("shape"),Ht=Lt("instance"),Yt=ct.refine((function(e){if(!e.startsWith("page:")&&!e.startsWith("shape:"))throw new Error('Parent ID must start with "page:" or "shape:"');return e})),Xt=St(Et),qt=St(It),$t=St(Mt),Gt=St(zt),Qt=St(Tt),Zt=St(At),Jt=St(Ot),en=St(Dt),tn=St(jt),nn=St(Rt),rn=St(Nt),on=kt("camera",bt({typeName:gt("camera"),id:Lt("camera"),x:dt,y:dt,z:dt})),an=0,sn=G("camera",{migrations:qe({firstVersion:an,currentVersion:an,migrators:{}}),validator:on}).withDefaultProperties((function(){return{x:0,y:0,z:1}})),un=kt("document",bt({typeName:gt("document"),id:gt("document:document"),gridSize:dt})),ln=0,cn=G("document",{migrations:qe({firstVersion:ln,currentVersion:ln,migrators:{}}),validator:un}).withDefaultProperties((function(){return{gridSize:10}})),dn=cn.createCustomId("document"),pn=St(new Set(["accent","white","black","selection-stroke","selection-fill","muted-1"])),fn=bt({color:pn,type:St(new Set(["none","default","pointer","cross","grab","rotate","grabbing","resize-edge","resize-corner","text","move","ew-resize","ns-resize","nesw-resize","nwse-resize","nesw-rotate","nwse-rotate","swne-rotate","senw-rotate"])),rotation:dt}),hn=new Set(["starting","paused","active","stopping"]),vn=bt({points:yt(_t),size:pt,color:pn,opacity:dt,state:St(hn)}),gn=bt({id:ct,type:St(new Set(["vertex","virtual","create"])),canBind:vt.optional(),index:ct,x:dt,y:dt}),mn=["exportBackground"],yn=["dialog"],bn=["isToolLocked"],wn=["propsForNextShape"],xn=["propsForNextShape"],kn=["labelColor"],Sn=kt("instance",bt({typeName:gt("instance"),id:Lt("instance"),userId:Ut,currentPageId:Vt,brush:Pt.nullable(),propsForNextShape:bt({color:Xt,labelColor:Xt,dash:qt,fill:$t,size:Qt,opacity:tn,font:Zt,align:Jt,icon:nn,geo:Gt,arrowheadStart:en,arrowheadEnd:en,spline:rn}),cursor:fn,scribble:vn.nullable(),isFocusMode:vt,isDebugMode:vt,isToolLocked:vt,exportBackground:vt,screenBounds:Pt})),_n=2,Pn=3,Cn=4,En=5,In=qe({firstVersion:0,currentVersion:En,migrators:(Bt={},b(Bt,1,{up:function(e){return x(x({},e),{},{exportBackground:!0})},down:function(e){e.exportBackground;return Ye(e,mn)}}),b(Bt,_n,{up:function(e){e.dialog;return Ye(e,yn)},down:function(e){return x(x({},e),{},{dialog:null})}}),b(Bt,Pn,{up:function(e){return x(x({},e),{},{isToolLocked:!1})},down:function(e){e.isToolLocked;return Ye(e,bn)}}),b(Bt,Cn,{up:function(e){var t=e.propsForNextShape;return x(x({},Ye(e,wn)),{},{propsForNextShape:Object.fromEntries(Object.entries(t).filter((function(e){var t=N(e,1)[0];return Ct.has(t)})))})},down:function(e){return e}}),b(Bt,En,{up:function(e){var t=e.propsForNextShape;return x(x({},Ye(e,xn)),{},{propsForNextShape:x(x({},t),{},{labelColor:"black"})})},down:function(e){var t=e.propsForNextShape,n=(t.labelColor,Ye(t,kn));return x(x({},e),{},{propsForNextShape:x({},n)})}}),Bt)}),Mn=G("instance",{migrations:In,validator:Sn}).withDefaultProperties((function(){return{propsForNextShape:{opacity:"1",color:"black",labelColor:"black",dash:"draw",fill:"none",size:"m",icon:"file",font:"draw",align:"middle",geo:"rectangle",arrowheadStart:"none",arrowheadEnd:"arrow",spline:"line"},brush:null,scribble:null,cursor:{type:"default",color:"black",rotation:0},isFocusMode:!1,exportBackground:!1,isDebugMode:!1,isToolLocked:!1,screenBounds:{x:0,y:0,w:1080,h:720}}})),Tn=kt("instance_page_state",bt({typeName:gt("instance_page_state"),id:Lt("instance_page_state"),instanceId:Ht,pageId:Vt,cameraId:Lt("camera"),selectedIds:yt(Wt),hintingIds:yt(Wt),erasingIds:yt(Wt),hoveredId:Wt.nullable(),editingId:Wt.nullable(),focusLayerId:Wt.nullable()})),jn=0,An=G("instance_page_state",{migrations:qe({currentVersion:jn,firstVersion:jn,migrators:{}}),validator:Tn}).withDefaultProperties((function(){return{editingId:null,selectedIds:[],hoveredId:null,erasingIds:[],hintingIds:[],focusLayerId:null}})),On=kt("page",bt({typeName:gt("page"),id:Vt,name:ct,index:ct})),zn=0,Dn=G("page",{migrations:qe({firstVersion:zn,currentVersion:zn,migrators:{}}),validator:On}),Nn=[{locale:"ar",label:"\u0639\u0631\u0628\u064a"},{locale:"ca",label:"Catal\xe0"},{locale:"da",label:"Danish"},{locale:"de",label:"Deutsch"},{locale:"en",label:"English"},{locale:"es",label:"Espa\xf1ol"},{locale:"fa",label:"\u0641\u0627\u0631\u0633\u06cc"},{locale:"fi",label:"Suomi"},{locale:"fr",label:"Fran\xe7ais"},{locale:"gl",label:"Galego"},{locale:"he",label:"\u05e2\u05d1\u05e8\u05d9\u05ea"},{locale:"it",label:"Italiano"},{locale:"ja",label:"\u65e5\u672c\u8a9e"},{locale:"ko-kr",label:"\ud55c\uad6d\uc5b4"},{locale:"ku",label:"\u06a9\u0648\u0631\u062f\u06cc"},{locale:"hi-in",label:"\u0939\u093f\u0928\u094d\u0926\u0940"},{locale:"hu",label:"Magyar"},{locale:"my",label:"\u1019\u103c\u1014\u103a\u1019\u102c\u1005\u102c"},{locale:"ne",label:"\u0928\u0947\u092a\u093e\u0932\u0940"},{locale:"no",label:"Norwegian"},{locale:"pl",label:"Polski"},{locale:"pt-br",label:"Portugu\xeas - Brasil"},{locale:"pt-pt",label:"Portugu\xeas - Europeu"},{locale:"ro",label:"Rom\xe2n\u0103"},{locale:"ru",label:"Russian"},{locale:"sv",label:"Svenska"},{locale:"te",label:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41"},{locale:"th",label:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22"},{locale:"tr",label:"T\xfcrk\xe7e"},{locale:"uk",label:"Ukrainian"},{locale:"vi",label:"Ti\u1ebfng Vi\u1ec7t"},{locale:"zh-cn",label:"Chinese - Simplified"},{locale:"zh-tw",label:"\u7e41\u9ad4\u4e2d\u6587 (\u53f0\u7063)"}],Rn=kt("user",bt({typeName:gt("user"),id:Ut,name:ct,locale:ct})),Ln=0,Bn=G("user",{migrations:qe({currentVersion:Ln,firstVersion:Ln,migrators:{}}),validator:Rn}).withDefaultProperties((function(){var e,t;if("undefined"!==typeof window&&window.navigator){var n=Nn.map((function(e){return e.locale}));t=window.navigator.languages.find((function(e){return n.indexOf(e)>-1}))}return{name:"New User",locale:null!==(e=t)&&void 0!==e?e:"en"}})),Fn=["isSnapMode"],Un=["isMobileMode"],Kn=kt("user_document",bt({typeName:gt("user_document"),id:Lt("user_document"),userId:Ut,isReadOnly:vt,isPenMode:vt,isGridMode:vt,isDarkMode:vt,isMobileMode:vt,isSnapMode:vt,lastUpdatedPageId:Vt.nullable(),lastUsedTabId:Ht.nullable()})),Vn=2,Wn=qe({firstVersion:0,currentVersion:Vn,migrators:(Ft={},b(Ft,1,{up:function(e){return x(x({},e),{},{isSnapMode:!1})},down:function(e){e.isSnapMode;return Ye(e,Fn)}}),b(Ft,Vn,{up:function(e){var t;return x(x({},e),{},{isMobileMode:null!==(t=e.isMobileMode)&&void 0!==t&&t})},down:function(e){e.isMobileMode;return Ye(e,Un)}}),Ft)}),Hn=G("user_document",{migrations:Wn,validator:Kn}).withDefaultProperties((function(){return{isReadOnly:!1,isPenMode:!1,isGridMode:!1,isDarkMode:!1,isMobileMode:!1,isSnapMode:!1,lastUpdatedPageId:null,lastUsedTabId:null}})),Yn=kt("user_presence",bt({typeName:gt("user_presence"),id:Lt("user_presence"),userId:Ut,lastUsedInstanceId:Ht.nullable(),lastActivityTimestamp:dt,cursor:_t,color:ct})),Xn=0,qn=G("user_presence",{migrations:qe({currentVersion:Xn,firstVersion:Xn,migrators:{}}),validator:Yn}).withDefaultProperties((function(){return{lastUsedInstanceId:null,lastActivityTimestamp:0,cursor:{x:0,y:0},color:"#000000"}}));function $n(e,t){return e.index<t.index?-1:e.index>t.index?1:0}var Gn=["#FF802B","#EC5E41","#F2555A","#F04F88","#E34BA9","#BD54C6","#9D5BD2","#7B66DC","#02B1CC","#11B3A3","#39B178","#55B467"];function Qn(e){"asset"===e.typeName&&("src"in e&&(e.src="<redacted>"),"src"in e.props&&(e.props.src="<redacted>"))}var Zn=function(e){var t=e.error,n=e.phase,r=e.record,i=e.recordBefore;throw A(t,{tags:{origin:"store.validateRecord",storePhase:n,isExistingValidationIssue:"initialize"===n},extras:{recordBefore:i?Qn(Y(i)):void 0,recordAfter:Qn(Y(r))}}),t};function Jn(e){var t=e.props,n=t.userId,r=t.instanceId;if(!e.has(dn))return e.put([cn.create({id:dn})]),Jn(e);var i=e.allRecords(),o=i.filter(Hn.isInstance).find((function(e){return e.userId===n}));if(!o)return e.put([Hn.create({userId:n})]),Jn(e);var a=i.filter(Dn.isInstance).sort($n);if(0===a.length)return e.put([Dn.create({name:"Page 1",index:"a1"})]),Jn(e);var s=i.filter(Mn.isInstance).find((function(e){return e.id===r}));if(!s){var u,l,c=o.lastUsedTabId?null===(u=e.get(o.lastUsedTabId))||void 0===u?void 0:u.propsForNextShape:void 0,d=null!==(l=null===o||void 0===o?void 0:o.lastUpdatedPageId)&&void 0!==l?l:a[0].id;return e.put([Mn.create({id:r,userId:n,currentPageId:d,propsForNextShape:c,exportBackground:!0})]),Jn(e)}var p=s.currentPageId;if(!a.find((function(e){return e.id===p})))return p=a[0].id,e.put([x(x({},s),{},{currentPageId:p})]),Jn(e);if(!i.find((function(e){return e.id===n})))return e.put([Bn.create({id:n})]),Jn(e);var f=i.filter(qn.isInstance).filter((function(e){return e.userId===n}));if(0===f.length)return e.put([qn.create({userId:n,color:Gn[Math.floor(Math.random()*Gn.length)]})]),Jn(e);f.length>1&&e.remove(f.slice(1).map((function(e){return e.id})));var h,v=y(a);try{var g=function(){var t=h.value,n=i.filter(An.isInstance).filter((function(e){return e.pageId===t.id&&e.instanceId===r}));if(n.length>1)e.remove(n.slice(1).map((function(e){return e.id})));else if(0===n.length){var o=sn.create({});return e.put([o,An.create({pageId:t.id,instanceId:r,cameraId:o.id})]),{v:Jn(e)}}if(e.put([x(x({},n[0]),{},{erasingIds:[],hoveredId:null,editingId:null})]),!e.get(n[0].cameraId))return e.put([sn.create({id:n[0].cameraId})]),{v:Jn(e)}};for(v.s();!(h=v.n()).done;){var m=g();if("object"===typeof m)return m.v}}catch(b){v.e(b)}finally{v.f()}}function er(e,t){return bt({id:Kt,typeName:gt("asset"),type:gt(e),props:t})}var tr,nr,rr=er("bookmark",bt({title:ct,description:ct,image:ct,src:ct.nullable()})),ir=0,or=qe({firstVersion:ir,currentVersion:ir,migrators:{}}),ar=["isAnimated"],sr=["width","height"],ur=["w","h"],lr=er("image",bt({w:dt,h:dt,name:ct,isAnimated:vt,mimeType:ct.nullable(),src:ct.nullable()})),cr=2,dr=qe({firstVersion:0,currentVersion:cr,migrators:(tr={},b(tr,1,{up:function(e){return x(x({},e),{},{props:x(x({},e.props),{},{isAnimated:!1})})},down:function(e){var t=e.props,n=(t.isAnimated,Ye(t,ar));return x(x({},e),{},{props:n})}}),b(tr,cr,{up:function(e){var t=e.props,n=t.width,r=t.height,i=Ye(t,sr);return x(x({},e),{},{props:x({w:n,h:r},i)})},down:function(e){var t=e.props,n=t.w,r=t.h,i=Ye(t,ur);return x(x({},e),{},{props:x({width:n,height:r},i)})}}),tr)}),pr=["isAnimated"],fr=["width","height"],hr=["w","h"],vr=er("video",bt({w:dt,h:dt,name:ct,isAnimated:vt,mimeType:ct.nullable(),src:ct.nullable()})),gr=2,mr=qe({firstVersion:0,currentVersion:gr,migrators:(nr={},b(nr,1,{up:function(e){return x(x({},e),{},{props:x(x({},e.props),{},{isAnimated:!1})})},down:function(e){var t=e.props,n=(t.isAnimated,Ye(t,pr));return x(x({},e),{},{props:n})}}),b(nr,gr,{up:function(e){var t=e.props,n=t.width,r=t.height,i=Ye(t,fr);return x(x({},e),{},{props:x({w:n,h:r},i)})},down:function(e){var t=e.props,n=t.w,r=t.h,i=Ye(t,hr);return x(x({},e),{},{props:x({width:n,height:r},i)})}}),nr)});function yr(e){var t=[],n=JSON.parse(JSON.stringify(e));switch(n.typeName){case"user_presence":n.cursor||(t.push("no cursor"),n.cursor={x:0,y:0}),void 0!==n.cursor.x&&null!==n.cursor.x||(t.push("no cursor x"),n.cursor.x=0),void 0!==n.cursor.y&&null!==n.cursor.y||(t.push("no cursor y"),n.cursor.y=0);break;case"asset":switch(n.type){case"image":case"video":n.props||(t.push("no props in asset"),n.props={w:100,h:100,name:"old_asset",isAnimated:!1,mimeType:null,src:null}),n.props.mimeType||(t.push("no mimeType in asset props"),n.props.mimeType="image/png"),n.props.src||(t.push("no src in asset props"),n.props.src=""),null==n.props.isAnimated&&(t.push("no isAnimated in asset props"),n.props.isAnimated=!1),void 0===n.props.name&&(n.props.name="asset"),"width"in n&&(t.push("width in asset"),n.props.w=n.width,delete n.width),"width"in n.props&&"number"===typeof n.props.width&&n.props.width&&(t.push("no w in asset props"),n.props.w=n.props.width,delete n.props.width),"height"in n&&(t.push("height in asset"),n.props.h=n.height,delete n.height),"height"in n.props&&"number"===typeof n.props.height&&n.props.height&&(t.push("no h in asset props"),n.props.h=n.props.height,delete n.props.height),n.props.w||(t.push("no w in asset props"),n.props.w=100),n.props.h||(t.push("no h in asset props"),n.props.h=100),"src"in n&&(t.push("src in asset"),n.props.src=n.src,delete n.src),"name"in n&&(t.push("name in asset"),delete n.name);break;case"bookmark":n.props||(t.push("no asset props"),n.props={title:"",description:"",image:"",src:"url"in n&&"string"===typeof n.url?n.url:""}),n.props.title||(t.push("no title in bookmark asset props"),n.props.title=""),n.props.description||(t.push("no description in bookmark asset props"),n.props.description=""),n.props.image||(t.push("no image in bookmark asset props"),n.props.image=""),"src"in n&&(t.push("leftover src in bookmark asset"),delete n.src),"width"in n&&(t.push("leftover width in bookmark asset"),delete n.width),"height"in n&&(t.push("leftover height in bookmark asset"),delete n.height),"name"in n&&(t.push("leftover name in bookmark asset"),delete n.name),"meta"in n&&delete n.meta}break;case"camera":void 0!==n.x&&null!==n.x||(t.push("no x in camera"),n.x=0),void 0!==n.y&&null!==n.y||(t.push("no y in camera"),n.y=0);break;case"instance":"props"in n&&(t.push("leftover props in instance"),delete n.props),void 0===n.isToolLocked&&(t.push("no isToolLocked in instance"),n.isToolLocked=!1),void 0===n.propsForNextShape&&(t.push("no props in instance"),n.propsForNextShape={opacity:"1",color:"black",dash:"draw",fill:"none",size:"m",icon:"file",font:"draw",align:"middle",geo:"rectangle",arrowheadStart:"none",arrowheadEnd:"arrow",spline:"line"}),"url"in n.propsForNextShape&&(t.push("leftover url in instance.propsForNextShape"),delete n.propsForNextShape.url),"lang"in n.propsForNextShape&&(t.push("leftover lang in instance.propsForNextShape"),delete n.propsForNextShape.lang),void 0===n.exportBackground&&(t.push("no export background in ".concat(n.typeName)),n.exportBackground=!1),void 0===n.brush&&(t.push("no brush in ".concat(n.typeName)),n.brush=null),void 0===n.scribble&&(t.push("no scribble in ".concat(n.typeName)),n.scribble=null),void 0!==n.dialog&&(t.push("no dialog in ".concat(n.typeName)),delete n.dialog),void 0===n.screenBounds&&(t.push("no screen bounds in ".concat(n.typeName)),n.screenBounds={x:0,y:0,w:1080,h:720});break;case"user":n.name||(t.push("no name in user"),n.name="User"),n.locale||(t.push("no locale in user"),n.locale="en"),"cursor"in n&&(t.push("leftover cursor in user"),delete n.cursor),"color"in n&&(t.push("leftover color in user"),delete n.color),"brush"in n&&(t.push("leftover brush in user"),delete n.brush),"selectedIds"in n&&(t.push("leftover selectedIds in user"),delete n.selectedIds),"scribble"in n&&(t.push("leftover scribble in user"),delete n.scribble),"currentPageId"in n&&(t.push("leftover currentPageId in user"),delete n.currentPageId);break;case"user_document":void 0===n.isMobileMode&&(t.push("no ismobilemode in user document"),n.isMobileMode=!1),void 0===n.isSnapMode&&(t.push("no issnapmode in user document"),n.isSnapMode=!1);break;case"shape":if("url"in n&&delete n.url,void 0!==n.x&&null!==n.x||(t.push("some bug in ".concat(n.typeName," ").concat(n.type)),n.x=0),void 0!==n.y&&null!==n.y||(t.push("some bug in ".concat(n.typeName," ").concat(n.type)),n.y=0),"image"===n.type&&(void 0===n.props.playing&&(t.push("some bug in ".concat(n.typeName," ").concat(n.type)),n.props.playing=!1),"loaded"in n.props&&delete n.props.loaded),"arrow"===n.type&&("binding"===n.props.start.type?(void 0!==n.props.start.normalizedAnchor.x&&null!==n.props.start.normalizedAnchor.x||(t.push("some bug in ".concat(n.typeName," ").concat(n.type)),n.props.start.normalizedAnchor.x=0),void 0!==n.props.start.normalizedAnchor.y&&null!==n.props.start.normalizedAnchor.y||(t.push("some bug in ".concat(n.typeName," ").concat(n.type)),n.props.start.normalizedAnchor.y=0)):(void 0!==n.props.start.x&&null!==n.props.start.x||(t.push("some bug in ".concat(n.typeName," ").concat(n.type)),n.props.start.x=0),void 0!==n.props.start.y&&null!==n.props.start.y||(t.push("some bug in ".concat(n.typeName," ").concat(n.type)),n.props.start.y=0),"boundShapeId"in n.props.start&&(t.push("leftover bound shape id in arrow"),delete n.props.start.boundShapeId),"normalizedAnchor"in n.props.start&&(t.push("leftover normalize anchor in arrow"),delete n.props.start.normalizedAnchor),"isExact"in n.props.start&&(t.push("leftover isExact in arrow"),delete n.props.start.isExact)),"binding"===n.props.end.type?(void 0!==n.props.end.normalizedAnchor.x&&null!==n.props.end.normalizedAnchor.x||(t.push("some bug in ".concat(n.typeName,"  ").concat(n.type)),n.props.end.normalizedAnchor.x=0),void 0!==n.props.end.normalizedAnchor.y&&null!==n.props.end.normalizedAnchor.y||(t.push("some bug in ".concat(n.typeName," ").concat(n.type)),n.props.end.normalizedAnchor.y=0)):(void 0!==n.props.end.x&&null!==n.props.end.x||(t.push("no x in arrow end"),n.props.end.x=0),void 0!==n.props.end.y&&null!==n.props.end.y||(t.push("no y in arrow end"),n.props.end.y=0),"boundShapeId"in n.props.end&&(t.push("leftover bound shape id in arrow"),delete n.props.end.boundShapeId),"normalizedAnchor"in n.props.end&&(t.push("leftover normalize anchor in arrow"),delete n.props.end.normalizedAnchor),"isExact"in n.props.end&&(t.push("leftover isExact in arrow"),delete n.props.end.isExact))),"note"!==n.type&&"video"!==n.type&&"image"!==n.type&&"geo"!==n.type&&"bookmark"!==n.type||void 0===n.props.url&&(t.push("missing url prop in ".concat(n.type," shape")),n.props.url=""),"bookmark"===n.type&&(void 0===n.props.assetId&&(t.push("some bug in ".concat(n.typeName,"  ").concat(n.type)),n.props.assetId=null),"src"in n&&(t.push("leftover src in bookmark"),delete n.src)),"geo"===n.type&&("width"in n.props&&(t.push("leftover width in geo"),delete n.props.width),"height"in n.props&&(t.push("leftover height in geo"),delete n.props.height)),"draw"===n.type){void 0===n.props.segments&&(t.push("some bug in ".concat(n.typeName,"  ").concat(n.type)),n.props.segments=[{points:[{x:0,y:0,z:.5},{x:1,y:1,z:.5}],type:"free"}]);var r,i=y(n.props.segments);try{for(i.s();!(r=i.n()).done;){var o,a=y(r.value.points);try{for(a.s();!(o=a.n()).done;){var s=o.value;void 0!==s.x&&null!==s.y||(t.push("some bug in ".concat(n.typeName)),s.x=0),void 0!==s.y&&null!==s.y||(t.push("some bug in ".concat(n.typeName)),s.y=0)}}catch(u){a.e(u)}finally{a.f()}}}catch(u){i.e(u)}finally{i.f()}"points"in n.props&&delete n.props.points}"bookmark"===n.type&&"loaded"in n.props&&(t.push("leftover loaded in bookmark"),delete n.props.loaded),"draw"===n.type&&"points"in n.props&&void 0===n.props.segments&&(n.props.segments=[{type:"free",points:n.props.points}]),"image"===n.type&&(n.props.w<1&&(n.props.w=1,t.push("zero w image in ".concat(n.typeName))),n.props.h<1&&(n.props.h=1,t.push("zero h image in ".concat(n.typeName)))),"embed"===n.type&&"loaded"in n.props&&(t.push("leftover loaded in embed"),delete n.props.loaded);break;case void 0:n=null}return{record:n,issues:t}}var br=kt("asset",xt("type",{image:lr,video:vr,bookmark:rr})),wr=0,xr=G("asset",{migrations:qe({firstVersion:wr,currentVersion:wr,migrators:{},subTypeKey:"type",subTypeMigrations:{image:dr,video:mr,bookmark:or}}),validator:br}),kr=["isLocked"],Sr=1,_r=qe({currentVersion:Sr,firstVersion:0,migrators:b({},Sr,{up:function(e){return x(x({},e),{},{isLocked:!1})},down:function(e){e.isLocked;return x({},Ye(e,kr))}})});function Pr(e){return!!e&&"shape"===e.typeName}function Cr(e){return!!e&&e.startsWith("shape:")}function Er(){return"shape:".concat(q())}var Ir=1,Mr=qe({firstVersion:0,currentVersion:Ir,migrators:b({},Ir,{up:function(e){return Object.fromEntries(Object.entries(e).filter((function(e){var t=N(e,2),n=(t[0],t[1]);return"shape"!==n.typeName||"icon"!==n.type&&"code"!==n.type})))},down:function(e){return e}})});function Tr(e,t){return bt({id:Wt,typeName:gt("shape"),x:dt,y:dt,rotation:dt,index:ct,parentId:Yt,type:gt(e),isLocked:vt,props:t})}var jr,Ar=["labelColor"],Or=xt("type",{binding:bt({type:gt("binding"),boundShapeId:Wt,normalizedAnchor:_t,isExact:vt}),point:bt({type:gt("point"),x:dt,y:dt})}),zr=Tr("arrow",bt({labelColor:Xt,color:Xt,fill:$t,dash:qt,size:Qt,opacity:tn,arrowheadStart:en,arrowheadEnd:en,font:Zt,start:Or,end:Or,bend:dt,text:ct})),Dr=1,Nr=qe({currentVersion:Dr,firstVersion:0,migrators:b({},Dr,{up:function(e){return x(x({},e),{},{props:x(x({},e.props),{},{labelColor:"black"})})},down:function(e){var t=e.props,n=(t.labelColor,Ye(t,Ar));return x(x({},e),{},{props:n})}})}),Rr=["assetId"],Lr=Tr("bookmark",bt({opacity:tn,w:ft,h:ft,assetId:Kt.nullable(),url:ct})),Br=1,Fr=qe({firstVersion:0,currentVersion:Br,migrators:b({},Br,{up:function(e){return void 0===e.props.assetId?x(x({},e),{},{props:x(x({},e.props),{},{assetId:null})}):e},down:function(e){if(null===e.props.assetId){var t=e.props,n=(t.assetId,Ye(t,Rr));return x(x({},e),{},{props:n})}return e}})}),Ur=["isPen"],Kr=Tr("draw",bt({color:Xt,fill:$t,dash:qt,size:Qt,opacity:tn,segments:yt(bt({type:St(new Set(["free","straight"])),points:yt(_t)})),isComplete:vt,isClosed:vt,isPen:vt})),Vr=1,Wr=qe({firstVersion:0,currentVersion:Vr,migrators:b({},Vr,{up:function(e){var t=e.props.segments[0].points;if(0===t.length)return x(x({},e),{},{props:x(x({},e.props),{},{isPen:!1})});var n=!(0===t[0].z||.5===t[0].z);return t[1]&&(n=n&&!(0===t[1].z||.5===t[1].z)),x(x({},e),{},{props:x(x({},e.props),{},{isPen:n})})},down:function(e){var t=e.props,n=(t.isPen,Ye(t,Ur));return x(x({},e),{},{props:x({},n)})}})}),Hr=["tmpOldUrl"],Yr={"allow-downloads-without-user-activation":!1,"allow-downloads":!1,"allow-modals":!1,"allow-orientation-lock":!1,"allow-pointer-lock":!1,"allow-popups":!0,"allow-popups-to-escape-sandbox":!1,"allow-presentation":!1,"allow-storage-access-by-user-activation":!1,"allow-top-navigation":!1,"allow-top-navigation-by-user-activation":!1,"allow-scripts":!0,"allow-same-origin":!0,"allow-forms":!0},Xr=Tr("embed",bt({opacity:tn,w:ft,h:ft,url:ct,tmpOldUrl:ct.optional(),doesResize:vt,overridePermissions:wt(St(new Set(Object.keys(Yr))),vt.optional()).optional()})),qr=/(^\/r\/[^/]+\/?$)/,$r=function(e){try{return new URL(e)}catch(t){return}},Gr=[{type:"tldraw",title:"tldraw",hostnames:["beta.tldraw.com","lite.tldraw.com"],minWidth:300,minHeight:300,width:720,height:500,doesResize:!0,toEmbedUrl:function(e){var t=$r(e);if(t&&t.pathname.match(qr))return e},fromEmbedUrl:function(e){var t=$r(e);if(t&&t.pathname.match(qr))return e}},{type:"codesandbox",title:"CodeSandbox",hostnames:["codesandbox.io"],minWidth:300,minHeight:300,width:720,height:500,doesResize:!0,toEmbedUrl:function(e){var t=$r(e),n=t&&t.pathname.match(/\/s\/([^/]+)\/?/);if(n)return"https://codesandbox.io/embed/".concat(n[1])},fromEmbedUrl:function(e){var t=$r(e),n=t&&t.pathname.match(/\/embed\/([^/]+)\/?/);if(n)return"https://codesandbox.io/s/".concat(n[1])}},{type:"codepen",title:"Codepen",hostnames:["codepen.io"],minWidth:300,minHeight:300,width:520,height:400,doesResize:!0,toEmbedUrl:function(e){var t=e.match(/https:\/\/codepen.io\/([^/]+)\/pen\/([^/]+)/);if(t){var n=N(t,3),r=(n[0],n[1]),i=n[2];return"https://codepen.io/".concat(r,"/embed/").concat(i)}},fromEmbedUrl:function(e){var t=e.match(/https:\/\/codepen.io\/([^/]+)\/embed\/([^/]+)/);if(t){var n=N(t,3),r=(n[0],n[1]),i=n[2];return"https://codepen.io/".concat(r,"/pen/").concat(i)}}},{type:"scratch",title:"Scratch",hostnames:["scratch.mit.edu"],width:520,height:400,doesResize:!1,toEmbedUrl:function(e){var t=e.match(/https?:\/\/scratch.mit.edu\/projects\/([^/]+)/);if(t){var n=N(t,2),r=(n[0],n[1]);return"https://scratch.mit.edu/projects/embed/".concat(r)}},fromEmbedUrl:function(e){var t=e.match(/https:\/\/scratch.mit.edu\/projects\/embed\/([^/]+)/);if(t){var n=N(t,2),r=(n[0],n[1]);return"https://scratch.mit.edu/projects/".concat(r)}}},{type:"youtube",title:"YouTube",hostnames:["*.youtube.com","youtube.com","youtu.be"],width:800,height:450,doesResize:!0,overridePermissions:{"allow-presentation":!0},isAspectRatioLocked:!0,toEmbedUrl:function(e){var t=$r(e);if(t){var n=t.hostname.replace(/^www./,"");if("youtu.be"===n){var r=t.pathname.split("/").filter(Boolean)[0];return"https://www.youtube.com/embed/".concat(r)}if(("youtube.com"===n||"m.youtube.com"===n)&&t.pathname.match(/^\/watch/)){var i=t.searchParams.get("v");return"https://www.youtube.com/embed/".concat(i)}}},fromEmbedUrl:function(e){var t=$r(e);if(t&&"youtube.com"===t.hostname.replace(/^www./,"")){var n=t.pathname.match(/^\/embed\/([^/]+)\/?/);if(n)return"https://www.youtube.com/watch?v=".concat(n[1])}}},{type:"figma",title:"Figma",hostnames:["figma.com"],width:720,height:500,doesResize:!0,toEmbedUrl:function(e){if(e.match(/https:\/\/([\w\.-]+\.)?figma.com\/(file|proto)\/([0-9a-zA-Z]{22,128})(?:\/.*)?$/)&&!e.includes("figma.com/embed"))return"https://www.figma.com/embed?embed_host=share&url=".concat(e)},fromEmbedUrl:function(e){var t=$r(e);if(t&&t.pathname.match(/^\/embed\/?$/)){var n=t.searchParams.get("url");if(n)return n}}},{type:"google_maps",title:"Google Maps",hostnames:["google.*"],width:720,height:500,doesResize:!0,toEmbedUrl:function(e){if(e.includes("/maps/")){var t,n=e.match(/@(.*),(.*),(.*)z/);if(n){var r=N(n,4),i=r[1],o=r[2],a=r[3],s=new URL(e).host.replace("www.","");t="https://".concat(s,"/maps/embed/v1/view?key=").concat({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NEXT_PUBLIC_GC_API_KEY,"&center=").concat(i,",").concat(o,"&zoom=").concat(a)}else t="";return t}},fromEmbedUrl:function(e){var t=$r(e);if(t&&(t.pathname.match(/^\/maps\/embed\/v1\/view\/?$/)&&t.searchParams.has("center")&&t.searchParams.get("zoom"))){var n=t.searchParams.get("zoom"),r=N(t.searchParams.get("center").split(","),2),i=r[0],o=r[1];return"https://www.google.com/maps/@".concat(i,",").concat(o,",").concat(n,"z")}}},{type:"google_calendar",title:"Google Calendar",hostnames:["calendar.google.*"],width:720,height:500,minWidth:460,minHeight:360,doesResize:!0,instructionLink:"https://support.google.com/calendar/answer/41207?hl=en",toEmbedUrl:function(e){var t=$r(e),n=null===t||void 0===t?void 0:t.searchParams.get("cid");if(null!==t&&void 0!==t&&t.pathname.match(/\/calendar\/u\/0/)&&n){t.pathname="/calendar/embed";for(var r=0,i=Array.from(t.searchParams.keys());r<i.length;r++){var o=i[r];t.searchParams.delete(o)}return t.searchParams.set("src",n),t.href}},fromEmbedUrl:function(e){var t=$r(e),n=null===t||void 0===t?void 0:t.searchParams.get("src");if(null!==t&&void 0!==t&&t.pathname.match(/\/calendar\/embed/)&&n){t.pathname="/calendar/u/0";for(var r=0,i=Array.from(t.searchParams.keys());r<i.length;r++){var o=i[r];t.searchParams.delete(o)}return t.searchParams.set("cid",n),t.href}}},{type:"google_slides",title:"Google Slides",hostnames:["docs.google.*"],width:720,height:500,minWidth:460,minHeight:360,doesResize:!0,toEmbedUrl:function(e){var t=$r(e);if(null!==t&&void 0!==t&&t.pathname.match(/^\/presentation/)&&null!==t&&void 0!==t&&t.pathname.match(/\/pub\/?$/)){t.pathname=t.pathname.replace(/\/pub$/,"/embed");for(var n=0,r=Array.from(t.searchParams.keys());n<r.length;n++){var i=r[n];t.searchParams.delete(i)}return t.href}},fromEmbedUrl:function(e){var t=$r(e);if(null!==t&&void 0!==t&&t.pathname.match(/^\/presentation/)&&null!==t&&void 0!==t&&t.pathname.match(/\/embed\/?$/)){t.pathname=t.pathname.replace(/\/embed$/,"/pub");for(var n=0,r=Array.from(t.searchParams.keys());n<r.length;n++){var i=r[n];t.searchParams.delete(i)}return t.href}}},{type:"github_gist",title:"GitHub Gist",hostnames:["gist.github.com"],width:720,height:500,doesResize:!0,toEmbedUrl:function(e){var t=$r(e);if(t&&t.pathname.match(/\/([^/]+)\/([^/]+)/))return e},fromEmbedUrl:function(e){var t=$r(e);if(t&&t.pathname.match(/\/([^/]+)\/([^/]+)/))return e}},{type:"replit",title:"Replit",hostnames:["replit.com"],width:720,height:500,doesResize:!0,toEmbedUrl:function(e){var t=$r(e);if(t&&t.pathname.match(/\/@([^/]+)\/([^/]+)/))return"".concat(e,"?embed=true")},fromEmbedUrl:function(e){var t=$r(e);if(t&&t.pathname.match(/\/@([^/]+)\/([^/]+)/)&&t.searchParams.has("embed"))return t.searchParams.delete("embed"),t.href}},{type:"felt",title:"Felt",hostnames:["felt.com"],width:720,height:500,doesResize:!0,toEmbedUrl:function(e){var t=$r(e);if(t&&t.pathname.match(/^\/map\//))return t.origin+"/embed"+t.pathname},fromEmbedUrl:function(e){var t=$r(e);if(t&&t.pathname.match(/^\/embed\/map\//))return t.pathname=t.pathname.replace(/^\/embed/,""),t.href}},{type:"spotify",title:"Spotify",hostnames:["open.spotify.com"],width:720,height:500,minHeight:500,overrideOutlineRadius:12,doesResize:!0,toEmbedUrl:function(e){var t=$r(e);if(t&&t.pathname.match(/^\/(artist|album)\//))return t.origin+"/embed"+t.pathname},fromEmbedUrl:function(e){var t=$r(e);if(t&&t.pathname.match(/^\/embed\/(artist|album)\//))return t.origin+t.pathname.replace(/^\/embed/,"")}},{type:"vimeo",title:"Vimeo",hostnames:["vimeo.com","player.vimeo.com"],width:640,height:360,doesResize:!0,isAspectRatioLocked:!0,toEmbedUrl:function(e){var t=$r(e);if(t&&"vimeo.com"===t.hostname&&t.pathname.match(/^\/[0-9]+/))return"https://player.vimeo.com/video/"+t.pathname.split("/")[1]+"?title=0&byline=0"},fromEmbedUrl:function(e){var t=$r(e);if(t&&"player.vimeo.com"===t.hostname){var n=t.pathname.match(/^\/video\/([^/]+)\/?$/);if(n)return"https://vimeo.com/"+n[1]}}},{type:"excalidraw",title:"Excalidraw",hostnames:["excalidraw.com"],width:720,height:500,doesResize:!0,isAspectRatioLocked:!0,toEmbedUrl:function(e){var t=$r(e);if(t&&t.hash.match(/#room=/))return e},fromEmbedUrl:function(e){var t=$r(e);if(t&&t.hash.match(/#room=/))return e}},{type:"observable",title:"Observable",hostnames:["observablehq.com"],width:720,height:500,doesResize:!0,isAspectRatioLocked:!1,backgroundColor:"#fff",toEmbedUrl:function(e){var t=$r(e);if(t&&t.pathname.match(/^\/@([^/]+)\/([^/]+)\/?$/))return"".concat(t.origin,"/embed").concat(t.pathname,"?cell=*");if(t&&t.pathname.match(/^\/d\/([^/]+)\/?$/)){var n=t.pathname.replace(/^\/d/,"");return"".concat(t.origin,"/embed").concat(n,"?cell=*")}},fromEmbedUrl:function(e){var t=$r(e);return t&&t.pathname.match(/^\/embed\/@([^/]+)\/([^/]+)\/?$/)?"".concat(t.origin).concat(t.pathname.replace("/embed",""),"#cell-*"):t&&t.pathname.match(/^\/embed\/([^/]+)\/?$/)?"".concat(t.origin).concat(t.pathname.replace("/embed","/d"),"#cell-*"):void 0}}],Qr=1,Zr=qe({currentVersion:Qr,firstVersion:0,migrators:b({},Qr,{up:function(e){for(var t,n,r=e.props.url,i=new URL(r).host.replace("www.",""),o=0,a=Gr;o<a.length;o++){var s=a[o];if(s.hostnames.includes(i))try{n=s.fromEmbedUrl(r)}catch(u){console.warn(u)}}return x(x({},e),{},{props:x(x({},e.props),{},{tmpOldUrl:e.props.url,url:null!==(t=n)&&void 0!==t?t:""})})},down:function(e){var t,n=e.props.tmpOldUrl;if(!n||""===n)for(var r=e.props.url,i=new URL(r).host.replace("www.",""),o=0,a=Gr;o<a.length;o++){var s=a[o];if(s.hostnames.includes(i))try{n=s.toEmbedUrl(r)}catch(c){console.warn(c)}}var u=e.props,l=(u.tmpOldUrl,Ye(u,Hr));return x(x({},e),{},{props:x(x({},l),{},{url:null!==(t=n)&&void 0!==t?t:""})})}})}),Jr=Tr("frame",bt({opacity:tn,w:ft,h:ft,name:ct})),ei=0,ti=qe({currentVersion:ei,firstVersion:ei,migrators:{}}),ni=["url"],ri=["labelColor"],ii=Tr("geo",bt({geo:Gt,labelColor:Xt,color:Xt,fill:$t,dash:qt,size:Qt,opacity:tn,font:Zt,align:Jt,url:ct,w:ft,h:ft,growY:pt,text:ct})),oi=2,ai=qe({firstVersion:0,currentVersion:oi,migrators:(jr={},b(jr,1,{up:function(e){return x(x({},e),{},{props:x(x({},e.props),{},{url:""})})},down:function(e){var t=e.props,n=(t.url,Ye(t,ni));return x(x({},e),{},{props:n})}}),b(jr,oi,{up:function(e){return x(x({},e),{},{props:x(x({},e.props),{},{labelColor:"black"})})},down:function(e){var t=e.props,n=(t.labelColor,Ye(t,ri));return x(x({},e),{},{props:n})}}),jr)}),si=Tr("group",bt({opacity:tn})),ui=0,li=qe({currentVersion:ui,firstVersion:ui,migrators:{}}),ci=(Tr("icon",bt({size:Qt,icon:nn,dash:qt,color:Xt,opacity:tn,scale:dt})),0),di=(qe({currentVersion:ci,firstVersion:ci,migrators:{}}),["url"]),pi=Tr("image",bt({opacity:tn,w:ft,h:ft,playing:vt,url:ct,assetId:Kt.nullable()})),fi=1,hi=qe({firstVersion:0,currentVersion:fi,migrators:b({},fi,{up:function(e){return x(x({},e),{},{props:x(x({},e.props),{},{url:""})})},down:function(e){var t=e.props,n=(t.url,Ye(t,di));return x(x({},e),{},{props:n})}})}),vi=Tr("line",bt({color:Xt,dash:qt,size:Qt,opacity:tn,spline:rn,handles:wt(ct,gn)})),gi=0,mi=qe({currentVersion:gi,firstVersion:gi,migrators:{}}),yi=["url"],bi=Tr("note",bt({color:Xt,size:Qt,font:Zt,align:Jt,opacity:tn,growY:pt,url:ct,text:ct})),wi=1,xi=qe({firstVersion:0,currentVersion:wi,migrators:b({},wi,{up:function(e){return x(x({},e),{},{props:x(x({},e.props),{},{url:""})})},down:function(e){var t=e.props,n=(t.url,Ye(t,yi));return x(x({},e),{},{props:n})}})}),ki=Tr("text",bt({color:Xt,size:Qt,font:Zt,align:Jt,opacity:tn,w:ft,text:ct,scale:ft,autoSize:vt})),Si=0,_i=qe({firstVersion:Si,currentVersion:Si,migrators:{}}),Pi=["url"],Ci=Tr("video",bt({opacity:tn,w:ft,h:ft,time:dt,playing:vt,url:ct,assetId:Kt.nullable()})),Ei=1,Ii=qe({firstVersion:0,currentVersion:Ei,migrators:b({},Ei,{up:function(e){return x(x({},e),{},{props:x(x({},e.props),{},{url:""})})},down:function(e){var t=e.props,n=(t.url,Ye(t,Pi));return x(x({},e),{},{props:n})}})}),Mi=n(184);function Ti(){Ti=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(M){l=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),s=new C(i||[]);return r(a,"_invoke",{value:k(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(M){return{type:"throw",arg:M}}}e.wrap=c;var p={};function f(){}function h(){}function v(){}var g={};l(g,o,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(E([])));y&&y!==t&&n.call(y,o)&&(g=y);var b=v.prototype=f.prototype=Object.create(g);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function i(r,o,s,u){var l=d(e[r],e,o);if("throw"!==l.type){var c=l.arg,p=c.value;return p&&"object"==a(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){i("next",e,s,u)}),(function(e){i("throw",e,s,u)})):t.resolve(p).then((function(e){c.value=e,s(c)}),(function(e){return i("throw",e,s,u)}))}u(l.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return I()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=d(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=d(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,p;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=v,r(b,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:h,configurable:!0}),h.displayName=l(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(x.prototype),l(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new x(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),l(b,u,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=E,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}function ji(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,i)}function Ai(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){ji(o,r,i,a,s,"next",e)}function s(e){ji(o,r,i,a,s,"throw",e)}a(void 0)}))}}function Oi(e){return z(e)||I(e)||m(e)||D()}var zi={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},easeInSine:function(e){return 1-Math.cos(e*Math.PI/2)},easeOutSine:function(e){return Math.sin(e*Math.PI/2)},easeInOutSine:function(e){return-(Math.cos(Math.PI*e)-1)/2},easeInExpo:function(e){return e<=0?0:Math.pow(2,10*e-10)},easeOutExpo:function(e){return e>=1?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return e<=0?0:e>=1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}},Di=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;o(this,e),this.x=t,this.y=n,this.z=r}return l(e,[{key:"pressure",get:function(){return this.z}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.x,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.y,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.z;return this.x=e,this.y=t,this.z=n,this}},{key:"setTo",value:function(e){var t=e.x,n=void 0===t?0:t,r=e.y,i=void 0===r?0:r,o=e.z,a=void 0===o?1:o;return this.x=n,this.y=i,this.z=a,this}},{key:"rot",value:function(e){if(0===e)return this;var t=this.x,n=this.y,r=Math.sin(e),i=Math.cos(e);return this.x=t*i-n*r,this.y=t*r+n*i,this}},{key:"rotWith",value:function(e,t){if(0===t)return this;var n=this.x-e.x,r=this.y-e.y,i=Math.sin(t),o=Math.cos(t);return this.x=e.x+(n*o-r*i),this.y=e.y+(n*i+r*o),this}},{key:"clone",value:function(){return new e(this.x,this.y,this.z)}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subXY",value:function(e,t){return this.x-=e,this.y-=t,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addXY",value:function(e,t){return this.x+=e,this.y+=t,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"clamp",value:function(e,t){return this.x=Math.min(Math.max(this.x,e),null!==t&&void 0!==t?t:this.x),this.y=Math.min(Math.max(this.y,e),null!==t&&void 0!==t?t:this.y),this}},{key:"div",value:function(e){return this.x/=e,this.y/=e,this}},{key:"divV",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"mul",value:function(e){return this.x*=e,this.y*=e,this}},{key:"mulV",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"abs",value:function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}},{key:"nudge",value:function(t,n){var r=e.Tan(t,this);return this.add(r.mul(n))}},{key:"neg",value:function(){return this.x*=-1,this.y*=-1,this}},{key:"cross",value:function(e){return this.x=this.y*e.z-this.z*e.y,this.y=this.z*e.x-this.x*e.z,this}},{key:"dpr",value:function(t){return e.Dpr(this,t)}},{key:"cpr",value:function(t){return e.Cpr(this,t)}},{key:"len2",value:function(){return e.Len2(this)}},{key:"len",value:function(){return e.Len(this)}},{key:"pry",value:function(t){return e.Pry(this,t)}},{key:"per",value:function(){var e=this.x,t=this.y;return this.x=t,this.y=-e,this}},{key:"uni",value:function(){return e.Uni(this)}},{key:"tan",value:function(t){return e.Tan(this,t)}},{key:"dist",value:function(t){return e.Dist(this,t)}},{key:"distanceToLineSegment",value:function(t,n){return e.DistanceToLineSegment(t,n,this)}},{key:"slope",value:function(t){return e.Slope(this,t)}},{key:"snapToGrid",value:function(e){return this.x=Math.round(this.x/e)*e,this.y=Math.round(this.y/e)*e,this}},{key:"angle",value:function(t){return e.Angle(this,t)}},{key:"toAngle",value:function(){return e.ToAngle(this)}},{key:"lrp",value:function(e,t){return this.x=this.x+(e.x-this.x)*t,this.y=this.y+(e.y-this.y)*t,this}},{key:"equals",value:function(t){return e.Equals(this,t)}},{key:"equalsXY",value:function(t,n){return e.EqualsXY(this,t,n)}},{key:"norm",value:function(){var e=this.len();return this.x=0===e?0:this.x/e,this.y=0===e?0:this.y/e,this}},{key:"toFixed",value:function(){return e.ToFixed(this)}},{key:"toString",value:function(){return e.ToString(e.ToFixed(this))}},{key:"toJson",value:function(){return e.ToJson(this)}},{key:"toArray",value:function(){return e.ToArray(this)}}],[{key:"Add",value:function(t,n){return new e(t.x+n.x,t.y+n.y)}},{key:"AddXY",value:function(t,n,r){return new e(t.x+n,t.y+r)}},{key:"Sub",value:function(t,n){return new e(t.x-n.x,t.y-n.y)}},{key:"SubXY",value:function(t,n,r){return new e(t.x-n,t.y-r)}},{key:"AddScalar",value:function(t,n){return new e(t.x+n,t.y+n)}},{key:"SubScalar",value:function(t,n){return new e(t.x-n,t.y-n)}},{key:"Div",value:function(t,n){return new e(t.x/n,t.y/n)}},{key:"Mul",value:function(t,n){return new e(t.x*n,t.y*n)}},{key:"DivV",value:function(t,n){return new e(t.x/n.x,t.y/n.y)}},{key:"MulV",value:function(t,n){return new e(t.x*n.x,t.y*n.y)}},{key:"Neg",value:function(t){return new e(-t.x,-t.y)}},{key:"Per",value:function(t){return new e(t.y,-t.x)}},{key:"Dist2",value:function(t,n){return e.Sub(t,n).len2()}},{key:"Abs",value:function(t){return new e(Math.abs(t.x),Math.abs(t.y))}},{key:"Dist",value:function(e,t){return Math.hypot(e.y-t.y,e.x-t.x)}},{key:"Dpr",value:function(e,t){return e.x*t.x+e.y*t.y}},{key:"Cross",value:function(t,n){return new e(t.y*n.z-t.z*n.y,t.z*n.x-t.x*n.z)}},{key:"Cpr",value:function(e,t){return e.x*t.y-t.x*e.y}},{key:"Len2",value:function(e){return e.x*e.x+e.y*e.y}},{key:"Len",value:function(t){return Math.sqrt(e.Len2(t))}},{key:"Pry",value:function(t,n){return e.Dpr(t,n)/e.Len(n)}},{key:"Uni",value:function(t){return e.Div(t,e.Len(t))}},{key:"Tan",value:function(t,n){return e.Uni(e.Sub(t,n))}},{key:"Min",value:function(t,n){return new e(Math.min(t.x,n.x),Math.min(t.y,n.y))}},{key:"Max",value:function(t,n){return new e(Math.max(t.x,n.x),Math.max(t.y,n.y))}},{key:"From",value:function(t){var n=t.x,r=t.y,i=t.z;return new e(n,r,void 0===i?1:i)}},{key:"FromArray",value:function(t){return new e(t[0],t[1])}},{key:"Rot",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=Math.sin(n),i=Math.cos(n);return new e(t.x*i-t.y*r,t.x*r+t.y*i)}},{key:"RotWith",value:function(t,n,r){var i=t.x-n.x,o=t.y-n.y,a=Math.sin(r),s=Math.cos(r);return new e(n.x+(i*s-o*a),n.y+(i*a+o*s))}},{key:"NearestPointOnLineThroughPoint",value:function(t,n,r){return e.Mul(n,e.Sub(r,t).pry(n)).add(t)}},{key:"NearestPointOnLineSegment",value:function(t,n,r){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=e.Tan(n,t),a=e.Add(t,e.Mul(o,e.Sub(r,t).pry(o)));if(i){if(a.x<Math.min(t.x,n.x))return e.Cast(t.x<n.x?t:n);if(a.x>Math.max(t.x,n.x))return e.Cast(t.x>n.x?t:n);if(a.y<Math.min(t.y,n.y))return e.Cast(t.y<n.y?t:n);if(a.y>Math.max(t.y,n.y))return e.Cast(t.y>n.y?t:n)}return a}},{key:"DistanceToLineThroughPoint",value:function(t,n,r){return e.Dist(r,e.NearestPointOnLineThroughPoint(t,n,r))}},{key:"DistanceToLineSegment",value:function(t,n,r){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return e.Dist(r,e.NearestPointOnLineSegment(t,n,r,i))}},{key:"Snap",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new e(Math.round(t.x/n)*n,Math.round(t.y/n)*n)}},{key:"Cast",value:function(t){return t instanceof e?t:e.From(t)}},{key:"Slope",value:function(e,t){return e.x===t.y?NaN:(e.y-t.y)/(e.x-t.x)}},{key:"Angle",value:function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}},{key:"Lrp",value:function(t,n,r){return e.Sub(n,t).mul(r).add(t)}},{key:"Med",value:function(t,n){return new e((t.x+n.x)/2,(t.y+n.y)/2)}},{key:"Equals",value:function(e,t){return Math.abs(e.x-t.x)<1e-4&&Math.abs(e.y-t.y)<1e-4}},{key:"EqualsXY",value:function(e,t,n){return e.x===t&&e.y===n}},{key:"Clockwise",value:function(e,t,n){return(n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y)<0}},{key:"Rescale",value:function(t,n){var r=e.Len(t);return new e(n*t.x/r,n*t.y/r)}},{key:"ScaleWithOrigin",value:function(t,n,r){return e.Sub(t,r).mul(n).add(r)}},{key:"ToFixed",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return new e(+t.x.toFixed(n),+t.y.toFixed(n),+t.z.toFixed(n))}},{key:"Nudge",value:function(t,n,r){return e.Add(t,e.Tan(n,t).mul(r))}},{key:"ToString",value:function(e){return"".concat(e.x,", ").concat(e.y)}},{key:"ToAngle",value:function(e){var t=Math.atan2(e.y,e.x);return t<0&&(t+=2*Math.PI),t}},{key:"ToArray",value:function(e){return[e.x,e.y,e.z]}},{key:"ToJson",value:function(e){return{x:e.x,y:e.y,z:e.z}}},{key:"Average",value:function(t){for(var n=t.length,r=new e(0,0),i=0;i<n;i++)r.add(t[i]);return r.div(n)}},{key:"Clamp",value:function(t,n,r){return new e(Math.min(Math.max(t.x,n),null!==r&&void 0!==r?r:t.x),Math.min(Math.max(t.y,n),null!==r&&void 0!==r?r:t.y))}},{key:"PointsBetween",value:function(t,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,i=[],o=0;o<r;o++){var a=zi.easeInQuad(o/(r-1)),s=e.Lrp(t,n,a);s.z=Math.min(1,.5+.65*Math.abs(.5-Ni(a))),i.push(s)}return i}},{key:"SnapToGrid",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return new e(Math.round(t.x/n)*n,Math.round(t.y/n)*n)}}]),e}(),Ni=function(e){return e<.5?2*e*e:(4-2*e)*e-1},Ri=Math.PI,Li=Ri/2,Bi=2*Ri,Fi=Math.PI/180,Ui=Math.sin;function Ki(e,t,n){return Math.max(t,"undefined"!==typeof n?Math.min(e,n):e)}function Vi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e10;return e?Math.round(e*t)/t:0}function Wi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6;return Math.abs(e-t)<=n}function Hi(e,t){var n=Math.pow(e-t,2)/Math.pow(e+t,2);return Ri*(e+t)*(1+3*n/(10+Math.sqrt(4-3*n)))}function Yi(e){return(e%=Bi)<0?e+=Bi:0===e&&(e=0),e}function Xi(e,t){var n=(t-e)%Bi;return 2*n%Bi-n}function qi(e,t,n){return e+Xi(e,t)*n}function $i(e,t){return Xi(e,t)}function Gi(e){return(Bi+e)%Bi}function Qi(e,t){var n=Bi/t,r=Math.floor((Gi(e)+n/2)/n)*n%Bi;return r<Ri&&(r+=Bi),r>Ri&&(r-=Bi),r}function Zi(e,t){return e===t||Wi(e%(Math.PI/2)-t%(Math.PI/2),0)}function Ji(e){return 180*e/Ri}function eo(e,t,n,r){var i=function(e,t,n){return $i(Di.Angle(e,t),Di.Angle(e,n))}(e,n,r);return t*Bi*(i/Bi)}function to(e,t,n,r){return new Di(e+n*Math.cos(r),t+n*Math.sin(r))}function no(e,t,n){for(var r=e/2,i=t/2,o=[],a=0;a<n;a++){var s=a*(Bi/n)-Li;o.push(new Di(r+r*Math.cos(s),i+i*Math.sin(s)))}return o}function ro(e,t,n,r){return e<r&&n<t}function io(e,t,n,r){var i=Math.max(e,n),o=Math.min(t,r);return i<=o?[i,o]:null}function oo(e,t,n){return(t.x-e.x)*(n.y-e.y)-(n.x-e.x)*(t.y-e.y)}function ao(e,t){for(var n,r,i=0,o=0;o<t.length;o++)n=t[o],r=t[(o+1)%t.length],n.y<=e.y?r.y>e.y&&oo(n,r,e)>0&&(i+=1):r.y<=e.y&&oo(n,r,e)<0&&(i-=1);return 0!==i}function so(e){return+e.toFixed(4)}var uo=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;o(this,e),b(this,"x",0),b(this,"y",0),b(this,"w",0),b(this,"h",0),this.x=t,this.y=n,this.w=r,this.h=i}return l(e,[{key:"point",get:function(){return new Di(this.x,this.y)},set:function(e){this.x=e.x,this.y=e.y}},{key:"minX",get:function(){return this.x},set:function(e){this.x=e}},{key:"midX",get:function(){return this.x+this.w/2}},{key:"maxX",get:function(){return this.x+this.w}},{key:"minY",get:function(){return this.y},set:function(e){this.y=e}},{key:"midY",get:function(){return this.y+this.h/2}},{key:"maxY",get:function(){return this.y+this.h}},{key:"width",get:function(){return this.w},set:function(e){this.w=e}},{key:"height",get:function(){return this.h},set:function(e){this.h=e}},{key:"aspectRatio",get:function(){return this.width/this.height}},{key:"center",get:function(){return new Di(this.midX,this.midY)},set:function(e){this.minX=e.x-this.width/2,this.minY=e.y-this.height/2}},{key:"corners",get:function(){return[new Di(this.minX,this.minY),new Di(this.maxX,this.minY),new Di(this.maxX,this.maxY),new Di(this.minX,this.maxY)]}},{key:"snapPoints",get:function(){return[new Di(this.minX,this.minY),new Di(this.maxX,this.minY),new Di(this.maxX,this.maxY),new Di(this.minX,this.maxY),this.center]}},{key:"sides",get:function(){var e=this.corners;return[[e[0],e[1]],[e[1],e[2]],[e[2],e[3]],[e[3],e[0]]]}},{key:"size",get:function(){return new Di(this.w,this.h)}},{key:"toFixed",value:function(){return this.x=Vi(this.x),this.y=Vi(this.y),this.w=Vi(this.w),this.h=Vi(this.h),this}},{key:"setTo",value:function(e){return this.x=e.x,this.y=e.y,this.w=e.w,this.h=e.h,this}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.x=e,this.y=t,this.w=n,this.h=r,this}},{key:"expand",value:function(e){var t=Math.min(this.minX,e.minX),n=Math.min(this.minY,e.minY),r=Math.max(this.maxX,e.maxX),i=Math.max(this.maxY,e.maxY);return this.x=t,this.y=n,this.w=r-t,this.h=i-n,this}},{key:"expandBy",value:function(e){return this.x-=e,this.y-=e,this.w+=2*e,this.h+=2*e,this}},{key:"scale",value:function(e){return this.x/=e,this.y/=e,this.w/=e,this.h/=e,this}},{key:"clone",value:function(){return new e(this.x,this.y,this.w,this.h)}},{key:"translate",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"snapToGrid",value:function(e){var t=Math.round(this.minX/e)*e,n=Math.round(this.minY/e)*e,r=Math.round(this.maxX/e)*e,i=Math.round(this.maxY/e)*e;this.minX=t,this.minY=n,this.width=Math.max(1,r-t),this.height=Math.max(1,i-n)}},{key:"collides",value:function(t){return e.Collides(this,t)}},{key:"contains",value:function(t){return e.Contains(this,t)}},{key:"includes",value:function(t){return e.Includes(this,t)}},{key:"containsPoint",value:function(t,n){return e.ContainsPoint(this,t,n)}},{key:"getHandlePoint",value:function(e){switch(e){case"top_left":return new Di(this.minX,this.minY);case"top_right":return new Di(this.maxX,this.minY);case"bottom_left":return new Di(this.minX,this.maxY);case"bottom_right":return new Di(this.maxX,this.maxY);case"top":return new Di(this.midX,this.minY);case"right":return new Di(this.maxX,this.midY);case"bottom":return new Di(this.midX,this.maxY);case"left":return new Di(this.minX,this.midY)}}},{key:"toJson",value:function(){return{x:this.minX,y:this.minY,w:this.w,h:this.h}}},{key:"resize",value:function(e,t,n){var r=this.minX,i=this.minY,o=this.maxX,a=this.maxY,s=this.minX,u=this.minY,l=this.maxX,c=this.maxY;switch(e){case"left":case"top_left":case"bottom_left":s+=t;break;case"right":case"top_right":case"bottom_right":l+=t}switch(e){case"top":case"top_left":case"top_right":u+=n;break;case"bottom":case"bottom_left":case"bottom_right":c+=n}if((l-s)/(o-r)<0){var d=l;l=s,s=d}if((c-u)/(a-i)<0){var p=c;c=u,u=p}this.minX=s,this.minY=u,this.width=Math.abs(l-s),this.height=Math.abs(c-u)}},{key:"equals",value:function(t){return e.Equals(this,t)}}],[{key:"From",value:function(t){return new e(t.x,t.y,t.w,t.h)}},{key:"FromPoints",value:function(t){if(0===t.length)return new e;for(var n,r=1/0,i=1/0,o=-1/0,a=-1/0,s=0,u=t.length;s<u;s++)n=t[s],r=Math.min(n.x,r),i=Math.min(n.y,i),o=Math.max(n.x,o),a=Math.max(n.y,a);return new e(r,i,o-r,a-i)}},{key:"Expand",value:function(t,n){var r=Math.min(n.minX,t.minX),i=Math.min(n.minY,t.minY);return new e(r,i,Math.max(n.maxX,t.maxX)-r,Math.max(n.maxY,t.maxY)-i)}},{key:"ExpandBy",value:function(t,n){return new e(t.minX-n,t.minY-n,t.width+2*n,t.height+2*n)}},{key:"Resize",value:function(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t.minX,s=t.minY,u=t.maxX,l=t.maxY,c=t.minX,d=t.minY,p=t.maxX,f=t.maxY;switch(n){case"left":case"top_left":case"bottom_left":c+=r;break;case"right":case"top_right":case"bottom_right":p+=r}switch(n){case"top":case"top_left":case"top_right":d+=i;break;case"bottom":case"bottom_left":case"bottom_right":f+=i}var h=(p-c)/(u-a),v=(f-d)/(l-s),g=h<0,m=v<0;if(o){var y=(u-a)/(l-s),b=Math.abs(p-c),w=Math.abs(f-d),x=b*(v<0?1:-1)*(1/y),k=w*(h<0?1:-1)*y,S=y<b/w;switch(n){case"top_left":S?d=f+x:c=p+k;break;case"top_right":S?d=f+x:p=c-k;break;case"bottom_right":S?f=d-x:p=c-k;break;case"bottom_left":S?f=d-x:c=p+k;break;case"bottom":case"top":var _=(c+p)/2,P=w*y;c=_-P/2,p=_+P/2;break;case"left":case"right":var C=(d+f)/2,E=b/y;d=C-E/2,f=C+E/2}}if(g){var I=p;p=c,c=I}if(m){var M=f;f=d,d=M}var T=new e(c,d,Math.abs(p-c),Math.abs(f-d));return{box:T,scaleX:+(T.width/t.width*(h>0?1:-1)).toFixed(5),scaleY:+(T.height/t.height*(v>0?1:-1)).toFixed(5)}}},{key:"Equals",value:function(e,t){return t.x===e.x&&t.y===e.y&&t.w===e.w&&t.h===e.h}}]),e}();b(uo,"Collides",(function(e,t){return!(e.maxX<t.minX||e.minX>t.maxX||e.maxY<t.minY||e.minY>t.maxY)})),b(uo,"Contains",(function(e,t){return e.minX<t.minX&&e.minY<t.minY&&e.maxY>t.maxY&&e.maxX>t.maxX})),b(uo,"Includes",(function(e,t){return uo.Collides(e,t)||uo.Contains(e,t)})),b(uo,"ContainsPoint",(function(e,t,n){return"number"===typeof t?!(t<e.minX||n<e.minY||t>e.maxX||n>e.maxY):!(t.x<e.minX||t.y<e.minY||t.x>e.maxX||t.y>e.maxY)})),b(uo,"Common",(function(e){for(var t=1/0,n=1/0,r=-1/0,i=-1/0,o=0;o<e.length;o++){var a=e[o];t=Math.min(t,a.minX),n=Math.min(n,a.minY),r=Math.max(r,a.maxX),i=Math.max(i,a.maxY)}return new uo(t,n,r-t,i-n)})),b(uo,"Sides",(function(e){var t=e.corners;return[[t[0],t[1]],[t[1],t[2]],[t[2],t[3]],[t[3],t[0]]]}));var lo,co=function(){function e(t){o(this,e),b(this,"_values",void 0),b(this,"_computed",{}),this._values=t}return l(e,[{key:"values",get:function(){return this._values},set:function(e){this._values=e,this._computed={}}},{key:"length",get:function(){if(void 0!==this._computed.length)return this._computed.length;for(var e=this.lut,t=e[0],n=0,r=1;r<e.length;r++){var i=e[r];n+=t.dist(i),t=i}return this._computed.length=n,n}},{key:"bounds",get:function(){if(void 0!==this._computed.bounds)return this._computed.bounds;var e,t=1/0,n=1/0,r=-1/0,i=-1/0,o=y(this.lut);try{for(o.s();!(e=o.n()).done;){var a=e.value;t=Math.min(a.x,t),n=Math.min(a.y,n),r=Math.max(a.x,r),i=Math.max(a.y,i)}}catch(u){o.e(u)}finally{o.f()}var s=new uo(t,n,r-t,i-n);return this._computed.bounds=s,s}},{key:"lut",get:function(){if(this._computed.lut)return this._computed.lut;for(var e=this.values.p,t=[],n=0;n<e+1;n++)t.push(this.getPoint(n/e));return this._computed.lut=t,t}},{key:"midPoint",get:function(){if(this._computed.midPoint)return this._computed.midPoint;var e=this.getPoint(.5);return this._computed.midPoint=e,e}},{key:"path",get:function(){if(this._computed.path)return this._computed.path;var e=this.getPath();return this._computed.path=e,e}},{key:"getPointAtLength",value:function(e){var t=Math.max(0,Math.min(1,e/this.length));return this.getPoint(t)}},{key:"getNormal",value:function(e){return this.getPoint(e-.0025).tan(this.getPoint(e+.0025)).per().uni().toFixed()}},{key:"getNormalAtLength",value:function(e){return this.getNormal(e/this.length)}},{key:"getClosestPointTo",value:function(e){for(var t=this.lut,n=0,r=t[0],i=t[0].dist(e),o=1;o<t.length;o++){var a=Di.Dist(t[o],e);a<i&&(i=a,r=t[o],n=o/t.length)}for(var s=1/this.values.p,u=Math.max(0,n-s/2);u<Math.min(1,n+s/2);u+=s/10){var l=this.getPoint(u),c=Di.Dist(l,e);c<i&&(i=c,r=l)}return{point:r,distance:i}}},{key:"update",value:function(e){this._computed={},this.values=x(x({},this.values),e)}}]),e}();lo=Symbol.iterator;var po=function(e){d(n,e);var t=v(n);function n(e,r,i,a){var s,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:25;return o(this,n),b(h(s=t.call(this,{a:e,b:r,c:i,d:a,p:u})),lo,Ti().mark((function e(){var t,n,r,i,o;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.values,n=t.a,r=t.b,i=t.c,o=t.d,e.delegateYield([n,r,i,o],"t0",2);case 2:case"end":return e.stop()}}),e,this)}))),s}return l(n,[{key:"getPath",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.values,n=t.a,r=t.b,i=t.c,o=t.d;return Di.Equals(n,o)?"":"".concat(e?"M".concat(n.x.toFixed(2),",").concat(n.y.toFixed(2),"C"):"").concat(r.x.toFixed(2),",").concat(r.y.toFixed(2)," ").concat(i.x.toFixed(2),",").concat(i.y.toFixed(2)," ").concat(o.x.toFixed(2),",").concat(o.y.toFixed(2))}},{key:"getPoint",value:function(e){var t=this.values,n=t.a,r=t.b,i=t.c,o=t.d;return new Di((1-e)*(1-e)*(1-e)*n.x+(1-e)*(1-e)*3*e*r.x+3*(1-e)*(e*e)*i.x+e*e*e*o.x,(1-e)*(1-e)*(1-e)*n.y+(1-e)*(1-e)*3*e*r.y+3*(1-e)*(e*e)*i.y+e*e*e*o.y)}},{key:"getX",value:function(e){var t=this.values,n=t.a,r=t.b,i=t.c,o=t.d;return(1-e)*(1-e)*(1-e)*n.x+(1-e)*(1-e)*3*e*r.x+3*(1-e)*(e*e)*i.x+e*e*e*o.x}},{key:"getY",value:function(e){var t=this.values,n=t.a,r=t.b,i=t.c,o=t.d;return(1-e)*(1-e)*(1-e)*n.y+(1-e)*(1-e)*3*e*r.y+3*(1-e)*(e*e)*i.y+e*e*e*o.y}}]),n}(co),fo=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;o(this,e),b(this,"computed",{}),this.points=t,this.p=n,this.k=r}return l(e,[{key:"length",get:function(){if(void 0!==this.computed.length)return this.computed.length;var e=this.segments.reduce((function(e,t){return e+t.length}),0);return this.computed.length=e,e}},{key:"bounds",get:function(){if(void 0!==this.computed.bounds)return this.computed.bounds;var e=this.segments,t=uo.Common(e.map((function(e){return e.bounds})));return this.computed.bounds=t,t}},{key:"head",get:function(){return this.points[0]}},{key:"tail",get:function(){var e=this.points;return e[e.length-1]}},{key:"path",get:function(){if(void 0!==this.computed.path)return this.computed.path;var e=this.segments.map((function(e){return e.path})).filter((function(e){return void 0!==e&&null!==e&&""!==e})).join(" ");return this.computed.path=e,e}},{key:"addPoint",value:function(e){var t=this.points,n=this.k,r=this.p;return t.push(e),this.computed={},this.getSegmentsFromPoints(this.points,r,n),this}},{key:"removePoint",value:function(e){var t=this.points,n=this.k,r=this.p,i="number"===typeof e?Math.floor(e):t.indexOf(e);return-1===i||(t.splice(i,1),this.computed={},this.getSegmentsFromPoints(this.points,r,n)),this}},{key:"getPointAtLength",value:function(e){var t=this.segments,n=e;if(e<=0)return t[0].getPoint(0);if(e>=this.length)return t[t.length-1].getPoint(1);for(var r=0;r<t.length;r++){var i=t[r],o=i.length;if(n<o)return i.getPoint(n/o);n-=i.length}return t[t.length-1].getPoint(1)}},{key:"getPoint",value:function(e){return e<=0?this.segments[0].getPoint(0):e>=1?this.segments[this.segments.length-1].getPoint(1):this.getPointAtLength(e*this.length)}},{key:"getNormal",value:function(e){var t=this.length;return this.getNormalAtLength(e*t)}},{key:"getNormalAtLength",value:function(e){var t=this.segments;if(e<0)return new Di(0,0);var n,r=e,i=y(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=o.length;if(r<=a)return o.getNormal(r/a);r-=a}}catch(s){i.e(s)}finally{i.f()}return new Di(0,0)}},{key:"getClosestPointTo",value:function(e){var t,n=this.head,r=this.segments,i=n,o=Di.Dist(e,n),a=y(r);try{for(a.s();!(t=a.n()).done;){var s=t.value.getClosestPointTo(e);s.distance<o&&(o=s.distance,i=s.point)}}catch(u){a.e(u)}finally{a.f()}return{point:i,distance:o}}}]),e}(),ho=function(e){d(n,e);var t=v(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.2,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;return o(this,n),b(h(r=t.call(this,e,i,a)),"segments",void 0),r.segments=r.getSegmentsFromPoints(e,i,a),r}return l(n,[{key:"getSegmentsFromPoints",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.25,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,r=e.length,i=r-2,o=[],a=0;a<r-1;a++){var s=0===a?e[0]:e[a-1],u=e[a],l=e[a+1],c=a===i?l:e[a+2];o.push(new po(u,0===a?s:new Di(u.x+(l.x-s.x)/6*t,u.y+(l.y-s.y)/6*t),a===i?l:new Di(l.x-(c.x-u.x)/6*t,l.y-(c.y-u.y)/6*t),l,n))}return o}}],[{key:"FromPoints",value:function(e){return new n(e)}}]),n}(fo),vo=function(e){d(n,e);var t=v(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return o(this,n),(i=t.call(this,{a:e,b:r,p:a})).a=e,i.b=r,i.values.p=Math.max(10,Math.ceil(i.length/20)),i}return l(n,[{key:"length",get:function(){return Di.Dist(this.a,this.b)}},{key:"tangent",get:function(){return Di.Tan(this.a,this.b)}},{key:"angle",get:function(){return Di.Angle(this.a,this.b)}},{key:"bounds",get:function(){return uo.FromPoints([this.a,this.b])}},{key:"getX",value:function(e){var t=this.values,n=t.a,r=t.b;return n.x+(r.x-n.x)*e}},{key:"getY",value:function(e){var t=this.values,n=t.a,r=t.b;return n.y+(r.y-n.y)*e}},{key:"getPoint",value:function(e){var t=this.values,n=t.a,r=t.b;return Di.Lrp(n,r,e)}},{key:"getPath",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.values,n=t.a,r=t.b;return Di.Equals(n,r)?"":e?"M".concat(n.x,",").concat(n.y,"L").concat(r.x,",").concat(r.y):"".concat(r.x,",").concat(r.y)}},{key:"getNormal",value:function(){var e=this.values,t=e.a,n=e.b;return Di.Sub(t,n).per().uni().toFixed()}},{key:"getClosestPointTo",value:function(e){var t=this.values,n=t.a,r=t.b,i=Di.NearestPointOnLineSegment(n,r,e),o=i.dist(e);return{point:i,distance:o}}}],[{key:"Length",value:function(e){return Di.Dist(e.a,e.b)}},{key:"Tangent",value:function(e){return Di.Tan(e.a,e.b)}},{key:"Angle",value:function(e){return Di.Angle(e.a,e.b)}}]),n}(co),go=function(){function e(t,n,r,i,a,s){o(this,e),b(this,"a",1),b(this,"b",0),b(this,"c",0),b(this,"d",1),b(this,"e",0),b(this,"f",0),this.a=t,this.b=n,this.c=r,this.d=i,this.e=a,this.f=s}return l(e,[{key:"equals",value:function(e){return this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f}},{key:"identity",value:function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this}},{key:"multiply",value:function(e){var t=e,n=this.a,r=this.b,i=this.c,o=this.d,a=this.e,s=this.f;return this.a=n*t.a+i*t.b,this.c=n*t.c+i*t.d,this.e=n*t.e+i*t.f+a,this.b=r*t.a+o*t.b,this.d=r*t.c+o*t.d,this.f=r*t.e+o*t.f+s,this}},{key:"rotate",value:function(t,n,r){return 0===t?this:void 0===n?this.multiply(e.Rotate(t)):this.translate(n,r).multiply(e.Rotate(t)).translate(-n,-r)}},{key:"translate",value:function(t,n){return this.multiply(e.Translate(t,n))}},{key:"scale",value:function(t,n){return this.multiply(e.Scale(t,n))}},{key:"invert",value:function(){var e=this.a,t=this.b,n=this.c,r=this.d,i=this.e,o=this.f,a=e*r-t*n;return this.a=r/a,this.b=t/-a,this.c=n/-a,this.d=e/a,this.e=(r*i-n*o)/-a,this.f=(t*i-e*o)/a,this}},{key:"applyToPoint",value:function(t){return e.applyToPoint(this,t)}},{key:"applyToPoints",value:function(t){return e.applyToPoints(this,t)}},{key:"decomposed",value:function(){return e.Decompose(this)}},{key:"toCssString",value:function(){return e.toCssString(this)}},{key:"setTo",value:function(e){return Object.assign(this,e),this}},{key:"decompose",value:function(){return e.Decompose(this)}},{key:"clone",value:function(){return new e(this.a,this.b,this.c,this.d,this.e,this.f)}}],[{key:"Identity",value:function(){return new e(1,0,0,1,0,0)}},{key:"Translate",value:function(t,n){return new e(1,0,0,1,t,n)}},{key:"Rotate",value:function(t,n,r){if(0===t)return e.Identity();var i=Math.cos(t),o=Math.sin(t),a=new e(i,o,-o,i,0,0);return void 0===n?a:e.Compose(e.Translate(n,r),a,e.Translate(-n,-r))}},{key:"Multiply",value:function(e,t){return{a:e.a*t.a+e.c*t.b,c:e.a*t.c+e.c*t.d,e:e.a*t.e+e.c*t.f+e.e,b:e.b*t.a+e.d*t.b,d:e.b*t.c+e.d*t.d,f:e.b*t.e+e.d*t.f+e.f}}},{key:"Inverse",value:function(e){var t=e.a*e.d-e.b*e.c;return{a:e.d/t,b:e.b/-t,c:e.c/-t,d:e.a/t,e:(e.d*e.e-e.c*e.f)/-t,f:(e.b*e.e-e.a*e.f)/t}}},{key:"Absolute",value:function(e){var t=e.a*e.d-e.b*e.c;return{a:e.d/t,b:e.b/-t,c:e.c/-t,d:e.a/t,e:(e.d*e.e-e.c*e.f)/t,f:(e.b*e.e-e.a*e.f)/-t}}},{key:"Compose",value:function(){for(var t=e.Identity(),n=0,r=arguments.length;n<r;n++)t.multiply(n<0||arguments.length<=n?void 0:arguments[n]);return t}},{key:"Decompose",value:function(e){var t,n,r;if(0!==e.a||0!==e.c){var i=Math.hypot(e.a,e.c);t=i,n=(e.a*e.d-e.b*e.c)/i,r=Math.acos(e.a/i)*(e.c>0?-1:1)}else if(0!==e.b||0!==e.d){var o=Math.hypot(e.b,e.d);t=(e.a*e.d-e.b*e.c)/o,n=o,r=Li+Math.acos(e.b/o)*(e.d>0?-1:1)}else t=0,n=0,r=0;return{x:e.e,y:e.f,scaleX:t,scaleY:n,rotation:Gi(r)}}},{key:"Smooth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e10;return e.a=Math.round(e.a*t)/t,e.b=Math.round(e.b*t)/t,e.c=Math.round(e.c*t)/t,e.d=Math.round(e.d*t)/t,e.e=Math.round(e.e*t)/t,e.f=Math.round(e.f*t)/t,e}},{key:"toCssString",value:function(e){return"matrix(".concat(so(e.a),", ").concat(so(e.b),", ").concat(so(e.c),", ").concat(so(e.d),", ").concat(so(e.e),", ").concat(so(e.f),")")}},{key:"applyToPoint",value:function(e,t){return new Di(e.a*t.x+e.c*t.y+e.e,e.b*t.x+e.d*t.y+e.f,t.z)}},{key:"applyToXY",value:function(e,t,n){return[e.a*t+e.c*n+e.e,e.b*t+e.d*n+e.f]}},{key:"applyToPoints",value:function(e,t){return t.map((function(t){return new Di(e.a*t.x+e.c*t.y+e.e,e.b*t.x+e.d*t.y+e.f,t.z)}))}},{key:"applyToBounds",value:function(e,t){return new uo(e.e+t.minX,e.f+t.minY,t.width,t.height)}},{key:"From",value:function(t){return new e(t.a,t.b,t.c,t.d,t.e,t.f)}}]),e}();b(go,"Scale",(function(e,t,n,r){var i=new go(e,0,0,0,t,0);return void 0===n?i:go.Compose(go.Translate(n,r),i,go.Translate(-n,-r))}));var mo=function(e){d(n,e);var t=v(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.2,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;return o(this,n),b(h(r=t.call(this,e,i,a)),"segments",void 0),r.segments=r.getSegmentsFromPoints(e,a),r}return l(n,[{key:"getSegmentsFromPoints",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=[],r=0;r<e.length-1;r++)n.push(new vo(e[r],e[r+1],t));return n}}],[{key:"FromPoints",value:function(e){return new n(e)}}]),n}(fo),yo=Math.PI+1e-4;function bo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.size,r=void 0===n?16:n,i=t.smoothing,o=void 0===i?.5:i,a=t.start,s=void 0===a?{}:a,u=t.end,l=void 0===u?{}:u,c=t.last,d=void 0!==c&&c,p=s.cap,f=void 0===p||p,h=l.cap,v=void 0===h||h;if(0===e.length||r<=0)return[];for(var g,m=e[0],y=e[e.length-1],b=y.runningLength,w=!1===s.taper?0:!0===s.taper?Math.max(r,b):s.taper,x=!1===l.taper?0:!0===l.taper?Math.max(r,b):l.taper,k=Math.pow(r*o,2),S=[],_=[],P=e[0].vector,C=e[0].point,E=C,I=C,M=E,T=!1,j=0;j<e.length;j++){g=e[j];var A=e[j],O=A.point,z=A.vector,D=g.vector.dpr(P),N=(j<e.length-1?e[j+1]:e[j]).vector,R=j<e.length-1?N.dpr(g.vector):1,L=null!==R&&R<.2;if(D<0&&!T||L){if(R>-.62&&b-g.runningLength>g.radius){var B=P.clone().mul(g.radius);P.clone().cpr(N)<0?(I=Di.Add(O,B),M=Di.Sub(O,B)):(I=Di.Sub(O,B),M=Di.Add(O,B)),S.push(I),_.push(M)}else for(var F=P.clone().mul(g.radius).per(),U=Di.Sub(g.input,F),K=0;K<1;K+=.07692307692307693)I=Di.RotWith(U,g.input,yo*K),S.push(I),M=Di.RotWith(U,g.input,yo+yo*-K),_.push(M);C=I,E=M,L&&(T=!0)}else if(T=!1,g!==m&&g!==y){var V=Di.Lrp(N,z,R).per().mul(g.radius);I=Di.Sub(O,V),(j<=1||Di.Dist2(C,I)>k)&&(S.push(I),C=I),M=Di.Add(O,V),(j<=1||Di.Dist2(E,M)>k)&&(_.push(M),E=M),P=z}else{var W=Di.Per(z).mul(g.radius);S.push(Di.Sub(O,W)),_.push(Di.Add(O,W))}}var H=m.point,Y=e.length>1?e[e.length-1].point:Di.AddXY(m.point,1,1);if(1===e.length&&(!w&&!x||d)){for(var X=Di.Add(H,Di.Sub(H,Y).uni().per().mul(-m.radius)),q=[],$=1/13,G=$;G<=1;G+=$)q.push(Di.RotWith(X,H,2*yo*G));return q}var Q=[];if(w||x&&1===e.length);else if(f)for(var Z=.125;Z<=1;Z+=.125){var J=Di.RotWith(_[0],H,yo*Z);Q.push(J)}else{var ee=Di.Sub(S[0],_[0]),te=Di.Mul(ee,.5),ne=Di.Mul(ee,.51);Q.push(Di.Sub(H,te),Di.Sub(H,ne),Di.Add(H,ne),Di.Add(H,te))}var re=[],ie=y.vector.clone().per().neg();if(x||w&&1===e.length)re.push(Y);else if(v)for(var oe=Di.Add(Y,Di.Mul(ie,y.radius)),ae=1/29,se=ae;se<1;se+=ae)re.push(Di.RotWith(oe,Y,3*yo*se));else re.push(Di.Add(Y,Di.Mul(ie,y.radius)),Di.Add(Y,Di.Mul(ie,.99*y.radius)),Di.Sub(Y,Di.Mul(ie,.99*y.radius)),Di.Sub(Y,Di.Mul(ie,y.radius)));return S.concat(re,_.reverse(),Q)}var wo=.025,xo=.01;function ko(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.streamline,i=void 0===r?.5:r,o=n.size,a=void 0===o?16:o,s=n.simulatePressure,u=void 0!==s&&s;if(0===e.length)return[];var l=.15+.85*(1-i),c=e.map(Di.From),d=0;if(!u)for(var p=c[0];p&&!(p.z>=wo);)c.shift(),p=c[0];if(!u)for(var f=c[c.length-1];f&&!(f.z>=xo);)c.pop(),f=c[c.length-1];if(0===c.length)return[{point:Di.From(e[0]),input:Di.From(e[0]),pressure:u?.5:.15,vector:new Di(1,1),distance:0,runningLength:0,radius:1}];for(var h=c[1];h&&!(Di.Dist(h,c[0])>a/3);)c[0].z=Math.max(c[0].z,h.z),c.splice(1,1),h=c[1];var v=c.pop();for(h=c[c.length-1];h&&!(Di.Dist(h,v)>a/3);)c.pop(),h=c[c.length-1],d++;c.push(v);var g=n.last||!n.simulatePressure||c.length>1&&Di.Dist(c[c.length-1],c[c.length-2])<a||d>0;if(2===c.length&&n.simulatePressure){var m=c[1];c=c.slice(0,-1);for(var y=1;y<5;y++){var b=Di.Lrp(c[0],m,y/4);b.z=(c[0].z+(m.z-c[0].z))*y/4,c.push(b)}}var w,x,k=[{point:c[0],input:c[0],pressure:u?.5:c[0].z,vector:new Di(1,1),distance:0,runningLength:0,radius:1}],S=0,_=k[0];g&&i>0&&c.push(c[c.length-1].clone());for(var P=1,C=c.length;P<C;P++)w=!l||n.last&&P===C-1?c[P].clone():c[P].clone().lrp(_.point,1-l),_.point.equals(w)||(S+=x=Di.Dist(w,_.point),P<4&&S<a||(_={input:c[P],point:w,pressure:u?.5:c[P].z,vector:Di.Sub(_.point,w).uni(),distance:x,runningLength:S,radius:1},k.push(_)));if(null!==(t=k[1])&&void 0!==t&&t.vector&&(k[0].vector=k[1].vector.clone()),S<1){var E=Math.max.apply(Math,[.5].concat(M(k.map((function(e){return e.pressure})))));k.forEach((function(e){return e.pressure=E}))}return k}var So=Math.min,_o=.275;function Po(e,t){var n,r,i=t.size,o=void 0===i?16:i,a=t.thinning,s=void 0===a?.5:a,u=t.simulatePressure,l=void 0===u||u,c=t.easing,d=void 0===c?function(e){return e}:c,p=t.start,f=void 0===p?{}:p,h=t.end,v=void 0===h?{}:h,g=f.easing,m=void 0===g?zi.easeOutQuad:g,y=v.easing,b=void 0===y?zi.easeOutCubic:y,w=e[e.length-1].runningLength,x=e[0].pressure;if(!l&&w<o){var k=e.reduce((function(e,t){return Math.max(e,t.pressure)}),.5);return e.forEach((function(e){e.pressure=k,e.radius=o*d(.5-s*(.5-e.pressure))})),e}for(var S,_=0,P=e.length;_<P&&!((r=e[_]).runningLength>5*o);_++){var C=So(1,r.distance/o);if(l){var E=So(1,1-C);S=So(1,x+C*_o*(E-x))}else S=So(1,x+.5*(r.pressure-x));x+=.5*(S-x)}for(var I=0;I<e.length;I++){if(r=e[I],s){var M=r.pressure,T=So(1,r.distance/o);if(l){var j=So(1,1-T);M=So(1,x+T*_o*(j-x))}else M=So(1,x+T*_o*(M-x));r.radius=o*d(.5-s*(.5-M)),x=M}else r.radius=o/2;void 0===n&&(n=r.radius)}var A=!1===f.taper?0:!0===f.taper?Math.max(o,w):f.taper,O=!1===v.taper?0:!0===v.taper?Math.max(o,w):v.taper;if(A||O)for(var z=0;z<e.length;z++){var D=(r=e[z]).runningLength,N=D<A?m(D/A):1,R=w-D<O?b((w-D)/O):1;r.radius=Math.max(.01,r.radius*Math.min(N,R))}return e}function Co(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return bo(Po(ko(e,t),t),t)}function Eo(e,t,n,r){var i=e.x-n.x,o=e.y-n.y,a=r.x-n.x,s=r.y-n.y,u=t.x-e.x,l=t.y-e.y,c=a*o-s*i,d=u*o-l*i,p=s*u-a*l;if(0===c||0===d)return null;if(0===p)return null;if(0!==p){var f=c/p,h=d/p;if(0<=f&&f<=1&&0<=h&&h<=1)return Di.AddXY(e,f*u,f*l)}return null}function Io(e,t,n,r){var i=(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y),o=2*((t.x-e.x)*(e.x-n.x)+(t.y-e.y)*(e.y-n.y)),a=o*o-4*i*(n.x*n.x+n.y*n.y+e.x*e.x+e.y*e.y-2*(n.x*e.x+n.y*e.y)-r*r);if(a<0)return null;if(0===a)return null;var s=Math.sqrt(a),u=(-o+s)/(2*i),l=(-o-s)/(2*i);if((u<0||u>1)&&(l<0||l>1))return null;var c=[];return 0<=u&&u<=1&&c.push(Di.Lrp(e,t,u)),0<=l&&l<=1&&c.push(Di.Lrp(e,t,l)),0===c.length?null:c}function Mo(e,t,n){for(var r,i=[],o=0,a=n.length-1;o<a;o++)(r=Eo(e,t,n[o],n[o+1]))&&i.push(r);return 0===i.length?null:i}function To(e,t,n){for(var r,i=[],o=1,a=n.length;o<a+1;o++)(r=Eo(e,t,n[o-1],n[o%n.length]))&&i.push(r);return 0===i.length?null:i}function jo(e,t,n){for(var r,i=[],o=0,a=n.length;o<a;o++)(r=Io(n[o],n[(o+1)%n.length],e,t))&&i.push.apply(i,M(r));return 0===i.length?null:i}function Ao(e,t,n){for(var r,i=[],o=1,a=n.length;o<a;o++)(r=Io(n[o-1],n[o],e,t))&&i.push.apply(i,M(r));return 0===i.length?null:i}function Oo(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function zo(e,t,n,r){return Oo(e,n,r)!==Oo(t,n,r)&&Oo(e,t,n)!==Oo(e,t,r)}function Do(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)ao(n=e[o],t)&&i.push(n);for(var s=0,u=t.length;s<u;s++)ao(n=t[s],e)&&i.push(n);for(var l=0,c=e.length;l<c;l++){n=e[l],r=e[(l+1)%e.length];for(var d=0,p=t.length;d<p;d++){var f=Eo(n,r,t[d],t[(d+1)%t.length]);null!==f&&i.push(f)}}return 0===i.length?null:function(e){var t=Di.Average(e);return e.sort((function(e,n){return Di.Angle(t,e)-Di.Angle(t,n)}))}(i)}var No=n(7143),Ro=["children","className"];function Lo(e){var t=e.children,n=e.className,r=void 0===n?"":n,i=Ye(e,Ro);return(0,Mi.jsx)("svg",x(x({},i),{},{className:"rs-svg-container ".concat(r),children:t}))}function Bo(e){var t=e.type,n=e.getShapeUtil,r=e.validator,i=e.migrations;return{type:t,createShapeUtils:function(e){return new(n())(e,t)},is:function(e){return e.type===t},validator:r,migrations:void 0===i?{currentVersion:0,firstVersion:0,migrators:{}}:i}}for(var Fo=2e3,Uo=(Symbol("remove"),320),Ko=[.1,.25,.5,1,2,4,8],Vo=.1,Wo=1e3,Ho=1e3,Yo={left:{x:-1,y:0},right:{x:1,y:0},up:{x:0,y:-1},down:{x:0,y:1},upLeft:{x:-1,y:-1},upRight:{x:1,y:-1},downLeft:{x:-1,y:1},downRight:{x:1,y:1}},Xo={},qo=1;qo<=Math.ceil(8);qo++)Xo[qo+"_dark"]="hash_pattern_zoom_".concat(qo,"_dark"),Xo[qo+"_light"]="hash_pattern_zoom_".concat(qo,"_light");var $o={duration:0,easing:zi.easeInOutCubic},Go=.09,Qo=48,Zo=10,Jo=300,ea=320,ta=[{offsetX:0,offsetY:2,blur:4,spread:0,color:"#00000029"},{offsetX:0,offsetY:3,blur:6,spread:0,color:"#0000001f"}],na=[{min:-1,mid:.15,step:100},{min:.05,mid:.375,step:25},{min:.15,mid:1,step:5},{min:.7,mid:2.5,step:1}],ra={lineHeight:1.35,fontWeight:"normal",fontVariant:"normal",fontStyle:"normal",padding:"0px",maxWidth:"auto"},ia={s:18,m:24,l:36,xl:44},oa={s:18,m:22,l:26,xl:32},aa={s:18,m:20,l:24,xl:28},sa={draw:"var(--rs-font-draw)",sans:"var(--rs-font-sans)",serif:"var(--rs-font-serif)",mono:"var(--rs-font-mono)"},ua={color:[{id:"black",type:"color",icon:"color"},{id:"grey",type:"color",icon:"color"},{id:"light-violet",type:"color",icon:"color"},{id:"violet",type:"color",icon:"color"},{id:"blue",type:"color",icon:"color"},{id:"light-blue",type:"color",icon:"color"},{id:"yellow",type:"color",icon:"color"},{id:"orange",type:"color",icon:"color"},{id:"green",type:"color",icon:"color"},{id:"light-green",type:"color",icon:"color"},{id:"light-red",type:"color",icon:"color"},{id:"red",type:"color",icon:"color"}],fill:[{id:"none",type:"fill",icon:"fill-none"},{id:"semi",type:"fill",icon:"fill-semi"},{id:"solid",type:"fill",icon:"fill-solid"},{id:"pattern",type:"fill",icon:"fill-pattern"}],dash:[{id:"draw",type:"dash",icon:"dash-draw"},{id:"dashed",type:"dash",icon:"dash-dashed"},{id:"dotted",type:"dash",icon:"dash-dotted"},{id:"solid",type:"dash",icon:"dash-solid"}],size:[{id:"s",type:"size",icon:"size-small"},{id:"m",type:"size",icon:"size-medium"},{id:"l",type:"size",icon:"size-large"},{id:"xl",type:"size",icon:"size-extra-large"}],opacity:[{id:"0.1",type:"opacity",icon:"color"},{id:"0.25",type:"opacity",icon:"color"},{id:"0.5",type:"opacity",icon:"color"},{id:"0.75",type:"opacity",icon:"color"},{id:"1",type:"opacity",icon:"color"}],font:[{id:"draw",type:"font",icon:"font-draw"},{id:"sans",type:"font",icon:"font-sans"},{id:"serif",type:"font",icon:"font-serif"},{id:"mono",type:"font",icon:"font-mono"}],align:[{id:"start",type:"align",icon:"text-align-left"},{id:"middle",type:"align",icon:"text-align-center"},{id:"end",type:"align",icon:"text-align-right"},{id:"justify",type:"align",icon:"text-align-justify"}],geo:[{id:"rectangle",type:"geo",icon:"geo-rectangle"},{id:"ellipse",type:"geo",icon:"geo-ellipse"},{id:"triangle",type:"geo",icon:"geo-triangle"},{id:"diamond",type:"geo",icon:"geo-diamond"},{id:"pentagon",type:"geo",icon:"geo-pentagon"},{id:"hexagon",type:"geo",icon:"geo-hexagon"},{id:"octagon",type:"geo",icon:"geo-octagon"},{id:"star",type:"geo",icon:"geo-star"},{id:"rhombus",type:"geo",icon:"geo-rhombus"},{id:"rhombus-2",type:"geo",icon:"geo-rhombus-2"},{id:"oval",type:"geo",icon:"geo-oval"},{id:"trapezoid",type:"geo",icon:"geo-trapezoid"},{id:"arrow-right",type:"geo",icon:"geo-arrow-right"},{id:"arrow-left",type:"geo",icon:"geo-arrow-left"},{id:"arrow-up",type:"geo",icon:"geo-arrow-up"},{id:"arrow-down",type:"geo",icon:"geo-arrow-down"},{id:"x-box",type:"geo",icon:"geo-x-box"}],arrowheadStart:[{id:"none",type:"arrowheadStart",icon:"arrowhead-none"},{id:"arrow",type:"arrowheadStart",icon:"arrowhead-arrow"},{id:"triangle",type:"arrowheadStart",icon:"arrowhead-triangle"},{id:"square",type:"arrowheadStart",icon:"arrowhead-square"},{id:"dot",type:"arrowheadStart",icon:"arrowhead-dot"},{id:"diamond",type:"arrowheadStart",icon:"arrowhead-diamond"},{id:"inverted",type:"arrowheadStart",icon:"arrowhead-triangle-inverted"},{id:"bar",type:"arrowheadStart",icon:"arrowhead-bar"}],arrowheadEnd:[{id:"none",type:"arrowheadEnd",icon:"arrowhead-none"},{id:"arrow",type:"arrowheadEnd",icon:"arrowhead-arrow"},{id:"triangle",type:"arrowheadEnd",icon:"arrowhead-triangle"},{id:"square",type:"arrowheadEnd",icon:"arrowhead-square"},{id:"dot",type:"arrowheadEnd",icon:"arrowhead-dot"},{id:"diamond",type:"arrowheadEnd",icon:"arrowhead-diamond"},{id:"inverted",type:"arrowheadEnd",icon:"arrowhead-triangle-inverted"},{id:"bar",type:"arrowheadEnd",icon:"arrowhead-bar"}],spline:[{id:"line",type:"spline",icon:"spline-line"},{id:"cubic",type:"spline",icon:"spline-cubic"}]};function la(e,n){var r=t.useRef(n);r.current=n;var i=N(t.useMemo((function(){var t=null,n=new ze("useStateTracking(".concat(e,")"),(function(){var e;return null===(e=r.current)||void 0===e?void 0:e.call(r)}),{scheduleEffect:function(){var e;null===(e=t)||void 0===e||e()}});return[n,function(e){return t=e,function(){t=null}},function(){return n.scheduleCount}]}),[e]),3),o=i[0],a=i[1],s=i[2];return t.useSyncExternalStore(a,s,s),t.useEffect((function(){return o.attach(),o.maybeScheduleEffect(),function(){o.detach()}}),[o]),o.execute()}var ca={apply:function(e,t,n){var r,i;return la(null!==(r=null!==(i=e.displayName)&&void 0!==i?i:e.name)&&void 0!==r?r:"tracked(???)",(function(){return e.apply(t,n)}))}},da=Symbol.for("react.memo"),pa=Symbol.for("react.forward_ref");function fa(e){var n=null,r=e.$$typeof;return r===da&&(n=(e=e.type).compare),r===pa?(0,t.memo)((0,t.forwardRef)(new Proxy(e.render,ca))):(0,t.memo)(new Proxy(e,ca),n)}function ha(e,n,r){return(0,t.useMemo)((function(){var t="function"===typeof n?n():n;return _e("useAtom(".concat(e,")"),t,r)}),[])}function va(){var e=arguments,n=3===e.length?e[2]:[e[0]],r=3===e.length?e[0]:"useValue(".concat(e[0].name,")"),i=(0,t.useRef)(!0);i.current=!0;var o=(0,t.useMemo)((function(){return 1===e.length?e[0]:Oe(r,(function(){if(i.current)return e[1]();try{return e[1]()}catch(t){return{}}}))}),n);try{var a=(0,t.useMemo)((function(){return{subscribe:function(e){return De("useValue(".concat(r,")"),(function(){o.value,e()}))},getSnapshot:function(){return o.value}}}),[o]),s=a.subscribe,u=a.getSnapshot;return(0,t.useSyncExternalStore)(s,u,u)}finally{i.current=!1}}Symbol.for("react.memo"),Symbol.for("react.forward_ref");var ga=t.createContext({}),ma=function(){return t.useContext(ga)},ya=function(){function e(){o(this,e),b(this,"items",new WeakMap)}return l(e,[{key:"get",value:function(e,t){return this.items.has(e)||this.items.set(e,t(e)),this.items.get(e)}},{key:"access",value:function(e){return this.items.get(e)}},{key:"set",value:function(e,t){this.items.set(e,t)}},{key:"has",value:function(e){return this.items.has(e)}},{key:"invalidate",value:function(e){this.items.delete(e)}},{key:"bust",value:function(){this.items=new WeakMap}}]),e}(),ba=n(9409),wa={preventDefaultLogging:ka("tldrawPreventDefaultLogging",!1),pointerCaptureLogging:ka("tldrawPointerCaptureLogging",!1),pointerCaptureTracking:ka("tldrawPointerCaptureTracking",!1),pointerCaptureTrackingObject:ka("tldrawPointerCaptureTrackingObject",new Map,!1),elementRemovalLogging:ka("tldrawElementRemovalLogging",!1),debugSvg:ka("tldrawDebugSvg",!1),throwToBlob:ka("tldrawThrowToBlob",!1),peopleMenu:ka("tldrawPeopleMenu",!1)};if("undefined"!==typeof Element){var xa=Element.prototype.removeChild;De("element removal logging",(function(){wa.elementRemovalLogging.value?Element.prototype.removeChild=function(e){return console.warn("[tldraw] removing child:",e),xa.call(this,e)}:Element.prototype.removeChild=xa}))}function ka(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("undefined"===typeof window)return _e("debug:".concat(e),t);var r=n?function(e){try{var t;return JSON.parse(null!==(t=window.sessionStorage.getItem("debug:".concat(e)))&&void 0!==t?t:"null")}catch(n){return null}}(e):null,i=_e("debug:".concat(e),null!==r&&void 0!==r?r:t);return n&&De("debug:".concat(e),(function(){var n=i.value;try{n===t?window.sessionStorage.removeItem("debug:".concat(e)):window.sessionStorage.setItem("debug:".concat(e),JSON.stringify(n))}catch(r){}})),Object.defineProperty(window,e,{get:function(){return i.value},set:function(e){i.set(e)},configurable:!0}),i}function Sa(e){var t=e.cloneNode(!0);return e.setAttribute("width",+e.getAttribute("width")+""),e.setAttribute("height",+e.getAttribute("height")+""),(new XMLSerializer).serializeToString(t).replaceAll("&#10;      ","").replaceAll(/((\s|")[0-9]*\.[0-9]{2})([0-9]*)(\b|"|\))/g,"$1")}function _a(e,t){return Pa.apply(this,arguments)}function Pa(){return Pa=Ai(Ti().mark((function e(t,n){var r,i,o,a,s,u,l,c;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.type,i=n.quality,o=n.scale,a=+t.getAttribute("width"),s=+t.getAttribute("height"),e.next=5,Ca(t);case 5:return u=e.sent,e.next=8,new Promise((function(e){var t=new Image;t.crossOrigin="anonymous",t.onload=Ai(Ti().mark((function n(){var r,i;return Ti().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,new Promise((function(e){return setTimeout(e,250)}));case 2:r=document.createElement("canvas"),i=r.getContext("2d"),r.width=a*o,r.height=s*o,i.imageSmoothingEnabled=!0,i.imageSmoothingQuality="high",i.drawImage(t,0,0,a*o,s*o),URL.revokeObjectURL(u),e(r);case 11:case"end":return n.stop()}}),n)}))),t.onerror=function(){e(null)},t.src=u}));case 8:if(l=e.sent){e.next=11;break}return e.abrupt("return",null);case 11:return e.next=13,new Promise((function(e){return l.toBlob((function(t){t&&!wa.throwToBlob.value||e(null),e(t)}),"image/"+r,i)}));case 13:return c=e.sent,e.abrupt("return",c);case 15:case"end":return e.stop()}}),e)}))),Pa.apply(this,arguments)}function Ca(e){return Ea.apply(this,arguments)}function Ea(){return Ea=Ai(Ti().mark((function e(t){var n,r,i,o,a,s;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.cloneNode(!0)).setAttribute("encoding",'UTF-8"'),r=new FileReader,i=Array.from(n.querySelectorAll("image")),o=Ti().mark((function e(){var t,n,i,o;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s[a],!(n=t.getAttribute("xlink:href"))){e.next=13;break}if(n.startsWith("data:")){e.next=13;break}return e.next=6,fetch(n);case 6:return e.next=8,e.sent.blob();case 8:return i=e.sent,e.next=11,new Promise((function(e,t){r.onload=function(){return e(r.result)},r.onerror=function(){return t(r.error)},r.readAsDataURL(i)}));case 11:o=e.sent,t.setAttribute("xlink:href",o);case 13:case"end":return e.stop()}}),e)})),a=0,s=i;case 6:if(!(a<s.length)){e.next=11;break}return e.delegateYield(o(),"t0",8);case 8:a++,e.next=6;break;case 11:return e.abrupt("return",Ia(n));case 12:case"end":return e.stop()}}),e)}))),Ea.apply(this,arguments)}function Ia(e){var t=(new XMLSerializer).serializeToString(e),n=window.btoa(unescape(encodeURIComponent(t)));return"data:image/svg+xml;base64,".concat(n)}function Ma(e,t){var n=document.createElement("a");n.href=e,n.download=t,n.click()}function Ta(e,t){for(var n=0;e[t+n];)n+=e[t+n]+1;return n+1}function ja(e){var t,n,r=new Uint8Array(e),i=0,o=0;if(!function(e){return"GIF"===new TextDecoder("ascii").decode(e.slice(0,3))}(e))return!1;for(t=128&r[10],n=7&r[10],i+=6,i+=7,i+=t?3*Math.pow(2,n+1):0;o<2&&i<r.length;)switch(r[i]){case 44:o+=1,t=128&r[i+9],n=7&r[i+9],i+=10,i+=t?3*Math.pow(2,n+1):0,i+=Ta(r,i+1)+1;break;case 33:i+=2,i+=Ta(r,i);break;default:i=r.length}return o>1}var Aa=["image/jpeg","image/png","image/gif","image/svg+xml"],Oa=["video/mp4","video/quicktime"],za=Aa.concat(Oa).join(", "),Da=function(e){return Aa.includes(e)};function Na(e){return Ra.apply(this,arguments)}function Ra(){return Ra=Ai(Ti().mark((function e(t){return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){var r=document.createElement("video");r.onloadeddata=function(){return e({w:r.videoWidth,h:r.videoHeight})},r.onerror=function(e){console.error(e),n(new Error("Could not get video size"))},r.crossOrigin="anonymous",r.src=t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),Ra.apply(this,arguments)}function La(e){return Ba.apply(this,arguments)}function Ba(){return(Ba=Ai(Ti().mark((function e(t){return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){var r=new Image;r.onload=function(){return e({w:r.width,h:r.height})},r.onerror=function(e){console.error(e),n(new Error("Could not get image size"))},r.crossOrigin="anonymous",r.src=t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fa(e,t,n){return Ua.apply(this,arguments)}function Ua(){return(Ua=Ai(Ti().mark((function e(t,n,r){return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){var i=new Image;i.onload=function(){var t=document.createElement("canvas"),o=t.getContext("2d");if(o){t.width=2*n,t.height=2*r,o.drawImage(i,0,0,t.width,t.height);var a=t.toDataURL();e(a)}},i.crossOrigin="anonymous",i.src=t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ka(e){return Va.apply(this,arguments)}function Va(){return(Va=Ai(Ti().mark((function e(t){return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){var r=new FileReader;r.onerror=function(){return n(r.error)},r.onload=Ai(Ti().mark((function n(){var i,o,a,s,u,l,c,d;return Ti().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=r.result,o=Da(t.type),a=o?La:Na,"video/quicktime"===t.type&&i.includes("video/quicktime")&&(i=i.replace("video/quicktime","video/mp4")),n.next=6,a(i);case 6:if(s=n.sent,(u=Ya(s,{w:Wo,h:Ho}))===s||"image/jpeg"!==t.type&&"image/png"!==t.type){n.next=12;break}return n.next=11,Fa(i,u.w,u.h);case 11:i=n.sent;case 12:return l=xr.createCustomId(O(i)),n.next=15,Wa(t);case 15:c=n.sent,d={id:l,type:o?"image":"video",typeName:"asset",props:{name:t.name,src:i,w:u.w,h:u.h,mimeType:t.type,isAnimated:c.isAnimated}},e(d);case 18:case"end":return n.stop()}}),n)}))),r.readAsDataURL(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wa(e){return Ha.apply(this,arguments)}function Ha(){return(Ha=Ai(Ti().mark((function e(t){return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("image/gif"!==t.type){e.next=4;break}return e.next=3,new Promise((function(e,n){var r=new FileReader;r.onerror=function(){return n(r.error)},r.onload=function(){e({isAnimated:!!r.result&&ja(r.result)})},r.readAsArrayBuffer(t)}));case 3:return e.abrupt("return",e.sent);case 4:return e.abrupt("return",{isAnimated:!Da(t.type)});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ya(e,t){var n=e.w/t.w,r=e.h/t.h;return n<=1&&r<=1?e:n>r?{w:e.w/n,h:e.h/n}:{w:e.w/r,h:e.h/r}}function Xa(e,t,n){return qa.apply(this,arguments)}function qa(){return qa=Ai(Ti().mark((function e(t,n,r){var i,o,a,s,u,l,c,d,p,f,h,v,g=arguments;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.length>3&&void 0!==g[3]&&g[3],i=new Di(r.x,r.y),o=new Map,e.next=5,Promise.all(n.map(function(){var e=Ai(Ti().mark((function e(n,r){var a,s;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.type){e.next=2;break}throw new Error("No mime type");case 2:if(Aa.concat(Oa).includes(n.type)){e.next=5;break}return console.warn("".concat(n.name," not loaded - Extension not allowed.")),e.abrupt("return",null);case 5:return e.prev=5,e.next=8,t.onCreateAssetFromFile(n);case 8:if("bookmark"!==(a=e.sent).type){e.next=11;break}return e.abrupt("return");case 11:if(a){e.next=13;break}throw Error("Could not create an asset");case 13:return o.set(n,a),s={id:Er(),type:a.type,x:i.x+r,y:i.y,props:{w:a.props.w,h:a.props.h,opacity:"1"}},e.abrupt("return",s);case 18:return e.prev=18,e.t0=e.catch(5),console.error(e.t0),e.abrupt("return",null);case 22:case"end":return e.stop()}}),e,null,[[5,18]])})));return function(t,n){return e.apply(this,arguments)}}()));case 5:if(a=e.sent,s=S(a).sort((function(e,t){return e.x-t.x})),0!==s.length){e.next=9;break}return e.abrupt("return");case 9:for(u=0;u<s.length;u++)l=s[u],0===u?(l.x-=l.props.w/2,l.y-=l.props.h/2):(c=s[u-1],l.x=c.x+c.props.w,l.y=c.y);return e.next=12,Promise.all(n.map(function(){var e=Ai(Ti().mark((function e(n,r){var i,a,u;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=s[r]){e.next=3;break}return e.abrupt("return");case 3:if(a=o.get(n)){e.next=6;break}return e.abrupt("return");case 6:if(!(u=t.getAssetById(a.id))){e.next=11;break}return o.delete(n),i.props&&(i.props.assetId=u.id),e.abrupt("return",i);case 11:if(!(u=t.getAssetBySrc(a.props.src))){e.next=15;break}return i.props&&(i.props.assetId=u.id),e.abrupt("return",i);case 15:return i.props&&(i.props.assetId=a.id),e.abrupt("return",i);case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 12:d=e.sent,p=d.filter(H),t.createAssets(S(M(o.values()))),t.createShapes(p),t.setSelectedIds(p.map((function(e){return e.id}))),f=t.selectedIds,h=t.viewportPageBounds,(v=uo.Common(S(f.map((function(e){return t.getPageBoundsById(e)})))))&&!h.contains(v)&&t.zoomToSelection();case 20:case"end":return e.stop()}}),e)}))),qa.apply(this,arguments)}function $a(e,t,n,r){e.createShapes([{id:Er(),type:"embed",x:n.x-(r.width||450)/2,y:n.y-(r.height||450)/2,props:{w:r.width,h:r.height,doesResize:r.doesResize,url:t,opacity:"1"}}],!0)}function Ga(e,t,n){return Qa.apply(this,arguments)}function Qa(){return Qa=Ai(Ti().mark((function e(t,n,r){var i,o;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=xr.createCustomId(O(n)),!(o=t.getAssetById(i))){e.next=5;break}return t.createShapes([{id:t.createShapeId(),type:"bookmark",x:r.x-150,y:r.y-160,props:{assetId:o.id,url:o.props.src,opacity:"1"}}]),e.abrupt("return");case 5:t.batch(Ai(Ti().mark((function e(){var o,a;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Er(),t.createShapes([{id:o,type:"bookmark",x:r.x,y:r.y,props:{url:n,opacity:"1"}}],!0),e.next=4,t.onCreateBookmarkFromUrl(n);case 4:(a=e.sent)&&(t.createAssets([{id:i,typeName:"asset",type:"bookmark",props:{src:n,description:a.description,image:a.image,title:a.title}}]),t.updateShapes([{id:o,type:"bookmark",props:{assetId:i,opacity:"1"}}]));case 6:case"end":return e.stop()}}),e)}))));case 6:case"end":return e.stop()}}),e)}))),Qa.apply(this,arguments)}var Za,Ja,es,ts,ns,rs;function is(e,t,n){return fetch(e).then((function(e){return e.arrayBuffer()})).then((function(e){return new File([e],t,{type:n})}))}b(Za={},"white","black"),b(Za,"black","black"),b(Za,"lightGray","grey"),b(Za,"gray","grey"),b(Za,"green","light-green"),b(Za,"cyan","green"),b(Za,"blue","light-blue"),b(Za,"indigo","blue"),b(Za,"orange","orange"),b(Za,"yellow","yellow"),b(Za,"red","red"),b(Za,"violet","light-violet"),b(Ja={},"mono","mono"),b(Ja,"sans","sans"),b(Ja,"script","draw"),b(Ja,"serif","serif"),b(es={},"start","start"),b(es,"middle","middle"),b(es,"end","end"),b(es,"justify","justify"),b(ts={},"small","s"),b(ts,"medium","l"),b(ts,"large","xl"),b(ns={},"small","m"),b(ns,"medium","l"),b(ns,"large","xl"),b(rs={},"solid","solid"),b(rs,"dashed","dashed"),b(rs,"dotted","dotted"),b(rs,"draw","draw");function os(){return q()}function as(e){if(e instanceof HTMLElement)return e;if(e.parentElement)return as(e.parentElement);throw Error("Could not find a parent element of an HTML type!")}function ss(e){e.preventDefault(),wa.preventDefaultLogging.value&&console.warn("preventDefault called on event:",e)}function us(e,t){if(e.setPointerCapture(t.pointerId),wa.pointerCaptureTracking.value){var n,r=wa.pointerCaptureTrackingObject.value;r.set(e,(null!==(n=r.get(e))&&void 0!==n?n:0)+1)}wa.pointerCaptureLogging.value&&console.warn("setPointerCapture called on element:",e,t)}function ls(e,t){if(e.hasPointerCapture(t.pointerId)){if(e.releasePointerCapture(t.pointerId),wa.pointerCaptureTracking.value){var n=wa.pointerCaptureTrackingObject.value;1===n.get(e)?n.delete(e):n.has(e)?n.set(e,n.get(e)-1):console.warn("Release without capture")}wa.pointerCaptureLogging.value&&console.warn("releasePointerCapture called on element:",e,t)}}function cs(e,t){var n=t.map((function(t){var n=t.offsetX,r=t.offsetY,i=t.blur,o=t.spread,a=t.color,s=new Di(n,r).rot(-e),u=s.x,l=s.y;return"".concat(u,"px ").concat(l,"px ").concat(i,"px ").concat(o,"px ").concat(a)}));return n.join(", ")}function ds(){var e=N((0,t.useState)(!1),2),n=e[0],r=e[1];return(0,t.useEffect)((function(){var e=window.matchMedia("(prefers-reduced-motion: reduce)"),t=function(){r(e.matches)};return t(),e.addEventListener("change",t),function(){return e.removeEventListener("change",t)}}),[]),n}var ps=function(e,t){return e.length<=t?e:e.substring(0,t-3)+"..."};var fs=function(e){return e.split("*").map((function(e){return function(e){if("string"!==typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(e)})).join(".+")},hs=function(e,t){return!!e.find((function(e){var n=new RegExp(fs(e));return t.match(n)}))};function vs(e){var t;return null!==(t=function(e){var t,n=new URL(e).host.replace("www.",""),r=y(Gr);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(hs(i.hostnames,n)){var o=i.toEmbedUrl(e);if(o)return{definition:i,embedUrl:o,url:e}}}}catch(a){r.e(a)}finally{r.f()}}(e))&&void 0!==t?t:function(e){var t,n=new URL(e).host.replace("www.",""),r=y(Gr);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(hs(i.hostnames,n)){var o=i.fromEmbedUrl(e);if(o)return{definition:i,url:o,embedUrl:e}}}}catch(a){r.e(a)}finally{r.f()}}(e)}function gs(e){try{return vs(e)}catch(gm){console.error(gm)}}function ms(e,t){for(var n,r=null,i=0,o=Object.entries(t);i<o.length;i++){var a=N(o[i],2),s=a[0],u=a[1];Ct.has(s)&&(r||(r=x({},e)),r[s]=u)}return null!==(n=r)&&void 0!==n?n:e}var ys="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",bs="a0",ws="A00000000000000000000000000";function xs(e){if(e>="a"&&e<="z")return e.charCodeAt(0)-"a".charCodeAt(0)+2;if(e>="A"&&e<="Z")return"Z".charCodeAt(0)-e.charCodeAt(0)+2;throw new Error("Invalid index key head: "+e)}function ks(e){if(e.length!==xs(e.charAt(0)))throw new Error("invalid integer part of index key: "+e)}function Ss(e){if(void 0===e)throw Error("n is undefined")}function _s(e){ks(e);for(var t=Oi(e.split("")),n=t[0],r=t.slice(1),i=!0,o=r.length-1;i&&o>=0;o--){var a=ys.indexOf(r[o])+1;a===ys.length?r[o]="0":(r[o]=ys.charAt(a),i=!1)}if(i){if("Z"===n)return"a0";if("z"===n)return;var s=String.fromCharCode(n.charCodeAt(0)+1);return s>"a"?r.push("0"):r.pop(),s+r.join("")}return n+r.join("")}function Ps(e,t){if(void 0!==t&&e>=t)throw new Error(e+" >= "+t);if("0"===e.slice(-1)||t&&"0"===t.slice(-1))throw new Error("trailing zero");if(t){for(var n=0;(e.charAt(n)||"0")===t.charAt(n);)n++;if(n>0)return t.slice(0,n)+Ps(e.slice(n),t.slice(n))}var r=e?ys.indexOf(e.charAt(0)):0,i=void 0!==t?ys.indexOf(t.charAt(0)):ys.length;if(i-r>1){var o=Math.round(.5*(r+i));return ys.charAt(o)}return t&&t.length>1?t.slice(0,1):ys.charAt(r)+Ps(e.slice(1),void 0)}function Cs(e){var t=xs(e.charAt(0));if(t>e.length)throw new Error("invalid index: "+e);return e.slice(0,t)}function Es(e){if(e===ws)throw new Error("invalid index: "+e);var t=Cs(e);if("0"===e.slice(t.length).slice(-1))throw new Error("invalid index: "+e)}function Is(e,t){if(void 0!==e&&Es(e),void 0!==t&&Es(t),void 0!==e&&void 0!==t&&e>=t)throw new Error(e+" >= "+t);if(void 0===e&&void 0===t)return bs;if(void 0===e){if(void 0===t)throw Error("b is undefined");var n=Cs(t),r=t.slice(n.length);if(n===ws)return n+Ps("",r);if(n<t)return n;var i=function(e){ks(e);for(var t=Oi(e.split("")),n=t[0],r=t.slice(1),i=!0,o=r.length-1;i&&o>=0;o--){var a=ys.indexOf(r[o])-1;-1===a?r[o]=ys.slice(-1):(r[o]=ys.charAt(a),i=!1)}if(i){if("a"===n)return"Z"+ys.slice(-1);if("A"===n)return;var s=String.fromCharCode(n.charCodeAt(0)-1);return s<"Z"?r.push(ys.slice(-1)):r.pop(),s+r.join("")}return n+r.join("")}(n);return Ss(i),i}if(void 0===t){var o=Cs(e),a=e.slice(o.length),s=_s(o);return void 0===s?o+Ps(a,void 0):s}var u=Cs(e),l=e.slice(u.length),c=Cs(t),d=t.slice(c.length);if(u===c)return u+Ps(l,d);var p=_s(u);return Ss(p),p<t?p:u+Ps(l,void 0)}function Ms(e,t,n){if(0===n)return[];if(1===n)return[Is(e,t)];if(void 0===t){for(var r=Is(e,t),i=[r],o=0;o<n-1;o++)r=Is(r,t),i.push(r);return i}if(void 0===e){for(var a=Is(e,t),s=[a],u=0;u<n-1;u++)a=Is(e,a),s.push(a);return s.reverse(),s}var l=Math.floor(n/2),c=Is(e,t);return[].concat(M(Ms(e,c,l)),[c],M(Ms(c,t,n-l-1)))}function Ts(e,t,n){return Ms(e,t,n)}function js(e,t){return Ms(e,void 0,t)}function As(e,t){return Ms(e,t,1)[0]}function Os(e){return Ms(e,void 0,1)[0]}function zs(e){return["a1"].concat(M(Ms("a1",void 0,e)))}function Ds(e,t){return e.index<t.index?-1:e.index>t.index?1:0}function Ns(e,t){return e.id<t.id?-1:e.id>t.id?1:0}function Rs(e){var t=e.app,n=t.selectionRotation,r=t.selectionPageCenter,i=t.inputs.originPagePoint,o=t.selectedShapes;return{selectionPageCenter:r,initialCursorAngle:r.angle(i),initialSelectionRotation:n,shapeSnapshots:o.map((function(e){return{shape:Y(e),initialPagePoint:t.getPagePointById(e.id)}}))}}function Ls(e){var t=e.delta,n=e.app,r=e.snapshot,i=e.stage,o=r.selectionPageCenter,a=r.shapeSnapshots;n.updateShapes(a.map((function(e){var r=e.shape,i=e.initialPagePoint,a=Cr(r.parentId)?n.getPageTransformById(r.parentId):go.Identity(),s=Di.RotWith(i,o,t),u=go.applyToPoint(go.Inverse(a),s),l=Yi(r.rotation+t);return{id:r.id,type:r.type,x:u.x,y:u.y,rotation:l}})));var s=[];a.forEach((function(e){var t,r=e.shape,o=n.getShapeById(r.id);if(o){var a=n.getShapeUtil(r);if("start"===i||"one-off"===i){var u,l=null===(u=a.onRotateStart)||void 0===u?void 0:u.call(a,r);l&&s.push(l)}var c=null===(t=a.onRotate)||void 0===t?void 0:t.call(a,r,o);if(c&&s.push(c),"end"===i||"one-off"===i){var d,p=null===(d=a.onRotateEnd)||void 0===d?void 0:d.call(a,r,o);p&&s.push(p)}}})),s.length>0&&n.updateShapes(s)}var Bs={openWindow:function(e,t){return window.open(e,t,"noopener noreferrer")}};function Fs(e,t){return e.match(/^\s*$/)?t:e}function Us(e,t){e.isKilled=!0;var n=t.getBoundingClientRect(),r=n.top,i=n.left;return{point:{x:e.clientX-i,y:e.clientY-r,z:e.pressure},shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey,pointerId:e.pointerId,button:e.button,isPen:"pen"===e.pointerType}}function Ks(e){return"".concat(so(e.x),",").concat(so(e.y)," ")}function Vs(e,t){return"".concat(so((e.x+t.x)/2),",").concat(so((e.y+t.y)/2)," ")}function Ws(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.length;if(n<2)return"";var r=e[0],i=e[1];if(2===n)return"M".concat(Ks(r),"L").concat(Ks(i));for(var o="",a=2,s=n-1;a<s;a++)o+=Vs(r=e[a],i=e[a+1]);return t?"M".concat(Vs(e[0],e[1]),"Q").concat(Ks(e[1])).concat(Vs(e[1],e[2]),"T").concat(o).concat(Vs(e[n-1],e[0])).concat(Vs(e[0],e[1]),"Z"):"M".concat(Ks(e[0]),"Q").concat(Ks(e[1])).concat(Vs(e[1],e[2])).concat(e.length>3?"T":"").concat(o,"L").concat(Ks(e[n-1]))}function Hs(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.length;if(n<2)return"";var r=e[0].point,i=e[1].point;if(2===n)return"M".concat(Ks(r),"L").concat(Ks(i));for(var o="",a=2,s=n-1;a<s;a++)o+=Vs(r=e[a].point,i=e[a+1].point);return t?"M".concat(Vs(e[0].point,e[1].point),"Q").concat(Ks(e[1].point)).concat(Vs(e[1].point,e[2].point),"T").concat(o).concat(Vs(e[n-1].point,e[0].point)).concat(Vs(e[0].point,e[1].point),"Z"):"M".concat(Ks(e[0].point),"Q").concat(Ks(e[1].point)).concat(Vs(e[1].point,e[2].point)).concat(e.length>3?"T":"").concat(o,"L").concat(Ks(e[n-1].point))}var Ys=(0,t.createContext)(null);function Xs(e){var t=e.container,n=e.children;return(0,Mi.jsx)(Ys.Provider,{value:t,children:n})}function qs(){return E((0,t.useContext)(Ys),"useContainer used outside of <Tldraw />")}function $s(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:re;(0,t.useEffect)((function(){var t=new ze(e,n);return t.attach(),t.execute(),function(){t.detach()}}),r)}var Gs="<path d='m19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill='%23fff'/><path d='m18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill='%23000'/>",Qs="<path d='m9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill='%23fff'/><path d='m17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill='%23000'/>",Zs='<g><path d="M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill="white"/></g>';function Js(e,t,n,r,i){var o=Ri/180*(-n-t),a=Math.sin(o),s=Math.cos(o),u=1*s-1*a,l=1*a+1*s;return"url(\"data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: ".concat(i,";'><defs><filter id='shadow' color-interpolation-filters='sRGB'><feDropShadow dx='").concat(u,"' dy='").concat(l,"' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(").concat(t+n," 16 16)").concat(r?" scale(-1,-1) translate(0, -32)":"","' filter='url(%23shadow)'>")+e.replaceAll('"',"'")+'</g></svg>") 16 16, pointer'}var eu={none:function(){return"none"},default:function(){return"default"},pointer:function(){return"pointer"},cross:function(){return"crosshair"},move:function(){return"move"},grab:function(e,t,n){return Js('<path d="m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill="%23fff"/><g stroke="%23000" stroke-linecap="round" stroke-width=".75"><path d="m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin="round"/><path d="m20.5664 21.7344v-3.459"/><path d="m18.5508 21.7461-.016-3.473"/><path d="m16.5547 18.3047.021 3.426"/></g>',e,0,t,n)},grabbing:function(e,t,n){return Js("<path d='m13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill='%23fff'/><g stroke='%23000' stroke-width='.75'><path d='m13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin='round'/><path d='m20.5664 19.7344v-3.459' stroke-linecap='round'/><path d='m18.5508 19.7461-.016-3.473' stroke-linecap='round'/><path d='m16.5547 16.3047.021 3.426' stroke-linecap='round'/></g>",e,0,t,n)},text:function(e,t,n){return Js("<path fill=\"currentcolor\" d='m6.94 2v-1c-1.35866267-.08246172-2.66601117.53165299-3.47 1.63-.80398883-1.09834701-2.11133733-1.71246172-3.47-1.63v1c1.30781678-.16635468 2.55544738.59885876 3 1.84v5.1h-1v1h1v4.16c-.4476345 1.2386337-1.69302129 2.002471-3 1.84v1c1.35687108.0731933 2.6600216-.5389494 3.47-1.63.8099784 1.0910506 2.11312892 1.7031933 3.47 1.63v-1c-1.28590589.133063-2.49760499-.6252793-2.94-1.84v-4.18h1v-1h-1v-5.08c.43943906-1.21710975 1.65323743-1.97676587 2.94-1.84z' transform='translate(14 9)'/>",e,0,t,n)},"resize-edge":function(e,t,n){return Js(Qs,e,0,t,n)},"resize-corner":function(e,t,n){return Js(Gs,e,0,t,n)},"ew-resize":function(e,t,n){return Js(Qs,e,0,t,n)},"ns-resize":function(e,t,n){return Js(Qs,e,90,t,n)},"nesw-resize":function(e,t,n){return Js(Gs,e,0,t,n)},"nwse-resize":function(e,t,n){return Js(Gs,e,90,t,n)},rotate:function(e,t,n){return Js(Zs,e,45,t,n)},"nwse-rotate":function(e,t,n){return Js(Zs,e,0,t,n)},"nesw-rotate":function(e,t,n){return Js(Zs,e,90,t,n)},"senw-rotate":function(e,t,n){return Js(Zs,e,180,t,n)},"swne-rotate":function(e,t,n){return Js(Zs,e,270,t,n)}};function tu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"black";return eu[e](Ji(t),!1,n)}var nu=["input","select","button","textarea"];function ru(){var e=document.activeElement;return!(!e||!(e.getAttribute("contenteditble")||nu.indexOf(e.tagName.toLowerCase())>-1))}var iu=["textarea","input"];function ou(){return ou="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},ou.apply(this,arguments)}var au=function(e,t){return void 0===e&&(e=t),Array.isArray(e)?e:[e,e]},su=function(e,t){return[e[0]+t[0],e[1]+t[1]]},uu=function(e,t){return[e[0]-t[0],e[1]-t[1]]},lu=function(e,t){e[0]+=t[0],e[1]+=t[1]};function cu(e,t,n){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*n):e*t*n/(t+n*e)}function du(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.15;return 0===r?function(e,t,n){return Math.max(t,Math.min(e,n))}(e,t,n):e<t?-cu(t-e,n-t,r)+t:e>n?+cu(e-n,n-t,r)+n:e}function pu(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function fu(e,t,n){return(t=pu(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hu(Object(n),!0).forEach((function(t){fu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gu={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function mu(e){return e?e[0].toUpperCase()+e.slice(1):""}var yu=["enter","leave"];function bu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=gu[e],i=r&&r[t]||t;return"on"+mu(e)+mu(i)+(function(){var e=arguments.length>1?arguments[1]:void 0;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&!yu.includes(e)}(n,i)?"Capture":"")}var wu=["gotpointercapture","lostpointercapture"];function xu(e){var t=e.substring(2).toLowerCase(),n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));var r=wu.includes(t)?"capturecapture":"capture",i=!!~t.indexOf(r);return i&&(t=t.replace("capture","")),{device:t,capture:i,passive:n}}function ku(e){return"touches"in e}function Su(e){return ku(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function _u(e,t){try{var n=t.clientX-e.clientX,r=t.clientY-e.clientY,i=(t.clientX+e.clientX)/2,o=(t.clientY+e.clientY)/2,a=Math.hypot(n,r);return{angle:-180*Math.atan2(n,r)/Math.PI,distance:a,origin:[i,o]}}catch(s){}return null}function Pu(e){return function(e){return Array.from(e.touches).filter((function(t){var n,r;return t.target===e.currentTarget||(null===(n=e.currentTarget)||void 0===n||null===(r=n.contains)||void 0===r?void 0:r.call(n,t.target))}))}(e).map((function(e){return e.identifier}))}function Cu(e,t){var n=N(Array.from(e.touches).filter((function(e){return t.includes(e.identifier)})),2);return _u(n[0],n[1])}function Eu(e){var t=e.deltaX,n=e.deltaY,r=e.deltaMode;return 1===r?(t*=40,n*=40):2===r&&(t*=800,n*=800),[t,n]}function Iu(e){if("function"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}return e}function Mu(){}function Tu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?Mu:1===t.length?t[0]:function(){for(var e,n=0,r=t;n<r.length;n++){e=r[n].apply(this,arguments)||e}return e}}function ju(e,t){return Object.assign({},t,e||{})}var Au=function(){function e(t,n,r){o(this,e),this.ctrl=t,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}return l(e,[{key:"state",get:function(){return this.ctrl.state[this.key]},set:function(e){this.ctrl.state[this.key]=e}},{key:"shared",get:function(){return this.ctrl.state.shared}},{key:"eventStore",get:function(){return this.ctrl.gestureEventStores[this.key]}},{key:"timeoutStore",get:function(){return this.ctrl.gestureTimeoutStores[this.key]}},{key:"config",get:function(){return this.ctrl.config[this.key]}},{key:"sharedConfig",get:function(){return this.ctrl.config.shared}},{key:"handler",get:function(){return this.ctrl.handlers[this.key]}},{key:"reset",value:function(){var e=this.state,t=this.shared,n=this.ingKey,r=this.args;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}},{key:"start",value:function(e){var t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?Iu(n.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}},{key:"computeValues",value:function(e){var t=this.state;t._values=e,t.values=this.config.transform(e)}},{key:"computeInitial",value:function(){var e=this.state;e._initial=e._values,e.initial=e.values}},{key:"compute",value:function(e){var t=this.state,n=this.config,r=this.shared;t.args=this.args;var i=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,function(e){var t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){var n=e.shiftKey,r=e.altKey,i=e.metaKey,o=e.ctrlKey;Object.assign(t,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:o})}return t}(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,i=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){var o=t._delta.map(Math.abs);lu(t._distance,o)}this.axisIntent&&this.axisIntent(e);var a=N(t._movement,2),s=a[0],u=a[1],l=N(n.threshold,2),c=l[0],d=l[1],p=t._step,f=t.values;if(n.hasCustomTransform?(!1===p[0]&&(p[0]=Math.abs(s)>=c&&f[0]),!1===p[1]&&(p[1]=Math.abs(u)>=d&&f[1])):(!1===p[0]&&(p[0]=Math.abs(s)>=c&&Math.sign(s)*c),!1===p[1]&&(p[1]=Math.abs(u)>=d&&Math.sign(u)*d)),t.intentional=!1!==p[0]||!1!==p[1],t.intentional){var h=[0,0];if(n.hasCustomTransform){var v=N(f,2),g=v[0],m=v[1];h[0]=!1!==p[0]?g-p[0]:0,h[1]=!1!==p[1]?m-p[1]:0}else h[0]=!1!==p[0]?s-p[0]:0,h[1]=!1!==p[1]?u-p[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(h);var y=t.offset,b=t._active&&!t._blocked||t.active;b&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in n&&(t._bounds=Iu(n.bounds,t)),this.setup&&this.setup()),t.movement=h,this.computeOffset()));var w=N(t.offset,2),x=w[0],k=w[1],S=N(t._bounds,2),_=N(S[0],2),P=_[0],C=_[1],E=N(S[1],2),I=E[0],M=E[1];t.overflow=[x<P?-1:x>C?1:0,k<I?-1:k>M?1:0],t._movementBound[0]=!!t.overflow[0]&&(!1===t._movementBound[0]?t._movement[0]:t._movementBound[0]),t._movementBound[1]=!!t.overflow[1]&&(!1===t._movementBound[1]?t._movement[1]:t._movementBound[1]);var T=t._active&&n.rubberband||[0,0];if(t.offset=function(e,t,n){var r=N(t,2),i=r[0],o=r[1],a=N(n,2),s=a[0],u=a[1],l=N(e,2),c=N(l[0],2),d=c[0],p=c[1],f=N(l[1],2),h=f[0],v=f[1];return[du(i,d,p,s),du(o,h,v,u)]}(t._bounds,t.offset,T),t.delta=uu(t.offset,y),this.computeMovement(),b&&(!t.last||i>32)){t.delta=uu(t.offset,y);var j=t.delta.map(Math.abs);lu(t.distance,j),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&i>0&&(t.velocity=[j[0]/i,j[1]/i],t.timeDelta=i)}}}},{key:"emit",value:function(){var e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),!e._blocked&&e.intentional||e._force||n.triggerAllEvents){var r=this.handler(vu(vu(vu({},t),e),{},b({},this.aliasKey,e.values)));void 0!==r&&(e.memo=r)}}},{key:"clean",value:function(){this.eventStore.clean(),this.timeoutStore.clean()}}]),e}();var Ou=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return fu(h(e=t.call.apply(t,[this].concat(i))),"aliasKey","xy"),e}return l(n,[{key:"reset",value:function(){ou(p(n.prototype),"reset",this).call(this),this.state.axis=void 0}},{key:"init",value:function(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}},{key:"computeOffset",value:function(){this.state.offset=su(this.state.lastOffset,this.state.movement)}},{key:"computeMovement",value:function(){this.state.movement=uu(this.state.offset,this.state.lastOffset)}},{key:"axisIntent",value:function(e){var t=this.state,n=this.config;if(!t.axis&&e){var r="object"===typeof n.axisThreshold?n.axisThreshold[Su(e)]:n.axisThreshold;t.axis=function(e,t){var n=N(e,2),r=n[0],i=n[1],o=Math.abs(r),a=Math.abs(i);return o>a&&o>t?"x":a>o&&a>t?"y":void 0}(t._movement,r)}t._blocked=(n.lockDirection||!!n.axis)&&!t.axis||!!n.axis&&n.axis!==t.axis}},{key:"restrictToAxis",value:function(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}}]),n}(Au),zu=function(e){return e},Du={enabled:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]},eventOptions:function(e,t,n){return vu(vu({},n.shared.eventOptions),e)},preventDefault:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]},triggerAllEvents:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]},rubberband:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return au(e)}},from:function(e){return"function"===typeof e?e:null!=e?au(e):void 0},transform:function(e,t,n){var r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||zu},threshold:function(e){return au(e,0)}};var Nu=vu(vu({},Du),{},{axis:function(e,t,n){var r=n.axis;if(this.lockDirection="lock"===r,!this.lockDirection)return r},axisThreshold:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:0},bounds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("function"===typeof e)return function(t){return Nu.bounds(e(t))};if("current"in e)return function(){return e.current};if("function"===typeof HTMLElement&&e instanceof HTMLElement)return e;var t=e.left,n=void 0===t?-1/0:t,r=e.right,i=void 0===r?1/0:r,o=e.top,a=void 0===o?-1/0:o,s=e.bottom;return[[n,i],[a,void 0===s?1/0:s]]}});var Ru="undefined"!==typeof window&&window.document&&window.document.createElement;function Lu(){return Ru&&"ontouchstart"in window||Ru&&window.navigator.maxTouchPoints>1}var Bu={isBrowser:Ru,gesture:function(){try{return"constructor"in GestureEvent}catch(gm){return!1}}(),touch:Lu(),touchscreen:Lu(),pointer:Ru&&"onpointerdown"in window,pointerLock:Ru&&"exitPointerLock"in window.document},Fu={mouse:0,touch:0,pen:8};vu(vu({},Nu),{},{device:function(e,t,n){var r=n.pointer,i=void 0===r?{}:r,o=i.touch,a=void 0!==o&&o,s=i.lock,u=void 0!==s&&s,l=i.mouse,c=void 0!==l&&l;return this.pointerLock=u&&Bu.pointerLock,Bu.touch&&a?"touch":this.pointerLock?"mouse":Bu.pointer&&!c?"pointer":Bu.touch?"touch":"mouse"},preventScrollAxis:function(e,t,n){var r=n.preventScroll;if(this.preventScrollDelay="number"===typeof r?r:r||void 0===r&&e?250:void 0,Bu.touchscreen&&!1!==r)return e||(void 0!==r?"y":void 0)},pointerCapture:function(e,t,n){var r=n.pointer,i=void 0===r?{}:r,o=i.capture,a=void 0===o||o,s=i.buttons,u=void 0===s?1:s,l=i.keys,c=void 0===l||l;return this.pointerButtons=u,this.keys=c,!this.pointerLock&&"pointer"===this.device&&a},threshold:function(e,t,n){var r=n.filterTaps,i=void 0!==r&&r,o=n.tapsThreshold,a=void 0===o?3:o,s=n.axis,u=au(e,i?a:(void 0===s?void 0:s)?1:0);return this.filterTaps=i,this.tapsThreshold=a,u},swipe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.velocity,n=void 0===t?.5:t,r=e.distance,i=void 0===r?50:r,o=e.duration,a=void 0===o?250:o;return{velocity:this.transform(au(n)),distance:this.transform(au(i)),duration:a}},delay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:function(e){return e?vu(vu({},Fu),e):Fu},keyboardDisplacement:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:10}});function Uu(e){var t=N(e.overflow,2),n=t[0],r=t[1],i=N(e._delta,2),o=i[0],a=i[1],s=N(e._direction,2),u=s[0],l=s[1];(n<0&&o>0&&u<0||n>0&&o<0&&u>0)&&(e._movement[0]=e._movementBound[0]),(r<0&&a>0&&l<0||r>0&&a<0&&l>0)&&(e._movement[1]=e._movementBound[1])}var Ku=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return fu(h(e=t.call.apply(t,[this].concat(i))),"ingKey","pinching"),fu(h(e),"aliasKey","da"),e}return l(n,[{key:"init",value:function(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}},{key:"reset",value:function(){ou(p(n.prototype),"reset",this).call(this);var e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}},{key:"computeOffset",value:function(){var e=this.state,t=e.type,n=e.movement,r=e.lastOffset;this.state.offset="wheel"===t?su(n,r):[(1+n[0])*r[0],n[1]+r[1]]}},{key:"computeMovement",value:function(){var e=this.state,t=e.offset,n=e.lastOffset;this.state.movement=[t[0]/n[0],t[1]-n[1]]}},{key:"axisIntent",value:function(){var e=this.state,t=N(e._movement,2),n=t[0],r=t[1];if(!e.axis){var i=30*Math.abs(n)-Math.abs(r);i<0?e.axis="angle":i>0&&(e.axis="scale")}}},{key:"restrictToAxis",value:function(e){this.config.lockDirection&&("scale"===this.state.axis?e[1]=0:"angle"===this.state.axis&&(e[0]=0))}},{key:"cancel",value:function(){var e=this,t=this.state;t.canceled||setTimeout((function(){t.canceled=!0,t._active=!1,e.compute(),e.emit()}),0)}},{key:"touchStart",value:function(e){this.ctrl.setEventIds(e);var t=this.state,n=this.ctrl.touchIds;if((!t._active||!t._touchIds.every((function(e){return n.has(e)})))&&!(n.size<2)){this.start(e),t._touchIds=Array.from(n).slice(0,2);var r=Cu(e,t._touchIds);r&&this.pinchStart(e,r)}}},{key:"pointerStart",value:function(e){if(null==e.buttons||e.buttons%2===1){this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);var t=this.state,n=t._pointerEvents,r=this.ctrl.pointerIds;if((!t._active||!Array.from(n.keys()).every((function(e){return r.has(e)})))&&(n.size<2&&n.set(e.pointerId,e),!(t._pointerEvents.size<2))){this.start(e);var i=_u.apply(void 0,M(Array.from(n.values())));i&&this.pinchStart(e,i)}}}},{key:"pinchStart",value:function(e,t){this.state.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}},{key:"touchMove",value:function(e){if(this.state._active){var t=Cu(e,this.state._touchIds);t&&this.pinchMove(e,t)}}},{key:"pointerMove",value:function(e){var t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),this.state._active){var n=_u.apply(void 0,M(Array.from(t.values())));n&&this.pinchMove(e,n)}}},{key:"pinchMove",value:function(e,t){var n=this.state,r=n._values[1],i=t.angle-r,o=0;Math.abs(i)>270&&(o+=Math.sign(i)),this.computeValues([t.distance,t.angle-360*o]),n.origin=t.origin,n.turns=o,n._movement=[n._values[0]/n._initial[0]-1,n._values[1]-n._initial[1]],this.compute(e),this.emit()}},{key:"touchEnd",value:function(e){var t=this;this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some((function(e){return!t.ctrl.touchIds.has(e)}))&&(this.state._active=!1,this.compute(e),this.emit())}},{key:"pointerEnd",value:function(e){var t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch(n){}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}},{key:"gestureStart",value:function(e){e.cancelable&&e.preventDefault();var t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}},{key:"gestureMove",value:function(e){if(e.cancelable&&e.preventDefault(),this.state._active){var t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];var n=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=uu(t._movement,n),this.compute(e),this.emit()}}},{key:"gestureEnd",value:function(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}},{key:"wheel",value:function(e){var t=this.config.modifierKey;t&&!e[t]||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}},{key:"wheelStart",value:function(e){this.start(e),this.wheelChange(e)}},{key:"wheelChange",value:function(e){"uv"in e||e.cancelable&&e.preventDefault();var t=this.state;t._delta=[-Eu(e)[1]/100*t.offset[0],0],lu(t._movement,t._delta),Uu(t),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}},{key:"wheelEnd",value:function(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}},{key:"bind",value:function(e){var t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}]),n}(Au),Vu=vu(vu({},Du),{},{device:function(e,t,n){var r=n.shared,i=n.pointer,o=(void 0===i?{}:i).touch,a=void 0!==o&&o;if(r.target&&!Bu.touch&&Bu.gesture)return"gesture";if(Bu.touch&&a)return"touch";if(Bu.touchscreen){if(Bu.pointer)return"pointer";if(Bu.touch)return"touch"}},bounds:function(e,t,n){var r=n.scaleBounds,i=void 0===r?{}:r,o=n.angleBounds,a=void 0===o?{}:o,s=function(e){var t=ju(Iu(i,e),{min:-1/0,max:1/0});return[t.min,t.max]},u=function(e){var t=ju(Iu(a,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!==typeof i&&"function"!==typeof a?[s(),u()]:function(e){return[s(e),u(e)]}},threshold:function(e,t,n){this.lockDirection="lock"===n.axis;var r=au(e,this.lockDirection?[.1,3]:0);return r},modifierKey:function(e){return void 0===e?"ctrlKey":e},pinchOnWheel:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}}),Wu=(vu(vu({},Nu),{},{mouseOnly:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}}),function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return fu(h(e=t.call.apply(t,[this].concat(i))),"ingKey","wheeling"),e}return l(n,[{key:"wheel",value:function(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}},{key:"wheelChange",value:function(e){var t=this.state;t._delta=Eu(e),lu(t._movement,t._delta),Uu(t),this.compute(e),this.emit()}},{key:"wheelEnd",value:function(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}},{key:"bind",value:function(e){e("wheel","",this.wheel.bind(this))}}]),n}(Ou)),Hu=Nu,Yu=(vu(vu({},Nu),{},{mouseOnly:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}}),new Map),Xu=new Map;function qu(e){Yu.set(e.key,e.engine),Xu.set(e.key,e.resolver)}var $u={key:"pinch",engine:Ku,resolver:Vu},Gu={key:"wheel",engine:Wu,resolver:Hu};function Qu(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Zu={target:function(e){if(e)return function(){return"current"in e?e.current:e}},enabled:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bu.isBrowser?window:void 0})),eventOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.passive,n=void 0===t||t,r=e.capture;return{passive:n,capture:void 0!==r&&r}},transform:function(e){return e}},Ju=["target","eventOptions","window","enabled","transform"];function el(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n={},r=0,i=Object.entries(t);r<i.length;r++){var o=N(i[r],2),a=o[0],s=o[1];switch(typeof s){case"function":n[a]=s.call(n,e[a],a,e);break;case"object":n[a]=el(e[a],s);break;case"boolean":s&&(n[a]=e[a])}}return n}var tl=function(){function e(t,n){o(this,e),fu(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=n}return l(e,[{key:"add",value:function(e,t,n,r,i){var o=this._listeners,a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=gu[e];return e+(n&&n[t]||t)}(t,n),s=vu(vu({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),i);e.addEventListener(a,r,s);var u=function t(){e.removeEventListener(a,r,s),o.delete(t)};return o.add(u),u}},{key:"clean",value:function(){this._listeners.forEach((function(e){return e()})),this._listeners.clear()}}]),e}(),nl=function(){function e(){o(this,e),fu(this,"_timeouts",new Map)}return l(e,[{key:"add",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:140;this.remove(e);for(var i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];this._timeouts.set(e,(n=window).setTimeout.apply(n,[t,r].concat(o)))}},{key:"remove",value:function(e){var t=this._timeouts.get(e);t&&window.clearTimeout(t)}},{key:"clean",value:function(){this._timeouts.forEach((function(e){window.clearTimeout(e)})),this._timeouts.clear()}}]),e}(),rl=function(){function e(t){o(this,e),fu(this,"gestures",new Set),fu(this,"_targetEventStore",new tl(this)),fu(this,"gestureEventStores",{}),fu(this,"gestureTimeoutStores",{}),fu(this,"handlers",{}),fu(this,"config",{}),fu(this,"pointerIds",new Set),fu(this,"touchIds",new Set),fu(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(e,t){t.drag&&il(e,"drag");t.wheel&&il(e,"wheel");t.scroll&&il(e,"scroll");t.move&&il(e,"move");t.pinch&&il(e,"pinch");t.hover&&il(e,"hover")}(this,t)}return l(e,[{key:"setEventIds",value:function(e){return ku(e)?(this.touchIds=new Set(Pu(e)),this.touchIds):"pointerId"in e?("pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds):void 0}},{key:"applyHandlers",value:function(e,t){this.handlers=e,this.nativeHandlers=t}},{key:"applyConfig",value:function(e,t){this.config=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e,i=r.target,o=r.eventOptions,a=r.window,s=r.enabled,u=r.transform,l=Qu(r,Ju);if(n.shared=el({target:i,eventOptions:o,window:a,enabled:s,transform:u},Zu),t){var c=Xu.get(t);n[t]=el(vu({shared:n.shared},l),c)}else for(var d in l){var p=Xu.get(d);p&&(n[d]=el(vu({shared:n.shared},l[d]),p))}return n}(e,t,this.config)}},{key:"clean",value:function(){this._targetEventStore.clean();var e,t=y(this.gestures);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.gestureEventStores[n].clean(),this.gestureTimeoutStores[n].clean()}}catch(r){t.e(r)}finally{t.f()}}},{key:"effect",value:function(){var e=this;return this.config.shared.target&&this.bind(),function(){return e._targetEventStore.clean()}}},{key:"bind",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i,o=this.config.shared,a={};if(!o.target||(i=o.target())){if(o.enabled){var s,u=y(this.gestures);try{for(u.s();!(s=u.n()).done;){var l=s.value,c=this.config[l],d=ol(a,c.eventOptions,!!i);if(c.enabled)new(Yu.get(l))(this,n,l).bind(d)}}catch(k){u.e(k)}finally{u.f()}var p=ol(a,o.eventOptions,!!i),f=function(t){p(t,"",(function(r){return e.nativeHandlers[t](vu(vu({},e.state.shared),{},{event:r,args:n}))}),void 0,!0)};for(var h in this.nativeHandlers)f(h)}for(var v in a)a[v]=Tu.apply(void 0,M(a[v]));if(!i)return a;for(var g in a){var m=xu(g),b=m.device,w=m.capture,x=m.passive;this._targetEventStore.add(i,b,"",a[g],{capture:w,passive:x})}}}}]),e}();function il(e,t){e.gestures.add(t),e.gestureEventStores[t]=new tl(e,t),e.gestureTimeoutStores[t]=new nl}var ol=function(e,t,n){return function(r,i,o){var a,s,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=null!==(a=u.capture)&&void 0!==a?a:t.capture,d=null!==(s=u.passive)&&void 0!==s?s:t.passive,p=l?r:bu(r,i,c);n&&d&&(p+="Passive"),e[p]=e[p]||[],e[p].push(o)}},al=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function sl(e,t,n,r,i,o){if(e.has(n)&&Yu.has(r)){var a=n+"Start",s=n+"End";i[r]=function(e){var r=void 0;return e.first&&a in t&&t[a](e),n in t&&(r=t[n](e)),e.last&&s in t&&t[s](e),r},o[r]=o[r]||{}}}function ul(e,t){var n=function(e){var t={},n={},r=new Set;for(var i in e)al.test(i)?(r.add(RegExp.lastMatch),n[i]=e[i]):t[i]=e[i];return[n,t,r]}(e),r=N(n,3),i=r[0],o=r[1],a=r[2],s={};return sl(a,i,"onDrag","drag",s,t),sl(a,i,"onWheel","wheel",s,t),sl(a,i,"onScroll","scroll",s,t),sl(a,i,"onPinch","pinch",s,t),sl(a,i,"onMove","move",s,t),sl(a,i,"onHover","hover",s,t),{handlers:s,config:t,nativeHandlers:o}}function ll(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=t.useMemo((function(){return new rl(e)}),[]);if(o.applyHandlers(e,i),o.applyConfig(n,r),t.useEffect(o.effect.bind(o)),t.useEffect((function(){return o.clean.bind(o)}),[]),void 0===n.target)return o.bind.bind(o)}function cl(e){return e.forEach(qu),function(e,t){var n=ul(e,t||{}),r=n.handlers,i=n.nativeHandlers;return ll(r,n.config,void 0,i)}}var dl=10,pl=/Mac|iPod|iPhone|iPad/.test("undefined"===typeof window?"node":window.navigator.platform);function fl(e){var t=e.deltaY,n=e.deltaX,r=0;if(e.ctrlKey||e.altKey||e.metaKey){var i=Math.sign(e.deltaY),o=t;Math.abs(e.deltaY)>dl&&(o=dl*i),r=o/100}else e.shiftKey&&!pl&&(n=t,t=0);return{x:-n,y:-t,z:-r}}var hl=cl([Gu,$u]),vl=void 0;function gl(e){var n=ma(),r=t.useMemo((function(){var t=new Di;return{onWheel:function(e){var t=e.event;if(r=Date.now(),!(void 0===vl?(vl=r,0):r-vl>120&&r-vl<160?(vl=r,1):(vl=r,0))){var r;if(n.editingId){var i=n.getShapeById(n.editingId);if(i)if(n.getShapeUtil(i).canScroll(i)){var o=n.getPageBoundsById(n.editingId);if(null!==o&&void 0!==o&&o.containsPoint(n.inputs.currentPagePoint))return}}ss(t);var a=fl(t);if(0!==a.x||0!==a.y){var s={type:"wheel",name:"wheel",delta:a,shiftKey:t.shiftKey,altKey:t.altKey,ctrlKey:t.metaKey||t.ctrlKey};n.dispatch(s)}}},onPinchStart:function(r){var i=e.current,o=r.event,a=r.origin;o instanceof WheelEvent||(o.target===i||null!==i&&void 0!==i&&i.contains(o.target))&&(t.x=a[0],t.y=a[1],n.dispatch({type:"pinch",name:"pinch_start",point:{x:a[0],y:a[1],z:n.camera.z},delta:{x:0,y:0},shiftKey:o.shiftKey,altKey:o.altKey,ctrlKey:o.metaKey||o.ctrlKey}))},onPinchEnd:function(t){var r=e.current,i=t.event,o=t.origin,a=t.offset;if(!(i instanceof WheelEvent)&&(i.target===r||null!==r&&void 0!==r&&r.contains(i.target))){var s=a[0];requestAnimationFrame((function(){n.dispatch({type:"pinch",name:"pinch_end",point:{x:o[0],y:o[1],z:s},delta:{x:o[0],y:o[1]},shiftKey:i.shiftKey,altKey:i.altKey,ctrlKey:i.metaKey||i.ctrlKey})}))}},onPinch:function(r){var i=e.current,o=r.event,a=r.origin,s=r.offset[0];if(!(o instanceof WheelEvent)&&(o.target===i||null!==i&&void 0!==i&&i.contains(o.target))){var u=a[0]-t.x,l=a[1]-t.y;t.x=a[0],t.y=a[1],n.dispatch({type:"pinch",name:"pinch",point:{x:a[0],y:a[1],z:s},delta:{x:u,y:l},shiftKey:o.shiftKey,altKey:o.altKey,ctrlKey:o.metaKey||o.ctrlKey})}}}}),[n,e]);hl(r,{target:e,eventOptions:{passive:!1},pinch:{from:function(){return[n.camera.z,0]},scaleBounds:function(){return{from:n.camera.z,max:8,min:.05}}}})}function ml(e,t,n){var r=e.getShapeById(t);return{shape:r,handle:e.getShapeUtil(r).handles(r).find((function(e){return e.id===n}))}}function yl(e){var t=ma();return va("isEditing",(function(){return t.editingId===e}),[t,e])}var bl=function(e,t,n){return new Promise((function(r,i){var o=8*t*e,a=document.createElement("canvas");a.width=o,a.height=o;var s=a.getContext("2d");if(!s)throw new Error("No canvas");s.fillStyle=n?"#212529":"#f8f9fa",s.fillRect(0,0,o,o),s.globalCompositeOperation="destination-out",s.lineCap="round",s.lineWidth=1.25*t*e;var u=8/12,l=function(n){return n*t*e};s.beginPath(),s.moveTo(l(1*u),l(2)),s.lineTo(l(2),l(1*u)),s.moveTo(l(5*u),l(7*u)),s.lineTo(l(7*u),l(5*u)),s.moveTo(l(6),l(11*u)),s.lineTo(l(11*u),l(6)),s.stroke(),a.toBlob((function(e){!e||wa.throwToBlob.value?i():r(e)}))}))},wl=function(e,t){var n=document.createElement("canvas");return n.width=e[0],n.height=e[1],t(n.getContext("2d")),n.toDataURL()},xl=function(){var e=ma().devicePixelRatio,n=N((0,t.useState)(!1),2),r=n[0],i=n[1],o=(0,t.useMemo)((function(){return function(){for(var e=[],t=1;t<=Math.ceil(8);t++){var n=wl([1,1],(function(e){e.fillStyle="#e8e8e8",e.fillRect(0,0,1,1)})),r=wl([1,1],(function(e){e.fillStyle="#2c3036",e.fillRect(0,0,1,1)}));e.push({zoom:t,url:n,darkMode:!1}),e.push({zoom:t,url:r,darkMode:!0})}return e}()}),[]),a=N((0,t.useState)(o),2),s=a[0],u=a[1];return(0,t.useEffect)((function(){for(var t=[],n=function(n){t.push(bl(e,n,!1).then((function(e){return{zoom:n,url:URL.createObjectURL(e),darkMode:!1}}))),t.push(bl(e,n,!0).then((function(e){return{zoom:n,url:URL.createObjectURL(e),darkMode:!0}})))},r=1;r<=Math.ceil(8);r++)n(r);var o=!1;return Promise.all(t).then((function(e){o||(u(e),i(!0))})),function(){o=!0,i(!1)}}),[e]),{context:(0,Mi.jsx)("defs",{children:s.map((function(e){var t=e.zoom+(e.darkMode?"_dark":"_light");return(0,Mi.jsx)("pattern",{id:Xo[t],width:8,height:8,patternUnits:"userSpaceOnUse",children:(0,Mi.jsx)("image",{href:e.url,width:8,height:8})},t)}))}),isReady:r}},kl=8/12;function Sl(){var e=document.createElement("div");return e.innerHTML='\n\t\t<svg>\n\t\t\t<defs>\n\t\t\t\t<g>\n\t\t\t\t\t<pattern\n\t\t\t\t\t\tid="hash_pattern"\n\t\t\t\t\t\twidth="8"\n\t\t\t\t\t\theight="8"\n\t\t\t\t\t\tpatternUnits="userSpaceOnUse"\n\t\t\t\t\t\tstrokeLinecap="round"\n\t\t\t\t\t\tstroke="white"\n\t\t\t\t\t>\n\t\t\t\t\t\t<line x1="'.concat(1*kl,'" y1="').concat(2,'" x2="').concat(2,'" y2="').concat(1*kl,'" />\n\t\t\t\t\t\t<line x1="').concat(5*kl,'" y1="').concat(7*kl,'" x2="').concat(7*kl,'" y2="').concat(5*kl,'" />\n\t\t\t\t\t\t<line x1="').concat(6,'" y1="').concat(11*kl,'" x2="').concat(11*kl,'" y2="').concat(6,'" />\n\t\t\t\t\t</pattern>\n\t\t\t\t\t<mask id="hash_mask">\n\t\t\t\t\t\t','<rect x="-100%" y="-100%" width="200%" height="200%" fill="url(#hash_pattern)" />',"\n\t\t\t\t\t</mask>\n\t\t\t\t</g>\n\t\t\t</defs>\n\t\t</svg>\n\t"),e.querySelectorAll("defs > *")}var _l=n(3881);var Pl=function(e,t,n){return function(r){if(e.pageState.editingId===t&&(r.isKilled=!0),!r.isKilled){switch(n){case"pointer_down":if(0!==r.button&&2!==r.button)return;us(r.currentTarget,r);break;case"pointer_up":ls(r.currentTarget,r)}var i=e.getShapeById(t);i?e.dispatch(x({type:"pointer",target:"shape",shape:i,name:n},Us(r,e.getContainer()))):console.error("Shape not found",t)}}};var Cl=t.memo((function(e){var t=e.d,n=e.color,r=e.fill;switch(r){case"none":return(0,Mi.jsx)("path",{className:"rs-hitarea-stroke",fill:"none",d:t});case"solid":return(0,Mi.jsx)("path",{className:"rs-hitarea-fill-solid",fill:"var(--palette-".concat(n,"-semi)"),d:t});case"semi":return(0,Mi.jsx)("path",{className:"rs-hitarea-fill-solid",fill:"var(--palette-solid)",d:t});case"pattern":return(0,Mi.jsx)(El,{color:n,fill:r,d:t})}})),El=fa((function(e){var t=e.d,n=e.color,r=ma(),i=Math.ceil(r.zoomLevel),o=r.zoomLevel<=.18,a=r.userDocumentSettings.isDarkMode;return(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsx)("path",{className:"rs-hitarea-fill-solid",fill:"var(--palette-".concat(n,"-pattern)"),d:t}),(0,Mi.jsx)("path",{fill:o?"var(--palette-".concat(n,"-semi)"):"url(#".concat(Xo[i+(a?"_dark":"_light")],")"),d:t})]})}));function Il(e){var t=e.d,n=e.color,r=e.fill,i=e.colors;if("none"!==r){if("pattern"===r){var o=document.createElementNS("http://www.w3.org/2000/svg","g"),a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttribute("d",t),a.setAttribute("fill",i.background);var s=document.createElementNS("http://www.w3.org/2000/svg","path");return s.setAttribute("d",t),s.setAttribute("mask","url(#hash_mask)"),s.setAttribute("fill",i.pattern[n]),o.appendChild(a),o.appendChild(s),o}var u=document.createElementNS("http://www.w3.org/2000/svg","path");switch(u.setAttribute("d",t),r){case"semi":u.setAttribute("fill",i.solid);break;case"solid":u.setAttribute("fill",i.semi[n])}return u}}function Ml(e,t){if(t){var n=document.createElementNS("http://www.w3.org/2000/svg","g");return n.appendChild(t),n.appendChild(e),n}return e}function Tl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.closed,i=void 0!==r&&r,o=n.snap,a=void 0===o?1:o,s=n.start,u=void 0===s?"outset":s,l=n.end,c=void 0===l?"outset":l,d=n.lengthRatio,p=void 0===d?2:d,f=n.style,h=void 0===f?"dashed":f,v=0,g=0,m=1,y=0,b=0;switch(h){case"dashed":m=1,v=Math.min(t*p,e/4);break;case"dotted":v=t/(m=100);break;default:return{strokeDasharray:"none",strokeDashoffset:"none"}}return i||("outset"===u?(e+=v/2,b+=v/2):"skip"===u&&(e-=v,b-=v),"outset"===c?e+=v/2:"skip"===c&&(e-=v)),g=Math.floor(e/v/(2*m)),(g-=g%a)<3&&"dashed"===h?e/t<5?(v=e,g=1,y=0):(v=.333*e,y=.333*e):(v=e/(g=Math.max(g,3))/(2*m),i?(b=v/2,y=(e-g*v)/g):y=(e-g*v)/Math.max(1,g-1)),{strokeDasharray:[v,y].join(" "),strokeDashoffset:b.toString()}}var jl=function(e){return e.stopPropagation()};function Al(e,t){var n=t.padding,r=void 0===n?0:n,i=document.createElementNS("http://www.w3.org/2000/svg","text");i.setAttribute("font-size",t.fontSize+"px"),i.setAttribute("font-family",t.fontFamily),i.setAttribute("font-style",t.fontStyle),i.setAttribute("font-weight",t.fontWeight),i.setAttribute("line-height",t.lineHeight*t.fontSize+"px"),i.setAttribute("dominant-baseline","mathematical"),i.setAttribute("alignment-baseline","mathematical");for(var o=t.lines.map((function(e){return e.trim()})),a=[],s=o.length*(t.lineHeight*t.fontSize),u=(Math.ceil(t.height)-s)/2,l=r,c=0;c<o.length;c++){var d=document.createElementNS("http://www.w3.org/2000/svg","tspan");d.setAttribute("alignment-baseline","mathematical"),d.textContent=o[c].replace(/\s(\s+)/g,(function(e,t){for(var n=" ",r=0;r<t.length;r++)n+="\xa0";return n})),o.length>1&&c<o.length-1&&(d.textContent+="\n"),d.setAttribute("y",u+t.fontSize/2+t.lineHeight*t.fontSize*c+"px"),i.appendChild(d),a.push(d)}switch(t.stroke&&t.strokeWidth&&(i.setAttribute("stroke",t.stroke),i.setAttribute("stroke-width",t.strokeWidth+"px")),t.fill&&i.setAttribute("fill",t.fill),t.textAlign){case"middle":i.setAttribute("text-align","center"),i.setAttribute("text-anchor","start"),a.forEach((function(n,i){var a=e.textMeasure.measureText(x(x({},ra),{},{text:o[i].trim(),fontFamily:t.fontFamily,fontSize:t.fontSize,width:"fit-content",padding:"".concat(r,"px")})).w;n.setAttribute("x",l+(t.width-a)/2+"")}));break;case"end":i.setAttribute("text-align","right"),i.setAttribute("text-anchor","start"),a.forEach((function(n,i){var a=e.textMeasure.measureText(x(x({},ra),{},{text:o[i].trim(),fontFamily:t.fontFamily,fontSize:t.fontSize,width:"fit-content",padding:"".concat(r,"px")})).w;n.setAttribute("x",l+t.width-a+"")}));break;default:i.setAttribute("text-align","left"),i.setAttribute("text-anchor","start"),a.forEach((function(e){return e.setAttribute("x",l+"")}))}return i}var Ol=Object.defineProperty,zl=Object.getOwnPropertyDescriptor,Dl=function(e,t,n,r){for(var i,o=r>1?void 0:r?zl(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Ol(t,n,o),o},Nl=new ya,Rl=new ya,Ll=function(){function e(t,n){var r=this;o(this,e),b(this,"canScroll",(function(){return!1})),b(this,"canUnmount",(function(){return!0})),b(this,"canBind",(function(e,t){return!0})),b(this,"canEdit",(function(){return!1})),b(this,"canResize",(function(){return!0})),b(this,"getEditingBounds",(function(e){return r.bounds(e)})),b(this,"isClosed",(function(){return!0})),b(this,"hideResizeHandles",(function(){return!1})),b(this,"hideRotateHandle",(function(){return!1})),b(this,"hideSelectionBoundsBg",(function(){return!1})),b(this,"hideSelectionBoundsFg",(function(){return!1})),b(this,"isAspectRatioLocked",(function(){return!1})),b(this,"onBeforeCreate",void 0),b(this,"onBeforeUpdate",void 0),b(this,"onDragShapesOver",void 0),b(this,"onDragShapesOut",void 0),b(this,"onDropShapesOver",void 0),b(this,"onResizeStart",void 0),b(this,"onResize",void 0),b(this,"onResizeEnd",void 0),b(this,"onTranslateStart",void 0),b(this,"onTranslate",void 0),b(this,"onTranslateEnd",void 0),b(this,"onRotateStart",void 0),b(this,"onRotateEnd",void 0),b(this,"onRotate",void 0),b(this,"onHandleChange",void 0),b(this,"onBindingChange",void 0),b(this,"onChildrenChange",void 0),b(this,"onDoubleClickHandle",void 0),b(this,"onDoubleClickEdge",void 0),b(this,"onDoubleClick",void 0),b(this,"onClick",void 0),b(this,"onEditEnd",void 0),this.app=t,this.type=n}return l(e,[{key:"is",value:function(e){return e.type===this.type}},{key:"handlesCache",get:function(){var e=this;return this.app.store.createComputedCache("handles:"+this.type,(function(t){return e.getHandles(t)}))}},{key:"handles",value:function(e){var t;return this.getHandles&&null!==(t=this.handlesCache.get(e.id))&&void 0!==t?t:re}},{key:"boundsCache",get:function(){var e=this;return this.app.store.createComputedCache("bounds:"+this.type,(function(t){return e.getBounds(t)}))}},{key:"bounds",value:function(e){var t,n=null!==(t=this.boundsCache.get(e.id))&&void 0!==t?t:new uo;return 0===n.width||0===n.height?new uo(n.x,n.y,Math.max(n.width,1),Math.max(n.height,1)):n}},{key:"transform",value:function(e){return Rl.get(e,(function(e){return go.Compose(go.Translate(e.x,e.y),go.Rotate(e.rotation))}))}},{key:"point",value:function(e){return Nl.get(e,(function(e){return{x:e.x,y:e.y}}))}},{key:"outlineCache",get:function(){var e=this;return this.app.store.createComputedCache("outline:"+this.type,(function(t){return e.getOutline(t)}))}},{key:"outline",value:function(e){var t;return null!==(t=this.outlineCache.get(e.id))&&void 0!==t?t:re}},{key:"snapPoints",value:function(e){return this.bounds(e).snapPoints}},{key:"center",value:function(e){return this.getCenter(e)}},{key:"canReceiveNewChildrenOfType",value:function(e){return!1}},{key:"canDropShapes",value:function(e,t){return!1}},{key:"hitTestPoint",value:function(e,t){return this.bounds(e).containsPoint(t)}},{key:"hitTestLineSegment",value:function(e,t,n){for(var r=this.outline(e),i=0;i<r.length;i++){if(zo(t,n,r[i],r[(i+1)%r.length]))return!0}return!1}}]),e}();function Bl(e,t,n){var r,i="end"===t?e.end.point:e.start.point,o="end"===t?e.start.point:e.end.point,a=e.isStraight?Di.Dist(o,i):Math.abs(e.bodyArc.length),s=Math.max(Math.min(a/5,3*n),n);if(e.isStraight)r=Di.Nudge(i,o,s);else{var u=function(e,t,n,r){var i=n.x-e.x,o=n.y-e.y,a=Math.sqrt(i*i+o*o),s=(a*a-r*r+t*t)/(2*a),u=Math.sqrt(t*t-s*s);return i/=a,o/=a,[new Di(e.x+i*s-o*u,e.y+o*s+i*u),new Di(e.x+i*s+o*u,e.y+o*s-i*u)]}(i,s,e.handleArc.center,e.handleArc.radius);r="end"===t?e.handleArc.sweepFlag?u[0]:u[1]:e.handleArc.sweepFlag?u[1]:u[0]}return{point:i,int:r}}function Fl(e,t,n){var r="end"===t?e.end.arrowhead:e.start.arrowhead;if("none"!==r){var i=Bl(e,t,n);if(i){switch(r){case"bar":return function(e){var t=e.int,n=e.point,r=Di.Sub(t,n).div(2),i=Di.Add(n,Di.Rot(r,Li)),o=Di.Sub(n,Di.Rot(r,Li));return"M ".concat(i.x," ").concat(i.y," L ").concat(o.x," ").concat(o.y)}(i);case"square":return function(e){var t=e.int,n=e.point,r=Di.Lrp(n,t,.85),i=Di.Sub(r,n).div(2),o=Di.Add(n,Di.Rot(i,Li)),a=Di.Sub(n,Di.Rot(i,Li)),s=Di.Add(r,Di.Rot(i,Li)),u=Di.Sub(r,Di.Rot(i,Li));return"M ".concat(o.x," ").concat(o.y," L ").concat(s.x," ").concat(s.y," L ").concat(u.x," ").concat(u.y," L ").concat(a.x," ").concat(a.y," Z")}(i);case"diamond":return function(e){var t=e.point,n=e.int,r=Di.Lrp(t,n,.75),i=Di.RotWith(r,t,Ri/4),o=Di.RotWith(r,t,-Ri/4),a=Di.Lrp(i,o,.5);return a.add(Di.Sub(a,t)),"M ".concat(a.x," ").concat(a.y," L ").concat(i.x," ").concat(i.y," ").concat(t.x," ").concat(t.y," L ").concat(o.x," ").concat(o.y," Z")}(i);case"dot":return function(e){var t=e.point,n=e.int,r=Di.Lrp(t,n,.45),i=Di.Dist(r,t);return"M ".concat(r.x-i,",").concat(r.y,"\n  a ").concat(i,",").concat(i," 0 1,0 ").concat(2*i,",0\n  a ").concat(i,",").concat(i," 0 1,0 -").concat(2*i,",0 ")}(i);case"inverted":return function(e){var t=e.point,n=e.int,r=Di.Sub(n,t).div(2),i=Di.Add(t,Di.Rot(r,Li)),o=Di.Sub(t,Di.Rot(r,Li));return"M ".concat(i.x," ").concat(i.y," L ").concat(n.x," ").concat(n.y," L ").concat(o.x," ").concat(o.y," Z")}(i);case"arrow":return function(e){var t=e.point,n=e.int,r=Di.RotWith(n,t,Ri/6),i=Di.RotWith(n,t,-Ri/6);return"M ".concat(r.x," ").concat(r.y," L ").concat(t.x," ").concat(t.y," L ").concat(i.x," ").concat(i.y)}(i);case"triangle":return function(e){var t=e.point,n=e.int,r=Di.RotWith(n,t,Ri/6),i=Di.RotWith(n,t,-Ri/6);return"M ".concat(r.x," ").concat(r.y," L ").concat(t.x," ").concat(t.y," L ").concat(i.x," ").concat(i.y," Z")}(i)}return""}}}function Ul(e,t){if("point"!==t.type){var n=e.getShapeById(t.boundShapeId);return{shape:n,util:e.getShapeUtil(n),transform:e.getPageTransform(n),isExact:t.isExact,didIntersect:!1}}}function Kl(e,t,n){if("point"===n.type)return Di.From(n);var r=e.getShapeById(n.boundShapeId);if(r){var i=e.getBounds(r),o=i.point,a=i.size,s=Di.Add(o,Di.MulV(n.normalizedAnchor,a)),u=go.applyToPoint(e.getPageTransform(r),s);return go.applyToPoint(go.Inverse(t),u)}return console.error("Expected a bound shape!"),new Di(0,0)}function Vl(e,t){var n=e.getPageTransform(t);return{start:Kl(e,n,t.props.start),end:Kl(e,n,t.props.end)}}function Wl(e,t){var n=t.props,r=n.start,i=n.end,o=n.arrowheadStart,a=n.arrowheadEnd,s=Vl(e,t),u=s.start.clone(),l=s.end.clone(),c=Di.Med(u,l),d=Di.Sub(l,u).uni(),p=Ul(e,r),f=Ul(e,i),h=e.getPageTransform(t);Hl(l,s.start,h,f),Hl(u,s.end,h,p);var v=Qo,g=p&&f&&p.shape===f.shape;!p||!f||g||p.isExact||f.isExact||(f.didIntersect&&!p.didIntersect?p.util.isClosed(p.shape)&&u.setTo(Di.Nudge(l,u,v)):f.didIntersect||f.util.isClosed(f.shape)&&l.setTo(Di.Nudge(u,l,v)));var m=Di.Sub(l,u).uni(),y=!Di.Equals(m,d);if(!g){if(p&&"none"!==o&&!p.isExact){var b=Zo+e.getStrokeWidth(t.props.size)/2+("size"in p.shape.props?e.getStrokeWidth(p.shape.props.size)/2:0);v-=b,u.nudge(l,b*(y?-1:1))}if(f&&"none"!==a&&!f.isExact){var w=Zo+e.getStrokeWidth(t.props.size)/2+("size"in f.shape.props?e.getStrokeWidth(f.shape.props.size)/2:0);v-=w,l.nudge(u,w*(y?-1:1))}}p&&f&&(y?l.setTo(Di.Add(u,m.mul(-v))):Di.Dist(u,l)<Qo/2&&l.setTo(Di.Add(u,m.mul(Qo/2)))),y?c.setTo(Di.Med(s.start,s.end)):c.setTo(Di.Med(u,l));var x=Di.Dist(u,l);return{isStraight:!0,start:{handle:s.start,point:u,arrowhead:t.props.arrowheadStart},end:{handle:s.end,point:l,arrowhead:t.props.arrowheadEnd},middle:c,isValid:x>0,length:x}}function Hl(e,t,n,r){if(void 0!==r&&!r.isExact){var i,o,a=go.applyToPoint(n,t),s=go.applyToPoint(n,e),u=go.applyToPoint(go.Inverse(r.transform),a),l=go.applyToPoint(go.Inverse(r.transform),s),c=r.util.isClosed(r.shape),d=(c?To:Mo)(u,l,r.util.outline(r.shape));if(null!==d)i=null!==(o=d.sort((function(e,t){return Di.Dist(e,u)-Di.Dist(t,u)}))[0])&&void 0!==o?o:c?void 0:l;if(void 0!==i){var p=go.applyToPoint(r.transform,i),f=go.applyToPoint(go.Inverse(n),p);e.setTo(f),r.didIntersect=!0}}}function Yl(e){return ql(e.start.handle,e.end.handle)}function Xl(e){return ql(e.start.point,e.end.point)}function ql(e,t){return"M".concat(e.x,",").concat(e.y,"L").concat(t.x,",").concat(t.y)}function $l(e){var t=e.start,n=e.end,r=e.handleArc,i=r.radius,o=r.largeArcFlag,a=r.sweepFlag;return"M".concat(t.handle.x,",").concat(t.handle.y," A").concat(i," ").concat(i," 0 ").concat(o," ").concat(a," ").concat(n.handle.x,",").concat(n.handle.y)}function Gl(e){var t=e.start,n=e.end,r=e.bodyArc,i=r.radius,o=r.largeArcFlag,a=r.sweepFlag;return"M".concat(t.point.x,",").concat(t.point.y," A").concat(i," ").concat(i," 0 ").concat(o," ").concat(a," ").concat(n.point.x,",").concat(n.point.y)}function Ql(e,t,n){var r=-2*(e.x*(t.y-n.y)-e.y*(t.x-n.x)+t.x*n.y-n.x*t.y),i={x:((e.x*e.x+e.y*e.y)*(n.y-t.y)+(t.x*t.x+t.y*t.y)*(e.y-n.y)+(n.x*n.x+n.y*n.y)*(t.y-e.y))/r,y:((e.x*e.x+e.y*e.y)*(t.x-n.x)+(t.x*t.x+t.y*t.y)*(n.x-e.x)+(n.x*n.x+n.y*n.y)*(e.x-t.x))/r},o=Di.Dist(i,e),a=+Di.Clockwise(e,n,t),s=Math.hypot(e.y-t.y,e.x-t.x),u=Math.hypot(t.y-n.y,t.x-n.x),l=Math.hypot(n.y-e.y,n.x-e.x),c=2*Math.acos((u*u+l*l-s*s)/(2*u*l)),d=(Bi-c)*(a?1:-1);return{center:i,radius:o,size:d,length:d*o,largeArcFlag:+(Ri>c),sweepFlag:a}}Dl([Oe],Ll.prototype,"handlesCache",1),Dl([Oe],Ll.prototype,"boundsCache",1),Dl([Oe],Ll.prototype,"outlineCache",1);var Zl=function(){function e(){o(this,e)}return l(e,null,[{key:"insertTextFirefox",value:function(e,t){e.setRangeText(t,e.selectionStart||0,e.selectionEnd||0,"end"),e.dispatchEvent(new InputEvent("input",{data:t,inputType:"insertText",isComposing:!1}))}},{key:"insert",value:function(t,n){var r=t.ownerDocument,i=r.activeElement;i!==t&&t.focus(),r.execCommand("insertText",!1,n)||e.insertTextFirefox(t,n),i===r.body?t.blur():i instanceof HTMLElement&&i!==t&&i.focus()}},{key:"set",value:function(t,n){t.select(),e.insert(t,n)}},{key:"getSelection",value:function(e){var t=e.selectionStart,n=e.selectionEnd;return e.value.slice(t||void 0,n||void 0)}},{key:"wrapSelection",value:function(t,n,r){var i=t.selectionStart,o=t.selectionEnd,a=e.getSelection(t);e.insert(t,n+a+(null!==r&&void 0!==r?r:n)),t.selectionStart=(i||0)+n.length,t.selectionEnd=(o||0)+n.length}},{key:"replace",value:function(t,n,r){var i=0;t.value.replace(n,(function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i+o[o.length-2],u=o[0].length;t.selectionStart=s,t.selectionEnd=s+u;var l="string"===typeof r?r:r.apply(void 0,o);return e.insert(t,l),t.selectionStart=s,i+=l.length-u,l}))}},{key:"findLineEnd",value:function(e,t){var n=e.lastIndexOf("\n",t-1)+1;return"\t"!==e.charAt(n)?t:n+1}},{key:"indent",value:function(t){var n,r=t.selectionStart,i=t.selectionEnd,o=t.value,a=o.slice(r,i),s=null===(n=/\n/g.exec(a))||void 0===n?void 0:n.length;if(s&&s>0){var u=o.lastIndexOf("\n",r-1)+1,l=t.value.slice(u,i-1),c=l.replace(/^|\n/g,"$&".concat(e.INDENT)),d=c.length-l.length;t.setSelectionRange(u,i-1),e.insert(t,c),t.setSelectionRange(r+1,i+d)}else e.insert(t,e.INDENT)}},{key:"unindent",value:function(t){var n=t.selectionStart,r=t.selectionEnd,i=t.value,o=i.lastIndexOf("\n",n-1)+1,a=e.findLineEnd(i,r),s=t.value.slice(o,a),u=s.replace(/(^|\n)(\t| {1,2})/g,"$1"),l=s.length-u.length;t.setSelectionRange(o,a),e.insert(t,u);var c=/\t| {1,2}/.exec(i.slice(o,n)),d=c?c[0].length:0,p=n-d;t.setSelectionRange(n-d,Math.max(p,r-l))}},{key:"indentCE",value:function(t){var n,r,i,o=window.getSelection(),a=t.innerText,s=null!==(n=Jl(t))&&void 0!==n?n:0,u=null!==(r=Jl(t))&&void 0!==r?r:0,l=a.slice(s,u),c=null===(i=/\n/g.exec(l))||void 0===i?void 0:i.length;if(c&&c>0){var d=a.lastIndexOf("\n",s-1)+1,p=a.slice(d,u-1),f=p.replace(/^|\n/g,"$&".concat(e.INDENT)).length-p.length;o&&o.setBaseAndExtent(t,s+1,t,u+f)}else{var h=window.getSelection();t.innerText=a.slice(0,s)+e.INDENT+a.slice(s),null===h||void 0===h||h.setBaseAndExtent(t,s+1,t,s+2)}}},{key:"unindentCE",value:function(t){var n,r,i=window.getSelection(),o=t.innerText,a=null!==(n=Jl(t))&&void 0!==n?n:0,s=null!==(r=Jl(t))&&void 0!==r?r:0,u=o.lastIndexOf("\n",a-1)+1,l=e.findLineEnd(o,s),c=o.slice(u,l),d=c.replace(/(^|\n)(\t| {1,2})/g,"$1"),p=c.length-d.length;if(i){i.setBaseAndExtent(t,u,t,l);var f=/\t| {1,2}/.exec(o.slice(u,a)),h=f?f[0].length:0,v=a-h;i.setBaseAndExtent(t,a-h,t,Math.max(v,s-p))}}},{key:"normalizeText",value:function(t){return t.replace(e.fixNewLines,"\n")}},{key:"normalizeTextForDom",value:function(t){return t.replace(e.fixNewLines,"\n").split("\n").map((function(e){return e||" "})).join("\n")}}]),e}();function Jl(e){if("undefined"!==typeof window.getSelection){var t=window.getSelection();if(t){var n=0;if(0!==t.rangeCount){var r=t.getRangeAt(0),i=r.cloneRange();i.selectNodeContents(e),i.setEnd(r.endContainer,r.endOffset),n=i.toString().length}return n}}}function ec(e,n,r){var i=ma(),o=(0,t.useRef)(null),a=va("isEditing",(function(){return i.pageState.editingId===e}),[i,e]),s=(0,t.useRef)(!1),u=(0,t.useRef)(),l=va("is editable hovering",(function(){if("text"===n&&i.isIn("text")&&i.hoveredId===e)return!0;if(i.isIn("select.editing_shape")){var t=i.editingShape;return!!t&&(i.hoveredId===e&&t.type===n&&i.getShapeUtil(t).canEdit(t))}return!1}),[n,e]),c=(0,t.useCallback)((function(){l||requestAnimationFrame((function(){var t=o.current;if(t){var n=i.getShapeById(e);n&&(t.value=n.props.text,t.value.length&&!s.current&&t.select(),s.current=!1)}}))}),[i,e,l]),d=(0,t.useCallback)((function(){var e=u.current;requestAnimationFrame((function(){var t,n=o.current;if(i.isIn("select.editing_shape")&&n)if(e)if(e.length){s.current=!0,n.focus();var r=window.getSelection();r&&e.forEach((function(e){return r.addRange(e)}))}else n.focus();else n.focus();else null===(t=window.getSelection())||void 0===t||t.removeAllRanges(),i.complete()}))}),[i]),p=(0,t.useCallback)((function(e){switch((e.ctrlKey||e.metaKey)&&jl(e),e.key){case"Enter":(e.ctrlKey||e.metaKey)&&i.complete();break;case"Tab":ss(e),e.shiftKey?Zl.unindent(e.currentTarget):Zl.indent(e.currentTarget)}}),[i]),f=(0,t.useCallback)((function(t){var r=Zl.normalizeText(t.currentTarget.value);i.updateShapes([{id:e,type:n,props:{text:r}}])}),[i,e,n]),h=0===r.trim().length;return(0,t.useEffect)((function(){if(o.current){var e=function(){var e,t,n=null===(e=(t=window).getSelection)||void 0===e?void 0:e.call(t);if(n&&"None"!==n.type){var r=[];if(n)for(var i=0;i<n.rangeCount;i++){var o;r.push(null===(o=n.getRangeAt)||void 0===o?void 0:o.call(n,i))}u.current=r}};return document.addEventListener("selectionchange",e),function(){document.removeEventListener("selectionchange",e)}}})),{rInput:o,isEditing:a,isEditableFromHover:l,handleFocus:c,handleBlur:d,handleKeyDown:p,handleChange:f,isEmpty:h}}b(Zl,"fixNewLines",/\r?\n|\r/g),b(Zl,"INDENT","  ");var tc=t.memo((function(e){var t=e.id,n=e.text,r=e.size,i=e.font,o=e.position,a=e.width,s=e.labelColor,u=ec(t,"arrow",n),l=u.rInput,c=u.isEditing,d=u.handleFocus,p=u.handleBlur,f=u.handleKeyDown,h=u.handleChange,v=u.isEmpty;return!c&&v?null:(0,Mi.jsx)("div",{className:"rs-arrow-label","data-font":i,"data-align":"center","data-hastext":!v,"data-isediting":c,style:{textAlign:"center",fontSize:aa[r],lineHeight:aa[r]*ra.lineHeight+"px",transform:"translate(".concat(o.x,"px, ").concat(o.y,"px)"),color:s},children:(0,Mi.jsxs)("div",{className:"rs-arrow-label__inner",children:[(0,Mi.jsx)("p",{style:{width:a||"9px"},children:n?Zl.normalizeTextForDom(n):" "}),c&&(0,Mi.jsx)("textarea",{ref:l,className:"rs-text rs-text-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:n,onFocus:d,onChange:h,onKeyDown:f,onBlur:p,onContextMenu:jl})]})})})),nc=Object.defineProperty,rc=Object.getOwnPropertyDescriptor,ic=function(e,t,n,r){for(var i,o=r>1?void 0:r?rc(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&nc(t,n,o),o},oc=0,ac=function(e){d(r,e);var n=v(r);function r(){var e;o(this,r);for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return b(h(e=n.call.apply(n,[this].concat(i))),"canEdit",(function(){return!0})),b(h(e),"canBind",(function(){return!1})),b(h(e),"isClosed",(function(){return!1})),b(h(e),"hideResizeHandles",(function(){return!0})),b(h(e),"hideRotateHandle",(function(){return!0})),b(h(e),"hideSelectionBoundsFg",(function(){return!0})),b(h(e),"hideSelectionBoundsBg",(function(){return!0})),b(h(e),"onHandleChange",(function(t,n){var r=n.handle,i=n.isPrecise,o=U(t);switch(r.id){case"start":case"end":var a=e.app.getPageTransformById(o.id),s=go.applyToPoint(a,r),u=e.app.inputs.ctrlKey?void 0:_(e.app.getShapesAtPoint(s).filter((function(n){if(n.id!==t.id){var r=e.app.getShapeUtil(n);return r.canBind(o)&&r.hitTestPoint(n,e.app.getPointInShapeSpace(n,s))}})));if(u){var l=e.app.getBounds(u),c=e.app.getPointInShapeSpace(u,s),d=o.props[r.id],p="binding"===o.props.start.type&&o.props.start.boundShapeId,f="binding"===o.props.end.type&&o.props.end.boundShapeId,h=i||(p||f)&&p===f||!e.app.getShapeUtil(u).isClosed(o);("point"===d.type||"binding"===d.type&&u.id!==d.boundShapeId)&&(h=e.app.inputs.pointerVelocity.len()<.5),h&&(h=Di.Dist(c,l.center)>Math.max(4,Math.min(.15*Math.min(l.width,l.height),16))/e.app.zoomLevel),o.props[r.id]={type:"binding",boundShapeId:u.id,normalizedAnchor:h?{x:(c.x-l.minX)/l.width,y:(c.y-l.minY)/l.height}:{x:.5,y:.5},isExact:e.app.inputs.altKey}}else o.props[r.id]={type:"point",x:r.x,y:r.y};break;case"middle":var v=Vl(e.app,o),g=v.start,m=v.end,y=Di.Sub(m,g),b=Di.Per(y),w=Di.Med(m,g),x=Di.Sub(w,b),k=Di.Add(w,b),S=Di.NearestPointOnLineSegment(x,k,r,!1),P=Di.Dist(S,w);Di.Clockwise(S,m,w)&&(P*=-1),o.props.bend=P}return o})),b(h(e),"onTranslateStart",(function(t){var n="binding"===t.props.start.type?t.props.start.boundShapeId:null,r="binding"===t.props.end.type?t.props.end.boundShapeId:null;if(!(n&&e.app.isWithinSelection(n)||r&&e.app.isWithinSelection(r))){n=null,r=null;var i=Vl(e.app,t),o=i.start,a=i.end;return{id:t.id,type:t.type,props:x(x({},t.props),{},{start:{type:"point",x:o.x,y:o.y},end:{type:"point",x:a.x,y:a.y}})}}})),b(h(e),"onResize",(function(t,n){var r=n.scaleX,i=n.scaleY,o=Vl(e.app,t),a=t.props,s=a.start,u=a.end;if("point"===s.type){var l=o.start.x*r,c=o.start.y*i;s=x(x({},s),{},{x:l,y:c})}if("point"===u.type){var d=o.end.x*r,p=o.end.y*i;u=x(x({},u),{},{x:d,y:p})}var f=t.props.bend;if(0!==f){var h=Math.abs(r),v=Math.abs(i);r<0&&i>=0||r>=0&&i<0?(f*=-1,f*=Math.max(h,v)):(r>=0&&i>=0||r<0&&i<0)&&(f*=Math.max(h,v))}return{props:{start:s,end:u,bend:f}}})),b(h(e),"onDoubleClickHandle",(function(e,t){switch(t.id){case"start":return{id:e.id,type:e.type,props:x(x({},e.props),{},{arrowheadStart:"none"===e.props.arrowheadStart?"arrow":"none"})};case"end":return{id:e.id,type:e.type,props:x(x({},e.props),{},{arrowheadEnd:"none"===e.props.arrowheadEnd?"arrow":"none"})}}})),b(h(e),"getEditingBounds",(function(t){var n;return null!==(n=e.getLabelBounds(t))&&void 0!==n?n:new uo})),b(h(e),"onEditEnd",(function(t){var n=t.id,r=t.type,i=t.props.text;i.trim()!==t.props.text&&e.app.updateShapes([{id:n,type:r,props:{text:i.trim()}}])})),e}return l(r,[{key:"defaultProps",value:function(){return{opacity:"1",dash:"draw",size:"m",fill:"none",color:"black",labelColor:"black",bend:0,start:{type:"point",x:0,y:0},end:{type:"point",x:0,y:0},arrowheadStart:"none",arrowheadEnd:"arrow",text:"",font:"draw"}}},{key:"getCenter",value:function(e){return this.bounds(e).center}},{key:"getBounds",value:function(e){return uo.FromPoints(this.getOutlineWithoutLabel(e))}},{key:"getOutlineWithoutLabel",value:function(e){var t=this.getArrowInfo(e);if(!t)return[];if(t.isStraight)return t.isValid?[t.start.point,t.end.point]:[new Di(0,0),new Di(1,1)];if(!t.isValid)return[new Di(0,0),new Di(1,1)];var n=Math.max(5,Math.ceil(Math.abs(t.bodyArc.length)/16));if(n<=0&&!isFinite(n))return[new Di(0,0),new Di(1,1)];for(var r=Array(n),i=Di.Angle(t.bodyArc.center,t.start.point),o=Di.Angle(t.bodyArc.center,t.end.point),a=t.bodyArc.sweepFlag?o:i,s=t.bodyArc.sweepFlag?i:o,u=t.bodyArc.largeArcFlag?-(Bi-Xi(a,s)):Xi(a,s),l=Math.max(1,t.bodyArc.radius),c=0;c<n;c++){var d=a+u*(c/(n-1)),p=to(t.bodyArc.center.x,t.bodyArc.center.y,l,d);r[c]=p}return r}},{key:"getOutline",value:function(e){var t=this.getOutlineWithoutLabel(e),n=this.getLabelBounds(e);if(!n)return t;for(var r=n.sides,i=[0,1,2,3],o=t[0],a=!1,s=[o],u=function(){var e=t[l];if(!a){var n=function(e,t){var n,r,i=1/0,o=y(e);try{for(o.s();!(r=o.n()).done;){var a=r.value,s=t(a);s<i&&(n=a,i=s)}}catch(u){o.e(u)}finally{o.f()}return n}(i.filter((function(t){return zo(r[t][0],r[t][1],o,e)})),(function(e){return Di.DistanceToLineSegment(r[e][0],r[e][1],o)}));if(void 0!==n){var u=Di.NearestPointOnLineSegment(r[n][0],r[n][1],o);s.push(u);for(var c=0;c<4;c++){var d=(n+c)%4;s.push(r[d][1])}s.push(u),a=!0}}s.push(e),o=e},l=1;l<t.length;l++)u();return s}},{key:"snapPoints",value:function(e){return re}},{key:"infoCache",get:function(){var e=this;return this.app.store.createComputedCache("arrow infoCache",(function(t){return function(e){return Math.abs(e.props.bend)<8}(t)?Wl(e.app,t):function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.props,i=r.arrowheadEnd,o=r.arrowheadStart,a=t.props.bend+n;if(Math.abs(a)>Math.abs(10*t.props.bend))return Wl(e,t);var s=Vl(e,t),u=Di.Med(s.start,s.end),l=Di.Sub(s.end,s.start).uni(),c=Di.Add(u,l.per().mul(-a)),d=Ul(e,t.props.start),p=Ul(e,t.props.end),f=s.start.clone(),h=s.end.clone(),v=c.clone(),g=Ql(f,h,v),m=e.getPageTransform(t);if(d&&!d.isExact){var y,b=go.applyToPoint(m,f),w=go.applyToPoint(m,h),x=go.applyToPoint(m,g.center),k=go.Inverse(d.transform),S=go.applyToPoint(k,b),_=go.applyToPoint(k,w),P=go.applyToPoint(k,x),C=d.util.isClosed(d.shape),E=(C?jo:Ao)(P,g.radius,d.util.outline(d.shape));if(E){var I;E=E.filter((function(e){return+Di.Clockwise(S,e,_)===g.sweepFlag}));var M=qi(Di.Angle(g.center,c),Di.Angle(g.center,s.start),.5);E.sort((function(e,t){return Math.abs(Xi(M,P.angle(e)))-Math.abs(Xi(M,P.angle(t)))})),y=null!==(I=E[0])&&void 0!==I?I:C?void 0:S}else y=C?void 0:S;if(y&&(f.setTo(e.getPointInShapeSpace(t,go.applyToPoint(d.transform,y))),d.didIntersect=!0,"none"!==o)){var T=Zo+e.getStrokeWidth(t.props.size)/2+("size"in d.shape.props?e.getStrokeWidth(d.shape.props.size)/2:0);f.setTo(to(g.center.x,g.center.y,g.radius,qi(Di.Angle(g.center,f),Di.Angle(g.center,c),T/Math.abs(eo(g.center,g.radius,f,c)))))}}if(p&&!p.isExact){var j,A,O=go.applyToPoint(m,f),z=go.applyToPoint(m,h),D=go.applyToPoint(m,g.center),N=go.Inverse(p.transform),R=go.applyToPoint(N,O),L=go.applyToPoint(N,z),B=go.applyToPoint(N,D),F=p.util.isClosed(p.shape),U=F?jo:Ao,K=qi(Di.Angle(g.center,c),Di.Angle(g.center,s.end),.5),V=U(B,g.radius,p.util.outline(p.shape));if(V?((V=V.filter((function(e){return+Di.Clockwise(R,e,L)===g.sweepFlag}))).sort((function(e,t){return Math.abs(Xi(K,B.angle(e)))-Math.abs(Xi(K,B.angle(t)))})),j=null!==(A=V[0])&&void 0!==A?A:F?void 0:L):j=F?void 0:L,j&&(h.setTo(e.getPointInShapeSpace(t,go.applyToPoint(p.transform,j))),p.didIntersect=!0,"none"!==i)){var W=Zo+e.getStrokeWidth(t.props.size)/2+("size"in p.shape.props?e.getStrokeWidth(p.shape.props.size)/2:0);Di.Dist(f,h)<Qo&&(W*=-2),h.setTo(to(g.center.x,g.center.y,g.radius,qi(Di.Angle(g.center,h),Di.Angle(g.center,c),W/Math.abs(eo(g.center,g.radius,h,c)))))}}if(Math.abs(eo(g.center,g.radius,f,h))<Qo/2&&(f.setTo(s.start),h.setTo(s.end)),d&&p&&d.shape!==p.shape&&!d.isExact&&!p.isExact){var H=Di.Angle(g.center,f),Y=Di.Angle(g.center,h),X=g.sweepFlag?Qo:-Qo,q=eo(g.center,g.radius,h,f),$=g.center,G=$.x,Q=$.y,Z=g.radius;d&&!d.didIntersect&&f.setTo(to(G,Q,Z,qi(H,Y,X/q))),p&&!p.didIntersect&&h.setTo(to(G,Q,Z,qi(H,Y,-X/q)))}var J=qi(Di.Angle(g.center,f),Di.Angle(g.center,h),.5),ee=to(g.center.x,g.center.y,g.radius,J);+Di.Clockwise(f,ee,h)!==g.sweepFlag&&(J+=Ri,ee=to(g.center.x,g.center.y,g.radius,J)),v.setTo(ee);var te=Ql(f,h,v);return{isStraight:!1,start:{point:f,handle:s.start,arrowhead:t.props.arrowheadStart},end:{point:h,handle:s.end,arrowhead:t.props.arrowheadEnd},middle:v,handleArc:g,bodyArc:te,isValid:0!==te.length&&isFinite(te.center.x)&&isFinite(te.center.y)}}(e.app,t)}))}},{key:"getArrowInfo",value:function(e){return this.infoCache.get(e.id)}},{key:"getHandles",value:function(e){var t=this.infoCache.get(e.id);return[{id:"start",type:"vertex",index:"a0",x:t.start.handle.x,y:t.start.handle.y,canBind:!0},{id:"middle",type:"vertex",index:"a2",x:t.middle.x,y:t.middle.y,canBind:!1},{id:"end",type:"vertex",index:"a3",x:t.end.handle.x,y:t.end.handle.y,canBind:!0}]}},{key:"hitTestPoint",value:function(e,t){for(var n=this.outline(e),r=0;r<n.length-1;r++){var i=n[r],o=n[r+1];if(Di.DistanceToLineSegment(i,o,t)<4)return!0}return!1}},{key:"hitTestLineSegment",value:function(e,t,n){for(var r=this.outline(e),i=0;i<r.length-1;i++){if(zo(t,n,r[i],r[i+1]))return!0}return!1}},{key:"render",value:function(e){var n,r=this,i=this.app.onlySelectedShape,o=this.app.isInAny("select.idle","select.pointing_handle","select.dragging_handle","arrow.dragging")&&!this.app.isReadOnly,a=this.getArrowInfo(e),s=this.bounds(e),u=this.getLabelBounds(e),l=t.useMemo((function(){return r.app.isSafari?oc+=1:0}),[e]);if(null===a||void 0===a||!a.isValid)return null;var c=this.app.getStrokeWidth(e.props.size),d=a.start.arrowhead&&Fl(a,"start",c),p=a.end.arrowhead&&Fl(a,"end",c),f=a.isStraight?Xl(a):Gl(a),h=null;if(i===e&&o){var v=Tl(a.isStraight?Di.Dist(a.start.handle,a.end.handle):Math.abs(a.handleArc.length),2,{end:"skip",start:"skip",lengthRatio:2.5}),g=v.strokeDasharray,m=v.strokeDashoffset;h="binding"===e.props.start.type||"binding"===e.props.end.type?(0,Mi.jsx)("path",{className:"rs-arrow-hint",d:a.isStraight?Yl(a):$l(a),strokeDasharray:g,strokeDashoffset:m,strokeWidth:2,markerStart:"binding"===e.props.start.type?e.props.start.isExact?"":lc(e.props.start.normalizedAnchor)?"url(#arrowhead-cross)":"url(#arrowhead-dot)":"",markerEnd:"binding"===e.props.end.type?e.props.end.isExact?"":lc(e.props.end.normalizedAnchor)?"url(#arrowhead-cross)":"url(#arrowhead-dot)":"",opacity:.16}):null}var y=Tl(a.isStraight?a.length:Math.abs(a.bodyArc.length),c,{style:e.props.dash}),b=y.strokeDasharray,w=y.strokeDashoffset,k=!("none"===a.start.arrowhead||"arrow"===a.start.arrowhead),S=!("none"===a.end.arrowhead||"arrow"===a.end.arrowhead),_=k||S||u,P=(e.id+"_clip_"+l).replace(":","_");return(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsxs)(Lo,{id:e.id,style:{minWidth:50,minHeight:50},children:[_&&(0,Mi.jsx)("defs",{children:(0,Mi.jsxs)("mask",{id:P,children:[(0,Mi.jsx)("rect",{x:so(-100+s.minX),y:so(-100+s.minY),width:so(s.width+200),height:so(s.height+200),fill:"white"}),u&&(0,Mi.jsx)("rect",{x:so(u.x),y:so(u.y),width:so(u.w),height:so(u.h),fill:"black",rx:4,ry:4}),d&&k&&(0,Mi.jsx)("path",{d:d,fill:"arrow"===a.start.arrowhead?"none":"black",stroke:"none"}),p&&S&&(0,Mi.jsx)("path",{d:p,fill:"arrow"===a.end.arrowhead?"none":"black",stroke:"none"})]})}),(0,Mi.jsxs)("g",{fill:"none",stroke:"currentColor",strokeWidth:c,strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none",children:[h,(0,Mi.jsxs)("g",x(x({},_?{mask:"url(#".concat(P,")")}:void 0),{},{children:[_&&(0,Mi.jsx)("rect",{x:so(s.minX-100),y:so(s.minY-100),width:so(s.width+200),height:so(s.height+200),opacity:0}),(0,Mi.jsx)("path",{d:f,strokeDasharray:b,strokeDashoffset:w})]})),d&&k&&"none"!==e.props.fill&&(0,Mi.jsx)(Cl,{d:d,color:e.props.color,fill:e.props.fill}),p&&S&&"none"!==e.props.fill&&(0,Mi.jsx)(Cl,{d:p,color:e.props.color,fill:e.props.fill}),d&&(0,Mi.jsx)("path",{d:d}),p&&(0,Mi.jsx)("path",{d:p})]}),(0,Mi.jsx)("path",{d:f,className:"rs-hitarea-stroke"})]}),(0,Mi.jsx)(tc,{id:e.id,text:e.props.text,font:e.props.font,size:e.props.size,position:a.middle,width:null!==(n=null===u||void 0===u?void 0:u.w)&&void 0!==n?n:0,labelColor:this.app.getCssColor(e.props.labelColor)})]})}},{key:"indicator",value:function(e){var t=Vl(this.app,e),n=t.start,r=t.end,i=this.getArrowInfo(e),o=this.bounds(e),a=this.getLabelBounds(e);if(!i)return null;if(Di.Equals(n,r))return null;var s=this.app.getStrokeWidth(e.props.size),u=i.start.arrowhead&&Fl(i,"start",s),l=i.end.arrowhead&&Fl(i,"end",s),c=i.isStraight?Xl(i):Gl(i),d=u&&"arrow"!==i.start.arrowhead||l&&"arrow"!==i.end.arrowhead||null!==a,p=(e.id+"_clip").replace(":","_");return(0,Mi.jsxs)("g",{children:[d&&(0,Mi.jsx)("defs",{children:(0,Mi.jsxs)("mask",{id:p,children:[(0,Mi.jsx)("rect",{x:o.minX-100,y:o.minY-100,width:o.w+200,height:o.h+200,fill:"white"}),a&&(0,Mi.jsx)("rect",{x:a.x,y:a.y,width:a.w,height:a.h,fill:"black",rx:4,ry:4}),u&&(0,Mi.jsx)("path",{d:u,fill:"arrow"===i.start.arrowhead?"none":"black",stroke:"none"}),l&&(0,Mi.jsx)("path",{d:l,fill:"arrow"===i.end.arrowhead?"none":"black",stroke:"none"})]})}),(0,Mi.jsxs)("g",x(x({},d?{mask:"url(#".concat(p,")")}:void 0),{},{children:[d&&(0,Mi.jsx)("rect",{x:o.minX-100,y:o.minY-100,width:o.width+200,height:o.height+200,opacity:0}),(0,Mi.jsx)("path",{d:c})]})),u&&(0,Mi.jsx)("path",{d:u}),l&&(0,Mi.jsx)("path",{d:l}),a&&(0,Mi.jsx)("rect",{x:a.x,y:a.y,width:a.w,height:a.h,rx:4,ry:4})]})}},{key:"labelBoundsCache",get:function(){var e=this;return this.app.store.createComputedCache("labelBoundsCache",(function(t){var n=e.getArrowInfo(t),r=e.bounds(t),i=t.props,o=i.text,a=i.font,s=i.size;if(!n)return null;if(!o.trim())return null;var u=e.app.textMeasure.measureText(x(x({},ra),{},{text:o,fontFamily:sa[a],fontSize:aa[s],width:"fit-content"})),l=u.w,c=l,d=u.h;if(r.width>r.height){c=Math.max(Math.min(l,64),Math.min(r.width-64,l));var p=e.app.textMeasure.measureText(x(x({},ra),{},{text:o,fontFamily:sa[a],fontSize:aa[s],width:c+"px"}));c=p.w,d=p.h}if(c>16*aa[s]){c=16*aa[s];var f=e.app.textMeasure.measureText(x(x({},ra),{},{text:o,fontFamily:sa[a],fontSize:aa[s],width:c+"px"}));c=f.w,d=f.h}return new uo(n.middle.x-(c+8)/2,n.middle.y-(d+8)/2,c+8,d+8)}))}},{key:"getLabelBounds",value:function(e){return this.labelBoundsCache.get(e.id)||null}},{key:"toSvg",value:function(e,t,n){var r=n.fill[e.props.color],i=this.getArrowInfo(e),o=this.app.getStrokeWidth(e.props.size),a=document.createElementNS("http://www.w3.org/2000/svg","g");if(!i)return a;var s=i.start.arrowhead&&Fl(i,"start",o),u=i.end.arrowhead&&Fl(i,"end",o),l=this.bounds(e),c=this.getLabelBounds(e),d=(e.id+"_clip").replace(":","_");if(s||u){var p=document.createElementNS("http://www.w3.org/2000/svg","defs"),f=document.createElementNS("http://www.w3.org/2000/svg","mask");f.id=d;var h=document.createElementNS("http://www.w3.org/2000/svg","rect");if(h.setAttribute("x",l.minX-100+""),h.setAttribute("y",l.minY-100+""),h.setAttribute("width",l.width+200+""),h.setAttribute("height",l.height+200+""),h.setAttribute("fill","white"),f.appendChild(h),s&&f.appendChild(sc(s,i.start.arrowhead)),u&&f.appendChild(sc(u,i.end.arrowhead)),c){var v=document.createElementNS("http://www.w3.org/2000/svg","rect");v.setAttribute("x",c.x+""),v.setAttribute("y",c.y+""),v.setAttribute("width",c.w+""),v.setAttribute("height",c.h+""),v.setAttribute("fill","black"),f.appendChild(v)}p.appendChild(f),a.appendChild(p)}var g=document.createElementNS("http://www.w3.org/2000/svg","g");g.setAttribute("mask","url(#".concat(d,")")),a.appendChild(g);var m=document.createElementNS("http://www.w3.org/2000/svg","rect");m.setAttribute("x","-100"),m.setAttribute("y","-100"),m.setAttribute("width",l.width+200+""),m.setAttribute("height",l.height+200+""),m.setAttribute("fill","transparent"),m.setAttribute("stroke","none"),g.appendChild(m);var y=function(e,t,n){var r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",e),r.setAttribute("fill","none"),r.setAttribute("stroke",t),r.setAttribute("stroke-width",n+""),r}(i.isStraight?Xl(i):Gl(i),r,o),b=Tl(i.isStraight?i.length:Math.abs(i.bodyArc.length),o,{style:e.props.dash}),w=b.strokeDasharray,k=b.strokeDashoffset;if(y.setAttribute("stroke-dasharray",w),y.setAttribute("stroke-dashoffset",k),g.appendChild(y),s&&a.appendChild(uc(s,e.props.color,o,"arrow"===e.props.arrowheadStart?"none":e.props.fill,n)),u&&a.appendChild(uc(u,e.props.color,o,"arrow"===e.props.arrowheadEnd?"none":e.props.fill,n)),c){var S={fontSize:aa[e.props.size],lineHeight:ra.lineHeight,fontFamily:t,padding:0,textAlign:"middle",width:c.w,height:c.h,fontStyle:"normal",fontWeight:"normal"},_=this.app.textMeasure.getTextLines(x(x({text:e.props.text,wrap:!0},S),{},{width:c.w-8})),P=Al(this.app,x(x({lines:_},S),{},{width:c.w-8}));P.setAttribute("fill",n.fill[e.props.labelColor]),Array.from(P.children).forEach((function(e){var t=parseFloat(e.getAttribute("x")||"0"),n=parseFloat(e.getAttribute("y")||"0");e.setAttribute("x",t+4+c.x+"px"),e.setAttribute("y",n+c.y+"px")})),a.appendChild(P)}return a}}]),r}(Ll);function sc(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",e),n.setAttribute("fill","arrow"===t?"none":"black"),n.setAttribute("stroke","none"),n}function uc(e,t,n,r,i){var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d",e),o.setAttribute("fill","none"),o.setAttribute("stroke",i.fill[t]),o.setAttribute("stroke-width",n+"");var a=Il({d:e,fill:r,color:t,colors:i});if(a){var s=document.createElementNS("http://www.w3.org/2000/svg","g");return s.appendChild(a),s.appendChild(o),s}return o}function lc(e){return.5!==e.x||.5!==e.y}b(ac,"type","arrow"),ic([Oe],ac.prototype,"infoCache",1),ic([Oe],ac.prototype,"labelBoundsCache",1);var cc=Bo({type:"arrow",getShapeUtil:function(){return ac},validator:zr,migrations:Nr}),dc=["children","className"];function pc(e){var t=e.children,n=e.className,r=void 0===n?"":n,i=Ye(e,dc);return(0,Mi.jsx)("div",x(x({},i),{},{className:"rs-html-container ".concat(r),children:t}))}var fc="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' fill='none'%3E%3Cpath stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M13 5H7a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6M19 5h6m0 0v6m0-6L13 17'/%3E%3C/svg%3E";function hc(e){var t=e.url,n=ma().camera.z;return(0,Mi.jsx)("a",{className:"rs-hyperlink-button ".concat(n<.5?"hidden":""),href:t,target:"_blank",rel:"noopener noreferrer",onPointerDown:jl,onPointerUp:jl,title:t,draggable:!1,children:(0,Mi.jsx)("div",{className:"rs-hyperlink-button__icon",style:{mask:'url("'.concat(fc,'") center 100% / 100% no-repeat'),WebkitMask:'url("'.concat(fc,'") center 100% / 100% no-repeat')}})})}var vc=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.newPoint,i=t.handle,o=t.scaleX,a=t.scaleY,s=n.minWidth,u=void 0===s?1:s,l=n.maxWidth,c=void 0===l?1/0:l,d=n.minHeight,p=void 0===d?1:d,f=n.maxHeight,h=void 0===f?1/0:f,v=e.props.w*o,g=e.props.h*a,m=new Di(0,0);if(v>0){if(v<u){switch(i){case"top_left":case"left":case"bottom_left":m.x=v-u;break;case"top":case"bottom":m.x=(v-u)/2;break;default:m.x=0}v=u}}else if(m.x=v,(v=-v)<u){switch(i){case"top_left":case"left":case"bottom_left":m.x=-v;break;default:m.x=-u}v=u}if(g>0){if(g<p){switch(i){case"top_left":case"top":case"top_right":m.y=g-p;break;case"right":case"left":m.y=(g-p)/2;break;default:m.y=0}g=p}}else if(m.y=g,(g=-g)<p){switch(i){case"top_left":case"top":case"top_right":m.y=-g;break;default:m.y=-p}g=p}var y=m.rot(e.rotation).add(r);return{x:y.x,y:y.y,props:{w:Math.min(c,v),h:Math.min(h,g)}}},gc=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"onResize",(function(e,t){return vc(e,t)})),e}return l(n,[{key:"getBounds",value:function(e){return new uo(0,0,e.props.w,e.props.h)}},{key:"getCenter",value:function(e){return new Di(e.props.w/2,e.props.h/2)}},{key:"getOutline",value:function(e){return this.bounds(e).corners}},{key:"hitTestPoint",value:function(e,t){return ao(t,this.outline(e))}},{key:"hitTestLineSegment",value:function(e,t,n){for(var r=this.outline(e),i=0;i<r.length;i++){if(zo(t,n,r[i],r[(i+1)%r.length]))return!0}return!1}}]),n}(Ll),mc=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"canResize",(function(){return!1})),b(h(e),"hideSelectionBoundsBg",(function(){return!0})),b(h(e),"hideSelectionBoundsFg",(function(){return!0})),b(h(e),"onBeforeCreate",(function(t){e.updateBookmarkAsset(t)})),b(h(e),"onBeforeUpdate",(function(t,n){t.props.url!==n.props.url&&e.updateBookmarkAsset(n)})),b(h(e),"updateBookmarkAsset",T((function(t){var n=t.props.url,r=xr.createCustomId(O(n)),i=e.app.getAssetById(r);i?t.props.assetId!==i.id&&e.app.updateShapes([{id:t.id,type:t.type,props:{assetId:r}}]):e.app.onCreateBookmarkFromUrl&&e.app.onCreateBookmarkFromUrl(n).then((function(i){i?e.app.batch((function(){e.app.createAssets([{id:r,typeName:"asset",type:"bookmark",props:{src:n,description:i.description,image:i.image,title:i.title}}]).updateShapes([{id:t.id,type:t.type,props:{assetId:r}}])})):e.app.updateShapes([{id:t.id,type:t.type,props:{assetId:void 0}}])}))}),500)),e}return l(n,[{key:"defaultProps",value:function(){return{opacity:"1",url:"",w:Jo,h:ea,assetId:null}}},{key:"render",value:function(e){var t=e.props.assetId?this.app.getAssetById(e.props.assetId):null,n=this.app.getPageRotation(e),r=this.getHumanReadableAddress(e);return(0,Mi.jsx)(pc,{children:(0,Mi.jsxs)("div",{className:"rs-bookmark__container rs-hitarea-stroke",style:{boxShadow:cs(n,ta)},children:[(0,Mi.jsxs)("div",{className:"rs-bookmark__image_container",children:[null!==t&&void 0!==t&&t.props.image?(0,Mi.jsx)("img",{className:"rs-bookmark__image",draggable:!1,src:null===t||void 0===t?void 0:t.props.image,alt:(null===t||void 0===t?void 0:t.props.title)||""}):(0,Mi.jsx)("div",{className:"rs-bookmark__placeholder"}),(0,Mi.jsx)(hc,{url:e.props.url})]}),(0,Mi.jsxs)("div",{className:"rs-bookmark__copy_container",children:[(null===t||void 0===t?void 0:t.props.title)&&(0,Mi.jsx)("h2",{className:"rs-bookmark__heading",children:ps((null===t||void 0===t?void 0:t.props.title)||"",54)}),(null===t||void 0===t?void 0:t.props.description)&&(0,Mi.jsx)("p",{className:"rs-bookmark__description",children:ps((null===t||void 0===t?void 0:t.props.description)||"",128)}),(0,Mi.jsx)("a",{className:"rs-bookmark__link",href:e.props.url||"",target:"_blank",rel:"noopener noreferrer",onPointerDown:jl,onPointerUp:jl,onClick:jl,children:ps(r,45)})]})]})})}},{key:"indicator",value:function(e){return(0,Mi.jsx)("rect",{width:so(e.props.w),height:so(e.props.h),rx:"8",ry:"8"})}},{key:"getHumanReadableAddress",value:function(e){try{var t=new URL(e.props.url),n=t.pathname.replace(/\/*$/,"");return"".concat(t.hostname).concat(n)}catch(gm){return e.props.url}}}]),n}(gc);b(mc,"type","bookmark");var yc=Bo({type:"bookmark",getShapeUtil:function(){return mc},validator:Lr,migrations:Fr}),bc=function(e){return.65*e+.35*Ui(e*Ri/2)},wc=function(e){return{size:1+e,thinning:0,streamline:.62+(1+e)/8*.06,smoothing:.62,simulatePressure:!1,easing:zi.linear}};function xc(e,t,n,r){return x(x({},r?wc(t):"draw"===e.props.dash?e.props.isPen?function(e){return{size:1+1.2*e,thinning:.62,streamline:.62,smoothing:.62,simulatePressure:!1,easing:bc}}(t):function(e){return{size:1+e,thinning:.5,streamline:.62+(1+e)/8*.06,smoothing:.62,easing:zi.easeOutSine,simulatePressure:!0}}(t):wc(t)),{},{last:e.props.isComplete||n})}function kc(e){var t,n=[],r=y(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if("free"===i.type||i.points.length<2)n.push.apply(n,M(i.points.map(Di.Cast)));else{var o=Math.max(4,Math.floor(Di.Dist(i.points[0],i.points[1])/16));n.push.apply(n,M(Di.PointsBetween(i.points[0],i.points[1],o)))}}}catch(a){r.e(a)}finally{r.f()}return n}function Sc(e,t){return{draw:"none",solid:"none",dotted:"0.1 ".concat(2*t),dashed:"".concat(2*t," ").concat(2*t)}[e.props.dash]}var _c=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"hideResizeHandles",(function(t){return e.getIsDot(t)})),b(h(e),"hideRotateHandle",(function(t){return e.getIsDot(t)})),b(h(e),"hideSelectionBoundsBg",(function(t){return e.getIsDot(t)})),b(h(e),"hideSelectionBoundsFg",(function(t){return e.getIsDot(t)})),b(h(e),"isClosed",(function(e){return e.props.isClosed})),b(h(e),"onResize",(function(e,t){var n,r=t.scaleX,i=t.scaleY,o=[],a=y(e.props.segments);try{for(a.s();!(n=a.n()).done;){var s=n.value;o.push(x(x({},s),{},{points:s.points.map((function(e){var t=e.x,n=e.y,o=e.z;return{x:r*t,y:i*n,z:o}}))}))}}catch(u){a.e(u)}finally{a.f()}return{props:{segments:o}}})),e}return l(n,[{key:"defaultProps",value:function(){return{segments:[],color:"black",fill:"none",dash:"draw",size:"m",opacity:"1",isComplete:!1,isClosed:!1,isPen:!1}}},{key:"getIsDot",value:function(e){return 1===e.props.segments.length&&e.props.segments[0].points.length<2}},{key:"getBounds",value:function(e){return uo.FromPoints(this.outline(e))}},{key:"getOutline",value:function(e){return kc(e.props.segments)}},{key:"getCenter",value:function(e){return this.bounds(e).center}},{key:"hitTestPoint",value:function(e,t){var n=this.outline(e),r=this.app.zoomLevel,i=this.app.getStrokeWidth(e.props.size)/r;if(1===e.props.segments.length&&e.props.segments[0].points.length<4&&e.props.segments[0].points.some((function(e){return Di.Dist(t,e)<1.5*i})))return!0;if(this.isClosed(e))return ao(t,n);for(var o=0;o<n.length;o++){var a=n[o],s=n[(o+1)%n.length];if(Di.DistanceToLineSegment(a,s,t)<i)return!0}return!1}},{key:"hitTestLineSegment",value:function(e,t,n){var r=this.outline(e);if(1===e.props.segments.length&&e.props.segments[0].points.length<4){var i=this.app.zoomLevel,o=this.app.getStrokeWidth(e.props.size)/i;if(e.props.segments[0].points.some((function(e){return Di.DistanceToLineSegment(t,n,e)<1.5*o})))return!0}if(this.isClosed(e))for(var a=0;a<r.length;a++){var s=r[a],u=r[(a+1)%r.length];if(zo(t,n,s,u))return!0}else for(var l=0;l<r.length-1;l++){var c=r[l],d=r[l+1];if(zo(t,n,c,d))return!0}return!1}},{key:"render",value:function(e){var t,n=this,r=va("zoom",(function(){return n.app.zoomLevel<.35}),[]),i=this.app.getStrokeWidth(e.props.size),o=kc(e.props.segments),a=e.props.isComplete||"straight"===(null===(t=_(e.props.segments))||void 0===t?void 0:t.type),s=i;e.props.isPen||"draw"!==e.props.dash||1!==o.length||(s+=R(e.id)()*(i/6));var u=xc(e,s,a,r),l=ko(o,u),c=l.length>1?Hs(l,e.props.isClosed):Cc(o[0],s);if(!r&&"draw"===e.props.dash||l.length<2){Po(l,u);var d=bo(l,u);return(0,Mi.jsxs)(Lo,{id:e.id,children:[(0,Mi.jsx)(Cl,{fill:e.props.isClosed?e.props.fill:"none",color:e.props.color,d:c}),(0,Mi.jsx)("path",{d:Ws(d,!0),strokeLinecap:"round",fill:"currentColor"})]})}return(0,Mi.jsxs)(Lo,{id:e.id,children:[(0,Mi.jsx)(Cl,{color:e.props.color,fill:e.props.isClosed?e.props.fill:"none",d:c}),(0,Mi.jsx)("path",{d:c,strokeLinecap:"round",fill:"none",stroke:"currentColor",strokeWidth:i,strokeDasharray:Sc(e,i),strokeDashoffset:"0"})]})}},{key:"indicator",value:function(e){var t,n=this.app.getStrokeWidth(e.props.size),r=kc(e.props.segments),i=n;e.props.isPen||"draw"!==e.props.dash||1!==r.length||(i+=R(e.id)()*(n/6));var o=ko(r,xc(e,i,e.props.isComplete||"straight"===(null===(t=_(e.props.segments))||void 0===t?void 0:t.type),!0)),a=o.length>1?Hs(o,e.props.isClosed):Cc(r[0],i);return(0,Mi.jsx)("path",{d:a})}},{key:"toSvg",value:function(e,t,n){var r,i=e.props.color,o=this.app.getStrokeWidth(e.props.size),a=kc(e.props.segments),s=e.props.isComplete||"straight"===(null===(r=_(e.props.segments))||void 0===r?void 0:r.type),u=o;e.props.isPen||"draw"!==e.props.dash||1!==a.length||(u+=R(e.id)()*(o/6));var l,c=xc(e,u,s,!1),d=ko(a,c),p=d.length>1?Hs(d,e.props.isClosed):Cc(a[0],u);if("draw"===e.props.dash||d.length<2){Po(d,c);var f=bo(d,c),h=document.createElementNS("http://www.w3.org/2000/svg","path");h.setAttribute("d",Ws(f,!0)),h.setAttribute("fill",n.fill[i]),h.setAttribute("stroke-linecap","round"),l=h}else{var v=document.createElementNS("http://www.w3.org/2000/svg","path");v.setAttribute("d",p),v.setAttribute("stroke",n.fill[i]),v.setAttribute("fill","none"),v.setAttribute("stroke-linecap","round"),v.setAttribute("stroke-width",o.toString()),v.setAttribute("stroke-dasharray",Sc(e,o)),v.setAttribute("stroke-dashoffset","0"),l=v}var g=Il({fill:e.props.isClosed?e.props.fill:"none",d:p,color:e.props.color,colors:n});if(g){var m=document.createElementNS("http://www.w3.org/2000/svg","g");return m.appendChild(g),m.appendChild(l),m}return l}}]),n}(Ll);b(_c,"type","draw");var Pc=Bo({type:"draw",getShapeUtil:function(){return _c},migrations:Wr,validator:Kr});function Cc(e,t){var n=.5*(t+1);return"M ".concat(e.x," ").concat(e.y," m -").concat(n,", 0 a ").concat(n,",").concat(n," 0 1,0 ").concat(2*n,",0 a ").concat(n,",").concat(n," 0 1,0 -").concat(2*n,",0")}function Ec(e){return(0,Mi.jsx)("svg",x(x({width:16,height:16,viewBox:"0 0 16 16"},e),{},{children:(0,Mi.jsxs)("g",{strokeWidth:2,fill:"none",fillRule:"evenodd",children:[(0,Mi.jsx)("circle",{strokeOpacity:.25,cx:8,cy:8,r:7,stroke:"black"}),(0,Mi.jsx)("path",{strokeLinecap:"round",d:"M15 8c0-4.5-4.5-7-7-7",stroke:"black",children:(0,Mi.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 8 8",to:"360 8 8",dur:"1s",repeatCount:"indefinite"})})]})}))}var Ic=function(e){d(r,e);var n=v(r);function r(){var e;o(this,r);for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return b(h(e=n.call.apply(n,[this].concat(i))),"canUnmount",(function(){return!1})),b(h(e),"canResize",(function(e){var t,n=gs(e.props.url);return!(null===n||void 0===n||null===(t=n.definition)||void 0===t||!t.doesResize)})),b(h(e),"hideSelectionBoundsBg",(function(t){return!e.canResize(t)})),b(h(e),"hideSelectionBoundsFg",(function(t){return!e.canResize(t)})),b(h(e),"canEdit",(function(){return!0})),b(h(e),"isAspectRatioLocked",(function(e){var t,n=gs(e.props.url);return null!==(t=null===n||void 0===n?void 0:n.definition.isAspectRatioLocked)&&void 0!==t&&t})),b(h(e),"onResize",(function(t,n){var r,i,o=e.isAspectRatioLocked(t),a=gs(t.props.url),s=null!==(r=null===a||void 0===a?void 0:a.definition.minWidth)&&void 0!==r?r:200,u=null!==(i=null===a||void 0===a?void 0:a.definition.minHeight)&&void 0!==i?i:200;if(o){var l=t.props.w/t.props.h;l>1?s*=l:u/=l}return vc(t,n,{minWidth:s,minHeight:u})})),e}return l(r,[{key:"defaultProps",value:function(){return{opacity:"1",w:300,h:300,url:"",doesResize:!0}}},{key:"render",value:function(e){var n,r,i=this,o=e.props,a=o.w,s=o.h,u=o.url,l=yl(e.id),c=(0,t.useMemo)((function(){return vs(u)}),[u]),d=va("is hovering",(function(){var e=i.app.pageState,t=e.editingId,n=e.hoveredId;if(t&&n!==t){var r=i.app.getShapeById(t);if(r&&"embed"===r.type)return!0}return!1}),[]),p=this.app.getPageRotation(e),f=l||d;if("github_gist"===(null===c||void 0===c?void 0:c.definition.type)){var h=c.url.split("/").pop();if(h)return(0,Mi.jsx)(pc,{className:"rs-embed-container",id:e.id,children:(0,Mi.jsx)(Mc,{id:h,width:so(a),height:so(s),isInteractive:f,pageRotation:p})})}var v,g=(v=x(x({},Yr),null!==(n=null===c||void 0===c?void 0:c.definition.overridePermissions)&&void 0!==n?n:{}),Object.entries(v).filter((function(e){var t=N(e,2);return t[0],t[1]})).map((function(e){return N(e,1)[0]})).join(" "));return(0,Mi.jsx)(pc,{className:"rs-embed-container",id:e.id,children:null!==c&&void 0!==c&&c.definition?(0,Mi.jsx)("iframe",{className:"rs-embed rs-embed-".concat(e.id),sandbox:g,src:c.embedUrl,width:so(a),height:so(s),draggable:!1,frameBorder:"0",referrerPolicy:"no-referrer-when-downgrade",style:{border:0,pointerEvents:f?"auto":"none",zIndex:f?"":"-1",boxShadow:cs(p,ta),borderRadius:null!==(r=null===c||void 0===c?void 0:c.definition.overrideOutlineRadius)&&void 0!==r?r:8,background:null===c||void 0===c?void 0:c.definition.backgroundColor}}):(0,Mi.jsx)(Ec,{x:(a-38)/2,y:(s-38)/2})})}},{key:"indicator",value:function(e){var n,r,i=(0,t.useMemo)((function(){return gs(e.props.url)}),[e.props.url]);return(0,Mi.jsx)("rect",{width:so(e.props.w),height:so(e.props.h),rx:null!==(n=null===i||void 0===i?void 0:i.definition.overrideOutlineRadius)&&void 0!==n?n:8,ry:null!==(r=null===i||void 0===i?void 0:i.definition.overrideOutlineRadius)&&void 0!==r?r:8})}}]),r}(gc);function Mc(e){var n=e.id,r=e.file,i=e.isInteractive,o=e.width,a=e.height,s=e.style,u=e.pageRotation,l=t.useRef(null),c=r?"?file=".concat(r):"",d="https://gist.github.com/".concat(n,".js").concat(c);return(0,Mi.jsx)("iframe",{ref:l,className:"rs-embed",draggable:!1,width:so(o),height:so(a),frameBorder:"0",scrolling:"no",seamless:!0,referrerPolicy:"no-referrer-when-downgrade",style:x(x({},s),{},{pointerEvents:i?"all":"none",zIndex:i?"":"-1",boxShadow:cs(u,ta)}),srcDoc:'\n\t\t\t<html>\n\t\t\t\t<head>\n\t\t\t\t\t<base target="_blank">\n\t\t\t\t</head>\n\t\t\t\t<body>\n\t\t\t\t\t<script src='.concat(d,'><\/script>\n\t\t\t\t\t<style type="text/css">\n\t\t\t\t\t\t* { margin: 0px; }\n\t\t\t\t\t\ttable { height: 100%; background-color: red; }\n\t\t\t\t\t\t.gist { background-color: none; height: 100%;  }\n\t\t\t\t\t\t.gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }\n\t\t\t\t\t</style>\n\t\t\t\t</body>\n\t\t\t</html>')})}b(Ic,"type","embed");var Tc=Bo({type:"embed",getShapeUtil:function(){return Ic},validator:Xr,migrations:Zr}),jc=(0,t.forwardRef)((function(e,n){var r=e.id,i=e.name,o=e.isEditing,a=ma(),s=(0,t.useCallback)((function(e){"Enter"===e.key&&(e.stopPropagation(),e.currentTarget.blur(),a.setEditingId(null))}),[a]),u=(0,t.useCallback)((function(e){var t=a.getShapeById(r);if(t){var n=t.props.name,i=e.currentTarget.value.trim();n!==i&&a.updateShapes([{id:r,type:"frame",props:{name:i}}],!0)}}),[r,a]),l=(0,t.useCallback)((function(e){var t=a.getShapeById(r);if(t){var n=t.props.name,i=e.currentTarget.value;n!==i&&a.updateShapes([{id:r,type:"frame",props:{name:i}}],!0)}}),[r,a]);return(0,Mi.jsxs)("div",{className:"rs-frame-label ".concat(o?"rs-frame-label__editing":""),children:[(0,Mi.jsx)("input",{className:"rs-frame-name-input",ref:n,style:{display:o?void 0:"none"},value:i,autoFocus:!0,onKeyDown:s,onBlur:u,onChange:l}),Fs(i,"Frame")+String.fromCharCode(8203)]})})),Ac=fa((function(e){var n=e.id,r=e.name,i=e.width,o=e.height,a=Yi(ma().getPageRotationById(n)),s=yl(n),u=(0,t.useRef)(null);(0,t.useEffect)((function(){var e=u.current;e&&s&&(e.focus(),e.select(),requestAnimationFrame((function(){document.activeElement!==e&&(e.focus(),e.select())})))}),[u,s]);var l,c=((a+Math.PI/4)*(2/Math.PI)+4)%4,d=["top","left","bottom","right"][Math.floor(c)];switch(d){case"top":l="";break;case"right":l="translate(".concat(so(i),"px, 0px) rotate(90deg)");break;case"bottom":l="translate(".concat(so(i),"px, ").concat(so(o),"px) rotate(180deg)");break;case"left":l="translate(0px, ".concat(so(o),"px) rotate(270deg)")}return(0,Mi.jsx)("div",{className:"rs-frame-heading",style:{overflow:s?"visible":"hidden",maxWidth:"calc(var(--rs-zoom) * ".concat("top"===d||"bottom"===d?Math.ceil(i):Math.ceil(o),"px + var(--space-5))"),bottom:Math.ceil(o),transform:"".concat(l," scale(var(--rs-scale)) translateX(calc(-1 * var(--space-3))")},children:(0,Mi.jsx)("div",{className:"rs-frame-heading-hit-area",children:(0,Mi.jsx)(jc,{ref:u,id:n,name:r,isEditing:s})})})})),Oc=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"canBind",(function(){return!0})),b(h(e),"canEdit",(function(){return!0})),b(h(e),"canReceiveNewChildrenOfType",(function(e){return!0})),b(h(e),"canDropShapes",(function(e,t){return!0})),b(h(e),"onDragShapesOver",(function(t,n){return n.every((function(e){return e.parentId===t.id}))?{shouldHint:!1}:(e.app.reparentShapesById(n.map((function(e){return e.id})),t.id),{shouldHint:!0})})),b(h(e),"onDragShapesOut",(function(t,n){var r=e.app.getShapeById(t.parentId);"group"===(null===r||void 0===r?void 0:r.type)?e.app.reparentShapesById(n.map((function(e){return e.id})),r.id):e.app.reparentShapesById(n.map((function(e){return e.id})),e.app.currentPageId)})),b(h(e),"onResizeEnd",(function(t){var n,r=e.app.getPageBounds(t),i=[],o=y(e.app.getSortedChildIds(t.id));try{for(o.s();!(n=o.n()).done;){var a=n.value,s=e.app.getPageBoundsById(a);r.includes(s)||i.push(a)}}catch(u){o.e(u)}finally{o.f()}i.length>0&&e.app.reparentShapesById(i,e.app.currentPageId)})),e}return l(n,[{key:"defaultProps",value:function(){return{opacity:"1",w:320,h:180,name:""}}},{key:"render",value:function(e){var t=this.bounds(e);return(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsxs)(Lo,{children:[(0,Mi.jsx)("rect",{className:"rs-hitarea-stroke",width:t.width,height:t.height}),(0,Mi.jsx)("rect",{className:"rs-frame__body",width:t.width,height:t.height,fill:"none"})]}),(0,Mi.jsx)(Ac,{id:e.id,name:e.props.name,width:t.width,height:t.height})]})}},{key:"toSvg",value:function(e,t,n){var r=document.createElementNS("http://www.w3.org/2000/svg","g"),i=document.createElementNS("http://www.w3.org/2000/svg","rect");i.setAttribute("width",e.props.w.toString()),i.setAttribute("height",e.props.h.toString()),i.setAttribute("fill",n.solid),i.setAttribute("opacity",e.props.opacity),i.setAttribute("stroke",n.fill.black),i.setAttribute("stroke-width","1"),i.setAttribute("rx","4"),i.setAttribute("ry","4"),r.appendChild(i);var o,a=((Yi(this.app.getPageRotationById(e.id))+Math.PI/4)*(2/Math.PI)+4)%4;switch(["top","left","bottom","right"][Math.floor(a)]){case"top":default:o="";break;case"right":o="translate(".concat(so(e.props.w),"px, 0px) rotate(90deg)");break;case"bottom":o="translate(".concat(so(e.props.w),"px, ").concat(so(e.props.h),"px) rotate(180deg)");break;case"left":o="translate(0px, ".concat(so(e.props.h),"px) rotate(270deg)")}var s={fontSize:12,fontFamily:"Inter, sans-serif",textAlign:"start",width:e.props.w+16,height:30,padding:8,lineHeight:1,fontStyle:"normal",fontWeight:"normal"},u=Fs(e.props.name,"Frame")+String.fromCharCode(8203),l=this.app.textMeasure.getTextLines(x({text:u,wrap:!0},s));u=l.length>1?l[0]+"\u2026":l[0];var c=this.app.textMeasure.measureText({fontSize:12,fontFamily:"Inter, sans-serif",lineHeight:1,fontStyle:"normal",fontWeight:"normal",text:u,width:"fit-content",maxWidth:"unset",padding:"0px"}),d=document.createElementNS("http://www.w3.org/2000/svg","text");d.setAttribute("x","0"),d.setAttribute("y",-(8+c.h/2)+"px"),d.setAttribute("font-family",'"Inter", sans-serif'),d.setAttribute("font-size","12px"),d.setAttribute("font-weight","400"),d.style.setProperty("transform",o),d.textContent=u;var p=document.createElementNS("http://www.w3.org/2000/svg","rect");return p.setAttribute("x"," -4px"),p.setAttribute("y",-(16+c.h)+"px"),p.setAttribute("width",c.w+8+"px"),p.setAttribute("height",c.h+8+"px"),p.setAttribute("rx","4px"),p.setAttribute("ry","4px"),p.setAttribute("fill",n.background),r.appendChild(p),r.appendChild(d),r}},{key:"indicator",value:function(e){var t=this.bounds(e);return(0,Mi.jsx)("rect",{width:so(t.width),height:so(t.height),className:"rs-frame-indicator"})}}]),n}(gc);b(Oc,"type","frame");var zc=Bo({type:"frame",getShapeUtil:function(){return Oc},validator:Jr,migrations:ti}),Dc=t.memo((function(e){var t=e.id,n=e.type,r=e.text,i=e.size,o=e.labelColor,a=e.font,s=e.align,u=e.wrap,l=ec(t,n,r),c=l.rInput,d=l.isEmpty,p=l.isEditing,f=l.isEditableFromHover,h=l.handleFocus,v=l.handleChange,g=l.handleKeyDown,m=l.handleBlur,y=p||f;return(0,Mi.jsx)("div",{className:"rs-text-label","data-font":a,"data-align":s,"data-hastext":!d,"data-isediting":p,"data-textwrap":!!u,children:(0,Mi.jsxs)("div",{className:"rs-text-label__inner",style:{fontSize:oa[i],lineHeight:oa[i]*ra.lineHeight+"px",minHeight:d?oa[i]*ra.lineHeight+32:0,minWidth:d?33:0,color:o},children:[(0,Mi.jsx)("div",{className:"rs-text rs-text-content",dir:"ltr",children:Zl.normalizeTextForDom(r)}),y?(0,Mi.jsx)("textarea",{ref:c,className:"rs-text rs-text-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:p,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:r,onFocus:h,onChange:v,onKeyDown:g,onBlur:m,onContextMenu:jl}):null]})})})),Nc=t.memo((function(e){var t=e.w,n=e.h,r=e.strokeWidth,i=e.dash,o=e.color,a=e.fill,s=t/2,u=n/2,l=Math.max(0,s-r/2),c=Math.max(0,u-r/2),d=Hi(l,c),p=Tl(d<64?2*d:d,r,{style:i,snap:4,closed:!0}),f=p.strokeDasharray,h=p.strokeDashoffset,v="M".concat(s-l,",").concat(u,"a").concat(l,",").concat(c,",0,1,1,").concat(2*l,",0a").concat(l,",").concat(c,",0,1,1,-").concat(2*l,",0");return(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsx)(Cl,{d:v,color:o,fill:a}),(0,Mi.jsx)("path",{d:v,strokeWidth:r,width:so(t),height:so(n),fill:"none",stroke:"currentColor",strokeDasharray:f,strokeDashoffset:h,pointerEvents:"all"})]})}));function Rc(e,t){if(t>e){var n=e/2;return"\n    M0,".concat(n,"\n    a").concat(n,",").concat(n,",0,1,1,").concat(2*n,",0\n    L").concat(e,",").concat(t-n,"\n    a").concat(n,",").concat(n,",0,1,1,-").concat(2*n,",0\n    Z")}var r=t/2;return"\n    M".concat(r,",0\n    L").concat(e-r,",0\n    a").concat(r,",").concat(r,",0,1,1,0,").concat(2*r,"\n    L").concat(r,",").concat(t,"\n    a").concat(r,",").concat(r,",0,1,1,0,").concat(2*-r,"\n    Z")}function Lc(e,t){if(e>t){var n=t/2;return Hi(n,n)+2*(e-2*n)}var r=e/2;return Hi(r,r)+2*(t-2*r)}var Bc=t.memo((function(e){var t=e.w,n=e.h,r=e.strokeWidth,i=e.dash,o=e.color,a=e.fill,s=Rc(t,n),u=Lc(t,n),l=Tl(u<64?2*u:u,r,{style:i,snap:4,start:"outset",end:"outset",closed:!0}),c=l.strokeDasharray,d=l.strokeDashoffset;return(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsx)(Cl,{d:s,color:o,fill:a}),(0,Mi.jsx)("path",{d:s,strokeWidth:r,width:so(t),height:so(n),fill:"none",stroke:"currentColor",strokeDasharray:c,strokeDashoffset:d,pointerEvents:"all"})]})}));function Fc(e){var t=e.w,n=e.h,r=e.strokeWidth,i=e.dash,o=e.color,a=e.colors,s=e.fill,u=Rc(t,n),l=Lc(t,n),c=Tl(l<64?2*l:l,r,{style:i,snap:4,closed:!0}),d=c.strokeDasharray,p=c.strokeDashoffset,f=document.createElementNS("http://www.w3.org/2000/svg","path");return f.setAttribute("d",u),f.setAttribute("stroke-width",r.toString()),f.setAttribute("width",t.toString()),f.setAttribute("height",n.toString()),f.setAttribute("fill","none"),f.setAttribute("stroke",a.fill[o]),f.setAttribute("stroke-dasharray",d),f.setAttribute("stroke-dashoffset",p),Ml(f,Il({d:u,fill:s,color:o,colors:a}))}var Uc=t.memo((function(e){var t=e.dash,n=e.fill,r=e.color,i=e.strokeWidth,o=e.outline,a=e.bgOutline,s=a?"M"+a[0]+"L"+a.slice(1)+"Z":"M"+o[0]+"L"+o.slice(1)+"Z";return(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsx)(Cl,{d:s,fill:n,color:r}),(0,Mi.jsx)("g",{strokeWidth:i,stroke:"currentColor",fill:"none",pointerEvents:"all",children:Array.from(Array(o.length)).map((function(e,n){var r=o[n],a=o[(n+1)%o.length],s=Tl(Di.Dist(r,a),i,{style:t,start:"outset",end:"outset"}),u=s.strokeDasharray,l=s.strokeDashoffset;return(0,Mi.jsx)("line",{x1:r.x,y1:r.y,x2:a.x,y2:a.y,strokeDasharray:u,strokeDashoffset:l},n)}))})]})}));var Kc=t.memo((function(e){var t=e.id,n=e.w,r=e.h,i=e.strokeWidth,o=e.fill,a=e.color,s=Yc(t,n,r,i),u=Hc(t,n,r,i);return(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsx)(Cl,{d:s,color:a,fill:o}),(0,Mi.jsx)("path",{d:u,fill:"currentColor",strokeWidth:0,pointerEvents:"all"})]})}));function Vc(e){return{size:1+e,thinning:.25,end:{taper:e},start:{taper:e},streamline:0,smoothing:1,simulatePressure:!1}}function Wc(e,t,n,r){for(var i=R(e),o=t/2,a=n/2,s=Hi(o,a),u=[],l=Bi*i(),c=Bi+Li/2+Math.abs(i())*Li,d=Math.max(16,s/10),p=0;p<d;p++){var f=p/(d-1),h=l+f*c,v=Math.cos(h),g=Math.sin(h);u.push(new Di(o*v+.5*t+.05*i(),a*g+n/2+.05*i(),Math.min(1,.5+Math.abs(.5-(i()>0?zi.easeInOutSine(f):zi.easeInExpo(f)))/2)))}return ko(u,Vc(r))}function Hc(e,t,n,r){var i=Vc(r);return Ws(bo(Po(Wc(e,t,n,r),i),i))}function Yc(e,t,n,r){return Hs(Wc(e,t,n,r))}var Xc=t.memo((function(e){var t=e.id,n=e.bgOutline,r=e.outline,i=e.fill,o=e.color,a=e.strokeWidth,s=qc(t,r,a),u=Gc(a),l=ko(s,u),c=Hs(n?ko(qc(t,n,a),u):l,!1),d=Ws(Co(s,u));return(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsx)(Cl,{d:c,fill:i,color:o}),(0,Mi.jsx)("path",{d:d,fill:"currentColor",pointerEvents:"all"})]})}));function qc(e,t,n){for(var r=[],i=R(e),o=Math.round(Math.abs(i())*t.length),a=t.map((function(e){return Di.AddXY(e,i()*n/4,i()*n/4)})),s=a.length,u=0,l=s+1;u<l;u++){var c=a[(o+u)%s],d=a[(o+u+1)%s],p=Math.min(Di.Dist(c,d)/2,n/2),f=Di.Nudge(c,d,p),h=Di.Med(c,d);if(0===u)d.z=.7,r.push(new Di(h.x,h.y,.7),d);else if(u===t.length){var v=Di.PointsBetween(f,h,4);v.forEach((function(e){return e.z=.7})),r.push.apply(r,M(v))}else r.push.apply(r,M(Di.PointsBetween(f,d,6)))}return r}function $c(e,t,n){return Hs(ko(qc(e,t,n),Gc(n)),!0)}function Gc(e){return{size:1+.618*e,last:!0,simulatePressure:!1,streamline:.25,thinning:.9}}var Qc=t.memo((function(e){var t=e.w,n=e.h,r=e.strokeWidth,i=e.fill,o=e.color,a=t/2,s=n/2,u=Math.max(0,a),l=Math.max(0,s),c="M".concat(a-u,",").concat(s,"a").concat(u,",").concat(l,",0,1,1,").concat(2*u,",0a").concat(u,",").concat(l,",0,1,1,-").concat(2*u,",0");return(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsx)(Cl,{d:c,color:o,fill:i}),(0,Mi.jsx)("path",{d:c,stroke:"var(--palette-".concat(o,")"),strokeWidth:r,fill:"none"})]})}));var Zc=t.memo((function(e){var t=e.w,n=e.h,r=e.strokeWidth,i=e.fill,o=e.color,a=Jc(t,n);return(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsx)(Cl,{d:a,color:o,fill:i}),(0,Mi.jsx)("path",{d:a,stroke:"var(--palette-".concat(o,")"),strokeWidth:r,fill:"none"})]})}));function Jc(e,t){var n;if(t>e){var r=e/2;n="\n    M0,".concat(r,"\n    a").concat(r,",").concat(r,",0,1,1,").concat(2*r,",0\n    L").concat(e,",").concat(t-r,"\n    a").concat(r,",").concat(r,",0,1,1,-").concat(2*r,",0\n    Z")}else{var i=t/2;n="\n    M".concat(i,",0\n    L").concat(e-i,",0\n    a").concat(i,",").concat(i,",0,1,1,0,").concat(2*i,"\n    L").concat(i,",").concat(t,"\n    a").concat(i,",").concat(i,",0,1,1,0,").concat(2*-i,"\n    Z")}return n}var ed=t.memo((function(e){var t=e.outline,n=e.bgOutline,r=e.fill,i=e.color,o=e.strokeWidth,a="M"+t[0]+"L"+t.slice(1)+"Z";return(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsx)(Cl,{d:n?"M"+n[0]+"L"+n.slice(1)+"Z":a,fill:r,color:i}),(0,Mi.jsx)("path",{d:a,stroke:"var(--palette-".concat(i),strokeWidth:o,fill:"none"})]})}));var td=51,nd=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"canEdit",(function(){return!0})),b(h(e),"onEditEnd",(function(t){var n=t.id,r=t.type,i=t.props.text;i.trim()!==t.props.text&&e.app.updateShapes([{id:n,type:r,props:{text:i.trim()}}])})),b(h(e),"onResize",(function(t,n){var r=n.initialBounds,i=n.handle,o=n.newPoint,a=n.scaleX,s=n.scaleY,u=r.width*a,l=r.height*s,c=0,d=0;if(t.props.text.trim()){var p=Math.max(Math.abs(u),td),f=Math.max(Math.abs(l),td);p<td&&f===td&&(p=td),p===td&&f<td&&(f=td);var h=rd(e.app,x(x({},t),{},{props:x(x({},t.props),{},{w:p,h:f})})),v=Math.max(Math.abs(u),h.w)*Math.sign(u),g=Math.max(Math.abs(l),h.h)*Math.sign(l);c=Math.abs(v)-Math.abs(u),d=Math.abs(g)-Math.abs(l),u=v,l=g}var m=new Di(0,0);a<0&&(m.x+=u),"left"!==i&&"top_left"!==i&&"bottom_left"!==i||(m.x+=a<0?c:-c),s<0&&(m.y+=l),"top"!==i&&"top_left"!==i&&"top_right"!==i||(m.y+=s<0?d:-d);var y=m.rot(t.rotation).add(o);return{x:y.x,y:y.y,props:{w:Math.max(Math.abs(u),1),h:Math.max(Math.abs(l),1),growY:0}}})),b(h(e),"onBeforeCreate",(function(t){if(!t.props.text)return t.props.growY?x(x({},t),{},{props:x(x({},t.props),{},{growY:0})}):void 0;var n=t.props.h,r=rd(e.app,t).h,i=null;return r>n?i=r-n:t.props.growY&&(i=0),null!==i?x(x({},t),{},{props:x(x({},t.props),{},{growY:i})}):void 0})),b(h(e),"onBeforeUpdate",(function(t,n){var r=t.props.text.trim(),i=n.props.text.trim();if(r!==i||t.props.font!==n.props.font||t.props.size!==n.props.size){if(r&&!i)return x(x({},n),{},{props:x(x({},n.props),{},{growY:0})});var o=t.props.w,a=t.props.h,s=rd(e.app,n),u=s.w,l=s.h;if(!r&&i&&1===i.length){var c=Math.max(o,u),d=Math.max(a,l);return t.props.w<td&&t.props.h<td&&(c=Math.max(c,td),d=Math.max(d,td),c=Math.max(c,d),d=Math.max(c,d)),x(x({},n),{},{props:x(x({},n.props),{},{w:c,h:d,growY:0})})}var p=null;return l>a?p=l-a:t.props.growY&&(p=0),null!==p?x(x({},n),{},{props:x(x({},n.props),{},{growY:p,w:u})}):u>t.props.w?x(x({},n),{},{props:x(x({},n.props),{},{w:u})}):void 0}})),e}return l(n,[{key:"defaultProps",value:function(){return{w:100,h:100,geo:"rectangle",color:"black",labelColor:"black",fill:"none",dash:"draw",size:"m",opacity:"1",font:"draw",text:"",align:"middle",growY:0,url:""}}},{key:"hitTestLineSegment",value:function(e,t,n){var r=this.outline(e);"x-box"===e.props.geo&&(r=id(Math.max(1,e.props.w),Math.max(1,e.props.h+e.props.growY)));for(var i=0;i<r.length;i++){if(zo(t,n,r[i],r[(i+1)%r.length]))return!0}return!1}},{key:"getBounds",value:function(e){return new uo(0,0,e.props.w,e.props.h+e.props.growY)}},{key:"getCenter",value:function(e){return new Di(e.props.w/2,(e.props.h+e.props.growY)/2)}},{key:"getOutline",value:function(e){var t=Math.max(1,e.props.w),n=Math.max(1,e.props.h+e.props.growY),r=t/2,i=n/2;switch(e.props.geo){case"triangle":return[new Di(r,0),new Di(t,n),new Di(0,n)];case"diamond":return[new Di(r,0),new Di(t,i),new Di(r,n),new Di(0,i)];case"pentagon":return no(t,n,5);case"hexagon":return no(t,n,6);case"octagon":return no(t,n,8);case"ellipse":var o=Math.pow(r-i,2)/Math.pow(r+i,2),a=Ri*(r+i)*(1+3*o/(10+Math.sqrt(4-3*o))),s=Math.max(4,Math.ceil(a/10));s=4*Math.ceil(s/4);for(var u=Bi/s,l=Math.cos(u),c=Math.sin(u),d=0,p=1,f=1,h=Array(s),v=0;v<s;v++)h[v]=new Di(r+r*p,i+i*d),f=l*p-c*d,d=c*p+l*d,p=f;return h;case"oval":var g=10,m=Array(20);if(n>t)for(var y=0;y<g;y++){var b=Ri*y/8-Ri,w=Ri*y/8;m[y]=new Di(r+r*Math.cos(b),r+r*Math.sin(b)),m[y+g]=new Di(r+r*Math.cos(w),n-r+r*Math.sin(w))}else for(var x=0;x<g;x++){var k=Ri*x/8-Li,S=Li+Ri*-x/8;m[x]=new Di(t-i+i*Math.cos(k),n-i+i*Math.sin(k)),m[x+g]=new Di(i-i*Math.cos(S),n-i+i*Math.sin(S))}return m;case"star":var _=Bi/5/2,P=2*Math.floor(5/4),C=10-P,E=2*Math.floor(2.5),I=Math.cos(P*_-Li)*t/2,M=Math.cos(C*_-Li)*t/2,T=Math.sin(0*_-Li)*n/2,j=Math.sin(E*_-Li)*n/2,A=t-Math.abs(I-M),O=n-Math.abs(j-T),z=(t-(t/2+M-(t/2-I)))/2,D=(n-(n/2+T-(n/2-j)))/2,N=(t+A)/2,R=(n+O)/2,L=1*N/2,B=1*R/2;return Array.from(Array(10)).map((function(e,t){var n=t*_-Li;return new Di(z+(t%2?L:N)*Math.cos(n),D+(t%2?B:R)*Math.sin(n))}));case"rhombus":var F=Math.min(.38*t,.38*n);return[new Di(F,0),new Di(t,0),new Di(t-F,n),new Di(0,n)];case"rhombus-2":var U=Math.min(.38*t,.38*n);return[new Di(0,0),new Di(t-U,0),new Di(t,n),new Di(U,n)];case"trapezoid":var K=Math.min(.38*t,.38*n);return[new Di(K,0),new Di(t-K,0),new Di(t,n),new Di(0,n)];case"arrow-right":var V=.38*Math.min(t,n),W=.16*n;return[new Di(0,W),new Di(t-V,W),new Di(t-V,0),new Di(t,n/2),new Di(t-V,n),new Di(t-V,n-W),new Di(0,n-W)];case"arrow-left":var H=.38*Math.min(t,n),Y=.16*n;return[new Di(H,0),new Di(H,Y),new Di(t,Y),new Di(t,n-Y),new Di(H,n-Y),new Di(H,n),new Di(0,n/2)];case"arrow-up":var X=.16*t,q=.38*Math.min(t,n);return[new Di(t/2,0),new Di(t,q),new Di(t-X,q),new Di(t-X,n),new Di(X,n),new Di(X,q),new Di(0,q)];case"arrow-down":var $=.16*t,G=.38*Math.min(t,n);return[new Di($,0),new Di(t-$,0),new Di(t-$,n-G),new Di(t,n-G),new Di(t/2,n),new Di(0,n-G),new Di($,n-G)];case"x-box":case"rectangle":return[new Di(0,0),new Di(t,0),new Di(t,n),new Di(0,n)]}}},{key:"render",value:function(e){var t=this,n=e.id,r=e.type,i=e.props,o=va("zoom",(function(){return t.app.zoomLevel<.35}),[]),a=this.app.getStrokeWidth(i.size),s=i.w,u=i.color,l=i.labelColor,c=i.fill,d=i.dash,p=i.growY,f=i.font,h=i.align,v=i.size,g=i.text;return(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsx)(Lo,{id:n,children:function(){var r=i.h+p;switch(i.geo){case"ellipse":return"draw"===d?o?(0,Mi.jsx)(Qc,{strokeWidth:a,w:s,h:r,color:u,fill:c}):(0,Mi.jsx)(Kc,{id:n,w:s,h:r,color:u,fill:c,strokeWidth:a}):"solid"===d?(0,Mi.jsx)(Qc,{strokeWidth:a,w:s,h:r,color:u,fill:c}):(0,Mi.jsx)(Nc,{id:n,strokeWidth:a,w:s,h:r,dash:d,color:u,fill:c});case"oval":return"draw"===d||"solid"===d?(0,Mi.jsx)(Zc,{strokeWidth:a,w:s,h:r,color:u,fill:c}):(0,Mi.jsx)(Bc,{id:n,strokeWidth:a,w:s,h:r,dash:d,color:u,fill:c});default:var l,f=t.outline(e);return"x-box"===e.props.geo&&(l=f,f=id(Math.max(1,e.props.w),Math.max(1,e.props.h+e.props.growY))),"draw"===d?o?(0,Mi.jsx)(ed,{fill:c,color:u,strokeWidth:a,outline:f,bgOutline:l}):(0,Mi.jsx)(Xc,{id:n,fill:c,color:u,strokeWidth:a,outline:f,bgOutline:l}):"solid"===d?(0,Mi.jsx)(ed,{fill:c,color:u,strokeWidth:a,outline:f,bgOutline:l}):(0,Mi.jsx)(Uc,{dash:d,fill:c,color:u,strokeWidth:a,outline:f,bgOutline:l})}}()}),(0,Mi.jsx)(Dc,{id:n,type:r,font:f,fill:c,size:v,align:h,text:g,labelColor:this.app.getCssColor(l),wrap:!0}),"url"in e.props&&e.props.url&&(0,Mi.jsx)(hc,{url:e.props.url})]})}},{key:"indicator",value:function(e){var t=e.id,n=e.props,r=n.w,i=n.h,o=n.growY,a=n.size,s=this.app.getStrokeWidth(a);switch(n.geo){case"ellipse":return"draw"===n.dash?(0,Mi.jsx)("path",{d:Yc(t,r,i+o,s)}):(0,Mi.jsx)("ellipse",{cx:r/2,cy:(i+o)/2,rx:r/2,ry:(i+o)/2});case"oval":return(0,Mi.jsx)("path",{d:Jc(r,i+o)});default:var u=this.outline(e);return"x-box"===e.props.geo&&(u=id(Math.max(1,e.props.w),Math.max(1,e.props.h+e.props.growY))),"draw"===n.dash?(0,Mi.jsx)("path",{d:$c(t,u,s)}):(0,Mi.jsx)("path",{d:"M".concat(u[0],"L").concat(u.slice(1),"Z")})}}},{key:"toSvg",value:function(e,t,n){var r,i=e.id,o=e.props,a=this.app.getStrokeWidth(o.size);switch(o.geo){case"ellipse":switch(o.dash){case"draw":r=function(e){var t=e.id,n=e.w,r=e.h,i=e.strokeWidth,o=e.fill,a=e.color,s=e.colors,u=document.createElementNS("http://www.w3.org/2000/svg","path");return u.setAttribute("d",Hc(t,n,r,i)),u.setAttribute("fill",s.fill[a]),Ml(u,Il({d:Yc(t,n,r,i),fill:o,color:a,colors:s}))}({id:i,w:o.w,h:o.h,color:o.color,fill:o.fill,strokeWidth:a,colors:n});break;case"solid":r=function(e){var t=e.w,n=e.h,r=e.strokeWidth,i=e.fill,o=e.color,a=e.colors,s=t/2,u=n/2,l=Math.max(0,s),c=Math.max(0,u),d="M".concat(s-l,",").concat(u,"a").concat(l,",").concat(c,",0,1,1,").concat(2*l,",0a").concat(l,",").concat(c,",0,1,1,-").concat(2*l,",0"),p=document.createElementNS("http://www.w3.org/2000/svg","path");return p.setAttribute("d",d),p.setAttribute("stroke-width",r.toString()),p.setAttribute("width",t.toString()),p.setAttribute("height",n.toString()),p.setAttribute("fill","none"),p.setAttribute("stroke",a.fill[o]),Ml(p,Il({d:d,fill:i,color:o,colors:a}))}({strokeWidth:a,w:o.w,h:o.h,color:o.color,fill:o.fill,colors:n});break;default:r=function(e){var t=e.w,n=e.h,r=e.strokeWidth,i=e.dash,o=e.color,a=e.colors,s=e.fill,u=t/2,l=n/2,c=Math.max(0,u-r/2),d=Math.max(0,l-r/2),p=Hi(c,d),f=Tl(p<64?2*p:p,r,{style:i,snap:4,closed:!0}),h=f.strokeDasharray,v=f.strokeDashoffset,g="M".concat(u-c,",").concat(l,"a").concat(c,",").concat(d,",0,1,1,").concat(2*c,",0a").concat(c,",").concat(d,",0,1,1,-").concat(2*c,",0"),m=document.createElementNS("http://www.w3.org/2000/svg","path");return m.setAttribute("d",g),m.setAttribute("stroke-width",r.toString()),m.setAttribute("width",t.toString()),m.setAttribute("height",n.toString()),m.setAttribute("fill","none"),m.setAttribute("stroke",a.fill[o]),m.setAttribute("stroke-dasharray",h),m.setAttribute("stroke-dashoffset",v),Ml(m,Il({d:g,fill:s,color:o,colors:a}))}({id:i,strokeWidth:a,w:o.w,h:o.h,dash:o.dash,color:o.color,fill:o.fill,colors:n})}break;case"oval":switch(o.dash){case"draw":default:r=Fc({id:i,strokeWidth:a,w:o.w,h:o.h,dash:o.dash,color:o.color,fill:o.fill,colors:n});break;case"solid":r=function(e){var t=e.w,n=e.h,r=e.strokeWidth,i=e.fill,o=e.color,a=e.colors,s=Jc(t,n),u=document.createElementNS("http://www.w3.org/2000/svg","path");return u.setAttribute("d",s),u.setAttribute("stroke-width",r.toString()),u.setAttribute("width",t.toString()),u.setAttribute("height",n.toString()),u.setAttribute("fill","none"),u.setAttribute("stroke",a.fill[o]),Ml(u,Il({d:s,fill:i,color:o,colors:a}))}({strokeWidth:a,w:o.w,h:o.h,color:o.color,fill:o.fill,colors:n})}break;default:var s=this.outline(e),u=void 0;switch("x-box"===o.geo&&(u=s,s=id(Math.max(1,e.props.w),Math.max(1,e.props.h+e.props.growY))),o.dash){case"draw":r=function(e){var t=e.id,n=e.outline,r=e.bgOutline,i=e.fill,o=e.color,a=e.colors,s=e.strokeWidth,u=qc(t,n,s),l=Gc(s),c=document.createElementNS("http://www.w3.org/2000/svg","path");return c.setAttribute("d",Ws(Co(u,l),!0)),c.setAttribute("fill",a.fill[o]),Ml(c,Il({d:Hs(ko(r?qc(t,r,s):u,l),!1),fill:i,color:o,colors:a}))}({id:i,fill:o.fill,color:o.color,strokeWidth:a,outline:s,bgOutline:u,colors:n});break;case"solid":r=function(e){var t=e.outline,n=e.bgOutline,r=e.fill,i=e.color,o=e.strokeWidth,a=e.colors,s="M"+t[0]+"L"+t.slice(1)+"Z",u=document.createElementNS("http://www.w3.org/2000/svg","path");return u.setAttribute("d",s),u.setAttribute("stroke-width",o.toString()),u.setAttribute("stroke",a.fill[i]),u.setAttribute("fill","none"),Ml(u,Il({d:n?"M"+n[0]+"L"+n.slice(1)+"Z":s,fill:r,color:i,colors:a}))}({fill:o.fill,color:o.color,strokeWidth:a,outline:s,bgOutline:u,colors:n});break;default:r=function(e){var t=e.dash,n=e.fill,r=e.color,i=e.colors,o=e.strokeWidth,a=e.outline,s=e.bgOutline,u=document.createElementNS("http://www.w3.org/2000/svg","g");u.setAttribute("stroke-width",o.toString()),u.setAttribute("stroke",i.fill[r]),u.setAttribute("fill","none"),Array.from(Array(a.length)).forEach((function(e,n){var r=a[n],i=a[(n+1)%a.length],s=Tl(Di.Dist(r,i),o,{style:t}),l=s.strokeDasharray,c=s.strokeDashoffset,d=document.createElementNS("http://www.w3.org/2000/svg","line");d.setAttribute("x1",r.x.toString()),d.setAttribute("y1",r.y.toString()),d.setAttribute("x2",i.x.toString()),d.setAttribute("y2",i.y.toString()),d.setAttribute("stroke-dasharray",l.toString()),d.setAttribute("stroke-dashoffset",c.toString()),u.appendChild(d)}));var l=Il({d:s?"M"+s[0]+"L"+s.slice(1)+"Z":"M"+a[0]+"L"+a.slice(1)+"Z",fill:n,color:r,colors:i});return Ml(u,l)}({dash:o.dash,fill:o.fill,color:o.color,strokeWidth:a,outline:s,bgOutline:u,colors:n})}}if(o.text){var l=this.bounds(e),c={fontSize:oa[e.props.size],fontFamily:t,textAlign:e.props.align,padding:16,lineHeight:ra.lineHeight,fontStyle:"normal",fontWeight:"normal",width:Math.ceil(l.width),height:Math.ceil(l.height)},d=this.app.textMeasure.getTextLines(x({text:o.text,wrap:!0},c)),p=document.createElementNS("http://www.w3.org/2000/svg","g"),f=rd(this.app,e),h=Al(this.app,x(x({},c),{},{lines:d,strokeWidth:2,stroke:n.background,fill:n.background,width:f.w}));h.setAttribute("transform","translate(".concat((l.width-f.w)/2,", 0)"));var v=h.cloneNode(!0);if(v.setAttribute("fill",n.fill[e.props.labelColor]),v.setAttribute("stroke","none"),p.append(h),p.append(v),"g"===r.nodeName)return r.appendChild(p),r;var g=document.createElementNS("http://www.w3.org/2000/svg","g");return g.appendChild(r),g.appendChild(p),g}return r}}]),n}(gc);function rd(e,t){var n=t.props.text.trim();if(!n)return{w:0,h:0};var r=e.textMeasure.measureText(x(x({},ra),{},{text:"w",fontFamily:sa[t.props.font],fontSize:oa[t.props.size],width:"fit-content",maxWidth:"100px"})),i=e.textMeasure.measureText(x(x({},ra),{},{text:n,fontFamily:sa[t.props.font],fontSize:oa[t.props.size],width:"fit-content",minWidth:r.w+"px",maxWidth:Math.max(0,Math.ceil(r.w+{s:2,m:3.5,l:5,xl:10}[t.props.size]),Math.ceil(t.props.w-32))+"px"}));return{w:i.w+32,h:i.h+32}}function id(e,t){return[new Di(0,0),new Di(e,0),new Di(e,t),new Di(0,t),new Di(0,0),new Di(.5*e,.5*t),new Di(e,t),new Di(e,0),new Di(.5*e,.5*t),new Di(0,t)]}b(nd,"type","geo");var od=Bo({type:"geo",getShapeUtil:function(){return nd},validator:ii,migrations:ai}),ad=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"hideSelectionBoundsBg",(function(){return!1})),b(h(e),"hideSelectionBoundsFg",(function(){return!0})),b(h(e),"canBind",(function(){return!1})),b(h(e),"onChildrenChange",(function(t){var n=e.app.getSortedChildIds(t.id);return 0===n.length?(e.app.pageState.focusLayerId===t.id&&e.app.popFocusLayer(),void e.app.deleteShapes([t.id])):1===n.length?(e.app.pageState.focusLayerId===t.id&&e.app.popFocusLayer(),e.app.reparentShapesById(n,t.parentId),void e.app.deleteShapes([t.id])):void 0})),e}return l(n,[{key:"defaultProps",value:function(){return{opacity:"1"}}},{key:"getBounds",value:function(e){var t=this,n=this.app.getSortedChildIds(e.id);if(0===n.length)return new uo;var r=n.flatMap((function(e){var n=t.app.getShapeById(e);return t.app.getOutlineById(e).map((function(e){return go.applyToPoint(t.app.getTransform(n),e)}))}));return uo.FromPoints(r)}},{key:"getCenter",value:function(e){return this.bounds(e).center}},{key:"getOutline",value:function(e){return this.bounds(e).corners}},{key:"render",value:function(e){var t=this,n=this.app,r=n.erasingIdsSet,i=n.pageState,o=i.hintingIds,a=i.focusLayerId,s=n.zoomLevel,u=r.has(e.id),l=o.length>0&&o.some((function(n){var r;return n!==e.id&&"group"===(null===(r=t.app.getShapeById(n))||void 0===r?void 0:r.type)}));if(!u&&(e.id!==a||l))return null;var c=this.bounds(e);return(0,Mi.jsx)(Lo,{id:e.id,children:(0,Mi.jsx)(ud,{className:"rs-group",bounds:c,zoomLevel:s})})}},{key:"indicator",value:function(e){var t=this.app.camera.z,n=this.bounds(e);return(0,Mi.jsx)(ud,{className:"",bounds:n,zoomLevel:t})}}]),n}(Ll);b(ad,"type","group");var sd=Bo({type:"group",getShapeUtil:function(){return ad},validator:si,migrations:li});function ud(e){var t=e.bounds,n=e.zoomLevel,r=e.className;return(0,Mi.jsx)("g",{className:r,pointerEvents:"none",strokeLinecap:"round",strokeLinejoin:"round",children:t.sides.map((function(e,t){var r=Tl(e[0].dist(e[1]),1/n,{style:"dashed",lengthRatio:4}),i=r.strokeDasharray,o=r.strokeDashoffset;return(0,Mi.jsx)("line",{x1:e[0].x,y1:e[0].y,x2:e[1].x,y2:e[1].y,strokeDasharray:i,strokeDashoffset:o},t)}))})}var ld=function(){var e=Ai(Ti().mark((function e(t){return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=function(){return n(new Error("Failed to load image"))},r.crossOrigin="anonymous",r.src=t})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),cd=function(){var e=Ai(Ti().mark((function e(t){var n,r,i;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ld(t);case 2:if(n=e.sent,(r=document.createElement("canvas")).width=n.width,r.height=n.height,i=r.getContext("2d")){e.next=9;break}return e.abrupt("return");case 9:return i.drawImage(n,0,0),e.abrupt("return",r.toDataURL());case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function dd(e){return pd.apply(this,arguments)}function pd(){return(pd=Ai(Ti().mark((function e(t){var n,r;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.blob();case 5:return r=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new FileReader;n.onloadend=function(){return e(n.result)},n.onerror=t,n.readAsDataURL(r)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fd=function(e){d(r,e);var n=v(r);function r(){var e;o(this,r);for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return b(h(e=n.call.apply(n,[this].concat(i))),"isAspectRatioLocked",(function(){return!0})),b(h(e),"onDoubleClick",(function(t){var n=t.props.assetId?e.app.getAssetById(t.props.assetId):void 0;n&&(n.props.src&&"mimeType"in n.props&&"image/gif"===n.props.mimeType&&e.app.updateShapes([{type:"image",id:t.id,props:{playing:!t.props.playing}}]))})),e}return l(r,[{key:"defaultProps",value:function(){return{opacity:"1",w:100,h:100,assetId:null,playing:!0,url:""}}},{key:"render",value:function(e){var n,r,i=N((0,t.useState)(""),2),o=i[0],a=i[1],s=ds(),u=e.props.assetId?this.app.getAssetById(e.props.assetId):void 0,l=e.props,c=l.w,d=l.h;if((0,t.useEffect)((function(){if(null!==u&&void 0!==u&&u.props.src&&"mimeType"in u.props&&"image/gif"===(null===u||void 0===u?void 0:u.props.mimeType)){var e=!1,t=function(){var t=Ai(Ti().mark((function t(){var n;return Ti().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cd(u.props.src);case 2:if(n=t.sent,!e){t.next=5;break}return t.abrupt("return");case 5:n&&a(n);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return t(),function(){e=!0}}}),[s,null===u||void 0===u?void 0:u.props]),"bookmark"===(null===u||void 0===u?void 0:u.type))throw Error("Bookmark assets can't be rendered as images");var p=s&&((null===u||void 0===u||null===(n=u.props.mimeType)||void 0===n?void 0:n.includes("video"))||(null===u||void 0===u||null===(r=u.props.mimeType)||void 0===r?void 0:r.includes("gif")));return(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsx)(pc,{id:e.id,children:(0,Mi.jsxs)("div",{className:"rs-image-container",children:[null!==u&&void 0!==u&&u.props.src?(0,Mi.jsx)("div",{className:"rs-image rs-image-".concat(e.id),style:{backgroundImage:"url(".concat(!e.props.playing||p?o:u.props.src)},draggable:!1}):(0,Mi.jsx)(Ec,{x:(c-38)/2,y:(d-38)/2}),(null===u||void 0===u?void 0:u.props.isAnimated)&&!e.props.playing&&(0,Mi.jsx)("div",{className:"rs-image__meda-tag",children:"GIF"})]})}),"url"in e.props&&e.props.url&&(0,Mi.jsx)(hc,{url:e.props.url})]})}},{key:"indicator",value:function(e){return(0,Mi.jsx)("rect",{width:so(e.props.w),height:so(e.props.h)})}},{key:"toSvg",value:function(){var e=Ai(Ti().mark((function e(t){var n,r,i,o;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=document.createElementNS("http://www.w3.org/2000/svg","g"),r=t.props.assetId?this.app.getAssetById(t.props.assetId):null,!(i=(null===r||void 0===r?void 0:r.props.src)||"")||!i.startsWith("http")){e.next=10;break}return e.next=6,dd(i);case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0="";case 9:i=e.t0;case 10:return(o=document.createElementNS("http://www.w3.org/2000/svg","image")).setAttributeNS("http://www.w3.org/1999/xlink","href",i),o.setAttribute("width",t.props.w.toString()),o.setAttribute("height",t.props.h.toString()),n.appendChild(o),e.abrupt("return",n);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(gc);b(fd,"type","image");var hd=Bo({type:"image",getShapeUtil:function(){return fd},validator:pi,migrations:hi});function vd(e){for(var t=e.segments,n=[],r=0,i=t.length;r<i;r++){var o=t[r].lut,a=o.length-1;r>0?n.push(Di.Lrp(o[0],o[1],.25)):n.push(o[0]);for(var s=1;s<a;s++)n.push(o[s]);r<i-1?n.push(Di.Lrp(o[a-1],o[a],.75)):n.push(o[a])}return n}function gd(e){return{size:1.25*e,thinning:.4,streamline:0,smoothing:.5,simulatePressure:!0,last:!0}}function md(e,t,n){return ko(vd(t),gd(n))}function yd(e,t,n){var r=function(e,t,n){var r=gd(n);return bo(Po(md(0,t,n),r),r)}(0,t,n);return Ws(r)}function bd(e,t,n,r){switch(e.props.dash){case"draw":return function(e){e.shape;var t=e.strokeWidth,n=e.spline,r=e.color,i=yd(0,n,t),o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("stroke-width","0"),o.setAttribute("stroke","none"),o.setAttribute("fill",r),o.setAttribute("d",i),o}({shape:e,strokeWidth:r,spline:t,color:n});case"solid":return function(e){var t=e.strokeWidth,n=e.spline,r=e.color,i=n.path,o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("stroke-width",t.toString()),o.setAttribute("stroke",r),o.setAttribute("fill","none"),o.setAttribute("d",i),o}({strokeWidth:r,spline:t,color:n});default:return function(e){var t=e.dash,n=e.strokeWidth,r=e.spline,i=e.color,o=r.segments,a=document.createElementNS("http://www.w3.org/2000/svg","g");return a.setAttribute("stroke",i),a.setAttribute("stroke-width",n.toString()),o.forEach((function(e,r){var i=document.createElementNS("http://www.w3.org/2000/svg","path"),s=Tl(e.length,n,{style:t,start:r>0?"outset":"none",end:r<o.length-1?"outset":"none"}),u=s.strokeDasharray,l=s.strokeDashoffset;i.setAttribute("stroke-dasharray",u.toString()),i.setAttribute("stroke-dashoffset",l.toString()),i.setAttribute("d",e.path),i.setAttribute("fill","none"),a.appendChild(i)})),a}({strokeWidth:r,spline:t,dash:e.props.dash,color:n})}}var wd=new ya,xd=new ya,kd=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"hideResizeHandles",(function(){return!0})),b(h(e),"hideRotateHandle",(function(){return!0})),b(h(e),"hideSelectionBoundsBg",(function(){return!0})),b(h(e),"hideSelectionBoundsFg",(function(){return!0})),b(h(e),"isClosed",(function(){return!1})),b(h(e),"onResize",(function(e,t){var n=t.scaleX,r=t.scaleY,i=U(e.props.handles);return Object.values(e.props.handles).forEach((function(e){var t=e.id,o=e.x,a=e.y;i[t].x=o*n,i[t].y=a*r})),{props:{handles:i}}})),b(h(e),"onHandleChange",(function(e,t){var n=t.handle,r=U(e);switch(n.id){case"start":case"end":r.props.handles[n.id]=x(x({},r.props.handles[n.id]),{},{x:n.x,y:n.y});break;default:var i="handle:"+n.index,o=e.props.handles[i];r.props.handles[i]=o?x(x({},o),{},{x:n.x,y:n.y}):{id:i,type:"vertex",canBind:!1,index:n.index,x:n.x,y:n.y}}return r})),e}return l(n,[{key:"defaultProps",value:function(){return{opacity:"1",dash:"draw",size:"m",color:"black",spline:"line",handles:{start:{id:"start",type:"vertex",canBind:!1,index:"a1",x:0,y:0},end:{id:"end",type:"vertex",canBind:!1,index:"a2",x:0,y:0}}}}},{key:"getBounds",value:function(e){return _d(e).bounds}},{key:"getCenter",value:function(e){return this.bounds(e).center}},{key:"getHandles",value:function(e){return xd.get(e.props,(function(){for(var t=e.props.handles,n=_d(e),r=Object.values(t).sort(Ds),i=r.slice(),o=0;o<n.segments.length;o++){var a=n.segments[o].getPoint(.5),s=As(r[o].index,r[o+1].index);i.push({id:"mid-".concat(o),type:"create",index:s,x:a.x,y:a.y})}return i.sort(Ds)}))}},{key:"getOutline",value:function(e){return vd(_d(e))}},{key:"hitTestPoint",value:function(e,t){return function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=t.length,i=1;i<r;i++){var o=t[i-1],a=t[i];if(Di.DistanceToLineSegment(o,a,e)<n)return!0}return!1}(t,this.outline(e))}},{key:"hitTestLineSegment",value:function(e,t,n){return null!==Mo(t,n,this.outline(e))}},{key:"render",value:function(e){var t=this,n=_d(e),r=va("zoom",(function(){return t.app.zoomLevel<.35}),[]),i=this.app.getStrokeWidth(e.props.size),o=n.path,a=e.props,s=a.dash,u=a.color;return(0,Mi.jsxs)(Lo,{id:e.id,children:[(0,Mi.jsx)(Cl,{d:o,fill:"none",color:u}),"draw"!==s||r?"solid"===s?(0,Mi.jsx)("path",{strokeWidth:i,stroke:"currentColor",fill:"none",d:o}):(0,Mi.jsx)("g",{stroke:"currentColor",strokeWidth:i,children:n.segments.map((function(e,t){var r=Tl(e.length,i,{style:s,start:t>0?"outset":"none",end:t<n.segments.length-1?"outset":"none"}),o=r.strokeDasharray,a=r.strokeDashoffset;return(0,Mi.jsx)("path",{strokeDasharray:o,strokeDashoffset:a,d:e.path,fill:"none"},t)}))}):(0,Mi.jsx)("path",{d:yd(0,n,i),strokeWidth:1,stroke:"currentColor",fill:"currentColor"})]})}},{key:"indicator",value:function(e){var t=this.app.getStrokeWidth(e.props.size),n=function(e,t,n){return"draw"===e.props.dash?Hs(md(0,t,n)):t.path}(e,_d(e),t);return(0,Mi.jsx)("path",{d:n})}},{key:"toSvg",value:function(e,t,n){var r=e.props,i=r.color,o=r.size,a=n.fill[i];return bd(e,_d(e),a,this.app.getStrokeWidth(o))}}]),n}(Ll);b(kd,"type","line");var Sd=Bo({type:"line",getShapeUtil:function(){return kd},validator:vi,migrations:mi});function _d(e){return wd.get(e.props,(function(){var t=e.props,n=t.spline,r=t.handles,i=Object.values(r).sort(Ds).map(Di.From);switch(n){case"cubic":return new ho(i,2===i.length?2:1.2,20);case"line":return new mo(i)}}))}var Pd=200,Cd=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"canEdit",(function(){return!0})),b(h(e),"hideResizeHandles",(function(){return!0})),b(h(e),"hideSelectionBoundsBg",(function(){return!0})),b(h(e),"hideSelectionBoundsFg",(function(){return!0})),b(h(e),"onBeforeCreate",(function(t){return Id(e.app,t,t.props.growY)})),b(h(e),"onBeforeUpdate",(function(t,n){if(t.props.text!==n.props.text||t.props.font!==n.props.font||t.props.size!==n.props.size)return Id(e.app,n,t.props.growY)})),b(h(e),"onEditEnd",(function(t){var n=t.id,r=t.type,i=t.props.text;i.trim()!==t.props.text&&e.app.updateShapes([{id:n,type:r,props:{text:i.trim()}}])})),e}return l(n,[{key:"defaultProps",value:function(){return{opacity:"1",color:"black",size:"m",text:"",font:"draw",align:"middle",growY:0,url:""}}},{key:"getHeight",value:function(e){return Pd+e.props.growY}},{key:"getBounds",value:function(e){var t=this.getHeight(e);return new uo(0,0,Pd,t)}},{key:"getOutline",value:function(e){return this.bounds(e).corners}},{key:"getCenter",value:function(e){return new Di(Pd/2,this.getHeight(e)/2)}},{key:"render",value:function(e){var t=e.id,n=e.type,r=e.props,i=r.color,o=r.font,a=r.size,s=r.align,u=r.text,l="black"===i?"yellow":i;return(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsx)("div",{style:{position:"absolute",width:Pd,height:this.getHeight(e)},children:(0,Mi.jsxs)("div",{className:"rs-note__container rs-hitarea-fill",style:{color:"var(--palette-".concat(l,")"),backgroundColor:"var(--palette-".concat(l,")")},children:[(0,Mi.jsx)("div",{className:"rs-note__scrim"}),(0,Mi.jsx)(Dc,{id:t,type:n,font:o,size:a,align:s,text:u,labelColor:"inherit",wrap:!0})]})}),"url"in e.props&&e.props.url&&(0,Mi.jsx)(hc,{url:e.props.url})]})}},{key:"indicator",value:function(e){return(0,Mi.jsx)("rect",{rx:"7",width:so(Pd),height:so(this.getHeight(e))})}},{key:"toSvg",value:function(e,t,n){var r=this.bounds(e),i=document.createElementNS("http://www.w3.org/2000/svg","g"),o="black"===e.props.color?"yellow":e.props.color,a=document.createElementNS("http://www.w3.org/2000/svg","rect");a.setAttribute("rx","10"),a.setAttribute("width",Pd.toString()),a.setAttribute("height",r.height.toString()),a.setAttribute("fill",n.fill[o]),a.setAttribute("stroke",n.fill[o]),a.setAttribute("stroke-width","1"),i.appendChild(a);var s=document.createElementNS("http://www.w3.org/2000/svg","rect");s.setAttribute("rx","10"),s.setAttribute("width",Pd.toString()),s.setAttribute("height",r.height.toString()),s.setAttribute("fill",n.background),s.setAttribute("opacity",".28"),i.appendChild(s);var u={fontSize:oa[e.props.size],fontFamily:t,textAlign:e.props.align,width:r.width-34,height:r.height-34,padding:0,lineHeight:ra.lineHeight,fontStyle:"normal",fontWeight:"normal"},l=this.app.textMeasure.getTextLines(x({text:e.props.text,wrap:!0},u)),c=Al(this.app,x({lines:l},u));return c.setAttribute("fill",n.text),c.setAttribute("transform","translate(".concat(17," ").concat(17,")")),i.appendChild(c),i}}]),n}(Ll);b(Cd,"type","note");var Ed=Bo({getShapeUtil:function(){return Cd},type:"note",validator:bi,migrations:xi});function Id(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e.textMeasure.measureText(x(x({},ra),{},{text:t.props.text,fontFamily:sa[t.props.font],fontSize:oa[t.props.size],width:Pd-34+"px"})).h+34,i=null;if(r>Pd?i=r-Pd:n&&(i=0),null!==i)return x(x({},t),{},{props:x(x({},t.props),{},{growY:i})})}var Md=new ya,Td=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"canEdit",(function(){return!0})),b(h(e),"isAspectRatioLocked",(function(){return!0})),b(h(e),"onResize",(function(e,t){var n=t.initialBounds,r=t.initialShape,i=t.scaleX,o=t.handle;if("scale_shape"===t.mode||"right"!==o&&"left"!==o)return function(e,t){var n=t.initialBounds,r=t.scaleX,i=t.scaleY,o=t.newPoint,a=Math.max(.01,Math.min(Math.abs(r),Math.abs(i))),s=new Di(0,0);r<0&&(s.x=-n.width*a),i<0&&(s.y=-n.height*a);var u=Di.Add(o,s.rot(e.rotation));return{x:u.x,y:u.y,props:{scale:a*e.props.scale}}}(e,t);var a=n.width,s=a*i,u=new Di(0,0);s=Math.max(1,Math.abs(s)),"left"===o?(u.x=a-s,i<0&&(u.x+=s)):i<0&&(u.x-=s);var l=u.rot(e.rotation).add(r);return{x:l.x,y:l.y,props:{w:s/r.props.scale,autoSize:!1}}})),b(h(e),"onBeforeCreate",(function(t){if(t.props.autoSize&&!t.props.text.trim()){var n=e.getMinDimensions(t);return x(x({},t),{},{x:t.x-n.width/2,y:t.y-n.height/2})}})),b(h(e),"onEditEnd",(function(t){var n=t.id,r=t.type,i=t.props.text,o=t.props.text.trim();0===o.length?e.app.deleteShapes([t.id]):o!==t.props.text&&e.app.updateShapes([{id:n,type:r,props:{text:i.trim()}}])})),b(h(e),"onBeforeUpdate",(function(t,n){if(n.props.autoSize){var r=t.props.size!==n.props.size||t.props.align!==n.props.align||t.props.font!==n.props.font||1!==t.props.scale&&1===n.props.scale,i=t.props.text!==n.props.text;if(r||i){var o,a=e.getMinDimensions(t),s=Ad(e.app,n.props),u=a.width*t.props.scale,l=a.height*t.props.scale,c=s.width*n.props.scale,d=s.height*n.props.scale;switch(n.props.align){case"middle":o=new Di((c-u)/2,i?0:(d-l)/2);break;case"end":o=new Di(c-u,i?0:(d-l)/2);break;default:if(i)break;o=new Di(0,(d-l)/2)}if(o){o.rot(n.rotation);var p=n.x,f=n.y;return x(x({},n),{},{x:p-o.x,y:f-o.y,props:x(x({},n.props),{},{w:c})})}return x(x({},n),{},{props:x(x({},n.props),{},{w:c})})}}})),b(h(e),"onDoubleClickEdge",(function(e){return e.props.autoSize?1!==e.props.scale?{id:e.id,type:e.type,props:{scale:1}}:void 0:{id:e.id,type:e.type,props:{autoSize:!0}}})),e}return l(n,[{key:"defaultProps",value:function(){return{opacity:"1",color:"black",size:"m",w:8,text:"",font:"draw",align:"middle",autoSize:!0,scale:1}}},{key:"getMinDimensions",value:function(e){var t=this;return Md.get(e.props,(function(e){return Ad(t.app,e)}))}},{key:"getBounds",value:function(e){var t=e.props.scale,n=this.getMinDimensions(e),r=n.width,i=n.height;return new uo(0,0,r*t,i*t)}},{key:"getOutline",value:function(e){var t=this.bounds(e);return[new Di(0,0),new Di(t.width,0),new Di(t.width,t.height),new Di(0,t.height)]}},{key:"getCenter",value:function(e){var t=this.bounds(e);return new Di(t.width/2,t.height/2)}},{key:"render",value:function(e){var t=e.id,n=e.type,r=e.props.text,i=this.getMinDimensions(e),o=i.width,a=i.height,s=ec(t,n,r),u=s.rInput,l=s.isEmpty,c=s.isEditing,d=s.isEditableFromHover,p=s.handleFocus,f=s.handleChange,h=s.handleKeyDown,v=s.handleBlur;return(0,Mi.jsx)(pc,{id:e.id,children:(0,Mi.jsxs)("div",{className:"rs-text-shape__wrapper rs-text-shadow","data-font":e.props.font,"data-align":e.props.align,"data-hastext":!l,"data-isediting":c||d,"data-textwrap":!0,style:{fontSize:ia[e.props.size],lineHeight:ia[e.props.size]*ra.lineHeight+"px",transform:"scale(".concat(e.props.scale,")"),transformOrigin:"top left",width:Math.max(1,o),height:Math.max(ia[e.props.size]*ra.lineHeight,a)},children:[(0,Mi.jsx)("div",{className:"rs-text rs-text-content",dir:"ltr",children:r}),c||d?(0,Mi.jsx)("textarea",{ref:u,className:"rs-text rs-text-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:c,placeholder:"",spellCheck:"true",wrap:"off",dir:"ltr",datatype:"wysiwyg",defaultValue:r,onFocus:p,onChange:f,onKeyDown:h,onBlur:v,onTouchEnd:jl,onContextMenu:jl}):null]})})}},{key:"indicator",value:function(e){var t=this.bounds(e);return(0,Mi.jsx)("rect",{width:so(t.width),height:so(t.height)})}},{key:"toSvg",value:function(e,t,n){var r,i,o=this.bounds(e),a=e.props.text,s=o.width/(null!==(r=e.props.scale)&&void 0!==r?r:1),u=o.height/(null!==(i=e.props.scale)&&void 0!==i?i:1),l={fontSize:ia[e.props.size],fontFamily:t,textAlign:e.props.align,width:s,height:u,padding:0,lineHeight:ra.lineHeight,fontStyle:"normal",fontWeight:"normal"},c=this.app.textMeasure.getTextLines(x({text:a,wrap:!0},l)),d=n.fill[e.props.color],p=document.createElementNS("http://www.w3.org/2000/svg","g"),f=Al(this.app,x(x({lines:c},l),{},{stroke:n.background,strokeWidth:2,fill:n.background,padding:0})),h=f.cloneNode(!0);return h.setAttribute("fill",d),h.setAttribute("stroke","none"),p.append(f),p.append(h),p}}]),n}(Ll);b(Td,"type","text");var jd=Bo({type:"text",getShapeUtil:function(){return Td},validator:ki,migrations:_i});function Ad(e,t){var n=t.font,r=t.text,i=t.autoSize,o=t.size,a=t.w,s=ia[o],u=i?"fit-content":Math.floor(Math.max(16,a))+"px",l=e.textMeasure.measureText(x(x({},ra),{},{text:r,fontFamily:sa[n],fontSize:s,width:u}));return i&&(l.w+=1),{width:Math.max(16,l.w),height:Math.max(s,l.h)}}var Od=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"canEdit",(function(){return!0})),b(h(e),"isAspectRatioLocked",(function(){return!0})),e}return l(n,[{key:"defaultProps",value:function(){return{opacity:"1",w:100,h:100,assetId:null,time:0,playing:!0,url:""}}},{key:"render",value:function(e){return(0,Mi.jsx)(Dd,{shape:e,videoUtil:this})}},{key:"indicator",value:function(e){return(0,Mi.jsx)("rect",{width:so(e.props.w),height:so(e.props.h)})}},{key:"toSvg",value:function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","g"),n=document.createElementNS("http://www.w3.org/2000/svg","image");return n.setAttributeNS("http://www.w3.org/1999/xlink","href",function(e){var t=e.split(":")[1],n=document.querySelector(".rs-video-shape-".concat(t));if(n){var r=document.createElement("canvas");return r.width=n.videoWidth,r.height=n.videoHeight,r.getContext("2d").drawImage(n,0,0),r.toDataURL("image/png")}throw new Error("Video with id "+t+" not found")}(e.id)),n.setAttribute("width",e.props.w.toString()),n.setAttribute("height",e.props.h.toString()),t.appendChild(n),t}}]),n}(gc);b(Od,"type","video");var zd=Bo({type:"video",getShapeUtil:function(){return Od},validator:Ci,migrations:Ii});var Dd=fa((function(e){var n=e.shape,r=e.videoUtil,i=r.app.getBounds(n).w*r.app.zoomLevel>=110,o=n.props.assetId?r.app.getAssetById(n.props.assetId):null,a=n.props,s=a.w,u=a.h,l=a.time,c=a.playing,d=yl(n.id),p=ds(),f=t.useRef(null),h=t.useCallback((function(e){var t=e.currentTarget;r.app.updateShapes([{type:"video",id:n.id,props:{playing:!0,time:t.currentTime}}])}),[n.id,r.app]),v=t.useCallback((function(e){var t=e.currentTarget;r.app.updateShapes([{type:"video",id:n.id,props:{playing:!1,time:t.currentTime}}])}),[n.id,r.app]),g=t.useCallback((function(e){var t=e.currentTarget;d&&r.app.updateShapes([{type:"video",id:n.id,props:{time:t.currentTime}}])}),[d,n.id,r.app]),m=N(t.useState(!1),2),y=m[0],b=m[1],w=t.useCallback((function(e){var t=e.currentTarget;l!==t.currentTime&&(t.currentTime=l),c||t.pause(),b(!0)}),[c,l]);return t.useEffect((function(){var e=f.current;e&&y&&!d&&l!==e.currentTime&&(e.currentTime=l)}),[d,y,l]),t.useEffect((function(){if(p){var e=f.current;e.pause(),e.currentTime=0}}),[f,p]),(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsx)(pc,{id:n.id,children:(0,Mi.jsx)("div",{className:"rs-counter-scaled",children:null!==o&&void 0!==o&&o.props.src?(0,Mi.jsx)("video",{ref:f,className:"rs-video rs-video-shape-".concat(n.id.split(":")[1]," rs-hitarea-stroke"),width:"100%",height:"100%",draggable:!1,playsInline:!0,autoPlay:!0,muted:!0,loop:!0,disableRemotePlayback:!0,disablePictureInPicture:!0,controls:d&&i,onPlay:h,onPause:v,onTimeUpdate:g,onLoadedData:w,hidden:!y,children:(0,Mi.jsx)("source",{src:o.props.src})}):(0,Mi.jsx)(Ec,{x:(s-38)/2,y:(u-38)/2})})}),"url"in n.props&&n.props.url&&(0,Mi.jsx)(hc,{url:n.props.url})]})})),Nd=function(){function e(t){var n=t.shapes,r=void 0===n?[]:n,i=t.tools,a=void 0===i?[]:i,s=t.allowUnknownShapes,u=void 0!==s&&s;o(this,e),b(this,"storeSchema",void 0),b(this,"shapes",void 0),b(this,"TLShape",void 0),b(this,"tools",void 0),this.tools=a;var l=[].concat(M([Pc,jd,Sd,cc,hd,zd,od,Ed,sd,yc,Tc,zc]),M(r));this.shapes=l;var c,d=new Set,p=y(l);try{for(p.s();!(c=p.n()).done;){var f=c.value;if(d.has(f.type))throw new Error("Shape type ".concat(f.type," is already defined"));d.add(f.type)}}catch(m){p.e(m)}finally{p.f()}var h=qe({currentVersion:_r.currentVersion,firstVersion:_r.firstVersion,migrators:_r.migrators,subTypeKey:"type",subTypeMigrations:Object.fromEntries(l.map((function(e){return[e.type,e.migrations]})))}),v=xt("type",x({},Object.fromEntries(l.map((function(e){return[e.type,e.validator]})))));u&&(v=v.validateUnknownVariants((function(e){return e})));var g=G("shape",{migrations:h,validator:kt("shape",v)}).withDefaultProperties((function(){return{x:0,y:0,rotation:0,isLocked:!1}}));this.TLShape=g,this.storeSchema=Qe.create({asset:xr,camera:sn,document:cn,instance:Mn,instance_page_state:An,page:Dn,shape:g,user:Bn,user_document:Hn,user_presence:qn},{snapshotMigrations:Mr,onValidationFailure:Zn,ensureStoreIsUsable:Jn})}return l(e,[{key:"createStore",value:function(e){var t,n,r=e.initialData;return r&&(r=function(e){for(var t=Object.values(e),n=0;n<t.length;n++)if(t[n]){var r=yr(t[n]).record;r?e[t[n].id]=r:delete e[t[n].id]}return e}(r)),new Ve({schema:this.storeSchema,initialData:r,props:{userId:null!==(t=null===e||void 0===e?void 0:e.userId)&&void 0!==t?t:Bn.createId(),instanceId:null!==(n=null===e||void 0===e?void 0:e.instanceId)&&void 0!==n?n:Mn.createId(),documentId:dn}})}}]),e}();b(Nd,"default",new Nd({}));var Rd=function(e,t,n){for(;!Dn.isId(n.parentId);){var r=e.get(n.parentId);if(!r)return!1;n=r}return n.parentId===t},Ld={top:10,left:10,bottom:10,right:10};function Bd(e){var t=e.getContainer(),n=t.querySelector('*[data-tldraw-area="active-drawing"]'),r=x(x({},Ld),{},{width:0,height:0});if(n&&t){var i=t.getBoundingClientRect(),o=n.getBoundingClientRect();r.top=o.top,r.left=o.left,r.bottom=i.height-o.bottom,r.right=i.width-o.right}return r.width=e.viewportScreenBounds.width-r.left-r.right,r.height=e.viewportScreenBounds.height-r.top-r.bottom,r}var Fd,Ud,Kd=l((function e(t){var n=this;o(this,e),b(this,"offsets",_e("activeAreaOffsets",Ld)),b(this,"updateOffsets",(function(){var e=function(e){var t=Bd(e),n=e.camera.z;return t.left/=n,t.right/=n,t.top/=n,t.bottom/=n,t.width/=n,t.height/=n,t}(n.app);n.offsets.set(e)})),b(this,"dispose",(function(){window.addEventListener("resize",n.updateOffsets)})),this.app=t,window.addEventListener("resize",this.updateOffsets),this.app.disposables.add(this.dispose)})),Vd=l((function e(t){var n=this;o(this,e),b(this,"state",_e("camera state","idle")),b(this,"timeoutRemaining",0),b(this,"decay",(function(e){n.timeoutRemaining-=e,n.timeoutRemaining<=0&&(n.state.set("idle"),n.app.off("tick",n.decay),n.app.updateCullingBounds())})),b(this,"tick",(function(){n.timeoutRemaining=12,"idle"===n.state.__unsafe__getWithoutCapture()&&(n.state.set("moving"),n.app.on("tick",n.decay))})),this.app=t})),Wd=function(){function e(t){var n=this;o(this,e),b(this,"_clickId",""),b(this,"_clickTimeout",void 0),b(this,"_clickScreenPoint",void 0),b(this,"_previousScreenPoint",void 0),b(this,"_getClickTimeout",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:os();n._clickId=t,clearTimeout(n._clickTimeout),n._clickTimeout=setTimeout((function(){if(n._clickState===e&&n._clickId===t){switch(n._clickState){case"pendingTriple":n.app.dispatch(x(x({},n.lastPointerInfo),{},{type:"click",name:"double_click",phase:"settle"}));break;case"pendingQuadruple":n.app.dispatch(x(x({},n.lastPointerInfo),{},{type:"click",name:"triple_click",phase:"settle"}));break;case"pendingOverflow":n.app.dispatch(x(x({},n.lastPointerInfo),{},{type:"click",name:"quadruple_click",phase:"settle"}))}n._clickState="idle"}}),"idle"===e||"pendingDouble"===e?450:200)})),b(this,"_clickState","idle"),b(this,"lastPointerInfo",{}),b(this,"transformPointerDownEvent",(function(e){if(!n._clickState)return e;switch(n._clickScreenPoint=Di.From(e.point),n._previousScreenPoint&&n._previousScreenPoint.dist(n._clickScreenPoint)>40&&(n._clickState="idle"),n._previousScreenPoint=n._clickScreenPoint,n.lastPointerInfo=e,n._clickState){case"idle":return n._clickState="pendingDouble",n._clickTimeout=n._getClickTimeout(n._clickState),e;case"pendingDouble":return n._clickState="pendingTriple",n._clickTimeout=n._getClickTimeout(n._clickState),x(x({},e),{},{type:"click",name:"double_click",phase:"down"});case"pendingTriple":return n._clickState="pendingQuadruple",n._clickTimeout=n._getClickTimeout(n._clickState),x(x({},e),{},{type:"click",name:"triple_click",phase:"down"});case"pendingQuadruple":return n._clickState="pendingOverflow",n._clickTimeout=n._getClickTimeout(n._clickState),x(x({},e),{},{type:"click",name:"quadruple_click",phase:"down"});case"pendingOverflow":return n._clickState="overflow",n._clickTimeout=n._getClickTimeout(n._clickState),e;default:return n._clickTimeout=n._getClickTimeout(n._clickState),e}})),b(this,"transformPointerUpEvent",(function(e){if(!n._clickState)return e;switch(n._clickScreenPoint=Di.From(e.point),n._clickState){case"pendingTriple":return x(x({},n.lastPointerInfo),{},{type:"click",name:"double_click",phase:"up"});case"pendingQuadruple":return x(x({},n.lastPointerInfo),{},{type:"click",name:"triple_click",phase:"up"});case"pendingOverflow":return x(x({},n.lastPointerInfo),{},{type:"click",name:"quadruple_click",phase:"up"});default:return e}})),b(this,"cancelDoubleClickTimeout",(function(){n._clickTimeout=clearTimeout(n._clickTimeout),n._clickState="idle"})),b(this,"handleMove",(function(){"idle"!==n._clickState&&n._clickScreenPoint&&n._clickScreenPoint.dist(n.app.inputs.currentScreenPoint)>4&&n.cancelDoubleClickTimeout()})),this.app=t}return l(e,[{key:"clickState",get:function(){return this._clickState}}]),e}(),Hd=function(){function e(t){var n=this;o(this,e),b(this,"_currentMM",void 0),b(this,"dpr",_e("devicePixelRatio","undefined"===typeof window?1:window.devicePixelRatio)),b(this,"updateDevicePixelRatio",(function(){n.dpr.set(window.devicePixelRatio),n.rebind()})),b(this,"dispose",(function(){var e;null===(e=n._currentMM)||void 0===e||e.removeEventListener("change",n.updateDevicePixelRatio)})),this.app=t,this.rebind(),this.app.disposables.add(this.dispose)}return l(e,[{key:"rebind",value:function(){var e;this.dispose(),this._currentMM=this.getMedia(),null===(e=this._currentMM)||void 0===e||e.addEventListener("change",this.updateDevicePixelRatio)}},{key:"getMedia",value:function(){if(window.matchMedia)return matchMedia("(resolution: ".concat(window.devicePixelRatio,"dppx)"))}}]),e}(),Yd=function(){function e(t){var n=this;o(this,e),b(this,"prevDroppingShapeId",null),b(this,"currDroppingShapeId",null),b(this,"droppingNodeTimer",null),b(this,"dispose",(function(){n.clear()})),this.app=t,t.disposables.add(this.dispose)}return l(e,[{key:"updateDroppingNode",value:function(e,t){if(null===this.droppingNodeTimer){var n,r,i=this.app.inputs.currentPagePoint;this.currDroppingShapeId=null!==(n=null===(r=this.app.getDroppingShape(i,e))||void 0===r?void 0:r.id)&&void 0!==n?n:null,this.setDragTimer(e,1e3,t)}else this.app.inputs.pointerVelocity.len()>.5&&(clearInterval(this.droppingNodeTimer),this.setDragTimer(e,100,t))}},{key:"setDragTimer",value:function(e,t,n){var r=this;this.droppingNodeTimer=setTimeout((function(){r.app.batch((function(){r.handleDrag(e,n)})),r.droppingNodeTimer=null}),t)}},{key:"handleDrag",value:function(e,t){var n,r,i=this,o=this.app.inputs.currentPagePoint;e=S(e.map((function(e){return i.app.getShapeById(e.id)})));var a=null!==(n=null===(r=this.app.getDroppingShape(o,e))||void 0===r?void 0:r.id)&&void 0!==n?n:null;a!==this.currDroppingShapeId&&(this.prevDroppingShapeId=this.currDroppingShapeId,this.currDroppingShapeId=a);var s=this.prevDroppingShapeId;if(a!==s){var u,l,c=s&&this.app.getShapeById(s),d=a&&this.app.getShapeById(a);if(this.prevDroppingShapeId=this.currDroppingShapeId,c)null===(u=(l=this.app.getShapeUtil(c)).onDragShapesOut)||void 0===u||u.call(l,c,e);if(d){var p,f,h=null===(p=(f=this.app.getShapeUtil(d)).onDragShapesOver)||void 0===p?void 0:p.call(f,d,e);h&&h.shouldHint&&this.app.setHintingIds([d.id])}else this.app.setHintingIds([]);null===t||void 0===t||t()}}},{key:"dropShapes",value:function(e){var t=this.currDroppingShapeId;if(this.handleDrag(e),t){var n,r,i=this.app.getShapeById(t);if(!i)return;null===(n=(r=this.app.getShapeUtil(i)).onDropShapesOver)||void 0===n||n.call(r,i,e)}}},{key:"clear",value:function(){this.prevDroppingShapeId=null,this.currDroppingShapeId=null,null!==this.droppingNodeTimer&&clearInterval(this.droppingNodeTimer),this.droppingNodeTimer=null,this.app.setHintingIds([])}}]),e}();function Xd(e){if(e){for(var t=qd;e.length;)t=t.push(e.pop());return t}return qd}Fd=Symbol.iterator;var qd=new(function(){function e(){o(this,e),b(this,"length",0),b(this,"head",null),b(this,"tail",this)}return l(e,[{key:"push",value:function(e){return new $d(e,this)}},{key:"toArray",value:function(){return re}},{key:Fd,value:function(){return{next:function(){return{value:void 0,done:!0}}}}}]),e}());Ud=Symbol.iterator;var $d=function(){function e(t,n){o(this,e),b(this,"length",void 0),this.head=t,this.tail=n,this.length=n.length+1}return l(e,[{key:"push",value:function(t){return new e(t,this)}},{key:"toArray",value:function(){return Array.from(this)}},{key:Ud,value:function(){var e=this;return{next:function(){if(e.length){var t=e.head;return e=e.tail,{value:t,done:!1}}return{value:void 0,done:!0}}}}}]),e}(),Gd=function(){function e(t,n,r){var i=this;o(this,e),b(this,"_undos",_e("HistoryManager.undos",Xd())),b(this,"_redos",_e("HistoryManager.redos",Xd())),b(this,"_batchDepth",0),b(this,"_commands",{}),b(this,"createCommand",(function(e,t,n){if(i._commands[e])throw new Error("Duplicate command: ".concat(e));i._commands[e]=n;return function r(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];if(!i._batchDepth)return i.batch((function(){return r.apply(void 0,a)})),i.ctx;var u=t.apply(void 0,a);if(!u)return i.ctx;var l=u.data,c=u.ephemeral,d=u.squashing,p=u.preservesRedoStack;if(i.ignoringUpdates((function(e,t){return n.do(l),{undos:e,redos:t}})),!c){var f=i._undos.value.head;d&&f&&"command"===f.type&&f.name===e&&f.preservesRedoStack===p?i._undos.update((function(e){return e.tail.push(x(x({},f),{},{id:os(),data:n.squash(f.data,l)}))})):i._undos.update((function(t){return t.push({type:"command",name:e,data:l,id:os(),preservesRedoStack:p})})),u.preservesRedoStack||i._redos.set(Xd()),i.ctx.emit("change-history")}return i.ctx}})),b(this,"batch",(function(e){try{i._batchDepth++,1===i._batchDepth?ke((function(){var t,n,r=null===(t=i._undos.value.head)||void 0===t?void 0:t.id;e(),r!==(null===(n=i._undos.value.head)||void 0===n?void 0:n.id)&&i.onBatchComplete()})):e()}catch(t){throw i.annotateError(t),t}finally{i._batchDepth--}return i})),b(this,"ignoringUpdates",(function(e){var t=i._undos.value,n=i._redos.value;i._undos.set(Xd()),i._redos.set(Xd());try{var r=ke((function(){return e(t,n)}));t=r.undos,n=r.redos}finally{i._undos.set(t),i._redos.set(n)}})),b(this,"_undo",(function(e){var t=e.pushToRedoStack,n=e.toMark,r=void 0===n?void 0:n;return i.ignoringUpdates((function(e,n){if(0===e.length)return i.ctx.emit("change-history"),{undos:e,redos:n};for(;"STOP"===(null===(o=e.head)||void 0===o?void 0:o.type);){var o,a=e.head;if(e=e.tail,t&&(n=n.push(a)),a.id===r)return i.ctx.emit("change-history"),{undos:e,redos:n}}if(0===e.length)return i.ctx.emit("change-history"),{undos:e,redos:n};for(;e.head;){var s=e.head;if(e=e.tail,t&&(n=n.push(s)),"STOP"===s.type){if(s.onUndo&&(!r||s.id===r))return i.ctx.emit("change-history"),{undos:e,redos:n}}else i._commands[s.name].undo(s.data)}return i.ctx.emit("change-history"),{undos:e,redos:n}})),i})),b(this,"undo",(function(){return i._undo({pushToRedoStack:!0}),i})),b(this,"redo",(function(){return i.ignoringUpdates((function(e,t){if(0===t.length)return i.ctx.emit("change-history"),{undos:e,redos:t};for(;"STOP"===(null===(n=t.head)||void 0===n?void 0:n.type);){var n;e=e.push(t.head),t=t.tail}if(0===t.length)return i.ctx.emit("change-history"),{undos:e,redos:t};for(;t.head;){var r=t.head;if(e=e.push(t.head),t=t.tail,"STOP"===r.type){if(r.onRedo)break}else{var o=i._commands[r.name];o.redo?o.redo(r.data):o.do(r.data)}}return i.ctx.emit("change-history"),{undos:e,redos:t}})),i})),b(this,"bail",(function(){return i._undo({pushToRedoStack:!1}),i})),b(this,"bailToMark",(function(e){return i._undo({pushToRedoStack:!1,toMark:e}),i})),b(this,"mark",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:os(),t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=i._undos.value.head;return r&&"STOP"===r.type&&r.id===e&&r.onUndo===t&&r.onRedo===n?r.id:(i._undos.update((function(r){return r.push({type:"STOP",id:e,onUndo:t,onRedo:n})})),e)})),this.ctx=t,this.onBatchComplete=n,this.annotateError=r}return l(e,[{key:"numUndos",get:function(){return this._undos.value.length}},{key:"numRedos",get:function(){return this._redos.value.length}},{key:"clear",value:function(){this._undos.set(Xd()),this._redos.set(Xd())}}]),e}(),Qd=function(){function e(t){var n=this;o(this,e),b(this,"state",void 0),b(this,"points",void 0),b(this,"size",void 0),b(this,"color",void 0),b(this,"opacity",void 0),b(this,"onUpdate",void 0),b(this,"onComplete",void 0),b(this,"prev",null),b(this,"next",null),b(this,"resume",(function(){n.state="active"})),b(this,"pause",(function(){n.state="starting"})),b(this,"stop",(function(){n.state="stopping"})),b(this,"addPoint",(function(e,t){var r=n.prev,i={x:e,y:t,z:.5};r&&Di.Dist(r,i)<1||(n.next=i)})),b(this,"timeoutMs",0),b(this,"tick",(function(e){n.timeoutMs+=e,n.timeoutMs>=16&&(n.timeoutMs=0);var t=n.timeoutMs,r=n.state,i=n.prev,o=n.next,a=n.points;switch(r){case"active":o&&o!==i?(n.prev=o,a.push(o),a.length>8&&a.shift(),n.updateScribble()):0===t&&a.length>1&&(a.shift(),n.updateScribble());break;case"stopping":if(0===t){if(1===a.length)return n.state="paused",void n.onComplete();n.size*=.9,a.shift(),n.updateScribble()}}}));var r=t.size,i=void 0===r?20:r,a=t.color,s=void 0===a?"accent":a,u=t.opacity,l=void 0===u?.8:u,c=t.onComplete,d=t.onUpdate;this.onUpdate=d,this.onComplete=c,this.size=i,this.color=s,this.opacity=l,this.points=[],this.state="starting",this.prev=null,this.next=null,this.resume()}return l(e,[{key:"getScribble",value:function(){return{state:this.state,size:this.size,color:this.color,opacity:this.opacity,points:M(this.points)}}},{key:"updateScribble",value:function(){this.onUpdate(this.getScribble())}}]),e}(),Zd=Object.defineProperty,Jd=Object.getOwnPropertyDescriptor,ep=function(e,t,n,r){for(var i,o=r>1?void 0:r?Jd(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Zd(t,n,o),o},tp=function(e){return Math.round(e*Math.pow(10,8))/Math.pow(10,8)};function np(e,t,n,r,i){var o=e.filter((function(e){return("forward"===r?e.startNode.id===t:e.endNode.id===t)&&tp(e.length)===tp(n)&&io(e.breadthIntersection[0],e.breadthIntersection[1],i[0],i[1])}));if(0===o.length)return[];var a,s=new Set,u=y(o);try{for(u.s();!(a=u.n()).done;){var l=a.value,c="forward"===r?l.endNode.id:l.startNode.id;s.has(c)||(s.add(c),o.push.apply(o,M(np(e,c,n,r,io(l.breadthIntersection[0],l.breadthIntersection[1],i[0],i[1])))))}}catch(d){u.e(d)}finally{u.f()}return o}var rp=function(){function e(t){o(this,e),b(this,"_snapLines",_e("snapLines",void 0)),this.app=t}return l(e,[{key:"lines",get:function(){var e;return null!==(e=this._snapLines.value)&&void 0!==e?e:re}},{key:"clear",value:function(){this.lines.length&&this._snapLines.set(void 0)}},{key:"setLines",value:function(e){this._snapLines.set(e)}},{key:"snapPointsCache",get:function(){var e=this;return this.app.store.createComputedCache("snapPoints",(function(t){var n=e.app.getPageTransformById(t.id);if(n)return e.app.getShapeUtil(t).snapPoints(t).map((function(e,r){var i=go.applyToPoint(n,e);return{x:i.x,y:i.y,id:"".concat(t.id,":").concat(r)}}))}))}},{key:"snapThreshold",get:function(){return 8/this.app.camera.z}},{key:"visibleShapesNotInSelection",get:function(){var e=this,t=this.app.selectedIds,n=new Set,r=this.app.findCommonAncestor(S(t.map((function(t){return e.app.getShapeById(t)}))),(function(e){return"frame"===e.type}));return function r(i){var o,a=y(e.app.getSortedChildIds(i));try{for(a.s();!(o=a.n()).done;){var s=o.value,u=e.app.getShapeById(s);u&&("arrow"!==u.type&&(t.includes(s)||e.app.isShapeInViewport(u.id)&&("group"!==u.type?(n.add({id:u.id,pageBounds:e.app.getPageBoundsById(u.id)}),"frame"!==u.type&&r(s)):r(s))))}}catch(l){a.e(l)}finally{a.f()}}(null!==r&&void 0!==r?r:this.app.currentPageId),n}},{key:"visibleSnapPointsNotInSelection",get:function(){var e,t=[],n=y(this.visibleShapesNotInSelection);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=this.snapPointsCache.get(r.id);i&&t.push.apply(t,M(i))}}catch(o){n.e(o)}finally{n.f()}return t}},{key:"visibleGaps",get:function(){for(var e=[],t=[],n=M(this.visibleShapesNotInSelection).sort((function(e,t){return e.pageBounds.minX-t.pageBounds.minX})),r=0;r<n.length;r++)for(var i=n[r],o=r+1;o<n.length;o++){var a=n[o];i.pageBounds.maxX<a.pageBounds.minX&&ro(i.pageBounds.minY,i.pageBounds.maxY,a.pageBounds.minY,a.pageBounds.maxY)&&e.push({startNode:i,endNode:a,startEdge:[new Di(i.pageBounds.maxX,i.pageBounds.minY),new Di(i.pageBounds.maxX,i.pageBounds.maxY)],endEdge:[new Di(a.pageBounds.minX,a.pageBounds.minY),new Di(a.pageBounds.minX,a.pageBounds.maxY)],length:a.pageBounds.minX-i.pageBounds.maxX,breadthIntersection:io(i.pageBounds.minY,i.pageBounds.maxY,a.pageBounds.minY,a.pageBounds.maxY)})}for(var s=n.slice(0).sort((function(e,t){return e.pageBounds.minY-t.pageBounds.minY})),u=0;u<s.length;u++)for(var l=s[u],c=u+1;c<s.length;c++){var d=s[c];l.pageBounds.maxY<d.pageBounds.minY&&ro(l.pageBounds.minX,l.pageBounds.maxX,d.pageBounds.minX,d.pageBounds.maxX)&&t.push({startNode:l,endNode:d,startEdge:[new Di(l.pageBounds.minX,l.pageBounds.maxY),new Di(l.pageBounds.maxX,l.pageBounds.maxY)],endEdge:[new Di(d.pageBounds.minX,d.pageBounds.minY),new Di(d.pageBounds.maxX,d.pageBounds.minY)],length:d.pageBounds.minY-l.pageBounds.maxY,breadthIntersection:io(l.pageBounds.minX,l.pageBounds.maxX,d.pageBounds.minX,d.pageBounds.maxX)})}return{horizontal:e,vertical:t}}},{key:"snapTranslate",value:function(e){var t,n,r,i,o=e.lockedAxis,a=e.initialSelectionPageBounds,s=e.initialSelectionSnapPoints,u=e.dragDelta,l="x"===o,c="y"===o,d=a.clone().translate(u),p=s.map((function(e,t){var n=e.x,r=e.y;return{id:"selection:"+t,x:n+u.x,y:r+u.y}})),f=this.visibleSnapPointsNotInSelection,h=[],v=[],g=new Di(this.snapThreshold,this.snapThreshold);this.findPointSnaps({minOffset:g,nearestSnapsX:h,nearestSnapsY:v,otherNodeSnapPoints:f,selectionSnapPoints:p}),this.findGapSnaps({selectionPageBounds:d,nearestSnapsX:h,nearestSnapsY:v,minOffset:g});var m=new Di(l?0:null!==(t=null===(n=h[0])||void 0===n?void 0:n.nudge)&&void 0!==t?t:0,c?0:null!==(r=null===(i=v[0])||void 0===i?void 0:i.nudge)&&void 0!==r?r:0);g.x=0,g.y=0,h.length=0,v.length=0,p.forEach((function(e){e.x+=m.x,e.y+=m.y})),d.translate(m),this.findPointSnaps({minOffset:g,nearestSnapsX:h,nearestSnapsY:v,otherNodeSnapPoints:f,selectionSnapPoints:p}),this.findGapSnaps({selectionPageBounds:d,nearestSnapsX:h,nearestSnapsY:v,minOffset:g});var y=this.getPointSnapLines({nearestSnapsX:h,nearestSnapsY:v}),b=this.getGapSnapLines({selectionPageBounds:d,nearestSnapsX:h,nearestSnapsY:v});return this._snapLines.set([].concat(M(b),M(y))),{nudge:m}}},{key:"snapLineHandleTranslate",value:function(e){var t=e.lineId,n=e.handleId,r=e.handlePoint,i=this.app.getShapeById(t);if(!i)return{nudge:new Di(0,0)};var o=this.app.getShapeUtilByDef(Sd).handles(i).sort(Ds);if(o.length<3)return{nudge:new Di(0,0)};var a=o.findIndex((function(e){return e.id===n})),s="vertex"===o[a].type?a/2:(a+1)/2,u=_d(i),l=this.app.getPageTransform(i),c=u.segments.slice(0,Math.max(0,s-1)).map((function(e){return go.applyToPoints(l,e.lut)})),d=u.segments.slice(s+1).map((function(e){return go.applyToPoints(l,e.lut)}));return this.snapHandleTranslate({handlePoint:r,additionalOutlines:[].concat(M(c),M(d))})}},{key:"snapHandleTranslate",value:function(e){var t,n=e.handlePoint,r=e.additionalOutlines,i=void 0===r?[]:r,o=[],a=y(this.visibleShapesNotInSelection);try{for(a.s();!(t=a.n()).done;){var s,u,l=t.value,c=this.app.getShapeById(l.id);if("text"!==c.type&&"icon"!==c.type){var d=U(this.app.getOutlineById(l.id));(null===(s=(u=this.app.getShapeUtil(c)).isClosed)||void 0===s?void 0:s.call(u,c))&&d.push(d[0]),o.push(go.applyToPoints(this.app.getPageTransformById(c.id),d))}}}catch(S){a.e(S)}finally{a.f()}for(var p=this.snapThreshold,f=null,h=0,v=[].concat(o,M(i));h<v.length;h++)for(var g=v[h],m=0;m<g.length-1;m++){var b=g[m],w=g[m+1],x=Di.DistanceToLineSegment(b,w,n);isNaN(x)||x<p&&(p=x,f=Di.NearestPointOnLineSegment(b,w,n))}if(f){var k=[];return k.push({id:os(),type:"points",points:[f]}),this._snapLines.set(k),{nudge:Di.Sub(f,n)}}return{nudge:new Di(0,0)}}},{key:"snapResize",value:function(e){var t,n,r,i,o=e.initialSelectionPageBounds,a=e.dragDelta,s=e.handle,u=e.isAspectRatioLocked,l=e.isResizingFromCenter,c=uo.Resize(o,s,l?2*a.x:a.x,l?2*a.y:a.y,u),d=c.box,p=c.scaleX,f=c.scaleY,h=s;p<0&&(h=function(e){switch(e){case"left":return"right";case"right":return"left";case"top_left":return"top_right";case"top_right":return"top_left";case"bottom_left":return"bottom_right";case"bottom_right":return"bottom_left";default:return e}}(h)),f<0&&(h=function(e){switch(e){case"top":return"bottom";case"bottom":return"top";case"top_left":return"bottom_left";case"top_right":return"bottom_right";case"bottom_left":return"top_left";case"bottom_right":return"top_right";default:return e}}(h)),l&&(d.center=o.center);var v="top"===h||"bottom"===h,g="left"===h||"right"===h,m=ip(h,d),y=this.visibleSnapPointsNotInSelection,b=[],w=[],x=new Di(this.snapThreshold,this.snapThreshold);this.findPointSnaps({minOffset:x,nearestSnapsX:b,nearestSnapsY:w,otherNodeSnapPoints:y,selectionSnapPoints:m});var k,S=new Di(v?0:null!==(t=null===(n=b[0])||void 0===n?void 0:n.nudge)&&void 0!==t?t:0,g?0:null!==(r=null===(i=w[0])||void 0===i?void 0:i.nudge)&&void 0!==r?r:0);if(u&&("top_left"===(k=h)||"top_right"===k||"bottom_right"===k||"bottom_left"===k)&&0!==S.len()){var _=b.length&&w.length?Math.abs(S.x)<Math.abs(S.y)?"x":"y":b.length?"x":"y",P=o.aspectRatio;"x"===_?(w.length=0,S.y=S.x/P,"bottom_left"!==h&&"top_right"!==h||(S.y=-S.y)):(b.length=0,S.x=S.y*P,"bottom_left"!==h&&"top_right"!==h||(S.x=-S.x))}var C=Di.Add(a,S),E=uo.Resize(o,s,l?2*C.x:C.x,l?2*C.y:C.y,u).box;l&&(E.center=o.center);var I=ip("any",E);b.length=0,w.length=0,x.x=0,x.y=0,this.findPointSnaps({minOffset:x,nearestSnapsX:b,nearestSnapsY:w,otherNodeSnapPoints:y,selectionSnapPoints:I});var T=this.getPointSnapLines({nearestSnapsX:b,nearestSnapsY:w});return this._snapLines.set(M(T)),{nudge:S}}},{key:"findPointSnaps",value:function(e){var t,n=e.selectionSnapPoints,r=e.otherNodeSnapPoints,i=e.minOffset,o=e.nearestSnapsX,a=e.nearestSnapsY,s=y(n);try{for(s.s();!(t=s.n()).done;){var u,l=t.value,c=y(r);try{for(c.s();!(u=c.n()).done;){var d=u.value,p=Di.Sub(l,d),f=Math.abs(p.x),h=Math.abs(p.y);tp(f)<=tp(i.x)&&(tp(f)<tp(i.x)&&(o.length=0),o.push({type:"points",points:{thisPoint:l,otherPoint:d},nudge:d.x-l.x}),i.x=f),tp(h)<=tp(i.y)&&(tp(h)<tp(i.y)&&(a.length=0),a.push({type:"points",points:{thisPoint:l,otherPoint:d},nudge:d.y-l.y}),i.y=h)}}catch(v){c.e(v)}finally{c.f()}}}catch(v){s.e(v)}finally{s.f()}}},{key:"findGapSnaps",value:function(e){var t,n=e.selectionPageBounds,r=e.minOffset,i=e.nearestSnapsX,o=e.nearestSnapsY,a=y(this.visibleGaps.horizontal);try{for(a.s();!(t=a.n()).done;){var s=t.value;if(ro(s.breadthIntersection[0],s.breadthIntersection[1],n.minY,n.maxY)){var u=s.startEdge[0].x+s.length/2-n.center.x;if(s.length>n.width&&tp(Math.abs(u))<=tp(r.x)){tp(Math.abs(u))<tp(r.x)&&(i.length=0),r.x=Math.abs(u);var l={type:"gap_center",gap:s,nudge:u},c=i.find((function(e){return"gap_center"===e.type})),d=c&&io(s.breadthIntersection[0],s.breadthIntersection[1],c.gap.breadthIntersection[0],c.gap.breadthIntersection[1]);c&&c.gap.length>s.length&&d?i[i.indexOf(c)]=l:c&&d||i.push(l)}var p=s.startNode.pageBounds.minX-s.length-n.maxX;tp(Math.abs(p))<=tp(r.x)&&(tp(Math.abs(p))<tp(r.x)&&(i.length=0),r.x=Math.abs(p),i.push({type:"gap_duplicate",gap:s,protrusionDirection:"left",nudge:p}));var f=s.endNode.pageBounds.maxX+s.length-n.minX;tp(Math.abs(f))<=tp(r.x)&&(tp(Math.abs(f))<tp(r.x)&&(i.length=0),r.x=Math.abs(f),i.push({type:"gap_duplicate",gap:s,protrusionDirection:"right",nudge:f}))}}}catch(_){a.e(_)}finally{a.f()}var h,v=y(this.visibleGaps.vertical);try{for(v.s();!(h=v.n()).done;){var g=h.value;if(ro(g.breadthIntersection[0],g.breadthIntersection[1],n.minX,n.maxX)){var m=g.startEdge[0].y+g.length/2-n.center.y;if(g.length>n.height&&tp(Math.abs(m))<=tp(r.y)){tp(Math.abs(m))<tp(r.y)&&(o.length=0),r.y=Math.abs(m);var b={type:"gap_center",gap:g,nudge:m},w=o.find((function(e){return"gap_center"===e.type})),x=w&&ro(w.gap.breadthIntersection[0],w.gap.breadthIntersection[1],g.breadthIntersection[0],g.breadthIntersection[1]);w&&w.gap.length>g.length&&x?o[o.indexOf(w)]=b:w&&x||o.push(b)}else{var k=g.startNode.pageBounds.minY-g.length-n.maxY;tp(Math.abs(k))<=tp(r.y)&&(tp(Math.abs(k))<tp(r.y)&&(o.length=0),r.y=Math.abs(k),o.push({type:"gap_duplicate",gap:g,protrusionDirection:"top",nudge:k}));var S=g.endNode.pageBounds.maxY+g.length-n.minY;tp(Math.abs(S))<=tp(r.y)&&(tp(Math.abs(S))<tp(r.y)&&(o.length=0),r.y=Math.abs(S),o.push({type:"gap_duplicate",gap:g,protrusionDirection:"bottom",nudge:S}))}}}}catch(_){v.e(_)}finally{v.f()}}},{key:"getPointSnapLines",value:function(e){var t=e.nearestSnapsX,n=e.nearestSnapsY,r={},i={},o=[];if(t.length>0){var a,s=y(t);try{for(s.s();!(a=s.n()).done;){var u=a.value;if("points"===u.type){var l=tp(u.points.otherPoint.x);r[l]||(r[l]=[]),r[l].push(u.points)}}}catch(b){s.e(b)}finally{s.f()}}if(n.length>0){var c,d=y(n);try{for(d.s();!(c=d.n()).done;){var p=c.value;if("points"===p.type){var f=tp(p.points.otherPoint.y);i[f]||(i[f]=[]),i[f].push(p.points)}}}catch(b){d.e(b)}finally{d.f()}}var h,v=y(Object.entries(r).concat(Object.entries(i)));try{for(v.s();!(h=v.n()).done;){var g=N(h.value,2),m=(g[0],g[1]);o.push({id:os(),type:"points",points:k(m.map((function(e){return Di.From(e.otherPoint)})).concat(m.map((function(e){return Di.From(e.thisPoint)}))),(function(e,t){return e.equals(t)}))})}}catch(b){v.e(b)}finally{v.f()}return o}},{key:"getGapSnapLines",value:function(e){var t=e.selectionPageBounds,n=e.nearestSnapsX,r=e.nearestSnapsY,i={top:t.sides[0],right:t.sides[1],bottom:[t.corners[3],t.corners[2]],left:[t.corners[0],t.corners[3]]},o=[];if(n.length>0){var a,s=y(n);try{for(s.s();!(a=s.n()).done;){var u=a.value;if("gap_center"===u.type){var l=(u.gap.length-t.width)/2,c=io(u.gap.breadthIntersection[0],u.gap.breadthIntersection[1],t.minY,t.maxY);o.push({type:"gaps",direction:"horizontal",id:os(),gaps:[].concat(M(np(this.visibleGaps.horizontal,u.gap.startNode.id,l,"backward",c)),[{startEdge:u.gap.startEdge,endEdge:i.left},{startEdge:i.right,endEdge:u.gap.endEdge}],M(np(this.visibleGaps.horizontal,u.gap.endNode.id,l,"forward",c)))})}if("gap_duplicate"===u.type){var d=io(u.gap.breadthIntersection[0],u.gap.breadthIntersection[1],t.minY,t.maxY);o.push({type:"gaps",direction:"horizontal",id:os(),gaps:"left"===u.protrusionDirection?[{startEdge:i.right,endEdge:[Di.Add(u.gap.startEdge[0],{x:-u.gap.startNode.pageBounds.width,y:0}),Di.Add(u.gap.startEdge[1],{x:-u.gap.startNode.pageBounds.width,y:0})]},{startEdge:u.gap.startEdge,endEdge:u.gap.endEdge}].concat(M(np(this.visibleGaps.horizontal,u.gap.endNode.id,u.gap.length,"forward",d))):[].concat(M(np(this.visibleGaps.horizontal,u.gap.startNode.id,u.gap.length,"backward",d)),[{startEdge:u.gap.startEdge,endEdge:u.gap.endEdge},{startEdge:[Di.Add(u.gap.endEdge[0],{x:u.gap.endNode.pageBounds.width,y:0}),Di.Add(u.gap.endEdge[1],{x:u.gap.endNode.pageBounds.width,y:0})],endEdge:i.left}])})}}}catch(b){s.e(b)}finally{s.f()}}if(r.length>0){var p,f=y(r);try{for(f.s();!(p=f.n()).done;){var h=p.value;if("gap_center"===h.type){var v=(h.gap.length-t.height)/2,g=io(h.gap.breadthIntersection[0],h.gap.breadthIntersection[1],t.minX,t.maxX);o.push({type:"gaps",direction:"vertical",id:os(),gaps:[].concat(M(np(this.visibleGaps.vertical,h.gap.startNode.id,v,"backward",g)),[{startEdge:h.gap.startEdge,endEdge:i.top},{startEdge:i.bottom,endEdge:h.gap.endEdge}],M(np(this.visibleGaps.vertical,h.gap.endNode.id,v,"forward",g)))})}if("gap_duplicate"===h.type){var m=io(h.gap.breadthIntersection[0],h.gap.breadthIntersection[1],t.minX,t.maxX);o.push({type:"gaps",direction:"vertical",id:os(),gaps:"top"===h.protrusionDirection?[{startEdge:i.bottom,endEdge:[Di.Add(h.gap.startEdge[0],{x:0,y:-h.gap.startNode.pageBounds.height}),Di.Add(h.gap.startEdge[1],{x:0,y:-h.gap.startNode.pageBounds.height})]},{startEdge:h.gap.startEdge,endEdge:h.gap.endEdge}].concat(M(np(this.visibleGaps.vertical,h.gap.endNode.id,h.gap.length,"forward",m))):[].concat(M(np(this.visibleGaps.vertical,h.gap.startNode.id,h.gap.length,"backward",m)),[{startEdge:h.gap.startEdge,endEdge:h.gap.endEdge},{startEdge:[Di.Add(h.gap.endEdge[0],{x:0,y:h.gap.endNode.pageBounds.height}),Di.Add(h.gap.endEdge[1],{x:0,y:h.gap.endNode.pageBounds.height})],endEdge:i.top}])})}}}catch(b){f.e(b)}finally{f.f()}}return function(e){e.sort((function(e,t){return t.gaps.length-e.gaps.length}));for(var t=e.length-1;t>0;t--)for(var n=e[t],r=function(){var r=e[i];if(r.direction===n.direction&&n.gaps.every((function(e){return r.gaps.some((function(t){return tp(e.startEdge[0].x)===tp(t.startEdge[0].x)&&tp(e.startEdge[0].y)===tp(t.startEdge[0].y)&&tp(e.startEdge[1].x)===tp(t.startEdge[1].x)&&tp(e.startEdge[1].y)===tp(t.startEdge[1].y)}))&&r.gaps.some((function(t){return tp(e.endEdge[0].x)===tp(t.endEdge[0].x)&&tp(e.endEdge[0].y)===tp(t.endEdge[0].y)&&tp(e.endEdge[1].x)===tp(t.endEdge[1].x)&&tp(e.endEdge[1].y)===tp(t.endEdge[1].y)}))})))return e.splice(t,1),"break"},i=t-1;i>=0&&"break"!==r();i--);}(o),o}}]),e}();function ip(e,t){var n=t.minX,r=t.maxX,i=t.minY,o=t.maxY,a=[];switch(e){case"top":case"left":case"top_left":case"any":a.push({id:"top_left",handle:"top_left",x:n,y:i})}switch(e){case"top":case"right":case"top_right":case"any":a.push({id:"top_right",handle:"top_right",x:r,y:i})}switch(e){case"bottom":case"right":case"bottom_right":case"any":a.push({id:"bottom_right",handle:"bottom_right",x:r,y:o})}switch(e){case"bottom":case"left":case"bottom_left":case"any":a.push({id:"bottom_left",handle:"bottom_left",x:n,y:o})}return a}ep([Oe],rp.prototype,"snapPointsCache",1),ep([Oe],rp.prototype,"visibleShapesNotInSelection",1),ep([Oe],rp.prototype,"visibleSnapPointsNotInSelection",1),ep([Oe],rp.prototype,"visibleGaps",1);var op=new RegExp("".concat([32,160,4961,65792,65793,4153,4241].map((function(e){return String.fromCodePoint(e)})).join("|"))),ap={start:"left",middle:"center",end:"right",justify:"justify"},sp=function(){function e(t){var n=this;o(this,e),b(this,"measureText",(function(e){var t,r=n.getTextElement();r.setAttribute("dir","ltr"),r.style.setProperty("font-family",e.fontFamily),r.style.setProperty("font-style",e.fontStyle),r.style.setProperty("font-weight",e.fontWeight),r.style.setProperty("font-size",e.fontSize+"px"),r.style.setProperty("line-height",e.lineHeight*e.fontSize+"px"),r.style.setProperty("width",e.width),r.style.setProperty("min-width",null!==(t=e.minWidth)&&void 0!==t?t:null),r.style.setProperty("max-width",e.maxWidth),r.style.setProperty("padding",e.padding),r.textContent=Zl.normalizeTextForDom(e.text);var i=r.getBoundingClientRect();return r.remove(),{x:0,y:0,w:i.width,h:i.height}})),this.app=t}return l(e,[{key:"getTextElement",value:function(){var e=document.createElement("div");return this.app.getContainer().appendChild(e),e.id="__textMeasure_".concat(os()),e.classList.add("rs-text"),e.classList.add("rs-text-measure"),e.tabIndex=-1,e}},{key:"getTextLines",value:function(e){var t=this.getTextElement();t.style.setProperty("width",e.width-2*e.padding+"px"),t.style.setProperty("height","min-content"),t.style.setProperty("dir","ltr"),t.style.setProperty("font-size",e.fontSize+"px"),t.style.setProperty("font-family",e.fontFamily),t.style.setProperty("font-weight",e.fontWeight),t.style.setProperty("line-height",e.lineHeight*e.fontSize+"px"),t.style.setProperty("text-align",ap[e.textAlign]);var n=[];e.text.split(op).flatMap((function(e){return e.split("\n").map((function(e){return e.trim()})).join("\n")}));var r,i=y(e.text.split(op));try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.includes("\n"))for(var a=o.split("\n"),s=0;s<a.length;s++)a[s]=a[s].trim(),a[s]&&n.push(a[s]),s<a.length-1&&n.push("\n");else n.push(o)}}catch(T){i.e(T)}finally{i.f()}for(var u=[],l=0;l<n.length;l++){var c=n[l];u.push(c),"\n"===c&&""===n[l+1]&&l++}for(var d=u.length-1;""===u[d]&&(u.pop(),0!==d);)d--;var p=[],f=[];t.textContent="";for(var h=t.offsetHeight,v=t.textContent,g=0;g<u.length;g++){var m=u[g],b="\n"===m?m:"".concat(m," ");if(t.textContent+=b,t.offsetHeight<=h)p.push(p.length?" "+m.trim():m.trim());else if(e.wrap&&"\n"!==m){var w=t.textContent;t.textContent=v,t.textContent+="\n";var x=M(m);t.textContent+=x[0],h=t.offsetHeight;for(var k=[x[0]],S=[k],_=1;_<x.length;_++){var P=x[_];t.textContent+=P;var C=t.offsetHeight;C>h?(k=[P],S.push(k),h=C):k.push(P)}var E=S.map((function(e){return[e.join("")]}));f.push.apply(f,M(E)),p=f[f.length-1],t.textContent=w,h=t.offsetHeight}else p=[],f.push(p);v=t.textContent}var I=f.map((function(e){return e.join("").trim()}));return t.remove(),I}}]),e}(),up=l((function e(t){var n=this;o(this,e),b(this,"raf",void 0),b(this,"isPaused",!0),b(this,"last",0),b(this,"t",0),b(this,"start",(function(){n.isPaused=!1,cancelAnimationFrame(n.raf),n.raf=requestAnimationFrame(n.tick),n.last=Date.now()})),b(this,"tick",(function(){if(!n.isPaused){var e=Date.now(),t=e-n.last;n.last=e,n.t+=t,n.t<16||(n.t-=16,n.updatePointerVelocity(t),n.app.emit("tick",t)),n.raf=requestAnimationFrame(n.tick)}})),b(this,"dispose",(function(){n.isPaused=!0,cancelAnimationFrame(n.raf)})),b(this,"prevPoint",new Di),b(this,"updatePointerVelocity",(function(e){var t=n.prevPoint,r=n.app.inputs,i=r.currentScreenPoint,o=r.pointerVelocity;if(0!==e){var a=Di.Sub(i,t);n.prevPoint=i.clone();var s=a.len(),u=s?a.div(s):new Di(0,0),l=o.clone().lrp(u.mul(s/e),.5);Math.abs(l.x)<.01&&(l.x=0),Math.abs(l.y)<.01&&(l.y=0),o.equals(l)||(n.app.inputs.pointerVelocity=l)}})),this.app=t,this.app.disposables.add(this.dispose),this.start()})),lp={wheel:"onWheel",pointer_enter:"onPointerEnter",pointer_leave:"onPointerLeave",pointer_down:"onPointerDown",pointer_move:"onPointerMove",pointer_up:"onPointerUp",right_click:"onRightClick",middle_click:"onMiddleClick",blur:"onBlur",key_down:"onKeyDown",key_up:"onKeyUp",cancel:"onCancel",complete:"onComplete",interrupt:"onInterrupt",double_click:"onDoubleClick",triple_click:"onTripleClick",quadruple_click:"onQuadrupleClick"},cp=function(){function e(t,n){var r=this;o(this,e),b(this,"path",void 0),b(this,"id",void 0),b(this,"current",void 0),b(this,"type",void 0),b(this,"styles",[]),b(this,"initial",void 0),b(this,"children",void 0),b(this,"parent",void 0),b(this,"isActive",!1),b(this,"onWheel",void 0),b(this,"onPointerEnter",void 0),b(this,"onPointerLeave",void 0),b(this,"onPointerDown",void 0),b(this,"onPointerMove",void 0),b(this,"onPointerUp",void 0),b(this,"onDoubleClick",void 0),b(this,"onTripleClick",void 0),b(this,"onQuadrupleClick",void 0),b(this,"onRightClick",void 0),b(this,"onMiddleClick",void 0),b(this,"onKeyDown",void 0),b(this,"onKeyUp",void 0),b(this,"onCancel",void 0),b(this,"onComplete",void 0),b(this,"onInterrupt",void 0),b(this,"onBlur",void 0),b(this,"onEnter",void 0),b(this,"onExit",void 0),this.app=t;var i=this.constructor,a=i.id,s=i.children,u=i.initial;this.id=a,this.current=_e("toolState"+this.id,void 0),this.path=Oe("toolPath"+this.id,(function(){var e=r.current.value;return r.id+(e?".".concat(e.path.value):"")})),this.parent=null!==n&&void 0!==n?n:{},this.parent?s&&u?(this.type="branch",this.initial=u,this.children=Object.fromEntries(s().map((function(e){return[e.id,new e(r.app,r)]}))),this.current.set(this.children[this.initial])):this.type="leaf":(this.type="root",s&&u&&(this.initial=u,this.children=Object.fromEntries(s().map((function(e){return[e.id,new e(r.app,r)]}))),this.current.set(this.children[this.initial])))}return l(e,[{key:"transition",value:function(e,t){for(var n=e.split("."),r=this,i=0;i<n.length;i++){var o,a=n[i],s=r.current.value,u=null===(o=r.children)||void 0===o?void 0:o[a];if(!u)throw Error("".concat(r.id," - no child state exists with the id ").concat(a,"."));if((null===s||void 0===s?void 0:s.id)!==u.id&&(null===s||void 0===s||s.exit(t,a),r.current.set(u),u.enter(t,(null===s||void 0===s?void 0:s.id)||"initial"),!u.isActive))break;r=u}return this}},{key:"handleEvent",value:function(e){var t,n=lp[e.name],r=this.current.value;null===(t=this[n])||void 0===t||t.call(this,e),this.current.value===r&&this.isActive&&(null===r||void 0===r||r.handleEvent(e))}},{key:"enter",value:function(e,t){var n;if(this.isActive=!0,null===(n=this.onEnter)||void 0===n||n.call(this,e,t),this.children&&this.initial&&this.isActive){var r=this.children[this.initial];this.current.set(r),r.enter(e,t)}}},{key:"exit",value:function(e,t){var n,r;(this.isActive=!1,null===(n=this.onExit)||void 0===n||n.call(this,e,t),this.isActive)||(null===(r=this.current.value)||void 0===r||r.exit(e,t))}}]),e}();b(cp,"id",void 0),b(cp,"initial",void 0),b(cp,"children",void 0);var dp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"onPointerDown",(function(t){e.parent.transition("pointing",t)})),b(h(e),"onEnter",(function(){e.app.setCursor({type:"cross"})})),b(h(e),"onCancel",(function(){e.app.setSelectedTool("select")})),e}return l(n)}(cp);b(dp,"id","idle");var pp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"shapeType",""),b(h(e),"shape",void 0),b(h(e),"preciseTimeout",-1),b(h(e),"didTimeout",!1),b(h(e),"onEnter",(function(){var t,n=e.app.inputs.currentPagePoint;e.didTimeout=!1,e.shapeType=e.parent.shapeType,e.app.mark("creating");var r=Er();e.app.createShapes([{id:r,type:e.shapeType,x:n.x,y:n.y}]);var i=e.app.getShapeUtilByDef(cc),o=e.app.getShapeById(r);if(o){var a=null===(t=i.handles)||void 0===t?void 0:t.call(i,o);if(a){var s,u=e.app.getPointInShapeSpace(o,n),l=null===(s=i.onHandleChange)||void 0===s?void 0:s.call(i,o,{handle:x(x({},a[0]),{},{x:u.x,y:u.y}),isPrecise:!0});if(l){var c,d=null===(c=l.props)||void 0===c?void 0:c.start;"binding"===(null===d||void 0===d?void 0:d.type)&&e.app.setHintingIds([d.boundShapeId]),e.app.updateShapes([l],!0)}}e.app.select(r),e.shape=e.app.getShapeById(r),e.startPreciseTimeout()}})),b(h(e),"onExit",(function(){e.clearPreciseTimeout()})),b(h(e),"onPointerMove",(function(){if(e.shape&&e.app.inputs.isDragging){var t,n=e.app.getShapeUtil(e.shape),r=null===(t=n.handles)||void 0===t?void 0:t.call(n,e.shape);if(!r)throw e.app.bailToMark("creating"),Error("No handles found");if(!e.didTimeout){var i=e.app.getShapeUtilByDef(cc),o=e.app.getShapeById(e.shape.id);if(!o)return;var a=i.handles(o);if(a){var s,u=e.app.getPointInShapeSpace(o,e.app.inputs.originPagePoint),l=u.x,c=u.y,d=null===(s=i.onHandleChange)||void 0===s?void 0:s.call(i,o,{handle:x(x({},a[0]),{},{x:l,y:c}),isPrecise:!1});d&&e.app.updateShapes([d],!0)}}e.app.setSelectedTool("select.dragging_handle",{shape:e.shape,handle:r.find((function(e){return"end"===e.id})),isCreating:!0,onInteractionEnd:"arrow"})}})),b(h(e),"onPointerUp",(function(){e.cancel()})),b(h(e),"onCancel",(function(){e.cancel()})),b(h(e),"onComplete",(function(){e.cancel()})),b(h(e),"onInterrupt",(function(){e.cancel()})),e}return l(n,[{key:"startPreciseTimeout",value:function(){var e=this;this.preciseTimeout=window.setTimeout((function(){e.isActive&&e.shape&&(e.didTimeout=!0)}),300)}},{key:"clearPreciseTimeout",value:function(){clearTimeout(this.preciseTimeout)}},{key:"cancel",value:function(){this.app.bailToMark("creating"),this.app.setHintingIds([]),this.parent.transition("idle",{})}}]),n}(cp);b(pp,"id","pointing");var fp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"shapeType","arrow"),b(h(e),"styles",["color","opacity","dash","size","arrowheadStart","arrowheadEnd","font","fill"]),e}return l(n)}(cp);b(fp,"id","arrow"),b(fp,"initial","idle"),b(fp,"children",(function(){return[dp,pp]}));var hp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"info",{}),b(h(e),"initialShape",void 0),b(h(e),"util",e.app.getShapeUtilByDef(Pc)),b(h(e),"isPen",!1),b(h(e),"segmentMode","free"),b(h(e),"didJustShiftClickToExtendPreviousShapeLine",!1),b(h(e),"pagePointWhereCurrentSegmentChanged",{}),b(h(e),"pagePointWhereNextSegmentChanged",null),b(h(e),"lastRecordedPoint",{}),b(h(e),"mergeNextPoint",!1),b(h(e),"canDraw",!1),b(h(e),"onEnter",(function(t){e.info=t,e.canDraw=!e.app.isMenuOpen,e.lastRecordedPoint=e.app.inputs.currentPagePoint.clone(),e.canDraw&&e.startShape()})),b(h(e),"onPointerMove",(function(){var t=h(e).app.inputs;e.isPen!==t.isPen&&e.cancel(),!e.canDraw&&t.isDragging&&(e.startShape(),e.canDraw=!0),e.canDraw&&(t.isPen?Di.Dist(t.currentPagePoint,e.lastRecordedPoint)>=1/e.app.camera.z?(e.lastRecordedPoint=t.currentPagePoint.clone(),e.mergeNextPoint=!1):e.mergeNextPoint=!0:e.mergeNextPoint=!1,e.updateShapes())})),b(h(e),"onKeyDown",(function(t){if("Shift"===t.key)switch(e.segmentMode){case"free":e.segmentMode="starting_straight",e.pagePointWhereNextSegmentChanged=e.app.inputs.currentPagePoint.clone();break;case"starting_free":e.segmentMode="starting_straight"}e.updateShapes()})),b(h(e),"onKeyUp",(function(t){if("Shift"===t.key)switch(e.app.snaps.clear(),e.segmentMode){case"straight":e.segmentMode="starting_free",e.pagePointWhereNextSegmentChanged=e.app.inputs.currentPagePoint.clone();break;case"starting_straight":e.pagePointWhereNextSegmentChanged=null,e.segmentMode="free"}e.updateShapes()})),b(h(e),"onExit",(function(){e.app.snaps.clear(),e.pagePointWhereCurrentSegmentChanged=e.app.inputs.currentPagePoint.clone()})),b(h(e),"onPointerUp",(function(){e.complete()})),b(h(e),"onCancel",(function(){e.cancel()})),b(h(e),"onComplete",(function(){e.complete()})),b(h(e),"onInterrupt",(function(){e.app.inputs.isDragging||(e.app.bail(),e.cancel())})),e}return l(n,[{key:"getIsClosed",value:function(e,t){var n=e[0].points[0],r=e[e.length-1],i=r.points[r.points.length-1];return Di.Dist(n,i)<2*this.app.getStrokeWidth(t)}},{key:"startShape",value:function(){var e=this.app.inputs,t=e.originPagePoint,n=e.isPen;this.app.mark("draw create start"),this.isPen=n;var r=this.isPen?1.25*this.info.point.z:.5;if(this.segmentMode=this.app.inputs.shiftKey?"straight":"free",this.didJustShiftClickToExtendPreviousShapeLine=!1,this.lastRecordedPoint=t.clone(),this.initialShape){var i=this.app.getShapeById(this.initialShape.id);if(i&&"straight"===this.segmentMode){this.didJustShiftClickToExtendPreviousShapeLine=!0;var o=_(i.props.segments);if(!o)throw Error("Expected a previous segment!");var a=_(o.points);if(!a)throw Error("Expected a previous point!");var s=this.app.getPointInShapeSpace(i,t).toFixed(),u=s.x,l=s.y,c=this.isPen?1.25*this.info.point.z:.5,d={type:this.segmentMode,points:[{x:a.x,y:a.y,z:+c.toFixed(2)},{x:u,y:l,z:+c.toFixed(2)}]},p=go.applyToPoint(this.app.getPageTransformById(i.id),a);this.pagePointWhereCurrentSegmentChanged=p,this.pagePointWhereNextSegmentChanged=null;var f=[].concat(M(i.props.segments),[d]);return void this.app.updateShapes([{id:i.id,type:"draw",props:{segments:f,isClosed:this.getIsClosed(f,i.props.size)}}])}}this.pagePointWhereCurrentSegmentChanged=t.clone();var h=Er();this.app.createShapes([{id:h,type:"draw",x:t.x,y:t.y,props:{isPen:this.isPen,segments:[{type:this.segmentMode,points:[{x:0,y:0,z:+r.toFixed(2)}]}]}}]),this.initialShape=this.app.getShapeById(h)}},{key:"updateShapes",value:function(){var e=this.app.inputs,t=this.initialShape;if(t){var n=t.id,r=t.props.size,i=this.app.getShapeById(n);if(i){var o=i.props.segments,a=this.app.getPointInShapeSpace(i,e.currentPagePoint).toFixed(),s=a.x,u=a.y,l=a.z,c={x:s,y:u,z:this.isPen?+(1.25*l).toFixed(2):.5};switch(this.segmentMode){case"starting_straight":var d=this.pagePointWhereNextSegmentChanged;if(null===d)throw Error("We should have a point where the segment changed");if(Di.Dist(d,e.currentPagePoint)>4){this.pagePointWhereCurrentSegmentChanged=this.pagePointWhereNextSegmentChanged.clone(),this.pagePointWhereNextSegmentChanged=null,this.segmentMode="straight";var p=_(o);if(!p)throw Error("Expected a previous segment!");var f,h=_(p.points);if(!h)throw Error("Expected a previous last point!");if("straight"===p.type){f={type:"straight",points:[x({},h),this.app.getPointInShapeSpace(i,this.pagePointWhereCurrentSegmentChanged).toFixed().toJson()]};var v=this.app.getPageTransform(i);this.pagePointWhereCurrentSegmentChanged=go.applyToPoint(v,h)}else f={type:"straight",points:[this.app.getPointInShapeSpace(i,this.pagePointWhereCurrentSegmentChanged).toFixed().toJson(),c]};this.app.updateShapes([{id:n,type:"draw",props:{segments:[].concat(M(o),[f]),isClosed:this.getIsClosed(o,r)}}],!0)}break;case"starting_free":var g=this.pagePointWhereNextSegmentChanged;if(null===g)throw Error("We should have a point where the segment changed");if(Di.Dist(g,e.currentPagePoint)>4){this.pagePointWhereCurrentSegmentChanged=this.pagePointWhereNextSegmentChanged.clone(),this.pagePointWhereNextSegmentChanged=null,this.segmentMode="free";var m=o.slice(),y=_(m[m.length-1].points);if(!y)throw Error("No previous point!");var b={type:"free",points:M(Di.PointsBetween(y,c,6).map((function(e){return e.toFixed().toJson()})))};this.app.updateShapes([{id:n,type:"draw",props:{segments:[].concat(M(m),[b]),isClosed:this.getIsClosed(o,r)}}],!0)}break;case"straight":var w,k=o.slice(),S=k[k.length-1],P=this.pagePointWhereCurrentSegmentChanged,C=this.app.inputs,E=C.currentPagePoint,I=C.ctrlKey;if(!P)throw Error("We should have a point where the segment changed");var T=!1;this.didJustShiftClickToExtendPreviousShapeLine?this.app.inputs.isDragging&&(T=!I,this.didJustShiftClickToExtendPreviousShapeLine=!1):T=!I;var j=this.app.getPointInShapeSpace(i,E).toFixed().toJson(),A=!1,O=void 0;if((this.app.userDocumentSettings.isSnapMode?!I:I)&&k.length>2){for(var z=void 0,D=8/this.app.camera.z,N=0,R=o.length-2;N<R;N++){var L=o[N];if(!L)break;if("free"!==L.type){var B=L.points[0],F=_(L.points);if(B&&F){var U=Di.NearestPointOnLineSegment(B,F,j),K=Di.Dist(U,j);if(K<D){z=U.toFixed().toJson(),D=K,O=L;break}}}}z&&(A=!0,j=z)}if(A&&O){var V=this.app.getPageTransform(i),W=O.points[0],H=_(O.points);if(!H)throw Error("Expected a last point!");var X=go.applyToPoint(V,W),q=go.applyToPoint(V,H),$=go.applyToPoint(V,j);this.app.snaps.setLines([{id:os(),type:"points",points:[X,$,q]}])}else{if(this.app.snaps.clear(),T){var G=Di.Angle(P,E),Q=Qi(G,24)-G;w=Di.RotWith(E,P,Q)}else w=E;j=this.app.getPointInShapeSpace(i,w).toFixed().toJson()}k[k.length-1]=x(x({},S),{},{type:"straight",points:[S.points[0],j]}),this.app.updateShapes([{id:n,type:"draw",props:{segments:k,isClosed:this.getIsClosed(o,r)}}],!0);break;case"free":var Z=o.slice(),J=Z[Z.length-1],ee=M(J.points);if(ee.length&&this.mergeNextPoint){var te=ee[ee.length-1].z;ee[ee.length-1]={x:c.x,y:c.y,z:te?Math.max(te,c.z):c.z}}else ee.push(c);if(Z[Z.length-1]=x(x({},J),{},{points:ee}),this.app.updateShapes([{id:n,type:"draw",props:{segments:Z,isClosed:this.getIsClosed(o,r)}}],!0),ee.length>500){this.app.updateShapes([{id:n,type:"draw",props:{isComplete:!0}}]);var ne=this.app.inputs.currentPagePoint,re=this.app.createShapeId();this.app.createShapes([{id:re,type:"draw",x:ne.x,y:ne.y,props:{isPen:this.isPen,segments:[{type:"free",points:[{x:0,y:0,z:this.isPen?+(1.25*l).toFixed():.5}]}]}}]),this.initialShape=Y(this.app.getShapeById(re)),this.mergeNextPoint=!1,this.lastRecordedPoint=this.app.inputs.currentPagePoint.clone()}}}}}},{key:"complete",value:function(){if(this.canDraw){var e=this.initialShape;e&&(this.app.updateShapes([{id:e.id,type:e.type,props:{isComplete:!0}}]),this.parent.transition("idle",{}))}else this.cancel()}},{key:"cancel",value:function(){this.parent.transition("idle",this.info)}}]),n}(cp);b(hp,"id","drawing");var vp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"onPointerDown",(function(t){e.parent.transition("drawing",t)})),b(h(e),"onEnter",(function(){e.app.setCursor({type:"cross"})})),b(h(e),"onCancel",(function(){e.app.setSelectedTool("select")})),e}return l(n)}(cp);b(vp,"id","idle");var gp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"styles",["color","opacity","dash","fill","size"]),b(h(e),"onExit",(function(){e.children.drawing.initialShape=void 0})),e}return l(n)}(cp);b(gp,"id","draw"),b(gp,"initial","idle"),b(gp,"children",(function(){return[vp,hp]}));var mp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"info",{}),b(h(e),"scribble",{}),b(h(e),"markId",""),b(h(e),"excludedShapeIds",new Set),b(h(e),"onEnter",(function(t){e.markId=e.app.mark("erase scribble begin"),e.info=t;var n=e.app.inputs.originPagePoint;e.excludedShapeIds=new Set(e.app.shapesArray.filter((function(t){return("frame"===t.type||"group"===t.type)&&e.app.isPointInShape(n,t)})).map((function(e){return e.id}))),e.startScribble(),e.update()})),b(h(e),"startScribble",(function(){e.scribble=new Qd({onUpdate:e.onScribbleUpdate,onComplete:e.onScribbleComplete,color:"muted-1",size:12}),e.app.on("tick",e.scribble.tick)})),b(h(e),"pushPointToScribble",(function(){var t=e.app.inputs.currentPagePoint,n=t.x,r=t.y;e.scribble.addPoint(n,r)})),b(h(e),"onScribbleUpdate",(function(t){e.app.setScribble(t)})),b(h(e),"onScribbleComplete",(function(){e.app.off("tick",e.scribble.tick),e.app.setScribble(null)})),b(h(e),"onExit",(function(){e.scribble.stop()})),b(h(e),"onPointerMove",(function(){e.update()})),b(h(e),"onPointerUp",(function(){e.complete()})),b(h(e),"onCancel",(function(){e.cancel()})),b(h(e),"onComplete",(function(){e.complete()})),e}return l(n,[{key:"update",value:function(){var e=this.app,t=e.shapesArray,n=e.erasingIdsSet,r=e.inputs,i=r.currentPagePoint,o=r.previousPagePoint,a=this.excludedShapeIds;this.pushPointToScribble();var s,u=new Set(n),l=y(t);try{for(l.s();!(s=l.n()).done;){var c=s.value;if("group"!==c.type){var d=this.app.getPageMaskById(c.id);if(!d||ao(i,d)){var p=this.app.getShapeUtil(c),f=this.app.getPointInShapeSpace(c,o),h=this.app.getPointInShapeSpace(c,i);p.hitTestLineSegment(c,f,h)&&u.add(this.app.getOutermostSelectableShape(c).id)}}}}catch(v){l.e(v)}finally{l.f()}this.app.setErasingIds(M(u).filter((function(e){return!a.has(e)})))}},{key:"complete",value:function(){this.app.deleteShapes(this.app.pageState.erasingIds),this.app.setErasingIds([]),this.parent.transition("idle",{})}},{key:"cancel",value:function(){this.app.setErasingIds([]),this.app.bailToMark(this.markId),this.parent.transition("idle",this.info)}}]),n}(cp);b(mp,"id","erasing");var yp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"onPointerDown",(function(t){e.parent.transition("pointing",t)})),e}return l(n)}(cp);b(yp,"id","idle");var bp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"onEnter",(function(){var t,n=e.app.inputs,r=new Set,i=r.size,o=y(M(e.app.sortedShapesArray).reverse());try{for(o.s();!(t=o.n()).done;){var a=t.value;if(e.app.isPointInShape(n.currentPagePoint,a)){if("group"===a.type)continue;var s=e.app.getOutermostSelectableShape(a);if("frame"===s.type&&r.size>i)break;r.add(s.id)}}}catch(u){o.e(u)}finally{o.f()}e.app.setErasingIds(M(r))})),b(h(e),"onPointerMove",(function(t){e.app.inputs.isDragging&&e.parent.transition("erasing",t)})),b(h(e),"onPointerUp",(function(){e.complete()})),b(h(e),"onCancel",(function(){e.cancel()})),b(h(e),"onComplete",(function(){e.complete()})),b(h(e),"onInterrupt",(function(){e.cancel()})),e}return l(n,[{key:"complete",value:function(){var e=this.app.erasingIds;e.length&&(this.app.mark("erase end"),this.app.deleteShapes(e)),this.app.setErasingIds([]),this.parent.transition("idle",{})}},{key:"cancel",value:function(){this.app.setErasingIds([]),this.parent.transition("idle",{})}}]),n}(cp);b(bp,"id","pointing");var wp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"onEnter",(function(){e.app.setCursor({type:"cross"})})),e}return l(n)}(cp);b(wp,"id","eraser"),b(wp,"initial","idle"),b(wp,"children",(function(){return[yp,bp,mp]}));var xp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"onPointerDown",(function(t){e.parent.transition("pointing",t)})),b(h(e),"onEnter",(function(){e.app.setCursor({type:"cross"})})),b(h(e),"onCancel",(function(){e.app.setSelectedTool("select")})),e}return l(n)}(cp);b(xp,"id","idle");var kp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"markId","creating"),b(h(e),"wasFocusedOnEnter",!1),b(h(e),"onEnter",(function(){var t=e.app.isMenuOpen;e.wasFocusedOnEnter=!t})),b(h(e),"onPointerMove",(function(t){if(e.app.inputs.isDragging){var n=e.app.inputs.originPagePoint,r=e.parent.shapeType,i=Er();e.app.mark(e.markId),e.app.createShapes([{id:i,type:r,x:n.x,y:n.y,props:{w:1,h:1}}]),e.app.setSelectedIds([i]),e.app.setSelectedTool("select.resizing",x(x({},t),{},{target:"selection",handle:"bottom_right",isCreating:!0,creationCursorOffset:{x:1,y:1},onInteractionEnd:e.parent.id}))}})),b(h(e),"onPointerUp",(function(){e.complete()})),b(h(e),"onCancel",(function(){e.cancel()})),b(h(e),"onComplete",(function(){e.complete()})),b(h(e),"onInterrupt",(function(){e.cancel()})),e}return l(n,[{key:"complete",value:function(){var e=this.app.inputs.originPagePoint;if(this.wasFocusedOnEnter){this.app.mark(this.markId);var t=this.parent.shapeType,n=Er();this.app.mark(this.markId),this.app.createShapes([{id:n,type:t,x:e.x,y:e.y}]);var r=this.app.getShapeById(n),i=this.app.getShapeUtil(r).defaultProps(),o=i.w,a=i.h,s=this.app.getDeltaInParentSpace(r,new Di(o/2,a/2));this.app.updateShapes([{id:n,type:t,x:r.x-s.x,y:r.y-s.y}]),this.app.setSelectedIds([n]),this.app.instanceState.isToolLocked?this.parent.transition("idle",{}):this.app.setSelectedTool("select.idle")}}},{key:"cancel",value:function(){this.parent.transition("idle",{})}}]),n}(cp);b(kp,"id","pointing");var Sp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"styles",["opacity"]),e}return l(n)}(cp);b(Sp,"id","box"),b(Sp,"initial","idle"),b(Sp,"children",(function(){return[xp,kp]}));var _p=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"shapeType","frame"),b(h(e),"styles",["opacity"]),e}return l(n)}(Sp);b(_p,"id","frame"),b(_p,"initial","idle");var Pp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"onPointerDown",(function(t){e.parent.transition("pointing",t)})),b(h(e),"onEnter",(function(){e.app.setCursor({type:"cross"})})),b(h(e),"onKeyUp",(function(t){if("Enter"===t.key){var n=e.app.onlySelectedShape;n&&"geo"===n.type&&(e.app.mark("editing shape"),e.app.setEditingId(n.id),e.app.setSelectedTool("select.editing_shape",x(x({},t),{},{target:"shape",shape:n})))}})),b(h(e),"onCancel",(function(){e.app.setSelectedTool("select")})),e}return l(n)}(cp);b(Pp,"id","idle");var Cp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"onPointerMove",(function(t){if(e.app.inputs.isDragging){var n=e.app.inputs.originPagePoint,r=Er();e.app.mark("creating"),e.app.createShapes([{id:r,type:"geo",x:n.x,y:n.y,props:{w:1,h:1,geo:e.app.instanceState.propsForNextShape.geo}}]),e.app.select(r),e.app.setSelectedTool("select.resizing",x(x({},t),{},{target:"selection",handle:"bottom_right",isCreating:!0,creationCursorOffset:{x:1,y:1},onInteractionEnd:"geo"}))}})),b(h(e),"onPointerUp",(function(){e.complete()})),b(h(e),"onCancel",(function(){e.cancel()})),b(h(e),"onComplete",(function(){e.complete()})),b(h(e),"onInterrupt",(function(){e.cancel()})),e}return l(n,[{key:"complete",value:function(){var e=this.app.inputs.originPagePoint,t=Er();this.app.mark("creating"),this.app.createShapes([{id:t,type:"geo",x:e.x,y:e.y,props:{geo:this.app.instanceState.propsForNextShape.geo,w:1,h:1}}]);var n=this.app.getShapeById(t);if(n){var r="star"===n.props.geo?function(e,t,n){var r=Bi/e/2,i=2*Math.floor(e/4),o=2*e-i,a=2*Math.floor(e/2),s=Math.cos(i*r-Li)*t/2,u=Math.cos(o*r-Li)*t/2,l=Math.sin(0*r-Li)*n/2,c=Math.sin(a*r-Li)*n/2;return new uo(0,0,s-u,c-l)}(5,200,200):new uo(0,0,200,200),i=this.app.getDeltaInParentSpace(n,r.center);this.app.select(t),this.app.updateShapes([{id:n.id,type:"geo",x:n.x-i.x,y:n.y-i.y,props:{geo:this.app.instanceState.propsForNextShape.geo,w:r.width,h:r.height}}]),this.app.instanceState.isToolLocked?this.parent.transition("idle",{}):this.app.setSelectedTool("select",{})}}},{key:"cancel",value:function(){this.parent.transition("idle",{})}}]),n}(cp);b(Cp,"id","pointing");var Ep=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"styles",["color","opacity","dash","fill","size","geo","font","align"]),e}return l(n)}(cp);b(Ep,"id","geo"),b(Ep,"initial","idle"),b(Ep,"children",(function(){return[Pp,Cp]}));var Ip=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"onEnter",(function(){e.update()})),b(h(e),"onPointerMove",(function(){e.update()})),b(h(e),"onPointerUp",(function(){e.complete()})),b(h(e),"onCancel",(function(){e.complete()})),b(h(e),"onComplete",(function(){e.complete()})),e}return l(n,[{key:"update",value:function(){var e=this.app.inputs,t=e.currentScreenPoint,n=e.previousScreenPoint,r=Di.Sub(t,n);(Math.abs(r.x)>0||Math.abs(r.y)>0)&&this.app.pan(r.x,r.y)}},{key:"complete",value:function(){this.app.slideCamera({speed:Math.min(2,this.app.inputs.pointerVelocity.len()),direction:this.app.inputs.pointerVelocity,friction:Go}),this.parent.transition("idle",{})}}]),n}(cp);b(Ip,"id","dragging");var Mp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"onEnter",(function(){e.app.setCursor({type:"grab"})})),b(h(e),"onPointerDown",(function(t){e.parent.transition("pointing",t)})),b(h(e),"onCancel",(function(){e.app.setSelectedTool("select")})),e}return l(n)}(cp);b(Mp,"id","idle");var Tp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"onEnter",(function(){e.app.stopCameraAnimation(),e.app.setCursor({type:"grabbing"})})),b(h(e),"onPointerMove",(function(t){e.app.inputs.isDragging&&e.parent.transition("dragging",t)})),b(h(e),"onPointerUp",(function(){e.complete()})),b(h(e),"onCancel",(function(){e.complete()})),b(h(e),"onComplete",(function(){e.complete()})),b(h(e),"onInterrupt",(function(){e.complete()})),e}return l(n,[{key:"complete",value:function(){this.parent.transition("idle",{})}}]),n}(cp);b(Tp,"id","pointing");var jp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"styles",[]),b(h(e),"onDoubleClick",(function(t){if("settle"===t.phase){var n=e.app.inputs.currentScreenPoint;e.app.zoomIn(n,{duration:220,easing:zi.easeOutQuint})}})),b(h(e),"onTripleClick",(function(t){if("settle"===t.phase){var n=e.app.inputs.currentScreenPoint;e.app.zoomOut(n,{duration:320,easing:zi.easeOutQuint})}})),b(h(e),"onQuadrupleClick",(function(t){if("settle"===t.phase){var n=e.app,r=n.zoomLevel,i=n.inputs.currentScreenPoint;1===r?e.app.zoomToFit({duration:400,easing:zi.easeOutQuint}):e.app.resetZoom(i,{duration:320,easing:zi.easeOutQuint})}})),e}return l(n)}(cp);b(jp,"id","hand"),b(jp,"initial","idle"),b(jp,"children",(function(){return[Mp,Tp,Ip]}));var Ap=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"shapeId",""),b(h(e),"onEnter",(function(t){e.shapeId=t.shapeId,e.app.setCursor({type:"cross"})})),b(h(e),"onPointerDown",(function(){e.parent.transition("pointing",{shapeId:e.shapeId})})),b(h(e),"onCancel",(function(){e.app.setSelectedTool("select")})),e}return l(n)}(cp);b(Ap,"id","idle");var Op=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"shapeType",""),b(h(e),"shape",{}),b(h(e),"markPointId",""),b(h(e),"onEnter",(function(t){var n=e.app.inputs,r=n.currentPagePoint;e.shapeType=e.parent.shapeType,e.markPointId=e.app.mark("creating");var i=!1;if(t.shapeId){var o=e.app.getShapeById(t.shapeId);o&&(i=!0,e.shape=o)}if(n.shiftKey&&i){var a,s,u,l=e.app.getShapeUtil(e.shape).handles(e.shape).filter((function(e){return"vertex"===e.type})).sort(Ds),c=l[l.length-1],d=go.applyToPoint(e.app.getParentTransform(e.shape),new Di(e.shape.x,e.shape.y));2===l.length&&1===l[1].x&&1===l[1].y?(a=l[1].index,s=l[1].id,u=x(x({},l[1]),{},{x:r.x-d.x,y:r.y-d.y})):(s="handle:"+(a=Os(c.index)),u={x:r.x-d.x,y:r.y-d.y,index:a,canBind:!1,type:"vertex",id:s});var p=Y(e.shape.props.handles);p[u.id]=u,e.app.updateShapes([{id:e.shape.id,type:e.shape.type,props:{handles:p}}])}else{var f=Er();e.app.createShapes([{id:f,type:e.shapeType,x:r.x,y:r.y}]),e.app.select(f),e.shape=e.app.getShapeById(f)}})),b(h(e),"onPointerMove",(function(){if(e.shape&&e.app.inputs.isDragging){var t,n=e.app.getShapeUtil(e.shape),r=null===(t=n.handles)||void 0===t?void 0:t.call(n,e.shape);if(!r)throw e.app.bailToMark("creating"),Error("No handles found");e.app.setSelectedTool("select.dragging_handle",{shape:e.shape,isCreating:!0,handle:_(r),onInteractionEnd:"line"})}})),b(h(e),"onPointerUp",(function(){e.complete()})),b(h(e),"onCancel",(function(){e.cancel()})),b(h(e),"onComplete",(function(){e.complete()})),b(h(e),"onInterrupt",(function(){e.parent.transition("idle",{}),e.app.bailToMark("creating"),e.app.snaps.clear()})),e}return l(n,[{key:"complete",value:function(){this.parent.transition("idle",{shapeId:this.shape.id}),this.app.snaps.clear()}},{key:"cancel",value:function(){this.app.bailToMark(this.markPointId),this.parent.transition("idle",{shapeId:this.shape.id}),this.app.snaps.clear()}}]),n}(cp);b(Op,"id","pointing");var zp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"shapeType","line"),b(h(e),"styles",["color","opacity","dash","size","spline"]),e}return l(n)}(cp);b(zp,"id","line"),b(zp,"initial","idle"),b(zp,"children",(function(){return[Ap,Op]}));var Dp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"onPointerDown",(function(t){e.parent.transition("pointing",t)})),b(h(e),"onEnter",(function(){e.app.setCursor({type:"cross"})})),b(h(e),"onCancel",(function(){e.app.setSelectedTool("select")})),e}return l(n)}(cp);b(Dp,"id","idle");var Np=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"dragged",!1),b(h(e),"info",{}),b(h(e),"wasFocusedOnEnter",!1),b(h(e),"markPointId","creating"),b(h(e),"onEnter",(function(){e.wasFocusedOnEnter=!e.app.isMenuOpen})),b(h(e),"onPointerMove",(function(t){if(e.app.inputs.isDragging){e.app.mark(e.markPointId);var n=e.createShape();if(!n)return;e.app.setSelectedTool("select.translating",x(x({},t),{},{target:"shape",shape:n,isCreating:!0,editAfterComplete:!0,onInteractionEnd:"note"}))}})),b(h(e),"onPointerUp",(function(){e.complete()})),b(h(e),"onInterrupt",(function(){e.cancel()})),b(h(e),"onComplete",(function(){e.complete()})),b(h(e),"onCancel",(function(){e.cancel()})),e}return l(n,[{key:"complete",value:function(){if(this.wasFocusedOnEnter){this.app.mark(this.markPointId);var e=this.createShape();if(this.app.instanceState.isToolLocked)this.parent.transition("idle",{});else{if(!e)return;this.app.setEditingId(e.id),this.app.setSelectedTool("select.editing_shape",x(x({},this.info),{},{target:"shape",shape:e}))}}}},{key:"cancel",value:function(){this.app.bailToMark(this.markPointId),this.parent.transition("idle",this.info)}},{key:"createShape",value:function(){var e=this.app.inputs.originPagePoint,t=this.app.createShapeId();this.app.createShapes([{id:t,type:"note",x:e.x,y:e.y}],!0);var n=this.app.getShapeUtilByDef(Ed),r=this.app.getShapeById(t);C(Ed.is(r));var i=n.bounds(r);return this.app.updateShapes([{id:t,type:"note",x:r.x-i.width/2,y:r.y-i.height/2}]),this.app.getShapeById(t)}}]),n}(cp);b(Np,"id","pointing");var Rp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"styles",["color","opacity","size","align","font"]),e}return l(n)}(cp);b(Rp,"id","note"),b(Rp,"initial","idle"),b(Rp,"children",(function(){return[Dp,Np]}));var Lp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"info",{}),b(h(e),"selectionSnapshot",{}),b(h(e),"snapshot",{}),b(h(e),"markId",""),b(h(e),"isCloning",!1),b(h(e),"isCreating",!1),b(h(e),"editAfterComplete",!1),b(h(e),"dragAndDropManager",new Yd(e.app)),b(h(e),"onEnter",(function(t){var n=t.isCreating,r=void 0!==n&&n,i=t.editAfterComplete,o=void 0!==i&&i;e.info=t,e.isCreating=r,e.editAfterComplete=o,e.markId=r?"creating":e.app.mark("translating"),e.handleEnter(t),e.app.on("tick",e.updateParent)})),b(h(e),"updateParent",(function(){var t=h(e).snapshot;e.dragAndDropManager.updateDroppingNode(t.movingShapes,e.updateParentTransforms)})),b(h(e),"onExit",(function(){e.app.off("tick",e.updateParent),e.selectionSnapshot={},e.snapshot={},e.app.snaps.clear(),e.app.setCursor({type:"default"}),e.dragAndDropManager.clear()})),b(h(e),"onPointerMove",(function(){e.updateShapes()})),b(h(e),"onKeyDown",(function(){!e.app.inputs.altKey||e.isCloning?e.updateShapes():e.startCloning()})),b(h(e),"onKeyUp",(function(){e.app.inputs.altKey||!e.isCloning?e.updateShapes():e.stopCloning()})),b(h(e),"onPointerUp",(function(){e.complete()})),b(h(e),"onComplete",(function(){e.complete()})),b(h(e),"onCancel",(function(){e.cancel()})),b(h(e),"updateParentTransforms",(function(){var t=h(e),n=t.app,r=t.snapshot.shapeSnapshots,i=[];r.forEach((function(e){var t=n.getShapeById(e.shape.id);if(!t)return null;i.push(t);var r=Dn.isId(t.parentId)?null:go.Inverse(n.getPageTransformById(t.parentId));e.parentTransform=r}))})),e}return l(n,[{key:"reset",value:function(){this.app.bailToMark(this.markId)}},{key:"startCloning",value:function(){this.isCreating||(this.isCloning=!0,this.reset(),this.markId=this.app.mark("translating"),this.app.duplicateShapes(),this.snapshot=Bp(this.app),this.handleStart(),this.updateShapes())}},{key:"stopCloning",value:function(){this.isCloning=!1,this.snapshot=this.selectionSnapshot,this.reset(),this.markId=this.app.mark("translating"),this.updateShapes()}},{key:"complete",value:function(){if(this.updateShapes(),this.dragAndDropManager.dropShapes(this.snapshot.movingShapes),this.handleEnd(),this.app.instanceState.isToolLocked&&this.info.onInteractionEnd)this.app.setSelectedTool(this.info.onInteractionEnd);else if(this.editAfterComplete){var e=this.app.onlySelectedShape;e&&(this.app.setEditingId(e.id),this.app.setSelectedTool("select"),this.app.root.current.value.transition("editing_shape",{}))}else this.parent.transition("idle",{})}},{key:"cancel",value:function(){this.reset(),this.info.onInteractionEnd?this.app.setSelectedTool(this.info.onInteractionEnd):this.parent.transition("idle",this.info)}},{key:"handleEnter",value:function(e){this.isCloning=!1,this.info=e,this.app.setCursor({type:"move"}),this.selectionSnapshot=Bp(this.app),this.isCreating||!this.app.inputs.altKey?(this.snapshot=this.selectionSnapshot,this.handleStart(),this.updateShapes()):this.startCloning()}},{key:"handleStart",value:function(){var e=this,t=this.snapshot.movingShapes,n=[];t.forEach((function(t){var r,i=e.app.getShapeUtil(t),o=null===(r=i.onTranslateStart)||void 0===r?void 0:r.call(i,t);o&&n.push(o)})),n.length>0&&this.app.updateShapes(n)}},{key:"handleEnd",value:function(){var e=this,t=this.snapshot.movingShapes,n=[];t.forEach((function(t){var r,i=e.app.getShapeById(t.id),o=e.app.getShapeUtil(t),a=null===(r=o.onTranslateEnd)||void 0===r?void 0:r.call(o,t,i);a&&n.push(a)})),n.length>0&&this.app.updateShapes(n)}},{key:"handleChange",value:function(){var e=this,t=this.snapshot.movingShapes,n=[];t.forEach((function(t){var r,i=e.app.getShapeById(t.id),o=e.app.getShapeUtil(t),a=null===(r=o.onTranslate)||void 0===r?void 0:r.call(o,t,i);a&&n.push(a)})),n.length>0&&this.app.updateShapes(n)}},{key:"updateShapes",value:function(){var e=this.snapshot;this.dragAndDropManager.updateDroppingNode(e.movingShapes,this.updateParentTransforms),function(e){var t=e.app,n=e.shapeSnapshots,r=e.averagePagePoint,i=e.initialSelectionPageBounds,o=e.initialSelectionSnapPoints,a=t.inputs,s=t.isGridMode,u=t.gridSize,l=Di.Sub(a.currentPagePoint,a.originPagePoint),c=t.inputs.shiftKey?Math.abs(l.x)<Math.abs(l.y)?"x":"y":null;"x"===c?l.x=0:"y"===c&&(l.y=0);if(t.snaps.clear(),(t.userDocumentSettings.isSnapMode?!a.ctrlKey:a.ctrlKey)&&t.inputs.pointerVelocity.len()<.5){var d=t.snaps.snapTranslate({dragDelta:l,initialSelectionPageBounds:i,lockedAxis:c,initialSelectionSnapPoints:o}).nudge;l.add(d)}var p=Di.Add(r,l);s&&!a.ctrlKey&&p.snapToGrid(u);var f=Di.Sub(p,r);t.updateShapes(S(n.map((function(e){var t=e.shape,n=e.pagePoint,r=e.parentTransform,i=Di.Add(n,f),o=r?go.applyToPoint(r,i):i;return{id:t.id,type:t.type,x:o.x,y:o.y}}))),!0)}({app:this.app,shapeSnapshots:e.shapeSnapshots,averagePagePoint:e.averagePagePoint,initialSelectionPageBounds:e.initialPageBounds,initialSelectionSnapPoints:e.initialSnapPoints}),this.handleChange()}}]),n}(cp);function Bp(e){var t=[],n=[],r=S(e.selectedIds.map((function(r){var i=e.getShapeById(r);if(!i)return null;t.push(i);var o=e.getPagePointById(r);return o?(n.push(o),{shape:i,pagePoint:o,parentTransform:Dn.isId(i.parentId)?null:go.Inverse(e.getPageTransformById(i.parentId))}):null})));return{averagePagePoint:Di.Average(n),movingShapes:t,shapeSnapshots:r,initialPageBounds:e.selectedPageBounds,initialSnapPoints:1===e.selectedIds.length?e.snaps.snapPointsCache.get(e.selectedIds[0]):e.selectedPageBounds?e.selectedPageBounds.snapPoints.map((function(e,t){return{id:"selection:"+t,x:e.x,y:e.y}})):[]}}b(Lp,"id","translating");var Fp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"info",{}),b(h(e),"brush",new uo),b(h(e),"initialSelectedIds",[]),b(h(e),"initialStartShape",null),b(h(e),"onEnter",(function(t){var n=e.app.inputs,r=n.altKey,i=n.currentPagePoint;r?e.parent.transition("scribble_brushing",t):(e.info=t,e.initialSelectedIds=e.app.selectedIds.slice(),e.initialStartShape=e.app.getShapesAtPoint(i)[0],e.onPointerMove())})),b(h(e),"onExit",(function(){e.initialSelectedIds=[],e.app.setBrush(null)})),b(h(e),"onPointerMove",(function(){e.hitTestShapes()})),b(h(e),"onPointerUp",(function(){e.complete()})),b(h(e),"onComplete",(function(){e.complete()})),b(h(e),"onCancel",(function(t){e.app.setSelectedIds(e.initialSelectedIds,!0),e.parent.transition("idle",t)})),b(h(e),"onKeyDown",(function(t){e.app.inputs.altKey?e.parent.transition("scribble_brushing",t):e.hitTestShapes()})),b(h(e),"onKeyUp",(function(){e.hitTestShapes()})),b(h(e),"onInterrupt",(function(){e.app.setBrush(null)})),e}return l(n,[{key:"complete",value:function(){this.parent.transition("idle",{})}},{key:"hitTestShapes",value:function(){var e=this.app,t=e.currentPageId,n=e.shapesArray,r=e.inputs,i=r.originPagePoint,o=r.currentPagePoint,a=r.shiftKey,s=r.ctrlKey;this.brush.setTo(uo.FromPoints([i,o]));var u,l,c,d,p,f,h,v=new Set(a?this.initialSelectedIds:[]),g=this.brush.corners;e:for(var m=0,y=n.length;m<y;m++)if("group"!==(c=n[m]).type&&!v.has(c.id)&&(p=this.app.getPageBounds(c)))if(this.brush.contains(p))this.handleHit(c,o,t,v,g);else if(!s&&"frame"!==c.type&&this.brush.collides(p)){if(d=this.app.getShapeUtil(c),!(f=this.app.getPageTransform(c)))continue e;h=go.applyToPoints(go.Inverse(f),g);t:for(var b=0;b<h.length;b++)if(u=h[b],l=h[(b+1)%h.length],d.hitTestLineSegment(c,u,l)){this.handleHit(c,o,t,v,g);break t}}this.app.setBrush(x({},this.brush.toJson())),this.app.setSelectedIds(Array.from(v),!0)}},{key:"handleHit",value:function(e,t,n,r,i){if(e.parentId!==n){var o=this.app.getOutermostSelectableShape(e),a=this.app.getPageMaskById(o.id);a&&null!==function(e,t){for(var n,r,i=0,o=e.length;i<o;i++){n=e[i],r=e[(i+1)%o];for(var a=0,s=t.length;a<s;a++)if(zo(n,r,t[a],t[(a+1)%s]))return!0}return!1}(a,i)&&!ao(t,a)||r.add(o.id)}else r.add(e.id)}}]),n}(cp);b(Fp,"id","brushing");var Up=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"shapeId",""),b(h(e),"initialHandle",{}),b(h(e),"initialAdjacentHandle",null),b(h(e),"markId",""),b(h(e),"initialPageTransform",void 0),b(h(e),"initialPageRotation",void 0),b(h(e),"info",{}),b(h(e),"isPrecise",!1),b(h(e),"isPreciseId",null),b(h(e),"pointingId",null),b(h(e),"onEnter",(function(t){var n=t.shape,r=t.isCreating,i=t.handle;e.info=t,e.shapeId=n.id,e.markId=r?"creating":e.app.mark("dragging handle"),e.initialHandle=U(i),e.initialPageTransform=e.app.getPageTransform(n),e.initialPageRotation=e.app.getPageRotation(n),e.app.setCursor({type:r?"cross":"grabbing",rotation:0});var o=e.app.getShapeUtil(n).handles(n).sort(Ds),a=o.findIndex((function(e){return e.id===t.handle.id}));e.initialAdjacentHandle=null;for(var s=a+1;s<o.length;s++){var u=o[s];if("vertex"===u.type&&"middle"!==u.id&&u.id!==t.handle.id){e.initialAdjacentHandle=u;break}}if(!e.initialAdjacentHandle)for(var l=o.length-1;l>=0;l--){var c=o[l];if("vertex"===c.type&&"middle"!==c.id&&c.id!==t.handle.id){e.initialAdjacentHandle=c;break}}var d=n.props[t.handle.id];e.isPrecise=!1,"binding"===(null===d||void 0===d?void 0:d.type)&&(e.app.setHintingIds([d.boundShapeId]),e.isPrecise=!Di.Equals(d.normalizedAnchor,{x:.5,y:.5}),e.isPrecise?e.isPreciseId=d.boundShapeId:e.resetExactTimeout()),e.update()})),b(h(e),"exactTimeout",-1),b(h(e),"onPointerMove",(function(){e.update()})),b(h(e),"onKeyDown",(function(){e.update()})),b(h(e),"onKeyUp",(function(){e.update()})),b(h(e),"onPointerUp",(function(){e.complete()})),b(h(e),"onComplete",(function(){e.complete()})),b(h(e),"onCancel",(function(){e.cancel()})),b(h(e),"onExit",(function(){e.app.setHintingIds([]),e.app.snaps.clear(),e.app.setCursor({type:"default"})})),e}return l(n,[{key:"resetExactTimeout",value:function(){var e=this;-1!==this.exactTimeout&&this.clearExactTimeout(),this.exactTimeout=setTimeout((function(){e.isActive&&!e.isPrecise&&(e.isPrecise=!0,e.isPreciseId=e.pointingId,e.update()),e.exactTimeout=-1}),750)}},{key:"clearExactTimeout",value:function(){-1!==this.exactTimeout&&(clearTimeout(this.exactTimeout),this.exactTimeout=-1)}},{key:"complete",value:function(){this.app.snaps.clear();var e=this.info.onInteractionEnd;this.app.instanceState.isToolLocked&&e?this.app.setSelectedTool(e,{shapeId:this.shapeId}):this.parent.transition("idle",{})}},{key:"cancel",value:function(){this.app.bailToMark(this.markId),this.app.snaps.clear();var e=this.info.onInteractionEnd;e?this.app.setSelectedTool(e,{shapeId:this.shapeId}):this.parent.transition("idle",{})}},{key:"update",value:function(){var e,t=this.app.inputs,n=t.currentPagePoint,r=t.originPagePoint,i=t.shiftKey,o=this.app.getShapeById(this.shapeId);if(o){var a=Di.Add(Di.Rot(Di.Sub(n,r),-this.initialPageRotation),this.initialHandle);if(i&&"middle"!==this.initialHandle.id){var s=this.initialAdjacentHandle;if(s){var u=Di.Angle(s,a),l=Qi(u,24)-u;a=Di.RotWith(a,s,l)}}this.app.snaps.clear();var c=this.app.inputs.ctrlKey;if((this.app.userDocumentSettings.isSnapMode?!c:c)&&"line"===o.type){var d=go.applyToPoint(this.app.getPageTransformById(o.id),a),p=this.app.snaps.snapLineHandleTranslate({lineId:o.id,handleId:this.initialHandle.id,handlePoint:d}).nudge;if(p.x||p.y){var f=this.app.getDeltaInShapeSpace(o,p);a=Di.Add(a,f)}}var h=this.app.getShapeUtil(o),v=null===(e=h.onHandleChange)||void 0===e?void 0:e.call(h,o,{handle:x(x({},this.initialHandle),{},{x:a.x,y:a.y}),isPrecise:this.isPrecise||this.app.inputs.altKey}),g=x(x({},o),v);if(this.initialHandle.canBind){var m=g.props[this.initialHandle.id];"binding"===(null===m||void 0===m?void 0:m.type)?this.app.hintingIds[0]!==m.boundShapeId&&(this.app.setHintingIds([m.boundShapeId]),this.pointingId=m.boundShapeId,this.isPrecise=this.app.inputs.pointerVelocity.len()<.5||this.app.inputs.altKey,this.isPreciseId=this.isPrecise?m.boundShapeId:null,this.resetExactTimeout()):this.app.hintingIds.length>0&&(this.app.setHintingIds([]),this.pointingId=null,this.isPrecise=!1,this.isPreciseId=null,this.resetExactTimeout())}v&&this.app.updateShapes([g],!0)}}}]),n}(cp);b(Up,"id","dragging_handle");var Kp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"onPointerEnter",(function(t){if("shape"===t.target){var n=e.app,r=n.selectedIds,i=n.focusLayerId,o=e.app.getOutermostSelectableShape(t.shape,(function(e){return!r.includes(e.id)}));o.id!==i&&e.app.setHoveredId(o.id)}})),b(h(e),"onPointerLeave",(function(t){if("shape"===t.target)e.app.setHoveredId(null)})),b(h(e),"onExit",(function(){var t;if(e.app.pageState.editingId){var n=e.app.pageState.editingId;if(n){e.app.setEditingId(null);var r=e.app.getShapeById(n),i=e.app.getShapeUtil(r);null===(t=i.onEditEnd)||void 0===t||t.call(i,r)}}})),b(h(e),"onPointerDown",(function(t){var n,r;if("shape"===t.target){var i=t.shape,o=e.app.pageState.editingId;if(o){if(i.id===o)return;var a=e.app.getShapeById(o);if(a){var s,u=e.app.getShapeUtil(i);if(i.type===a.type&&null!==(s=u.canEdit)&&void 0!==s&&s.call(u,i))return e.app.setEditingId(i.id),e.app.setHoveredId(i.id),void e.app.setSelectedIds([i.id])}}}e.parent.transition("idle",t),null===(n=e.parent.current.value)||void 0===n||null===(r=n.onPointerDown)||void 0===r||r.call(n,t)})),b(h(e),"onComplete",(function(t){e.parent.transition("idle",t)})),b(h(e),"onCancel",(function(t){e.parent.transition("idle",t)})),b(h(e),"onBlur",(function(t){e.parent.transition("idle",t)})),e}return l(n)}(cp);b(Kp,"id","editing_shape");var Vp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"onPointerEnter",(function(t){switch(t.target){case"canvas":break;case"shape":var n=e.app,r=n.selectedIds,i=n.focusLayerId,o=e.app.getOutermostSelectableShape(t.shape,(function(e){return!r.includes(e.id)}));o.id!==i&&e.app.setHoveredId(o.id)}})),b(h(e),"onPointerLeave",(function(t){if("shape"===t.target)e.app.setHoveredId(null)})),b(h(e),"onPointerDown",(function(t){if(!e.app.isMenuOpen)if(t.ctrlKey)e.parent.transition("brushing",t);else switch(t.target){case"canvas":e.parent.transition("pointing_canvas",t);break;case"shape":e.parent.transition("pointing_shape",t);break;case"handle":if(e.app.isReadOnly)break;e.parent.transition("pointing_handle",t);break;case"selection":switch(t.handle){case"mobile_rotate":case"top_left_rotate":case"top_right_rotate":case"bottom_left_rotate":case"bottom_right_rotate":e.parent.transition("pointing_rotate_handle",t);break;case"top":case"right":case"bottom":case"left":case"top_left":case"top_right":case"bottom_left":case"bottom_right":e.parent.transition("pointing_resize_handle",t);break;default:e.parent.transition("pointing_selection",t)}}})),b(h(e),"onDoubleClick",(function(t){switch(t.target){case"canvas":e.createTextShapeAtPoint(t);break;case"selection":if(e.app.isReadOnly)break;var n=e.app.onlySelectedShape;if(n){var r=e.app.getShapeUtil(n);if("right"===t.handle||"left"===t.handle||"top"===t.handle||"bottom"===t.handle){var i,o=null===(i=r.onDoubleClickEdge)||void 0===i?void 0:i.call(r,n);if(o)return e.app.mark("double click edge"),void e.app.updateShapes([o])}r.canEdit(n)&&e.startEditingShape(n,t)}break;case"shape":var a=t.shape,s=e.app.getShapeUtil(a);if("video"!==a.type&&e.app.isReadOnly)break;if(s.onDoubleClick){var u,l=null===(u=s.onDoubleClick)||void 0===u?void 0:u.call(s,a);l&&e.app.updateShapes([l])}else s.canEdit(a)?e.startEditingShape(a,t):e.createTextShapeAtPoint(t);break;case"handle":var c;if(e.app.isReadOnly)break;var d=t.shape,p=t.handle,f=e.app.getShapeUtil(d),h=null===(c=f.onDoubleClickHandle)||void 0===c?void 0:c.call(f,d,p);h?e.app.updateShapes([h]):f.canEdit(d)&&e.startEditingShape(d,t)}})),b(h(e),"onRightClick",(function(t){switch(t.target){case"canvas":e.app.selectNone();break;case"shape":var n=e.app.pageState.selectedIds,r=t.shape,i=e.app.getOutermostSelectableShape(r,(function(t){return!e.app.isSelected(t.id)}));n.includes(i.id)||(e.app.mark("selecting shape"),e.app.setSelectedIds([i.id]))}})),b(h(e),"onEnter",(function(){e.app.setHoveredId(null),e.app.setCursor({type:"default"})})),b(h(e),"onCancel",(function(){var t;0===e.app.selectedIds.length||1===e.app.selectedIds.length&&"group"===(null===(t=e.app.getShapeById(e.app.selectedIds[0]))||void 0===t?void 0:t.type)&&e.app.focusLayerId!==e.app.currentPageId?e.app.popFocusLayer():(e.app.mark("clearing selection"),e.app.selectNone())})),b(h(e),"onKeyUp",(function(t){if(!e.app.isReadOnly&&"Enter"===t.key){var n=e.app.selectedShapes;if(n.every((function(e){return"group"===e.type})))return void e.app.setSelectedIds(n.flatMap((function(t){return e.app.getSortedChildIds(t.id)})));var r=e.app.onlySelectedShape;if(r&&e.app.getShapeUtil(r).canEdit(r))return void e.startEditingShape(r,x(x({},t),{},{target:"shape",shape:r}))}})),e}return l(n,[{key:"startEditingShape",value:function(e,t){this.app.mark("editing shape"),this.app.setEditingId(e.id),this.parent.transition("editing_shape",t)}},{key:"createTextShapeAtPoint",value:function(e){this.app.mark("creating text shape");var t=Er(),n=this.app.inputs.currentPagePoint,r=n.x,i=n.y;this.app.createShapes([{id:t,type:"text",x:r,y:i,props:{text:"",autoSize:!0}}]);var o=this.app.getShapeById(t);if(o){var a=this.app.getBounds(o);this.app.updateShapes([{id:t,type:"text",x:o.x-a.width/2,y:o.y-a.height/2}]),this.app.setEditingId(t),this.app.select(t),this.parent.transition("editing_shape",e)}}}]),n}(cp);b(Vp,"id","idle");var Wp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"onEnter",(function(){e.app.inputs.shiftKey||e.app.selectedIds.length>0&&(e.app.mark("selecting none"),e.app.selectNone())})),b(h(e),"onPointerMove",(function(t){e.app.inputs.isDragging&&e.parent.transition("brushing",t)})),b(h(e),"onPointerUp",(function(){e.complete()})),b(h(e),"onComplete",(function(){e.complete()})),b(h(e),"onInterrupt",(function(){e.parent.transition("idle",{})})),e}return l(n,[{key:"_clickWasInsideFocusedGroup",value:function(){var e=this.app,t=e.focusLayerId,n=e.inputs;if(!Cr(t))return!1;var r=this.app.getShapeById(t);if(!r)return!1;var i=this.app.getPointInShapeSpace(r,n.currentPagePoint);return this.app.getShapeUtil(r).hitTestPoint(r,i)}},{key:"complete",value:function(){this.app.inputs.shiftKey||(this.app.selectNone(),this._clickWasInsideFocusedGroup()||this.app.setFocusLayer(null)),this.parent.transition("idle",{})}}]),n}(cp);b(Wp,"id","pointing_canvas");var Hp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"info",{}),b(h(e),"onEnter",(function(t){e.info=t;var n=t.shape.props[t.handle.id];"binding"===(null===n||void 0===n?void 0:n.type)&&e.app.setHintingIds([n.boundShapeId]),e.app.setCursor({type:"grabbing"})})),b(h(e),"onExit",(function(){e.app.setHintingIds([]),e.app.setCursor({type:"default"})})),b(h(e),"onPointerUp",(function(){e.parent.transition("idle",e.info)})),b(h(e),"onPointerMove",(function(){e.app.inputs.isDragging&&e.parent.transition("dragging_handle",e.info)})),b(h(e),"onCancel",(function(){e.cancel()})),b(h(e),"onComplete",(function(){e.cancel()})),b(h(e),"onInterrupt",(function(){e.cancel()})),e}return l(n,[{key:"cancel",value:function(){this.parent.transition("idle",{})}}]),n}(cp);b(Hp,"id","pointing_handle");var Yp={bottom:"ns-resize",top:"ns-resize",left:"ew-resize",right:"ew-resize",bottom_left:"nesw-resize",bottom_right:"nwse-resize",top_left:"nwse-resize",top_right:"nesw-resize",bottom_left_rotate:"swne-rotate",bottom_right_rotate:"senw-rotate",top_left_rotate:"nwse-rotate",top_right_rotate:"nesw-rotate",mobile_rotate:"grabbing"},Xp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"info",{}),b(h(e),"onEnter",(function(t){e.info=t,e.updateCursor()})),b(h(e),"onPointerMove",(function(){e.app.inputs.isDragging&&e.parent.transition("resizing",e.info)})),b(h(e),"onPointerUp",(function(){e.parent.transition("idle",{})})),b(h(e),"onCancel",(function(){e.cancel()})),b(h(e),"onComplete",(function(){e.cancel()})),b(h(e),"onInterrupt",(function(){e.cancel()})),e}return l(n,[{key:"updateCursor",value:function(){var e=this.app.selectedShapes,t=Yp[this.info.handle];this.app.setCursor({type:t,rotation:1===e.length?e[0].rotation:0})}},{key:"cancel",value:function(){this.parent.transition("idle",{})}}]),n}(cp);b(Xp,"id","pointing_resize_handle");var qp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"info",{}),b(h(e),"onEnter",(function(t){e.info=t,e.updateCursor()})),b(h(e),"onPointerMove",(function(){e.app.inputs.isDragging&&e.parent.transition("rotating",e.info)})),b(h(e),"onPointerUp",(function(){e.parent.transition("idle",e.info)})),b(h(e),"onCancel",(function(){e.cancel()})),b(h(e),"onComplete",(function(){e.cancel()})),b(h(e),"onInterrupt",(function(){e.cancel()})),e}return l(n,[{key:"updateCursor",value:function(){var e=this.app.selectionRotation;this.app.setCursor({type:Yp[this.info.handle],rotation:e})}},{key:"cancel",value:function(){this.parent.transition("idle",{})}}]),n}(cp);b(qp,"id","pointing_rotate_handle");var $p=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"info",{}),b(h(e),"onEnter",(function(t){e.info=t})),b(h(e),"onPointerUp",(function(t){e.app.selectNone(),e.parent.transition("idle",t)})),b(h(e),"onPointerMove",(function(t){if(e.app.inputs.isDragging){if(e.app.isReadOnly)return;e.parent.transition("translating",t)}})),b(h(e),"onCancel",(function(){e.cancel()})),b(h(e),"onComplete",(function(){e.cancel()})),b(h(e),"onInterrupt",(function(){e.cancel()})),e}return l(n,[{key:"cancel",value:function(){this.parent.transition("idle",{})}}]),n}(cp);b($p,"id","pointing_selection");var Gp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"eventTargetShape",{}),b(h(e),"selectingShape",{}),b(h(e),"didSelectOnEnter",!1),b(h(e),"onEnter",(function(t){var n,r=t.shape;if(r&&void 0!==e.app.getShapeUtil(r).onClick)return;if(e.eventTargetShape=t.shape,e.selectingShape=e.app.getOutermostSelectableShape(t.shape),e.selectingShape.id!==e.app.focusLayerId){var i=e.app.isWithinSelection(e.selectingShape.id),o=e.app.selectedIds.length>1&&(null===(n=e.app.selectionBounds)||void 0===n?void 0:n.containsPoint(e.app.inputs.currentPagePoint));if(e.didSelectOnEnter=!i&&e.selectingShape.id!==e.app.focusLayerId&&!o,e.didSelectOnEnter){var a=e.app,s=a.inputs,u=a.selectedIds,l=e.app.getParentShape(t.shape);l&&"group"===l.type&&e.app.cancelDoubleClick(),s.shiftKey&&!s.altKey?u.includes(e.selectingShape.id)||(e.app.mark("shift selecting shape"),e.app.setSelectedIds([].concat(M(u),[e.selectingShape.id]))):(e.app.mark("selecting shape"),e.app.setSelectedIds([e.selectingShape.id]))}}else e.didSelectOnEnter=!1})),b(h(e),"onPointerUp",(function(t){var n=t.shape;if(n){var r=e.app.getShapeUtil(n);if(r.onClick){var i,o=null===(i=r.onClick)||void 0===i?void 0:i.call(r,n);return void(o&&e.app.updateShapes([o]))}}if(e.didSelectOnEnter||e.selectingShape.id===e.app.focusLayerId)e.selectingShape.id===e.app.focusLayerId&&(e.app.selectedIds.length>0?e.app.setSelectedIds([]):e.app.popFocusLayer());else{e.app.mark("selecting shape (pointer up)");var a=e.app.getOutermostSelectableShape(e.eventTargetShape,(function(t){return!e.app.isSelected(t.id)}));if(e.app.selectedIds.includes(a.id))e.app.setSelectedIds(e.app.inputs.shiftKey?e.app.selectedIds.filter((function(t){return t!==e.selectingShape.id})):[e.selectingShape.id]);else if(e.app.inputs.shiftKey){var s=e.app.getAncestors(a);e.app.setSelectedIds([].concat(M(e.app.selectedIds.filter((function(e){return!s.find((function(t){return t.id===e}))}))),[a.id]))}else e.app.setSelectedIds([a.id])}e.parent.transition("idle",t)})),b(h(e),"onPointerMove",(function(t){if(e.app.inputs.isDragging){if(e.app.isReadOnly)return;e.parent.transition("translating",t)}})),b(h(e),"onCancel",(function(){e.cancel()})),b(h(e),"onComplete",(function(){e.cancel()})),b(h(e),"onInterrupt",(function(){e.cancel()})),e}return l(n,[{key:"cancel",value:function(){this.parent.transition("idle",{})}}]),n}(cp);b(Gp,"id","pointing_shape");var Qp=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"info",{}),b(h(e),"markId",""),b(h(e),"creationCursorOffset",{x:0,y:0}),b(h(e),"editAfterComplete",!1),b(h(e),"snapshot",{}),b(h(e),"onEnter",(function(t){var n=t.isCreating,r=void 0!==n&&n,i=t.editAfterComplete,o=void 0!==i&&i,a=t.creationCursorOffset,s=void 0===a?{x:0,y:0}:a;e.info=t,e.editAfterComplete=o,e.creationCursorOffset=s,t.isCreating&&e.app.setCursor({type:"cross",rotation:0}),e.snapshot=e._createSnapshot(),e.markId=r?"creating":e.app.mark("starting resizing"),e.handleResizeStart(),e.updateShapes()})),b(h(e),"onPointerMove",(function(){e.updateShapes()})),b(h(e),"onKeyDown",(function(){e.updateShapes()})),b(h(e),"onKeyUp",(function(){e.updateShapes()})),b(h(e),"onPointerUp",(function(){e.complete()})),b(h(e),"onComplete",(function(){e.complete()})),b(h(e),"onCancel",(function(){e.cancel()})),b(h(e),"onExit",(function(){e.app.snaps.clear()})),b(h(e),"_createSnapshot",(function(){var t=e.app,n=t.selectedIds,r=t.selectionRotation,i=t.inputs.originPagePoint,o=e.app.selectionBounds,a=Di.RotWith(o.getHandlePoint(e.info.handle),o.point,r),s=Di.Sub(i,a),u=new Map;n.forEach((function(t){var r=e.app.getShapeById(t);if(r){if(u.set(r.id,e._createShapeSnapshot(r)),"frame"===r.type&&1===n.length)return;e.app.visitDescendants(r.id,(function(t){var n=e.app.getShapeById(t);if(n&&(u.set(n.id,e._createShapeSnapshot(n)),"frame"===n.type))return!1}))}}));var l=!M(u.values()).some((function(e){return!Zi(e.pageRotation,r)||e.isAspectRatioLocked}));return{shapeSnapshots:u,selectionBounds:o,cursorHandleOffset:s,selectionRotation:r,selectedIds:n,canShapesDeform:l,initialSelectionPageBounds:e.app.selectedPageBounds}})),b(h(e),"_createShapeSnapshot",(function(t){var n=e.app.getPageTransform(t),r=e.app.getShapeUtil(t);return{shape:t,bounds:r.bounds(t),pageTransform:n,pageRotation:go.Decompose(n).rotation,isAspectRatioLocked:r.isAspectRatioLocked(t)}})),e}return l(n,[{key:"cancel",value:function(){this.app.bailToMark(this.markId),this.info.onInteractionEnd?this.app.setSelectedTool(this.info.onInteractionEnd):this.parent.transition("idle",{})}},{key:"complete",value:function(){if(this.handleResizeEnd(),this.editAfterComplete&&this.app.onlySelectedShape)return this.app.setEditingId(this.app.onlySelectedShape.id),this.app.setSelectedTool("select"),void this.app.root.current.value.transition("editing_shape",{});this.app.instanceState.isToolLocked&&this.info.onInteractionEnd?this.app.setSelectedTool(this.info.onInteractionEnd):this.parent.transition("idle",{})}},{key:"handleResizeStart",value:function(){var e=this,t=this.snapshot.shapeSnapshots,n=[];t.forEach((function(t){var r,i=t.shape,o=e.app.getShapeUtil(i),a=null===(r=o.onResizeStart)||void 0===r?void 0:r.call(o,i);a&&n.push(a)})),n.length>0&&this.app.updateShapes(n)}},{key:"handleResizeEnd",value:function(){var e=this,t=this.snapshot.shapeSnapshots,n=[];t.forEach((function(t){var r,i=t.shape,o=e.app.getShapeById(i.id),a=e.app.getShapeUtil(i),s=null===(r=a.onResizeEnd)||void 0===r?void 0:r.call(a,i,o);s&&n.push(s)})),n.length>0&&this.app.updateShapes(n)}},{key:"updateShapes",value:function(){var e=this.app.inputs,t=e.altKey,n=e.shiftKey,r=this.snapshot,i=r.shapeSnapshots,o=r.selectionBounds,a=r.cursorHandleOffset,s=r.selectedIds,u=r.selectionRotation,l=r.canShapesDeform,c=n||!l,d=this.app.inputs.ctrlKey,p=this.app.inputs.currentPagePoint.clone().sub(a).sub(this.creationCursorOffset),f=this.app.inputs.originPagePoint.clone().sub(a);this.app.isGridMode&&!d&&p.snapToGrid(this.app.gridSize);var h=this.info.handle,v=Jp(h,Math.PI);if(this.app.snaps.clear(),(this.app.userDocumentSettings.isSnapMode?!d:d)&&u%Li===0){var g=this.app.snaps.snapResize({dragDelta:Di.Sub(p,f),initialSelectionPageBounds:this.snapshot.initialSelectionPageBounds,handle:Jp(h,u),isAspectRatioLocked:c,isResizingFromCenter:t}).nudge;p.add(g)}var m=Di.RotWith(t?o.center:o.getHandlePoint(v),o.point,u),b=Di.Sub(p,m).rot(-u),w=Di.Sub(f,m).rot(-u),x=Di.DivV(b,w);Number.isFinite(x.x)||(x.x=1),Number.isFinite(x.y)||(x.y=1);var k="top"===h||"bottom"===h,S="left"===h||"right"===h;c?S?x.y=Math.abs(x.x):k?x.x=Math.abs(x.y):Math.abs(x.x)>Math.abs(x.y)?x.y=Math.abs(x.x)*(x.y<0?-1:1):x.x=Math.abs(x.y)*(x.x<0?-1:1):(k&&(x.x=1),S&&(x.y=1)),this.info.isCreating||this.updateCursor({dragHandle:h,isFlippedX:x.x<0,isFlippedY:x.y<0,rotation:u});var _,P=y(i.keys());try{for(P.s();!(_=P.n()).done;){var C=_.value,E=i.get(C);this.app.resizeShape(C,x,{initialBounds:E.bounds,dragHandle:h,initialPageTransform:E.pageTransform,initialShape:E.shape,mode:1===s.length&&C===s[0]?"resize_bounds":"scale_shape",scaleOrigin:m,scaleAxisRotation:u})}}catch(I){P.e(I)}finally{P.f()}}},{key:"updateCursor",value:function(e){var t=e.dragHandle,n=e.isFlippedX,r=e.isFlippedY,i=e.rotation,o=x({},this.app.cursor);switch(t){case"top_left":case"bottom_right":o.type="nwse-resize",n!==r&&(o.type="nesw-resize");break;case"top_right":case"bottom_left":o.type="nesw-resize",n!==r&&(o.type="nwse-resize")}o.rotation=i,this.app.setCursor(o)}}]),n}(cp);b(Qp,"id","resizing");var Zp=["top","top_right","right","bottom_right","bottom","bottom_left","left","top_left"];function Jp(e,t){t%=Bi;var n=Math.round(t/(Ri/4)),r=Zp.indexOf(e);return Zp[(r+n)%Zp.length]}var ef=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"snapshot",{}),b(h(e),"info",{}),b(h(e),"markId",""),b(h(e),"onEnter",(function(t){e.info=t,e.markId=e.app.mark("rotate start"),e.snapshot=Rs({app:e.app}),e.handleStart()})),b(h(e),"onExit",(function(){e.app.setCursor({type:"none"}),e.snapshot={}})),b(h(e),"onPointerMove",(function(){e.update()})),b(h(e),"onKeyDown",(function(){e.update()})),b(h(e),"onKeyUp",(function(){e.update()})),b(h(e),"onPointerUp",(function(){e.complete()})),b(h(e),"onComplete",(function(){e.complete()})),b(h(e),"onCancel",(function(){e.app.bailToMark(e.markId),e.parent.transition("idle",e.info)})),b(h(e),"update",(function(){var t=e._getRotationFromPointerPosition({snapToNearestDegree:!1});Ls({app:e.app,delta:t,snapshot:e.snapshot,stage:"update"}),e.app.setCursor({type:Yp[e.info.handle],rotation:t+e.snapshot.initialSelectionRotation})})),b(h(e),"complete",(function(){Ls({app:e.app,delta:e._getRotationFromPointerPosition({snapToNearestDegree:!0}),snapshot:e.snapshot,stage:"end"}),e.parent.transition("idle",e.info)})),e}return l(n,[{key:"handleStart",value:function(){var e=this._getRotationFromPointerPosition({snapToNearestDegree:!1});Ls({app:this.app,delta:this._getRotationFromPointerPosition({snapToNearestDegree:!1}),snapshot:this.snapshot,stage:"start"}),this.app.setCursor({type:Yp[this.info.handle],rotation:e+this.snapshot.initialSelectionRotation})}},{key:"_getRotationFromPointerPosition",value:function(e){var t=e.snapToNearestDegree,n=this.app,r=n.selectionPageCenter,i=n.inputs,o=i.shiftKey,a=i.currentPagePoint,s=this.snapshot,u=s.initialCursorAngle,l=s.initialSelectionRotation,c=l+(r.angle(a)-u);if(o)c=Qi(c,24);else if(t&&(c=Math.round(c/Fi)*Fi,this.app.isCoarsePointer)){var d=Qi(c,4),p=$i(c,d);Math.abs(p)<function(e){return e*Ri/180}(5)&&(c=d)}return c-l}}]),n}(cp);b(ef,"id","rotating");var tf=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"hits",new Set),b(h(e),"size",0),b(h(e),"scribble",{}),b(h(e),"initialSelectedIds",new Set),b(h(e),"newlySelectedIds",new Set),b(h(e),"onEnter",(function(){e.initialSelectedIds=new Set(e.app.inputs.shiftKey?e.app.selectedIds:[]),e.newlySelectedIds=new Set,e.size=0,e.hits.clear(),e.startScribble(),e.updateBrushSelection(),requestAnimationFrame((function(){e.app.setBrush(null)}))})),b(h(e),"onExit",(function(){e.app.setErasingIds([]),e.scribble.stop()})),b(h(e),"onPointerMove",(function(){e.updateBrushSelection()})),b(h(e),"onPointerUp",(function(){e.complete()})),b(h(e),"onKeyDown",(function(){e.updateBrushSelection()})),b(h(e),"onKeyUp",(function(){e.app.inputs.altKey?e.updateBrushSelection():e.parent.transition("brushing",{})})),b(h(e),"startScribble",(function(){e.scribble=new Qd({onUpdate:e.onScribbleUpdate,onComplete:e.onScribbleComplete,color:"selection-stroke",opacity:.32,size:12}),e.app.on("tick",e.scribble.tick)})),b(h(e),"pushPointToScribble",(function(){var t=e.app.inputs.currentPagePoint,n=t.x,r=t.y;e.scribble.addPoint(n,r)})),b(h(e),"onScribbleUpdate",(function(t){e.app.setScribble(t)})),b(h(e),"onScribbleComplete",(function(){e.app.off("tick",e.scribble.tick),e.app.setScribble(null)})),b(h(e),"onCancel",(function(){e.cancel()})),b(h(e),"onComplete",(function(){e.complete()})),e}return l(n,[{key:"updateBrushSelection",value:function(){var e=this.app,t=e.shapesArray,n=e.inputs,r=n.originPagePoint,i=n.previousPagePoint,o=n.currentPagePoint;this.pushPointToScribble();for(var a,s,u=t,l=0,c=u.length;l<c;l++)if(a=u[l],s=this.app.getShapeUtil(a),!("group"===a.type||this.newlySelectedIds.has(a.id)||"frame"===a.type&&s.hitTestPoint(a,this.app.getPointInShapeSpace(a,r)))&&s.hitTestLineSegment(a,this.app.getPointInShapeSpace(a,i),this.app.getPointInShapeSpace(a,o))){var d=this.app.getOutermostSelectableShape(a),p=this.app.getPageMaskById(d.id);if(p)if(null!==Mo(i,o,p))if(!ao(o,p))continue;this.newlySelectedIds.add(d.id)}this.app.setSelectedIds(M(new Set([].concat(M(this.newlySelectedIds),M(this.initialSelectedIds)))),!0)}},{key:"complete",value:function(){this.parent.transition("idle",{})}},{key:"cancel",value:function(){this.app.setSelectedIds(M(this.initialSelectedIds),!0),this.parent.transition("idle",{})}}]),n}(cp);b(tf,"id","scribble_brushing"),b(tf,"canActivateInReadOnly",!0);var nf=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"styles",["color","opacity","dash","fill","size"]),b(h(e),"onExit",(function(){e.app.pageState.editingId&&e.app.setEditingId(null)})),e}return l(n)}(cp);b(nf,"id","select"),b(nf,"initial","idle"),b(nf,"children",(function(){return[Vp,Wp,Gp,Lp,Fp,tf,$p,Xp,Kp,Qp,ef,qp,Hp,Up]}));var rf=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"onPointerEnter",(function(t){switch(t.target){case"canvas":break;case"shape":var n=e.app,r=n.selectedIds,i=n.focusLayerId,o=e.app.getOutermostSelectableShape(t.shape,(function(e){return!r.includes(e.id)}));o.id!==i&&"text"===o.type&&e.app.setHoveredId(o.id)}})),b(h(e),"onPointerLeave",(function(t){if("shape"===t.target)e.app.setHoveredId(null)})),b(h(e),"onPointerDown",(function(t){var n=e.app.hoveredId;if(n){var r=e.app.getShapeById(n);if("text"===r.type)return void requestAnimationFrame((function(){e.app.setSelectedIds([r.id]),e.app.setEditingId(r.id),e.app.setSelectedTool("select.editing_shape",x(x({},t),{},{target:"shape",shape:r}))}))}e.parent.transition("pointing",t)})),b(h(e),"onEnter",(function(){e.app.setCursor({type:"cross"})})),b(h(e),"onKeyDown",(function(t){if("Enter"===t.key){var n=e.app.selectedShapes[0];n&&"geo"===n.type&&(e.app.setSelectedTool("select"),e.app.setEditingId(n.id),e.app.root.current.value.transition("editing_shape",x(x({},t),{},{target:"shape",shape:n})))}})),b(h(e),"onCancel",(function(){e.app.setSelectedTool("select")})),e}return l(n)}(cp);b(rf,"id","idle");var of=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"shape",void 0),b(h(e),"onExit",(function(){e.app.setHintingIds([])})),b(h(e),"onPointerMove",(function(t){if(e.app.inputs.isDragging){var n=e.app.inputs.originPagePoint,r=Er();if(e.app.mark("creating"),e.app.createShapes([{id:r,type:"text",x:n.x,y:n.y,props:{text:"",autoSize:!1,w:20}}]),e.app.select(r),e.shape=e.app.getShapeById(r),!e.shape)return;e.app.setSelectedTool("select.resizing",x(x({},t),{},{target:"selection",handle:"right",isCreating:!0,creationCursorOffset:{x:1,y:1},editAfterComplete:!0,onInteractionEnd:"text"}))}})),b(h(e),"onPointerUp",(function(){e.complete()})),b(h(e),"onComplete",(function(){e.cancel()})),b(h(e),"onCancel",(function(){e.cancel()})),b(h(e),"onInterrupt",(function(){e.cancel()})),e}return l(n,[{key:"complete",value:function(){var e;this.app.mark("creating text shape");var t=Er(),n=this.app.inputs.currentPagePoint,r=n.x,i=n.y;this.app.createShapes([{id:t,type:"text",x:r,y:i,props:{text:"",autoSize:!0}}],!0),this.app.setEditingId(t),this.app.setSelectedTool("select"),null===(e=this.app.root.current.value)||void 0===e||e.transition("editing_shape",{})}},{key:"cancel",value:function(){this.parent.transition("idle",{}),this.app.bailToMark("creating")}}]),n}(cp);b(of,"id","pointing");var af=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"styles",["color","opacity","font","align","size"]),e}return l(n)}(cp);b(af,"id","text"),b(af,"initial","idle"),b(af,"children",(function(){return[rf,of]}));var sf,uf=function(e){d(n,e);var t=v(n);function n(){return o(this,n),t.apply(this,arguments)}return l(n)}(cp);b(uf,"id","root"),b(uf,"initial","select"),b(uf,"children",(function(){return[nf,jp,wp,gp,af,zp,fp,Ep,Rp,_p]}));var lf=Object.defineProperty,cf=Object.getOwnPropertyDescriptor,df=function(e,t,n,r){for(var i,o=r>1?void 0:r?cf(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&lf(t,n,o),o};var pf=(sf=function(e){d(n,e);var t=v(n);function n(e){var r,i=e.config,a=void 0===i?Nd.default:i,s=e.store,u=e.getContainer;if(o(this,n),b(h(r=t.call(this)),"store",void 0),b(h(r),"config",void 0),b(h(r),"root",void 0),b(h(r),"_shapeIds",void 0),b(h(r),"disposables",new Set),b(h(r),"_dprManager",new Hd(h(r))),b(h(r),"_cameraManager",new Vd(h(r))),b(h(r),"_activeAreaManager",new Kd(h(r))),b(h(r),"_tickManager",new up(h(r))),b(h(r),"_updateDepth",0),b(h(r),"snaps",new rp(h(r))),b(h(r),"isSafari",void 0),b(h(r),"isIos",void 0),b(h(r),"_canMoveCamera",_e("can move camera",!0)),b(h(r),"getContainer",void 0),b(h(r),"_crashingError",null),b(h(r),"openMenus",new Set),b(h(r),"_isCoarsePointer",_e("isCoarsePointer",!1)),b(h(r),"_isChangingStyle",_e("isChangingStyle",!1)),b(h(r),"_isChangingStyleTimeout",-1),b(h(r),"_parentIdsToChildIds",void 0),b(h(r),"history",new Gd(h(r),(function(){return r._complete()}),(function(e){r.annotateError(e,{origin:"history.batch",willCrashApp:!0}),r.crash(e)}))),b(h(r),"shapeUtils",void 0),b(h(r),"_childIdsCache",new ya),b(h(r),"_selectionSharedProps",Oe("_selectionSharedProps",(function(){for(var e=h(r).selectedShapes,t={},n=0,i=e.length;n<i;n++)r._extractSharedProps(e[n],t);return t}))),b(h(r),"_prevProps",{}),b(h(r),"_invalidParents",new Set),b(h(r),"_isPenMode",_e("isPenMode",!1)),b(h(r),"_touchEventsRemainingBeforeExitingPenMode",0),b(h(r),"_cullingBounds",_e("culling viewport",new uo)),b(h(r),"_cullingBoundsExpanded",_e("culling viewport expanded",new uo)),b(h(r),"_setFocusLayer",r.history.createCommand("setFocusLayer",(function(e){if(null!==e||r.canUndo)return{data:{prev:r.pageState.focusLayerId,next:e},preservesRedoStack:!0,squashing:!0}}),{do:function(e){var t=e.next;r.store.update(r.pageState.id,(function(e){return x(x({},e),{},{focusLayerId:t})}))},undo:function(e){var t=e.prev;r.store.update(r.pageState.id,(function(e){return x(x({},e),{},{focusLayerId:t})}))},squash:function(e,t){return{prev:e.prev,next:t.next}}})),b(h(r),"colors",void 0),b(h(r),"sizes",{s:2,m:3.5,l:5,xl:10}),b(h(r),"inputs",{originPagePoint:new Di,originScreenPoint:new Di,previousPagePoint:new Di,previousScreenPoint:new Di,currentPagePoint:new Di,currentScreenPoint:new Di,keys:new Set,buttons:new Set,isPen:!1,shiftKey:!1,ctrlKey:!1,altKey:!1,isDragging:!1,isPointing:!1,isPinching:!1,isEditing:!1,isPanning:!1,pointerVelocity:new Di}),b(h(r),"_clickManager",new Wd(h(r))),b(h(r),"_prevCursor","default"),b(h(r),"_shiftKeyTimeout",-1),b(h(r),"_setShiftKeyTimeout",(function(){r.inputs.shiftKey=!1,r.dispatch({type:"keyboard",name:"key_up",key:"Shift",shiftKey:r.inputs.shiftKey,ctrlKey:r.inputs.ctrlKey,altKey:r.inputs.altKey})})),b(h(r),"_altKeyTimeout",-1),b(h(r),"_setAltKeyTimeout",(function(){r.inputs.altKey=!1,r.dispatch({type:"keyboard",name:"key_up",key:"Alt",shiftKey:r.inputs.shiftKey,ctrlKey:r.inputs.ctrlKey,altKey:r.inputs.altKey})})),b(h(r),"_ctrlKeyTimeout",-1),b(h(r),"_setCtrlKeyTimeout",(function(){r.inputs.ctrlKey=!1,r.dispatch({type:"keyboard",name:"key_up",key:"Ctrl",shiftKey:r.inputs.shiftKey,ctrlKey:r.inputs.ctrlKey,altKey:r.inputs.altKey})})),b(h(r),"_restoreToolId","select"),b(h(r),"_pinchStart",1),b(h(r),"_didPinch",!1),b(h(r),"_selectedIdsAtPointerDown",[]),b(h(r),"dispatch",(function(e){if(r.crashingError)return h(r);var t=h(r).inputs,n=e.type;return r.batch((function(){if("misc"===e.type)return"blur"===e.name&&r.inputs.isPanning&&(r.inputs.isPanning=!1,r.setCursor({type:r._prevCursor})),void r.root.handleEvent(e);e.shiftKey?(clearInterval(r._shiftKeyTimeout),r._shiftKeyTimeout=-1,t.shiftKey=!0):!e.shiftKey&&t.shiftKey&&-1===r._shiftKeyTimeout&&(r._shiftKeyTimeout=setTimeout(r._setShiftKeyTimeout,150)),e.altKey?(clearInterval(r._altKeyTimeout),r._altKeyTimeout=-1,t.altKey=!0):!e.altKey&&t.altKey&&-1===r._altKeyTimeout&&(r._altKeyTimeout=setTimeout(r._setAltKeyTimeout,150)),e.ctrlKey?(clearInterval(r._ctrlKeyTimeout),r._ctrlKeyTimeout=-1,t.ctrlKey=!0):!e.ctrlKey&&t.ctrlKey&&-1===r._ctrlKeyTimeout&&(r._ctrlKeyTimeout=setTimeout(r._setCtrlKeyTimeout,150));var i=t.originPagePoint,o=t.originScreenPoint,a=t.currentPagePoint,s=t.currentScreenPoint;switch(t.isPointing||(t.isDragging=!1),n){case"pinch":if(!r.canMoveCamera)return;switch(r._updateInputsFromEvent(e),e.name){case"pinch_start":if(t.isPinching)return;return void(t.isEditing||(r._pinchStart=r.camera.z,r._selectedIdsAtPointerDown.length||(r._selectedIdsAtPointerDown=r.selectedIds.slice()),r._didPinch=!0,t.isPinching=!0,r.interrupt()));case"pinch":if(!t.isPinching)return;var u=e.point,l=u.x,c=u.y,d=u.z,p=void 0===d?1:d,f=e.delta,v=f.x,g=f.y,m=h(r).camera,y=m.x,b=m.y,w=m.z,x=Math.min(8,Math.max(Vo,p));return void r.setCamera(y+v/w-l/w+l/x,b+g/w-c/w+c/x,x);case"pinch_end":if(!t.isPinching)return h(r);t.isPinching=!1;var k=h(r)._selectedIdsAtPointerDown;r.setSelectedIds(r._selectedIdsAtPointerDown,!0),r._selectedIdsAtPointerDown=[];var S,_=h(r).camera,P=_.x,C=_.y,E=_.z;if(E>.9&&E<1.05?S=1:E>.49&&E<.505&&(S=.5),E>r._pinchStart-.1&&E<r._pinchStart+.05&&(S=r._pinchStart),void 0!==S){var I=r.viewportScreenCenter,M=I.x,T=I.y;r.animateCamera(P+(M/S-M)-(M/E-M),C+(T/S-T)-(T/E-T),S,{duration:100})}return void(r._didPinch&&(r._didPinch=!1,requestAnimationFrame((function(){r._didPinch||r.setSelectedIds(k,!0)}))))}case"wheel":if(!r.canMoveCamera)return;if(r._viewportAnimation||r.isMenuOpen);else{var j;if(t.ctrlKey){var A,O=r.inputs.currentScreenPoint,z=O.x,D=O.y,N=r.camera,R=N.x,L=N.y,B=N.z,F=Math.min(8,Math.max(Vo,B+(null!==(A=e.delta.z)&&void 0!==A?A:0)*B));return void r.setCamera(R+(z/F-z)-(z/B-z),L+(D/F-D)-(D/B-D),F)}r.pan(e.delta.x,e.delta.y),t.isPointing&&!t.isDragging&&Di.Dist(o,r.pageToScreen(s.x,s.y))>4&&(t.isDragging=!0),r.dispatch({type:"pointer",target:"canvas",name:"pointer_move",point:s,pointerId:0,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,button:0,isPen:null!==(j=r.isPenMode)&&void 0!==j&&j})}break;case"pointer":if(t.isPinching)return;r._updateInputsFromEvent(e);var U=e.isPen;switch(e.name){case"pointer_down":if(r._selectedIdsAtPointerDown=r.selectedIds.slice(),t.buttons.add(e.button),t.isPointing=!0,t.isDragging=!1,r.isPenMode)if(U)r._touchEventsRemainingBeforeExitingPenMode=3;else{if(r._touchEventsRemainingBeforeExitingPenMode--,0!==r._touchEventsRemainingBeforeExitingPenMode)return;r.setPenMode(!1)}else U&&r.setPenMode(!0);if(5===e.button?(r._restoreToolId=r.currentToolId,r.complete(),r.setSelectedTool("eraser")):1===e.button&&(r.inputs.isPanning||(r._prevCursor=r.instanceState.cursor.type),r.inputs.isPanning=!0),r.inputs.isPanning)return r.stopCameraAnimation(),r.setCursor({type:"grabbing"}),h(r);o.setTo(s),i.setTo(a);break;case"pointer_move":if(!U&&r.isPenMode)return;if(r.inputs.isPanning&&r.inputs.isPointing){var K=r.inputs,V=K.currentScreenPoint,W=K.previousScreenPoint,H=Di.Sub(V,W);return void r.pan(H.x,H.y)}t.isPointing&&!t.isDragging&&Di.Dist(o,s)>4&&(t.isDragging=!0);break;case"pointer_up":if(t.buttons.delete(e.button),t.isPointing=!1,t.isDragging=!1,r.isMenuOpen)return;if(!U&&r.isPenMode)return;t.isPanning?1===e.button?r.inputs.keys.has(" ")?(r.slideCamera({speed:Math.min(2,r.inputs.pointerVelocity.len()),direction:r.inputs.pointerVelocity,friction:Go}),r.setCursor({type:"grab"})):(t.isPanning=!1,r.slideCamera({speed:Math.min(2,r.inputs.pointerVelocity.len()),direction:r.inputs.pointerVelocity,friction:Go}),r.setCursor({type:r._prevCursor})):0===e.button&&(r.slideCamera({speed:Math.min(2,r.inputs.pointerVelocity.len()),direction:r.inputs.pointerVelocity,friction:Go}),r.setCursor({type:"grab"})):5===e.button&&(r.complete(),r.setSelectedTool(r._restoreToolId))}break;case"keyboard":switch(e.name){case"key_down":if(t.keys.has(e.key))return;t.keys.add(e.key),e.ctrlKey||" "!==e.key||(r.inputs.isPanning||(r._prevCursor=r.instanceState.cursor.type),r.inputs.isPanning=!0,r.setCursor({type:r.inputs.isPointing?"grabbing":"grab"}));break;case"key_up":t.keys.delete(e.key)," "!==e.key||r.inputs.buttons.has(1)||(r.inputs.isPanning=!1,r.setCursor({type:r._prevCursor}))}}if("pointer"===e.type&&(1===e.button?e.name="middle_click":2===e.button&&(e.name="right_click")),"pointer"===e.type&&e.isPen===r.isPenMode)switch(e.name){case"pointer_down":var Y=r._clickManager.transformPointerDownEvent(e);if(e.name!==Y.name)return r.root.handleEvent(e),r.emit("event",e),r.root.handleEvent(Y),void r.emit("event",Y);break;case"pointer_up":var X=r._clickManager.transformPointerUpEvent(e);if(e.name!==X.name)return r.root.handleEvent(e),r.emit("event",e),r.root.handleEvent(X),void r.emit("event",X);break;case"pointer_move":r._clickManager.handleMove()}r.root.handleEvent(e),r.emit("event",e)})),h(r)})),b(h(r),"_createShapes",r.history.createCommand("createShapes",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r.isReadOnly)return null;if(e.length<=0)return null;var n=h(r),i=n.shapeIds,o=n.selectedIds,a=t?o:void 0,s=e.length+i.size>Fo;s&&hf(h(r));var u=s?e.slice(0,Fo-i.size):e;return 0===u.length?null:{data:{prevSelectedIds:a,partials:u,select:t}}}),{do:function(e){var t=e.partials,n=e.select,i=h(r).focusLayerId;t=t.map((function(e){if(!e.parentId||!r.store.get(e.parentId)&&!t.find((function(t){return t.id===e.parentId}))){var n,i;e=x({},e);var o=r.getParentIdForNewShapeAtPoint({x:null!==(n=e.x)&&void 0!==n?n:0,y:null!==(i=e.y)&&void 0!==i?i:0},e.type);if(e.parentId=o,Cr(o)){var a,s,u,l=r.getPointInShapeSpace(r.getShapeById(o),{x:null!==(a=e.x)&&void 0!==a?a:0,y:null!==(s=e.y)&&void 0!==s?s:0});e.x=l.x,e.y=l.y,e.rotation=-r.getPageRotationById(o)+(null!==(u=e.rotation)&&void 0!==u?u:0)}return e}return e}));var o,a=new Map,s=[],u=y(t);try{for(u.s();!(o=u.n()).done;){var l,c,d,p=o.value,f=r.getShapeUtil(p),v=p.index;if(!v){var g,m=null!==(g=p.parentId)&&void 0!==g?g:i;a.has(m)||a.set(m,r.getHighestIndexForParent(m)),v=a.get(m),a.set(m,Os(v))}var b=f.defaultProps(),w=r.instanceState.propsForNextShape;for(var k in b)if(k in w){if("url"===k)continue;b[k]=w[k]}var S=r.config.TLShape.create(x(x({},p),{},{index:v,parentId:null!==(l=p.parentId)&&void 0!==l?l:i,props:"props"in p?x(x({},b),p.props):b}));if(void 0===S.index)throw Error("no index!");var _=null===(c=(d=r.getShapeUtil(S)).onBeforeCreate)||void 0===c?void 0:c.call(d,S);_&&(S=_),s.push(S)}}catch(C){u.e(C)}finally{u.f()}if(r.store.put(s),n){var P=t.map((function(e){return e.id}));r.store.update(r.pageState.id,(function(e){return x(x({},e),{},{selectedIds:P})}))}},undo:function(e){var t=e.partials,n=e.prevSelectedIds;r.store.remove(t.map((function(e){return e.id}))),n&&r.store.update(r.pageState.id,(function(e){return x(x({},e),{},{selectedIds:n})}))}})),b(h(r),"animatingShapes",new Map),b(h(r),"_updateShapes",r.history.createCommand("updateShapes",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r.isReadOnly)return null;var n=S(e),i=Object.fromEntries(S(n.map((function(e){var t=e.id;return r.getShapeById(t)}))).map((function(e){return[e.id,e]})));if(n.length<=0)return null;var o=S(n.map((function(e){var t,n=i[e.id];if(!n)return null;for(var r=null,o=0,a=Object.entries(e);o<a.length;o++){var s=N(a[o],2),u=s[0],l=s[1];switch(u){case"id":case"type":case"typeName":continue;default:l!==n[u]&&(r||(r=x({},n)),"props"===u?r.props=x(x({},n.props),l):r[u]=l)}}return null!==(t=r)&&void 0!==t?t:n}))),a=Object.fromEntries(o.map((function(e){return[e.id,e]})));return{data:{snapshots:i,updates:a},squashing:t}}),{do:function(e){for(var t,n,i=e.updates,o=Object.values(i),a=0,s=o.length;a<s;a++){var u,l;t=o[a],(n=null===(u=(l=r.getShapeUtil(t)).onBeforeUpdate)||void 0===u?void 0:u.call(l,r.store.get(t.id),t))&&(o[a]=n)}r.store.put(o)},undo:function(e){var t=e.snapshots;r.store.put(Object.values(t))},squash:function(e,t){return{snapshots:x(x({},t.snapshots),e.snapshots),updates:x(x({},e.updates),t.updates)}}})),b(h(r),"_deleteShapes",r.history.createCommand("delete_shapes",(function(e){if(r.isReadOnly)return null;if(0===e.length)return null;var t,n=M(r.pageState.selectedIds),i=new Set(e),o=y(e);try{for(o.s();!(t=o.n()).done;){var a=t.value;r.visitDescendants(a,(function(e){i.add(e)}))}}catch(d){o.e(d)}finally{o.f()}var s=M(i),u=r._arrowBindingsIndex.value,l=S(s.flatMap((function(e){var t=r.getShapeById(e),n=u[e];return n&&n.length>0?n.map((function(e){var t=e.arrowId;return r.getShapeById(t)})).concat(t):t}))),c=n.filter((function(e){return!i.has(e)}));return{data:{deletedIds:s,snapshots:l,prevSelectedIds:n,postSelectedIds:c}}}),{do:function(e){var t=e.deletedIds,n=e.postSelectedIds;r.store.remove(t),r.store.update(r.pageState.id,(function(e){return x(x({},e),{},{selectedIds:n})}))},undo:function(e){var t=e.snapshots,n=e.prevSelectedIds;r.store.put(t),r.store.update(r.pageState.id,(function(e){return x(x({},e),{},{selectedIds:n})}))}})),b(h(r),"_updateUserDocumentSettings",r.history.createCommand("updateUserDocumentSettings",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!1!==e.isReadOnly){var n=r.userDocumentSettings;return{data:{prev:n,next:x(x({},n),e)},ephemeral:t}}}),{do:function(e){var t=e.next;r.store.put([t])},undo:function(e){var t=e.prev;r.store.put([t])}})),b(h(r),"_updatePage",r.history.createCommand("updatePage",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r.isReadOnly)return null;var n=r.getPageById(e.id);return n?{data:{prev:n,partial:e},squashing:t}:null}),{do:function(e){var t=e.partial;r.store.update(t.id,(function(e){return x(x({},e),t)}))},undo:function(e){var t=e.prev,n=e.partial;r.store.update(n.id,(function(){return t}))},squash:function(e,t){return{prev:x(x({},e.prev),t.prev),partial:t.partial}}})),b(h(r),"_createPage",r.history.createCommand("createPage",(function(e){var t,n,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dn.createId(),a=arguments.length>2?arguments[2]:void 0;if(r.isReadOnly)return null;if(r.pages.length>=40)return null;var s=r.pages,u=null!==(t=null!==a&&void 0!==a?a:null===(n=s[s.length-1])||void 0===n?void 0:n.index)&&void 0!==t?t:"a1",l=null===(i=s[s.findIndex((function(e){return e.index===u}))+1])||void 0===i?void 0:i.index,c=x({},r.pageState),d=x({},r.instanceState);e=function(e,t){for(var n=e,r=new Set(t);r.has(n);){var i;n=null!==(i=/^.*(\d+)$/.exec(n))&&void 0!==i&&i[1]?n.replace(/(\d+)(?=\D?)$/,(function(e){return(+e+1).toString()})):"".concat(n," 1")}return n}(e,s.map((function(e){return e.name})));var p=Dn.create({id:o,name:e,index:l?As(u,l):Os(u)}),f=sn.create({});return{data:{prevPageState:c,prevTabState:d,newPage:p,newTabPageState:An.create({pageId:p.id,instanceId:r.instanceId,cameraId:f.id}),newCamera:f}}}),{do:function(e){var t=e.newPage,n=e.newTabPageState,i=e.newCamera;r.store.put([t,i,n,x(x({},r.instanceState),{},{currentPageId:t.id})]),r.updateCullingBounds()},undo:function(e){var t=e.newPage,n=e.prevPageState,i=e.prevTabState,o=e.newTabPageState;r.store.put([n,i]),r.store.remove([o.id,t.id,o.cameraId]),r.updateCullingBounds()}})),b(h(r),"_deletePage",r.history.createCommand("delete_page",(function(e){if(r.isReadOnly)return null;var t=h(r).pages;if(1===t.length)return null;var n=r.getPageById(e),i=r._pageStates.value.filter((function(t){return t.pageId===e}));if(!n)return null;if(e===r.currentPageId){var o,a=t.findIndex((function(t){return t.id===e})),s=null!==(o=t[a-1])&&void 0!==o?o:t[a+1];r.setCurrentPageId(s.id)}return{data:{id:e,deletedPage:n,deletedPageStates:i}}}),{do:function(e){var t=e.deletedPage,n=e.deletedPageStates;r.store.remove(n.map((function(e){return e.id}))),r.store.remove([t.id]),r.updateCullingBounds()},undo:function(e){var t=e.deletedPage,n=e.deletedPageStates;r.store.put([t]),r.store.put(n),r.updateCullingBounds()}})),b(h(r),"_setInstancePageState",r.history.createCommand("setInstancePageState",(function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{data:{prev:r.store.get(null!==(t=e.id)&&void 0!==t?t:r.pageState.id),partial:e},ephemeral:n}}),{do:function(e){var t=e.prev,n=e.partial;r.store.update(t.id,(function(e){return x(x({},e),n)}))},undo:function(e){var t=e.prev;r.store.update(t.id,(function(){return t}))}})),b(h(r),"updateUserPresence",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cursor,n=e.color,i=r._currentUserPresence.value;i?r.store.put([x(x({},i),{},{cursor:null!==t&&void 0!==t?t:i.cursor,color:null!==n&&void 0!==n?n:i.color,lastUsedInstanceId:r.instanceId,lastActivityTimestamp:Date.now()})]):console.error("No presence found for current user")})),b(h(r),"_setSelectedIds",r.history.createCommand("setSelectedIds",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=r.pageState.selectedIds,i=new Set(r.pageState.selectedIds);return e.length===i.size&&e.every((function(e){return i.has(e)}))?null:{data:{ids:e,prevSelectedIds:n},squashing:t,preservesRedoStack:!0}}),{do:function(e){var t=e.ids;r.store.update(r.pageState.id,(function(e){return x(x({},e),{},{selectedIds:t})}))},undo:function(e){var t=e.prevSelectedIds;r.store.update(r.pageState.id,(function(){return x(x({},r.pageState),{},{selectedIds:t})}))},squash:function(e,t){return{ids:t.ids,prevSelectedIds:e.prevSelectedIds}}})),b(h(r),"_createAssets",r.history.createCommand("createAssets",(function(e){return r.isReadOnly||e.length<=0?null:{data:{assets:e}}}),{do:function(e){var t=e.assets;r.store.put(t)},undo:function(e){var t=e.assets;r.store.remove(t.map((function(e){return e.id})))}})),b(h(r),"_deleteAssets",r.history.createCommand("deleteAssets",(function(e){if(!r.isReadOnly&&!(e.length<=0)){var t=S(e.map((function(e){return r.store.get(e)})));return{data:{ids:e,prev:t}}}}),{do:function(e){var t=e.ids;r.store.remove(t)},undo:function(e){var t=e.prev;r.store.put(t)}})),b(h(r),"_updateAssets",r.history.createCommand("updateAssets",(function(e){if(!r.isReadOnly&&!(e.length<=0)){return{data:{snapshots:{},assets:e}}}}),{do:function(e){var t=e.assets,n=e.snapshots;r.store.put(t.map((function(e){var t=r.store.get(e.id);return n[e.id]=t,x(x({},t),e)})))},undo:function(e){var t=e.snapshots;r.store.put(Object.values(t))}})),b(h(r),"_setCurrentPageId",r.history.createCommand("setCurrentPage",(function(e){if(r.store.has(e))return{data:{pageId:e,prev:r.currentPageId},squashing:!0,preservesRedoStack:!0};console.error("Tried to set the current page id to a page that doesn't exist.")}),{do:function(e){var t=e.pageId;if(!r.getPageStateByPageId(t)){var n=sn.create({});r.store.put([n,An.create({pageId:t,instanceId:r.instanceId,cameraId:n.id})])}r.store.put([x(x({},r.instanceState),{},{currentPageId:t})]),r.updateCullingBounds()},undo:function(e){var t=e.prev;r.store.put([x(x({},r.instanceState),{},{currentPageId:t})]),r.updateCullingBounds()},squash:function(e,t){var n=e.prev;return{pageId:t.pageId,prev:n}}})),b(h(r),"_updateInstanceState",r.history.createCommand("updateTabState",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=r.instanceState;return{data:{prev:i,next:x(x({},i),e)},squashing:n,ephemeral:t}}),{do:function(e){var t=e.next;r.store.put([t])},undo:function(e){var t=e.prev;r.store.put([t])},squash:function(e,t){return{prev:e.prev,next:t.next}}})),b(h(r),"_willSetInitialBounds",!0),b(h(r),"_viewportAnimation",null),b(h(r),"textMeasure",void 0),s.schema!==a.storeSchema)throw new Error("Store schema does not match schema given to App");return r.config=a,r.store=s,r.getContainer=null!==u&&void 0!==u?u:function(){return document.body},r.textMeasure=new sp(h(r)),r.shapeUtils=Object.fromEntries(a.shapes.map((function(e){return[e.type,e.createShapeUtils(h(r))]}))),"undefined"!==typeof window&&"navigator"in window?(r.isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r.isIos=!!navigator.userAgent.match(/iPad/i)||!!navigator.userAgent.match(/iPhone/i)):(r.isSafari=!1,r.isIos=!1),r.colors=new Map(n.styles.color.map((function(e){return[e.id,"var(--palette-".concat(e.id,")")]}))),r.root=new uf(h(r)),r.root.children&&a.tools.forEach((function(e){r.root.children[e.id]=new e(h(r))})),r.store.onBeforeDelete=function(e){"shape"===e.typeName?r._shapeWillBeDeleted(e):"page"===e.typeName&&r._pageWillBeDeleted(e)},r.store.onAfterChange=function(e,t){r._updateDepth++,r._updateDepth>1e3&&console.error("[onAfterChange] Maximum update depth exceeded, bailing out."),"shape"===e.typeName&&"shape"===t.typeName?r._shapeDidChange(e,t):"instance_page_state"===e.typeName&&"instance_page_state"===t.typeName&&r._tabStateDidChange(e,t),r._updateDepth--},r.store.onAfterCreate=function(e){"shape"===e.typeName&&cc.is(e)&&r._arrowDidUpdate(e)},r._shapeIds=function(e,t){var n=e.query.ids("shape"),r=null;function i(){var i=t();return r=i,new Set(M(n.value).filter((function(t){return Rd(e,i,e.get(t))})))}return Oe("_shapeIdsInCurrentPage",(function(n,o){if(Ee(n))return i();var a=t();if(a!==r)return i();var s=e.history.getDiffSince(o);if(s===fe)return i();var u,l=new X(n),c=y(s);try{for(c.s();!(u=c.n()).done;){for(var d=u.value,p=0,f=Object.values(d.added);p<f.length;p++){var h=f[p];Pr(h)&&Rd(e,a,h)&&l.add(h.id)}for(var v=0,g=Object.values(d.updated);v<g.length;v++){var m=N(g[v],2),b=(m[0],m[1]);Pr(b)&&(Rd(e,a,b)?l.add(b.id):l.remove(b.id))}for(var w=0,x=Object.keys(d.removed);w<x.length;w++){var k=x[w];Cr(k)&&l.remove(k)}}}catch(_){c.e(_)}finally{c.f()}var S=l.get();return S?Me(S.value,S.diff):n}))}(r.store,(function(){return r.currentPageId})),r._parentIdsToChildIds=function(e){var t=e.query.ids("shape");function n(){var n={};return t.value.forEach((function(t){var r=e.get(t);n[r.parentId]||(n[r.parentId]=[]),n[r.parentId].push([t,r.index])})),Object.values(n).forEach((function(e){return e.sort((function(e,t){return e[1]<t[1]?-1:1}))})),n}return Oe("parentsToChildrenWithIndexes",(function(t,r){var i;if(Ee(t))return n();var o=e.history.getDiffSince(r);if(o===fe)return n();if(0===o.length)return t;for(var a,s=null,u=function(e){s||(s=x({},t)),s[e]?s[e]===t[e]&&(s[e]=M(s[e])):s[e]=[]},l=new Set,c=0,d=o.length;c<d;c++){a=o[c];for(var p=0,f=Object.values(a.added);p<f.length;p++){var h=f[p];Pr(h)&&(u(h.parentId),s[h.parentId].push([h.id,h.index]),l.add(s[h.parentId]))}for(var v=function(){var e=N(m[g],2),t=e[0],n=e[1];if(!Pr(n))return"continue";if(!Pr(t))return"continue";if(t.parentId!==n.parentId)u(t.parentId),u(n.parentId),s[t.parentId].splice(s[t.parentId].findIndex((function(e){return e[0]===n.id})),1),s[n.parentId].push([n.id,n.index]),l.add(s[n.parentId]);else if(t.index!==n.index){u(n.parentId);var r=s[n.parentId].findIndex((function(e){return e[0]===n.id}));s[n.parentId][r]=[n.id,n.index],l.add(s[n.parentId])}},g=0,m=Object.values(a.updated);g<m.length;g++)v();for(var b=function(){var e=k[w];if(!Pr(e))return"continue";u(e.parentId),s[e.parentId].splice(s[e.parentId].findIndex((function(t){return t[0]===e.id})),1)},w=0,k=Object.values(a.removed);w<k.length;w++)b()}var S,_=y(l);try{for(_.s();!(S=_.n()).done;)S.value.sort((function(e,t){return e[1]<t[1]?-1:1}))}catch(P){_.e(P)}finally{_.f()}return null!==(i=s)&&void 0!==i?i:t}))}(r.store),r.disposables.add(r.store.listen((function(e){r.emit("change",e)}))),r.store.ensureStoreIsUsable(),r.root.enter(void 0,"initial"),r.updateCullingBounds(),requestAnimationFrame((function(){r._tickManager.start()})),r}return l(n,[{key:"canMoveCamera",get:function(){return this._canMoveCamera.value},set:function(e){this._canMoveCamera.set(e)}},{key:"userId",get:function(){return this.store.props.userId}},{key:"instanceId",get:function(){return this.store.props.instanceId}},{key:"annotateError",value:function(e,t){var n=t.origin,r=t.willCrashApp,i=t.tags,o=t.extras,a=this.createErrorAnnotations(n,r);A(e,{tags:x(x({},a.tags),i),extras:x(x({},a.extras),o)}),r&&this.store.markAsPossiblyCorrupted()}},{key:"createErrorAnnotations",value:function(e,t){try{return{tags:{origin:e,willCrashApp:t},extras:{activeStateNode:this.root.path.value,selectedShapes:this.selectedShapes,editingShape:this.editingId?this.getShapeById(this.editingId):void 0,inputs:this.inputs}}}catch(n){return{tags:{origin:e,willCrashApp:t},extras:{}}}}},{key:"crashingError",get:function(){return this._crashingError}},{key:"crash",value:function(e){this._crashingError=e,this.store.markAsPossiblyCorrupted(),this.emit("crash")}},{key:"devicePixelRatio",get:function(){return this._dprManager.dpr.value}},{key:"isMenuOpen",get:function(){return this.openMenus.size>0}},{key:"isCoarsePointer",get:function(){return this._isCoarsePointer.value},set:function(e){this._isCoarsePointer.set(e)}},{key:"isChangingStyle",get:function(){return this._isChangingStyle.value},set:function(e){var t=this;this._isChangingStyle.set(e),clearTimeout(this._isChangingStyleTimeout),e&&(this._isChangingStyleTimeout=setTimeout((function(){return t.isChangingStyle=!1}),2e3))}},{key:"_pageTransformCache",get:function(){var e=this;return this.store.createComputedCache("pageTransformCache",(function(t){if(Dn.isId(t.parentId))return e.getTransform(t);var n=e._pageTransformCache.get(t.parentId);return go.Compose(n,e.getTransform(t))}))}},{key:"_pageBoundsCache",get:function(){var e=this;return this.store.createComputedCache("pageBoundsCache",(function(t){var n=e._pageTransformCache.get(t.id);return n?uo.FromPoints(go.applyToPoints(n,e.getShapeUtil(t).outline(t))):new uo}))}},{key:"_pageMaskCache",get:function(){var e=this;return this.store.createComputedCache("pageMaskCache",(function(t){if(!Dn.isId(t.parentId)){var n=e.getAncestorsById(t.id).filter((function(e){return"frame"===e.type}));if(0!==n.length){var r=n.map((function(t){return go.applyToPoints(e._pageTransformCache.get(t.id),e.getOutline(t))})).reduce((function(e,t){var n;return t&&e&&null!==(n=Do(e,t))&&void 0!==n?n:void 0}));return r}}}))}},{key:"getPageMaskById",value:function(e){return this._pageMaskCache.get(e)}},{key:"_clipPathCache",get:function(){var e=this;return this.store.createComputedCache("clipPathCache",(function(t){var n=e._pageMaskCache.get(t.id);if(n){var r=e._pageTransformCache.get(t.id);if(r){if(0===n.length)return"polygon(0px 0px, 0px 0px, 0px 0px)";var i=go.applyToPoints(go.Inverse(r),n);return"polygon(".concat(i.map((function(e){return"".concat(e.x,"px ").concat(e.y,"px")})).join(","),")")}}}))}},{key:"getClipPathById",value:function(e){return this._clipPathCache.get(e)}},{key:"dispose",value:function(){this.disposables.forEach((function(e){return e()})),this.disposables.clear()}},{key:"undo",value:function(){return this.history.undo()}},{key:"canUndo",get:function(){return this.history.numUndos>0}},{key:"redo",value:function(){return this.history.redo(),this}},{key:"canRedo",get:function(){return this.history.numRedos>0}},{key:"mark",value:function(e,t,n){return this.history.mark(e,t,n)}},{key:"bail",value:function(){return this.history.bail(),this}},{key:"bailToMark",value:function(e){return this.history.bailToMark(e),this}},{key:"batch",value:function(e){return this.history.batch(e),this}},{key:"getShapeUtil",value:function(e){return this.shapeUtils[e.type]}},{key:"getShapeUtilByDef",value:function(e){return this.shapeUtils[e.type]}},{key:"getSortedChildIds",value:function(e){var t=this._parentIdsToChildIds.value[e];return t?this._childIdsCache.get(t,(function(){return t.map((function(e){return N(e,1)[0]}))})):re}},{key:"visitDescendants",value:function(e,t){var n,r=y(this.getSortedChildIds(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;!1!==t(i)&&this.visitDescendants(i,t)}}catch(o){r.e(o)}finally{r.f()}}},{key:"erasingIds",get:function(){return this.pageState.erasingIds}},{key:"hintingIds",get:function(){return this.pageState.hintingIds}},{key:"erasingIdsSet",get:function(){return new Set(this.erasingIds)}},{key:"_extractSharedProps",value:function(e,t){if("group"===e.type){var n=this._parentIdsToChildIds.value[e.id];if(!n)return;for(var r=0,i=n.length;r<i;r++)this._extractSharedProps(this.getShapeById(n[r][0]),t)}else for(var o,a=Object.entries(e.props),s=0,u=a.length;s<u;s++)switch(t[(o=a[s])[0]]){case void 0:t[o[0]]=o[1];break;case null:case o[1]:continue;default:t[o[0]]=null}}},{key:"allowUiPaste",get:function(){return Boolean(navigator.clipboard)&&Boolean(navigator.clipboard.read)}},{key:"props",get:function(){var e;if(this.isIn("select")&&this.selectedIds.length>0)e=this._selectionSharedProps.value;else{var t=this.root.current.value;if(0===t.styles.length)e=null;else{var n=this.instanceState.propsForNextShape;e=Object.fromEntries(t.styles.map((function(e){return[e,n[e]]})))}}return JSON.stringify(this._prevProps)===JSON.stringify(e)?this._prevProps:(this._prevProps=e,e)}},{key:"shapeIds",get:function(){return this._shapeIds.value}},{key:"_complete",value:function(){var e=this.userDocumentSettings,t=e.lastUpdatedPageId;e.lastUsedTabId===this.instanceId&&t===this.currentPageId||this.store.put([x(x({},this.userDocumentSettings),{},{lastUsedTabId:this.instanceId,lastUpdatedPageId:this.currentPageId})]);var n,r=y(this._invalidParents);try{for(r.s();!(n=r.n()).done;){var i,o=n.value;this._invalidParents.delete(o);var a=this.getShapeById(o);if(a){var s=this.getShapeUtil(a),u=null===(i=s.onChildrenChange)||void 0===i?void 0:i.call(s,a);null!==u&&void 0!==u&&u.length&&this.updateShapes(u,!0)}}}catch(l){r.e(l)}finally{r.f()}this.updateUserPresence(),this.emit("update")}},{key:"_arrowBindingsIndex",get:function(){return function(e){var t=e.query.filterHistory("shape"),n=e.query.records("shape",(function(){return{type:{eq:"arrow"}}}));function r(){var e,t={},r=y(n.value);try{for(r.s();!(e=r.n()).done;){var i=e.value,o=i.props,a=o.start,s=o.end;if("binding"===a.type){var u=t[a.boundShapeId];u?u.push({arrowId:i.id,handleId:"start"}):t[a.boundShapeId]=[{arrowId:i.id,handleId:"start"}]}if("binding"===s.type){var l=t[s.boundShapeId];l?l.push({arrowId:i.id,handleId:"end"}):t[s.boundShapeId]=[{arrowId:i.id,handleId:"end"}]}}}catch(c){r.e(c)}finally{r.f()}return t}return Oe("arrowBindingsIndex",(function(e,n){var i;if(Ee(e))return r();var o=e,a=t.getDiffSince(n);if(a===fe)return r();var s=void 0;function u(e){s||(s=x({},o)),s[e]?s[e]===o[e]&&(s[e]=M(s[e])):s[e]=[]}function l(e,t,n){u(e),s[e]=s[e].filter((function(e){return e.arrowId!==t||e.handleId!==n})),0===s[e].length&&delete s[e]}function c(e,t,n){u(e),s[e].push({arrowId:t,handleId:n})}var d,p=y(a);try{for(p.s();!(d=p.n()).done;){for(var f=d.value,h=0,v=Object.values(f.added);h<v.length;h++){var g=v[h];if(cc.is(g)){var m=g.props,b=m.start,w=m.end;"binding"===b.type&&c(b.boundShapeId,g.id,"start"),"binding"===w.type&&c(w.boundShapeId,g.id,"end")}}for(var k=0,S=Object.values(f.updated);k<S.length;k++){var _=N(S[k],2),P=_[0],C=_[1];if(cc.is(P)&&cc.is(C))for(var E=0,I=["start","end"];E<I.length;E++){var T=I[E],j=P.props[T],A=C.props[T];"binding"===j.type&&"point"===A.type?l(j.boundShapeId,P.id,T):"point"===j.type&&"binding"===A.type?c(A.boundShapeId,C.id,T):"binding"===j.type&&"binding"===A.type&&j.boundShapeId!==A.boundShapeId&&(l(j.boundShapeId,P.id,T),c(A.boundShapeId,C.id,T))}}for(var O=0,z=Object.values(f.removed);O<z.length;O++){var D=z[O];if(cc.is(D)){var R=D.props,L=R.start,B=R.end;"binding"===L.type&&l(L.boundShapeId,D.id,"start"),"binding"===B.type&&l(B.boundShapeId,D.id,"end")}}}}catch(F){p.e(F)}finally{p.f()}return null!==(i=s)&&void 0!==i?i:o}))}(this.store)}},{key:"getArrowsBoundTo",value:function(e){return this._arrowBindingsIndex.value[e]||re}},{key:"_reparentArrow",value:function(e){var t=this,n=this.getShapeById(e);if(n){var r=n.props,i=r.start,o=r.end,a="binding"===i.type?this.getShapeById(i.boundShapeId):void 0,s="binding"===o.type?this.getShapeById(o.boundShapeId):void 0,u=this.getParentPageId(n);if(u){var l;if(a&&s){var c;l=null!==(c=this.findCommonAncestor([a,s]))&&void 0!==c?c:u}else{if(!a&&!s)return;l=u}l&&l!==n.parentId&&this.reparentShapesById([e],l);var d,p,f=this.getShapeById(e),h=this.getNearestSiblingShape(f,a),v=this.getNearestSiblingShape(f,s);if(h&&v)d=h.index>v.index?h:v;else if(h&&!v)d=h;else{if(!v||h)return;d=v}var g=this.getSortedChildIds(d.parentId).map((function(e){return t.getShapeById(e)})).filter((function(e){return e.index>d.index}));if(g.length){var m=g.find((function(e){return"arrow"!==e.type}));if(f.index>d.index&&(!m||f.index<m.index))return;p=As(d.index,g[0].index)}else p=Os(d.index);p!==f.index&&this.updateShapes([{id:e,type:"arrow",index:p}])}}}},{key:"_unbindArrowTerminal",value:function(e,t){var n=Vl(this,e)[t],r=n.x,i=n.y;this.store.put([x(x({},e),{},{props:x(x({},e.props),{},b({},t,{type:"point",x:r,y:i}))})])}},{key:"_shapeWillBeDeleted",value:function(e){var t=this;e.parentId&&Cr(e.parentId)&&this._invalidParents.add(e.parentId);var n=this._arrowBindingsIndex.value[e.id];if(null!==n&&void 0!==n&&n.length){var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=o.arrowId,s=o.handleId,u=this.getShapeById(a);u&&this._unbindArrowTerminal(u,s)}}catch(p){i.e(p)}finally{i.f()}}var l=this.store.query.records("instance_page_state").value,c=new Set([e.id]),d=S(l.map((function(e){return t._cleanupInstancePageState(e,c)})));d.length&&this.store.put(d)}},{key:"_arrowDidUpdate",value:function(e){for(var t=0,n=["start","end"];t<n.length;t++){var r=n[t],i=e.props[r];if("binding"===i.type){var o=this.getShapeById(i.boundShapeId),a=this.getParentPageId(e)===this.getParentPageId(o);o&&a||this._unbindArrowTerminal(e,r)}}this._reparentArrow(e.id)}},{key:"_cleanupInstancePageState",value:function(e,t){var n=null,r=e.selectedIds.filter((function(e){return!t.has(e)}));r.length!==e.selectedIds.length&&(n||(n=x({},e)),n.selectedIds=r);var i=e.erasingIds.filter((function(e){return!t.has(e)}));i.length!==e.erasingIds.length&&(n||(n=x({},e)),n.erasingIds=i),e.hoveredId&&t.has(e.hoveredId)&&(n||(n=x({},e)),n.hoveredId=null),e.editingId&&t.has(e.editingId)&&(n||(n=x({},e)),n.editingId=null);var o=e.hintingIds.filter((function(e){return!t.has(e)}));return o.length!==e.hintingIds.length&&(n||(n=x({},e)),n.hintingIds=o),e.focusLayerId&&t.has(e.focusLayerId)&&(n||(n=x({},e)),n.focusLayerId=null),n}},{key:"_shapeDidChange",value:function(e,t){var n=this;if(cc.is(t)&&this._arrowDidUpdate(t),e.parentId!==t.parentId){var r=function(e){var t=n._arrowBindingsIndex.value[e];if(null!==t&&void 0!==t&&t.length){var r,i=y(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;n._reparentArrow(o.arrowId)}}catch(a){i.e(a)}finally{i.f()}}};r(t.id),this.visitDescendants(t.id,r)}if(e.parentId!==t.parentId&&Dn.isId(t.parentId)){var i=new Set([e.id]);this.visitDescendants(e.id,(function(e){i.add(e)}));var o,a=y(this.store.query.records("instance_page_state").value);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(s.pageId!==t.parentId){var u=this._cleanupInstancePageState(s,i);u&&this.store.put([u])}}}catch(l){a.e(l)}finally{a.f()}}e.parentId&&Cr(e.parentId)&&this._invalidParents.add(e.parentId),t.parentId!==e.parentId&&Cr(t.parentId)&&this._invalidParents.add(t.parentId)}},{key:"_tabStateDidChange",value:function(e,t){var n=this;if((null===e||void 0===e?void 0:e.selectedIds)!==(null===t||void 0===t?void 0:t.selectedIds)){var r=t.selectedIds.filter((function(e){for(var r,i=null===(r=n.getShapeById(e))||void 0===r?void 0:r.parentId;Cr(i);){var o;if(t.selectedIds.includes(i))return!1;i=null===(o=n.getShapeById(i))||void 0===o?void 0:o.parentId}return!0})),i=0===r.length?null===t||void 0===t?void 0:t.focusLayerId:this.findCommonAncestor(S(r.map((function(e){return n.getShapeById(e)}))),(function(e){return"group"===e.type}));r.length===t.selectedIds.length&&i==t.focusLayerId||this.store.put([x(x({},t),{},{selectedIds:r,focusLayerId:null!==i&&void 0!==i?i:null})])}}},{key:"_pageWillBeDeleted",value:function(e){var t,n=this.store.query.exec("instance",{currentPageId:{eq:e.id}});if(n.length){var r=null===(t=this.pages.find((function(t){return t.id!==e.id})))||void 0===t?void 0:t.id;r&&this.store.put(n.map((function(e){return x(x({},e),{},{currentPageId:r})})))}}},{key:"documentSettings",get:function(){return this.store.get(dn)}},{key:"gridSize",get:function(){return this.documentSettings.gridSize}},{key:"userSettings",get:function(){return this.store.get(this.userId)}},{key:"_userDocumentSettings",get:function(){var e=this;return this.store.query.record("user_document",(function(){return{userId:{eq:e.userId}}}))}},{key:"userDocumentSettings",get:function(){return this._userDocumentSettings.value}},{key:"isReadOnly",get:function(){return this.userDocumentSettings.isReadOnly}},{key:"isGridMode",get:function(){return this.userDocumentSettings.isGridMode}},{key:"setGridMode",value:function(e){this.updateUserDocumentSettings({isGridMode:e},!0)}},{key:"setDarkMode",value:function(e){this.updateUserDocumentSettings({isDarkMode:e},!0)}},{key:"enableReadOnlyMode",value:function(){this.updateUserDocumentSettings({isReadOnly:!0}),this.setSelectedTool("hand")}},{key:"isPenMode",get:function(){return this._isPenMode.value}},{key:"setPenMode",value:function(e){e&&(this._touchEventsRemainingBeforeExitingPenMode=3),this._isPenMode.set(e)}},{key:"user",get:function(){return this.store.get(this.userId)}},{key:"instanceState",get:function(){return this.store.get(this.instanceId)}},{key:"cursor",get:function(){return this.instanceState.cursor}},{key:"brush",get:function(){return this.instanceState.brush}},{key:"scribble",get:function(){return this.instanceState.scribble}},{key:"_pageState",get:function(){var e=this;return this.store.query.record("instance_page_state",(function(){return{pageId:{eq:e.currentPageId},instanceId:{eq:e.instanceId}}}),"app._pageState")}},{key:"pageState",get:function(){return this._pageState.value}},{key:"camera",get:function(){return this.store.get(this.pageState.cameraId)}},{key:"zoomLevel",get:function(){return this.camera.z}},{key:"selectedIds",get:function(){return this.pageState.selectedIds}},{key:"selectedIdsSet",get:function(){return new Set(this.selectedIds)}},{key:"_pages",get:function(){return this.store.query.records("page")}},{key:"pages",get:function(){return this._pages.value.sort(Ds)}},{key:"currentPage",get:function(){return this.getPageById(this.currentPageId)}},{key:"currentPageId",get:function(){return this.instanceState.currentPageId}},{key:"getPageById",value:function(e){return this.store.get(e)}},{key:"_pageStates",get:function(){var e=this;return this.store.query.records("instance_page_state",(function(){return{instanceId:{eq:e.instanceId}}}))}},{key:"getPageStateByPageId",value:function(e){return this._pageStates.value.find((function(t){return t.pageId===e}))}},{key:"getPageInfoById",value:function(e){return this.store.get(e)}},{key:"getShapesInPage",value:function(e){var t=this.store.query.exec("shape",{parentId:{eq:e}});return this.getShapesAndDescendantsInOrder(t.map((function(e){return e.id})))}},{key:"getTransform",value:function(e){return this.getShapeUtil(e).transform(e)}},{key:"getParentTransform",value:function(e){var t;return Dn.isId(e.parentId)?go.Identity():null!==(t=this._pageTransformCache.get(e.parentId))&&void 0!==t?t:go.Identity()}},{key:"getPageTransform",value:function(e){return this.getPageTransformById(e.id)}},{key:"getPageTransformById",value:function(e){return this._pageTransformCache.get(e)}},{key:"getPagePointById",value:function(e){var t=this.getPageTransformById(e);if(t)return go.applyToPoint(t,new Di)}},{key:"getPageCenter",value:function(e){var t=this.getPageTransformById(e.id);if(!t)return null;var n=this.getShapeUtil(e).center(e);return go.applyToPoint(t,n)}},{key:"getPageCenterById",value:function(e){var t=this.getShapeById(e);return this.getPageCenter(t)}},{key:"getPageRotation",value:function(e){return this.getPageRotationById(e.id)}},{key:"getPageRotationById",value:function(e){var t=this.getPageTransformById(e);return t?go.Decompose(t).rotation:0}},{key:"getBounds",value:function(e){return this.getShapeUtil(e).bounds(e)}},{key:"getBoundsById",value:function(e){var t=this.getShapeById(e);if(t)return this.getBounds(t)}},{key:"getPageBounds",value:function(e){return this.getPageBoundsById(e.id)}},{key:"getPageBoundsById",value:function(e){return this._pageBoundsCache.get(e)}},{key:"getMaskedPageBounds",value:function(e){return this.getMaskedPageBoundsById(e.id)}},{key:"getMaskedPageBoundsById",value:function(e){var t=this._pageBoundsCache.get(e);if(t){var n=this._pageMaskCache.get(e);if(n){var r=Do(n,t.corners);if(!r)return;return uo.FromPoints(r)}return t}}},{key:"getOutline",value:function(e){return this.getShapeUtil(e).outline(e)}},{key:"getOutlineById",value:function(e){return this.getOutline(this.getShapeById(e))}},{key:"getAncestors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.parentId;if(Dn.isId(n))return t.reverse(),t;var r=this.store.get(n);return t.push(r),this.getAncestors(r,t)}},{key:"getAncestorsById",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this.getShapeById(e);return this.getAncestors(n,t)}},{key:"findAncestor",value:function(e,t){var n=e.parentId;if(!Dn.isId(n)){var r=this.getShapeById(n);return r?t(r)?r:this.findAncestor(r,t):void 0}}},{key:"hasAncestor",value:function(e,t){return!!e&&(e.parentId===t||this.hasAncestor(this.getParentShape(e),t))}},{key:"findCommonAncestor",value:function(e,t){var n=this;if(0!==e.length){if(1===e.length){var r,i=e[0].parentId;if(Dn.isId(i))return;return t?null===(r=this.findAncestor(e[0],t))||void 0===r?void 0:r.id:i}for(var o=Oi(e),a=o[0],s=o.slice(1),u=this.getParentShape(a);u;)if(!t||t(u)){if(s.every((function(e){return n.hasAncestor(e,u.id)})))return u.id;u=this.getParentShape(u)}else u=this.getParentShape(u)}}},{key:"isShapeInViewport",value:function(e){var t=this.getPageBoundsById(e);return!!t&&this.viewportPageBounds.includes(t)}},{key:"renderingShapes",get:function(){var e=this,t=this.currentPageId,n=this.cullingBounds,r=this.cullingBoundsExpanded,i=this.erasingIdsSet,o=this.editingId,a=[],s=function t(s,u,l){var c=e.getShapeById(s);if(c){var d=+c.props.opacity*u,p=!1;!l&&i.has(s)&&(p=!0,d*=.32);var f=e.getMaskedPageBoundsById(s),h=!!f&&n.includes(f),v=!f||o!==s&&!r.includes(f);a.push({id:s,index:a.length,opacity:d,isCulled:v,isInViewport:h}),e.getSortedChildIds(s).forEach((function(e){t(e,d,l||p)}))}};return this.getSortedChildIds(t).forEach((function(e){return s(e,1,!1)})),a.sort(Ns)}},{key:"allShapesCommonBounds",get:function(){var e=this,t=null;return this.shapeIds.forEach((function(n){var r=e.getMaskedPageBoundsById(n);r&&(t?t.expand(r):t=r.clone())})),t}},{key:"getPageCorners",value:function(e){var t=this.getAncestors(e),n=this.getBounds(e).corners,r=go.Compose.apply(go,M(t.flatMap((function(e){return[go.Translate(e.x,e.y),go.Rotate(e.rotation)]}))).concat([go.Translate(e.x,e.y),go.Rotate(e.rotation,0,0)]));return go.applyToPoints(r,n)}},{key:"isPointInShape",value:function(e,t){var n=this.getShapeUtil(t),r=this._pageMaskCache.get(t.id);if(r&&!ao(e,r))return!1;return n.hitTestPoint(t,this.getPointInShapeSpace(t,e))}},{key:"getShapesAtPoint",value:function(e){var t=this;return this.sortedShapesArray.filter((function(n){var r=t._pageMaskCache.get(n.id);if(r&&!ao(e,r))return!1;return t.getShapeUtil(n).hitTestPoint(n,t.getPointInShapeSpace(n,e))}))}},{key:"getPointInShapeSpace",value:function(e,t){return go.applyToPoint(go.Inverse(this.getPageTransform(e)),t)}},{key:"getPointInParentSpace",value:function(e,t){var n=this.getShapeById(e);if(!n)return new Di(0,0);if(Dn.isId(n.parentId))return Di.From(t);var r=this.getPageTransformById(n.parentId);return r?go.applyToPoint(go.Inverse(r),t):Di.From(t)}},{key:"getDeltaInShapeSpace",value:function(e,t){var n=this.getPageTransform(e);return n?Di.Rot(t,-go.Decompose(n).rotation):Di.From(t)}},{key:"getDeltaInParentSpace",value:function(e,t){if(Dn.isId(e.parentId))return Di.From(t);var n=this.getShapeById(e.parentId);return n?this.getDeltaInShapeSpace(n,t):Di.From(t)}},{key:"getParentsMappedToChildren",value:function(e){var t=this,n=e.map((function(e){return t.store.get(e)})),r=new Map;return n.forEach((function(e){var t;r.has(e.parentId)||r.set(e.parentId,new Set),null===(t=r.get(e.parentId))||void 0===t||t.add(e)})),r}},{key:"updateViewportScreenBounds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getContainer();if(!t)return this;var n=t.getBoundingClientRect(),r=new uo(0,0,Math.max(n.width,1),Math.max(n.height,1)),i=r.equals(this.viewportScreenBounds),o=this._willSetInitialBounds;if(i)this._willSetInitialBounds=!1;else if(o)this._willSetInitialBounds=!1,this.updateInstanceState({screenBounds:r.toJson()},!0,!0);else{var a=this.zoomLevel;if(e){var s=this.viewportPageCenter;this.updateInstanceState({screenBounds:r.toJson()},!0,!0);var u=this.viewportPageCenter;this.pan((u.x-s.x)*a,(u.y-s.y)*a)}else{var l=this.screenToPage(0,0);this.updateInstanceState({screenBounds:r.toJson()},!0,!0);var c=this.screenToPage(0,0);this.pan((c.x-l.x)*a,(c.y-l.y)*a)}}this._cameraManager.tick(),this.updateCullingBounds();var d=this.editingId;return d&&this.panZoomIntoView([d]),this}},{key:"viewportScreenBounds",get:function(){var e=this.instanceState.screenBounds,t=e.x,n=e.y,r=e.w,i=e.h;return new uo(t,n,r,i)}},{key:"viewportScreenCenter",get:function(){return this.viewportScreenBounds.center}},{key:"viewportPageBounds",get:function(){var e=this.viewportScreenBounds,t=e.x,n=e.y,r=e.w,i=e.h,o=this.screenToPage(t,n),a=this.screenToPage(t+r,n+i);return new uo(o.x,o.y,a.x-o.x,a.y-o.y)}},{key:"cullingBounds",get:function(){return this._cullingBounds.value}},{key:"cullingBoundsExpanded",get:function(){return this._cullingBoundsExpanded.value}},{key:"updateCullingBounds",value:function(){var e=this.viewportPageBounds;return e.equals(this._cullingBounds.__unsafe__getWithoutCapture())||(this._cullingBounds.set(e.clone()),this._cullingBoundsExpanded.set(e.clone().expandBy(100/this.zoomLevel))),this}},{key:"viewportPageCenter",get:function(){return this.viewportPageBounds.center}},{key:"screenToPage",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.camera,i=this.store.unsafeGetWithoutCapture(this.instanceId).screenBounds,o=r.x,a=r.y,s=r.z,u=void 0===s?1:s;return{x:(e-i.x)/u-o,y:(t-i.y)/u-a,z:n}}},{key:"pageToScreen",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.camera,i=r.x,o=r.y,a=r.z,s=void 0===a?1:a;return{x:e+i*s,y:t+o*s,z:n}}},{key:"focusLayerId",get:function(){var e;return null!==(e=this.pageState.focusLayerId)&&void 0!==e?e:this.currentPageId}},{key:"focusLayerShape",get:function(){var e=this.pageState.focusLayerId;if(e)return this.getShapeById(e)}},{key:"popFocusLayer",value:function(){var e=this.pageState.focusLayerId,t=e&&this.getShapeById(e);if(t){var n,r=this.findAncestor(t,(function(e){return"group"===e.type}));this.setFocusLayer(null!==(n=null===r||void 0===r?void 0:r.id)&&void 0!==n?n:null),this.select(t.id)}else this.setFocusLayer(null),this.selectNone();return this}},{key:"setFocusLayer",value:function(e){return this._setFocusLayer(e),this}},{key:"setHintingIds",value:function(e){return this.store.update(this.pageState.id,(function(t){return x(x({},t),{},{hintingIds:k(e)})})),this}},{key:"editingId",get:function(){return this.pageState.editingId}},{key:"editingShape",get:function(){var e;return this.editingId&&null!==(e=this.getShapeById(this.editingId))&&void 0!==e?e:null}},{key:"setEditingId",value:function(e){if(e){if(e!==this.editingId){var t=this.getShapeById(e),n=this.getShapeUtil(t);if(t&&n.canEdit(t)){this.setInstancePageState({editingId:e,hoveredId:null},!1);var r=this.viewportPageBounds,i=n.getEditingBounds(t),o=this.getPageTransformById(e),a=uo.FromPoints(go.applyToPoints(o,i.corners));r.contains(a)||(a.width>r.width||a.height>r.height?this.zoomToBounds(a.minX,a.minY,a.width,a.height):this.centerOnPoint(a.midX,a.midY))}}}else this.setInstancePageState({editingId:null});return this}},{key:"getParentIdForNewShapeAtPoint",value:function(e,t){for(var n=this.sortedShapesArray,r=n.length-1;r>=0;r--){var i=n[r],o=this.getShapeUtil(i);if(o.canReceiveNewChildrenOfType(t)){var a=this.getMaskedPageBoundsById(i.id);if(a&&a.containsPoint(e)&&o.hitTestPoint(i,this.getPointInShapeSpace(i,e)))return i.id}}return this.focusLayerId}},{key:"getDroppingShape",value:function(e){for(var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this.sortedShapesArray,i=function(){var i=r[o];if(n.find((function(e){return e.id===i.id||t.hasAncestor(i,e.id)})))return"continue";var a=t.getShapeUtil(i);if(!a.canDropShapes(i,n))return"continue";var s=t.getMaskedPageBoundsById(i.id);return s&&s.containsPoint(e)&&a.hitTestPoint(i,t.getPointInShapeSpace(i,e))?{v:i}:void 0},o=r.length-1;o>=0;o--){var a=i();if("continue"!==a&&"object"===typeof a)return a.v}}},{key:"getOutermostSelectableShape",value:function(e,t){for(var n=e,r=e;r;){var i;if("group"!==r.type||this.focusLayerId===r.id||this.hasAncestor(this.focusLayerShape,r.id)||null!==(i=null===t||void 0===t?void 0:t(r))&&void 0!==i&&!i){if(this.focusLayerId===r.id)break}else n=r;r=this.getParentShape(r)}return n}},{key:"selectedPageBounds",get:function(){var e=this,t=this.pageState.selectedIds;return 0===t.length?null:uo.Common(S(t.map((function(t){return e.getPageBoundsById(t)}))))}},{key:"selectionRotation",get:function(){var e=this,t=this.selectedIds;if(0===t.length)return 0;if(1===t.length)return this.getPageRotationById(this.selectedIds[0]);var n=t.map((function(t){return e.getPageRotationById(t)%(Math.PI/2)}));return n.every((function(e){return Math.abs(e-n[0])<Math.PI/180}))?this.getPageRotationById(t[0]):0}},{key:"selectionBounds",get:function(){var e=this,t=this.selectedIds;if(0!==t.length){var n=this.selectionRotation;if(0===n)return this.selectedPageBounds;if(1===t.length){var r=this.getBounds(this.getShapeById(t[0])).clone();return r.point=go.applyToPoint(this.getPageTransformById(t[0]),r.point),r}var i=this.selectedIds.flatMap((function(t){var n=e.getPageTransformById(t);return n?e.getOutlineById(t).map((function(e){return go.applyToPoint(n,e)})):[]})).map((function(e){return Di.Rot(e,-n)})),o=uo.FromPoints(i);return o.point=o.point.rot(n),o}}},{key:"selectionPageCenter",get:function(){var e=this.selectionBounds,t=this.selectionRotation;return e?Di.RotWith(e.center,e.point,t):null}},{key:"shapesArray",get:function(){var e=this;return Array.from(this.shapeIds).map((function(t){return e.store.get(t)}))}},{key:"sortedShapesArray",get:function(){var e=this,t=new Set(this.shapesArray.sort(Ds)),n=[];function r(e){n.push(e),t.delete(e),t.forEach((function(t){t.parentId===e.id&&r(t)}))}return t.forEach((function(t){Pr(e.getShapeById(t.parentId))||r(t)})),n}},{key:"selectedShapes",get:function(){var e=this;return S(this.pageState.selectedIds.map((function(t){return e.store.get(t)})))}},{key:"onlySelectedShape",get:function(){var e=this.selectedShapes;return 1===e.length?e[0]:null}},{key:"getShapeById",value:function(e){if(Cr(e))return this.store.get(e)}},{key:"getParentShape",value:function(e){if(void 0!==e&&Cr(e.parentId))return this.store.get(e.parentId)}},{key:"getNearestSiblingShape",value:function(e,t){if(t)return t.parentId===e.parentId?t:this.findAncestor(t,(function(t){return t.parentId===e.parentId}))}},{key:"getParentPageId",value:function(e){if(void 0!==e)return Dn.isId(e.parentId)?e.parentId:this.getParentPageId(this.getShapeById(e.parentId))}},{key:"isShapeInPage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentPageId,n=!1;if(e.parentId===t)n=!0;else{var r=this.getShapeById(e.parentId);e:for(;r;){if(r.parentId===t){n=!0;break e}r=this.getShapeById(r.parentId)}}return n}},{key:"getCssColor",value:function(e){return this.colors.get(e)}},{key:"getStrokeWidth",value:function(e){return this.sizes[e]}},{key:"currentToolId",get:function(){var e,t=this.root.current.value,n=null===t||void 0===t?void 0:t.id;if("select"===n){var r,i,o=null===t||void 0===t?void 0:t.current.value;n=null!==(r=null===o||void 0===o||null===(i=o.info)||void 0===i?void 0:i.onInteractionEnd)&&void 0!==r?r:"select"}return null!==(e=n)&&void 0!==e?e:"select"}},{key:"setSelectedTool",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.root.transition(e,t),this}},{key:"getStateDescendant",value:function(e){for(var t=e.split(".").reverse(),n=this.root;t.length>0;){var r,i=t.pop();if(!i)return n;var o=null===(r=n.children)||void 0===r?void 0:r[i];if(!o)return;n=o}return n}},{key:"isIn",value:function(e){for(var t=e.split(".").reverse(),n=this.root;t.length>0;){var r=t.pop();if(!r)return!0;var i=n.current.value;if((null===i||void 0===i?void 0:i.id)!==r)return!1;if(0===t.length)return!0;n=i}return!1}},{key:"isInAny",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.some((function(t){return e.isIn(t)}))}},{key:"_updateInputsFromEvent",value:function(e){var t=this.inputs,n=t.previousScreenPoint,r=t.previousPagePoint,i=t.currentScreenPoint,o=t.currentPagePoint,a=this.store.unsafeGetWithoutCapture(this.instanceId).screenBounds,s=e.point,u=s.x,l=s.y,c=s.z,d=this.camera,p=d.x,f=d.y,h=d.z;n.setTo(i),r.setTo(o);var v=(u-a.x)/h-p,g=(l-a.y)/h-f;i.set(u,l),o.set(v,g,null!==c&&void 0!==c?c:.5),this.inputs.isPen="pointer"===e.type&&e.isPen,"pointer_down"===e.name&&(this.inputs.pointerVelocity=new Di),this.updateUserPresence({cursor:o.toJson()})}},{key:"cancelDoubleClick",value:function(){this._clickManager.cancelDoubleClickTimeout()}},{key:"replaceStoreContentsWithRecordsForOtherDocument",value:function(e){var t=this;ke((function(){t.store.clear();var n=N(function(e,t){var n,r=[],i=[],o=y(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;t(a)?r.push(a):i.push(a)}}catch(s){o.e(s)}finally{o.f()}return[r,i]}(e,(function(e){return"shape"===e.typeName})),2),r=n[0],i=n[1];t.store.put(i,"initialize"),t.store.ensureStoreIsUsable(),t.store.put(r,"initialize"),t.history.clear(),t.updateViewportScreenBounds(),t.updateCullingBounds();var o=t.allShapesCommonBounds;o&&t.zoomToBounds(o.minX,o.minY,o.width,o.height,1)}))}},{key:"getContent",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedIds;if(t&&0!==t.length){var n={},r=k(t.map((function(t){return e.getShapeById(t)})).sort(Ds).flatMap((function(t){var n=[t];return e.visitDescendants(t.id,(function(t){n.push(e.getShapeById(t))})),n})));r=r.map((function(t){if(t=Y(t),n[t.id]=e.getPageTransformById(t.id),!cc.is(t))return t;if("binding"===t.props.start.type){var i=t.props.start.boundShapeId;if(!r.find((function(e){return e.id===i}))){var o=Vl(e,t).start;t.props.start={type:"point",x:o.x,y:o.y}}}if("binding"===t.props.end.type){var a=t.props.end.boundShapeId;if(!r.find((function(e){return e.id===a}))){var s=Vl(e,t).end;t.props.end={type:"point",x:s.x,y:s.y}}}return t}));var i=[];r.forEach((function(t){if(void 0===r.find((function(e){return e.id===t.parentId}))){var n=e.getPagePointById(t.id),o=e.getPageRotationById(t.id);t.x=n.x,t.y=n.y,t.rotation=o,t.parentId=e.currentPageId,i.push(t.id)}}));var o=new Set;return r.forEach((function(e){"assetId"in e.props&&null!==e.props.assetId&&o.add(e.props.assetId)})),{shapes:r,rootShapeIds:i,schema:this.store.schema.serialize(),assets:S(Array.from(o).map((function(t){return e.getAssetById(t)})))}}}},{key:"putContent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.isReadOnly)return this;if(!e.schema)throw Error("Could not put content: content is missing a schema.");var r,i=n.select,o=void 0!==i&&i,a=n.preserveIds,s=void 0!==a&&a,u=n.preservePosition,l=void 0!==u&&u,c=n.point,d=void 0===c?void 0:c,p=this.currentPageId,f=e.assets,h=e.shapes,v=e.rootShapeIds,g=new Map(h.map((function(e){return[e.id,Er()]}))),m=this.currentPageId,b=1/0,w=[],k=y(this.selectedShapes);try{for(k.s();!(r=k.n()).done;){var _=r.value;if(0===b)break;var P=this.getAncestors(_);"frame"===_.type&&P.push(_);var C="frame"===_.type?P.length+1:P.length;if(C<b)b=C,w=P,m="frame"===_.type?_.id:_.parentId;else if(C===b){if(w.length!==P.length)throw Error("Ancestors: ".concat(w.length," !== ").concat(P.length));if(0===w.length){m=p;break}m=p;for(var E=0;E<w.length&&P[E]===w[E];E++)m=P[E].id}}}catch(V){k.e(V)}finally{k.f()}var I=!1;if(!Dn.isId(m)){var M=this.getShapeById(m);if(M)if(this.viewportPageBounds.includes(this.getPageBounds(M))){if(1===v.length){var T=h.find((function(e){return e.id===v[0]}));zc.is(M)&&zc.is(T)&&T.props.w===(null===M||void 0===M?void 0:M.props.w)&&T.props.h===(null===M||void 0===M?void 0:M.props.h)&&(I=!0)}}else m=p;else m=p}I||(I=g.has(m)),I&&(m=this.getShapeById(m).parentId);var j=this.getHighestIndexForParent(m),A=[],O=h.map((function(e){var t;if(s)t=U(e),g.set(e.id,e.id);else{var n=g.get(e.id);t=U(x(x({},e),{},{id:n}))}if(v.includes(e.id)&&(t.parentId=p,A.push(t)),g.has(t.parentId)?t.parentId=g.get(e.parentId):(v.push(t.id),t.index=j,j=Os(j)),cc.is(t)){if("binding"===t.props.start.type){var r=g.get(t.props.start.boundShapeId);t.props.start=r?x(x({},t.props.start),{},{boundShapeId:r}):{type:"point",x:0,y:0}}if("binding"===t.props.end.type){var i=g.get(t.props.end.boundShapeId);t.props.end=i?x(x({},t.props.end),{},{boundShapeId:i}):{type:"point",x:0,y:0}}}return t}));if(O.length+this.shapeIds.size>Fo)return hf(this),this;var z=[];if(f){for(var D=0;D<f.length;D++){var N=f[D],R=this.store.schema.migratePersistedRecord(N,e.schema);if("success"!==R.type)throw Error("Could not put content: could not migrate content for asset:\n".concat(JSON.stringify(N,null,2)));f[D]=R.value}var L=[];z=f.filter((function(e){return!t.store.has(e.id)})).map((function(e){var t;"image"!==e.type&&"video"!==e.type||(e.props.src&&null!==(t=e.props.src)&&void 0!==t&&t.startsWith("data:image")?(L.push(Y(e)),e.props.src=null):L.push(Y(e)));return e})),Promise.allSettled(L.map(function(){var e=Ai(Ti().mark((function e(n){var r,i,o;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,is(n.props.src,n.props.name,null!==(r=n.props.mimeType)&&void 0!==r?r:"image/png");case 2:return i=e.sent,e.next=5,t.onCreateAssetFromFile(i);case 5:return o=e.sent,e.abrupt("return",[n,o]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(e){t.updateAssets(S(e.map((function(e){return"fulfilled"===e.status?x(x({},e.value[1]),{},{id:e.value[0].id}):void 0}))))}))}for(var B=0;B<O.length;B++){var F=O[B],K=this.store.schema.migratePersistedRecord(F,e.schema);if("success"!==K.type)throw Error("Could not put content: could not migrate content for shape:\n".concat(JSON.stringify(F,null,2)));O[B]=K.value}return this.batch((function(){z.length>0&&t.createAssets(z),t.createShapes(O,o),m!==p&&t.reparentShapesById(A.map((function(e){return e.id})),m);var e=O.map((function(e){return t.getShapeById(e.id)})),n=uo.Common(e.map((function(e){return t.getPageBounds(e)})));if(void 0===d)if(Dn.isId(m)){var r=t.viewportPageBounds;d=l||r.includes(uo.From(n))?n.center:r.center}else{var i=t.getShapeById(m),a=t.getShapeUtil(i);d=a.center(i)}if(1===A.length){var s=A[0];if("frame"===s.type)for(;t.getShapesAtPoint(d).some((function(e){return zc.is(e)&&e.props.w===s.props.w&&e.props.h===s.props.h}));)d.x+=n.w+16}t.updateShapes(A.map((function(e){var t,r,i=(null!==(t=e.x)&&void 0!==t?t:0)-(n.x+n.w/2),o=(null!==(r=e.y)&&void 0!==r?r:0)-(n.y+n.h/2);return{id:e.id,type:e.type,x:d.x+i,y:d.y+o}})))})),this}},{key:"createShapeId",value:function(e){return e?function(e){return"shape:".concat(e)}(e):Er()}},{key:"getHighestIndexForParent",value:function(e){var t=this._parentIdsToChildIds.value[e];return t&&0!==t.length?Os(t[t.length-1][1]):"a1"}},{key:"createShapes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._createShapes(e,t),this}},{key:"animateShapes",value:function(e){var t,n,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.duration,a=void 0===o?500:o,s=i.ease,u=void 0===s?zi.linear:s,l=os(),c=a,d=[];e.forEach((function(e){if(e){var t={partial:e,values:[]},n=r.getShapeById(e.id);if(n){for(var i=0,o=["x","y","rotation"];i<o.length;i++){var a=o[i];void 0!==e[a]&&n[a]!==e[a]&&t.values.push({prop:a,from:n[a],to:e[a]})}d.push(t),r.animatingShapes.set(n.id,l)}}}));return this.addListener("tick",(function i(o){if((c-=o)<0){var s=r.animatingShapes,p=e.filter((function(e){return e&&s.get(e.id)===l}));return p.length&&r.updateShapes(p,!1),void r.removeListener("tick",i)}t=u(1-c/a);var f=r.animatingShapes;try{for(var h=[],v=0;v<d.length;v++)n=d[v],f.get(n.partial.id)===l&&h.push(x({id:n.partial.id,type:n.partial.type},n.values.reduce((function(e,n){var r=n.prop,i=n.from,o=n.to;return e[r]=i+(o-i)*t,e}),{})));r._updateShapes(h,!0)}catch(gm){}})),this}},{key:"updateShapes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.animatingShapes.size>0)for(var n,r=0;r<e.length;r++)(n=e[r])&&this.animatingShapes.delete(n.id);return this._updateShapes(e,t),this}},{key:"deleteShapes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedIds;return this._deleteShapes(e),this}},{key:"updateUserDocumentSettings",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._updateUserDocumentSettings(e,t),this}},{key:"updatePage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._updatePage(e,t),this}},{key:"createPage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dn.createId(),n=arguments.length>2?arguments[2]:void 0;return this._createPage(e,t,n),this}},{key:"duplicatePage",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentPageId,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dn.createId();if(!(this.pages.length>=40)){var r=this.getPageById(t);if(r){var i=x({},this.camera),o=this.getContent(this.getSortedChildIds(r.id));this.batch((function(){if(e.createPage(r.name+" Copy",n,r.index),e.setCurrentPageId(n),e.setCamera(i.x,i.y,i.z),o)return e.putContent(o)}))}}}},{key:"deletePage",value:function(e){this._deletePage(e)}},{key:"setInstancePageState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._setInstancePageState(e,t)}},{key:"updateUser",value:function(e){var t=x(x({},this.user),e);this.store.put([t])}},{key:"_currentUserPresence",get:function(){var e=this;return this.store.query.record("user_presence",(function(){return{userId:{eq:e.userId}}}))}},{key:"userPresence",get:function(){return this._currentUserPresence.value}},{key:"setSelectedIds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._setSelectedIds(e,t),this}},{key:"isSelected",value:function(e){return this.selectedIdsSet.has(e)}},{key:"isWithinSelection",value:function(e){var t=this,n=this.getShapeById(e);return!!n&&(!!this.isSelected(e)||!!this.findAncestor(n,(function(e){return t.isSelected(e.id)})))}},{key:"_assets",get:function(){return this.store.query.records("asset")}},{key:"assets",get:function(){return this._assets.value}},{key:"createAssets",value:function(e){return this._createAssets(e),this}},{key:"deleteAssets",value:function(e){return this._deleteAssets(e),this}},{key:"updateAssets",value:function(e){return this._updateAssets(e),this}},{key:"getAssetBySrc",value:function(e){return this.assets.find((function(t){return t.props.src===e}))}},{key:"getAssetById",value:function(e){return this.store.get(e)}},{key:"getSvg",value:function(){var e=Ai(Ti().mark((function e(){var t,n,r,i,o,a,s,u,l,c,d,p,f,h,v,g,m,b,w,x,k,S,_,P,C,E,I,M,T,j,A,O,z,D,N,R,L,B,F=this,U=arguments;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=U.length>0&&void 0!==U[0]?U[0]:this.selectedIds.length?this.selectedIds:Object.keys(this.shapeIds),n=U.length>1&&void 0!==U[1]?U[1]:{},0!==t.length){e.next=4;break}return e.abrupt("return");case 4:if(window.document){e.next=6;break}throw Error("No document");case 6:for(r=n.scale,i=void 0===r?1:r,o=n.background,a=void 0!==o&&o,s=n.padding,u=void 0===s?32:s,l=n.darkMode,c=void 0===l?this.userDocumentSettings.isDarkMode:l,d=n.preserveAspectRatio,p=void 0!==d&&d,f=this.getContainer(),h=getComputedStyle(f),(v=document.createElement("div")).className="rs-container rs-theme__".concat(c?"dark":"light"),document.body.appendChild(v),g=getComputedStyle(v),m=new Map,b={fill:Object.fromEntries(ua.color.map((function(e){return[e.id,g.getPropertyValue("--palette-".concat(e.id))]}))),pattern:Object.fromEntries(ua.color.map((function(e){return[e.id,g.getPropertyValue("--palette-".concat(e.id,"-pattern"))]}))),semi:Object.fromEntries(ua.color.map((function(e){return[e.id,g.getPropertyValue("--palette-".concat(e.id,"-semi"))]}))),text:g.getPropertyValue("--color-text"),background:g.getPropertyValue("--color-background"),solid:g.getPropertyValue("--palette-solid")},document.body.removeChild(v),w=this.getShapesAndDescendantsInOrder(t),(x=uo.FromPoints(w.map((function(e){var t=F.getPageTransform(e);return go.applyToPoints(t,F.getOutline(e))})).flat())).expandBy(u),k=window.document.createElementNS("http://www.w3.org/2000/svg","svg"),p&&k.setAttribute("preserveAspectRatio",p),S=x.width*i,_=x.height*i,k.setAttribute("direction","ltr"),k.setAttribute("width",S+""),k.setAttribute("height",_+""),k.setAttribute("viewBox","".concat(x.minX," ").concat(x.minY," ").concat(x.width," ").concat(x.height)),k.setAttribute("stroke-linecap","round"),k.setAttribute("stroke-linejoin","round"),k.style.setProperty("background-color",a?b.background:"transparent"),P=window.document.createElementNS("http://www.w3.org/2000/svg","defs"),C=0,E=Array.from(Sl());C<E.length;C++)I=E[C],P.appendChild(I);try{null===(M=(T=document.body).focus)||void 0===M||M.call(T)}catch(gm){}k.append(P),j=y(w),e.prev=35,O=Ti().mark((function e(){var t,n,r,i,o,a,s,u,l,c,d;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"font"in(n=A.value).props&&n.props.font&&(m.has(n.props.font)?r=m.get(n.props.font):(r=h.getPropertyValue("--rs-font-".concat(n.props.font)),m.set(n.props.font,r))),i=F.getShapeUtil(n),e.next=5,null===(t=i.toSvg)||void 0===t?void 0:t.call(i,n,r,b);case 5:(o=e.sent)||(a=F.getPageBounds(n),(s=window.document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttribute("width",a.width+""),s.setAttribute("height",a.height+""),s.setAttribute("fill",b.solid),s.setAttribute("stroke",b.pattern.grey),s.setAttribute("stroke-width","1"),o=s),u=o,l=F.getPageTransform(n).toCssString(),"scale"in n.props&&1!==n.props.scale&&(l="".concat(l," scale(").concat(n.props.scale,", ").concat(n.props.scale,")")),u.setAttribute("transform",l),"opacity"in n.props&&u.setAttribute("opacity",n.props.opacity+""),k.appendChild(u),c=F._clipPathCache.get(n.id),u&&c&&((d=document.createElementNS("http://www.w3.org/2000/svg","g")).style.clipPath=c,Array.from(u.childNodes).forEach((function(e){return d.appendChild(e)})),u.appendChild(d));case 15:case"end":return e.stop()}}),e)})),j.s();case 38:if((A=j.n()).done){e.next=42;break}return e.delegateYield(O(),"t0",40);case 40:e.next=38;break;case 42:e.next=47;break;case 44:e.prev=44,e.t1=e.catch(35),j.e(e.t1);case 47:return e.prev=47,j.f(),e.finish(47);case 50:z="",D=window.document.createElementNS("http://www.w3.org/2000/svg","style"),N=[],"fonts"in document&&document.fonts.forEach((function(e){return N.push(e)})),R=Ti().mark((function e(){var t,n,r,i,o,a,s,u;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=B[L],n=new FileReader,r=!1,m.forEach((function(e){e.includes(t.family)&&(r=!0)})),r){e.next=6;break}return e.abrupt("return","continue");case 6:if(i=t.$$_url,o=t.$$_fontface,!i){e.next=19;break}return e.next=11,fetch(i);case 11:return e.next=13,e.sent.blob();case 13:return a=e.sent,e.next=16,new Promise((function(e,t){n.onload=function(){return e(n.result)},n.onerror=function(){return t(n.error)},n.readAsDataURL(a)}));case 16:s=e.sent,u="\n"+o.replaceAll(i,s),z+=u;case 19:case"end":return e.stop()}}),e)})),L=0,B=N;case 56:if(!(L<B.length)){e.next=64;break}return e.delegateYield(R(),"t2",58);case 58:if("continue"!==e.t2){e.next=61;break}return e.abrupt("continue",61);case 61:L++,e.next=56;break;case 64:return D.textContent=z,P.append(D),e.abrupt("return",k);case 67:case"end":return e.stop()}}),e,this,[[35,44,47,50]])})));return function(){return e.apply(this,arguments)}}()},{key:"renamePage",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.isReadOnly||this.updatePage({id:e,name:t},n),this}},{key:"moveShapesToPage",value:function(e,t){var n=this;if(0===e.length)return this;if(this.isReadOnly)return this;var r=this.currentPageId;if(t===r)return this;if(!this.store.has(t))return this;var i=this.getContent(e);if(!i)return this;if(this.getShapesInPage(t).length+i.shapes.length>Fo)return hf(this,t),this;var o=this.camera.z;return this.history.batch((function(){n.deleteShapes(e),n.setCurrentPageId(t),n.setFocusLayer(null),n.selectNone(),n.putContent(i,{select:!0,preserveIds:!0,preservePosition:!0});var r=n.selectionBounds.center,a=r.x,s=r.y;n.setCamera(n.camera.x,n.camera.y,o),n.centerOnPoint(a,s)})),this.emit("moved-to-page",{name:this.currentPage.name,toId:t,fromId:r}),this}},{key:"lockShapes",value:function(){arguments.length>0&&void 0!==arguments[0]||this.pageState.selectedIds;return this.isReadOnly,this}},{key:"reorderShapes",value:function(e,t){var n=this;if(this.isReadOnly)return this;if(0===t.length)return this;var r=this.getParentsMappedToChildren(t),i=[];switch(e){case"toBack":r.forEach((function(e,t){var r=S(n.getSortedChildIds(t).map((function(e){return n.getShapeById(e)})));if(e.size!==r.length){var o,a,s,u=y(r);try{for(u.s();!(s=u.n()).done;){var l=s.value;if(!e.has(l)){a=l.index;break}e.delete(l),o=l.index}}catch(d){u.e(d)}finally{u.f()}if(0!==e.size){var c=Ts(o,a,e.size);Array.from(e.values()).sort(Ds).forEach((function(e,t){return i.push({id:e.id,type:e.type,index:c[t]})}))}}}));break;case"toFront":r.forEach((function(e,t){var r=S(n.getSortedChildIds(t).map((function(e){return n.getShapeById(e)}))),o=r.length;if(e.size!==o){for(var a,s,u=o-1;u>-1;u--){var l=r[u];if(!e.has(l)){a=l.index;break}e.delete(l),s=l.index}if(0!==e.size){var c=Ts(a,s,e.size);Array.from(e.values()).sort(Ds).forEach((function(e,t){return i.push({id:e.id,type:e.type,index:c[t]})}))}}}));break;case"forward":r.forEach((function(e,t){var r=S(n.getSortedChildIds(t).map((function(e){return n.getShapeById(e)}))),o=r.length;if(e.size!==o)for(var a,s=new Set(Array.from(e).map((function(e){return r.indexOf(e)}))),u=-1,l=!1,c=0;c<o;c++){var d=s.has(c);if(!l&&d)l=!0,u=c,void 0;else if(l&&!d){var p;l=!1,a=c-u;for(var f=Ts(r[c].index,null===(p=r[c+1])||void 0===p?void 0:p.index,a),h=0;h<a;h++){var v=r[u+h];i.push({id:v.id,type:v.type,index:f[h]})}}}}));break;case"backward":r.forEach((function(e,t){var r=S(n.getSortedChildIds(t).map((function(e){return n.getShapeById(e)}))),o=r.length;if(e.size!==o)for(var a,s=new Set(Array.from(e).map((function(e){return r.indexOf(e)}))),u=-1,l=!1,c=o-1;c>-1;c--){var d=s.has(c);if(!l&&d)l=!0,u=c;else if(l&&!d){var p;l=!1,a=u-c;for(var f=Ts(null===(p=r[c-1])||void 0===p?void 0:p.index,r[c].index,a),h=0;h<a;h++){var v=r[c+h+1];i.push({id:v.id,type:v.type,index:f[h]})}}}}))}return this.updateShapes(i),this}},{key:"sendToBack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageState.selectedIds;return this.reorderShapes("toBack",e),this}},{key:"sendBackward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageState.selectedIds;return this.reorderShapes("backward",e),this}},{key:"bringForward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageState.selectedIds;return this.reorderShapes("forward",e),this}},{key:"bringToFront",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageState.selectedIds;return this.reorderShapes("toFront",e),this}},{key:"flipShapes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selectedIds;if(this.isReadOnly)return this;var r=S(n.map((function(e){return t.getShapeById(e)})));if(!r.length)return this;r=r.map((function(e){return"group"===e.type?t.getSortedChildIds(e.id).map((function(e){return t.getShapeById(e)})):e})).flat();var i,o=uo.Common(S(r.map((function(e){return t.getPageBounds(e)})))).center,a=y(r);try{for(a.s();!(i=a.n()).done;){var s=i.value,u=this.getShapeUtil(s).bounds(s),l=this.getPageTransformById(s.id);l&&this.resizeShape(s.id,{x:"horizontal"===e?-1:1,y:"vertical"===e?-1:1},{initialBounds:u,initialPageTransform:l,initialShape:s,mode:"scale_shape",scaleOrigin:o,scaleAxisRotation:0})}}catch(c){a.e(c)}finally{a.f()}return this}},{key:"stackShapes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pageState.selectedIds,r=arguments.length>2?arguments[2]:void 0;if(this.isReadOnly)return this;var i=S(n.map((function(e){return t.getShapeById(e)}))).filter((function(e){return!!e&&(!cc.is(e)||"binding"!==e.props.start.type&&"binding"!==e.props.end.type)})),o=i.length;if(void 0===r&&o<3||o<2)return this;var a,s,u,l,c,d=Object.fromEntries(i.map((function(e){return[e.id,t.getPageBounds(e)]})));if("horizontal"===e?(a="x",s="minX",u="maxX",l="width"):(a="y",s="minY",u="maxY",l="height"),void 0===r){var p=[];i.sort((function(e,t){return d[e.id][s]-d[t.id][s]}));for(var f=function(){var e=i[h],t=i[h+1],n=d[e.id],r=d[t.id][s]-n[u],o=p.find((function(e){return e.gap===r}));o?o.count++:p.push({gap:r,count:1})},h=0;h<o-1;h++)f();var v=0;p.forEach((function(e){e.count>v&&(v=e.count,c=e.gap)})),1===v&&(c=Math.max(0,p.reduce((function(e,t){return e+t.gap*t.count}),0)/(o-1)))}else c=r;var g=[],m=d[i[0].id][u];return i.forEach((function(e,n){var r,i;if(0!==n){var o={x:0,y:0};o[a]=m+c-d[e.id][a];var s=t.getParentShape(e),u=s?Di.Rot(o,-t.getPageRotation(s)):o,p=null===(r=(i=t.getShapeUtil(e)).onTranslateStart)||void 0===r?void 0:r.call(i,e);g.push(p?x(x({},p),{},b({},a,e[a]+u[a])):b({id:e.id,type:e.type},a,e[a]+u[a])),m+=d[e.id][l]+c}})),this.updateShapes(g),this}},{key:"packShapes",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageState.selectedIds,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;if(this.isReadOnly)return this;if(t.length<2)return this;for(var r,i,o=S(t.map((function(t){return e.getShapeById(t)})).filter((function(e){return!!e&&(!cc.is(e)||"binding"!==e.props.start.type&&"binding"!==e.props.end.type)}))),a={},s={},u=0,l=0;l<o.length;l++)r=o[l],i=this.getPageBounds(r),a[r.id]=i,s[r.id]=i.clone(),u+=i.width*i.height;var c=uo.Common(S(Object.values(a))),d=c.width;o.sort((function(e,t){return a[t.id].height-a[e.id].height}));for(var p,f,h=Math.max(Math.ceil(Math.sqrt(u/.95)),d),v=[new uo(c.x,c.y,h,1/0)],g=0,m=0,y=0;y<o.length;y++){i=s[(r=o[y]).id];for(var b=v.length-1;b>=0;b--)if(p=v[b],!(i.width>p.width||i.height>p.height)){i.x=p.x,i.y=p.y,m=Math.max(m,i.maxY),g=Math.max(g,i.maxX),i.width===p.width&&i.height===p.height?(f=v.pop(),b<v.length&&(v[b]=f)):i.height===p.height?(p.x+=i.width+n,p.width-=i.width+n):i.width===p.width?(p.y+=i.height+n,p.height-=i.height+n):(v.push(new uo(p.x+(i.width+n),p.y,p.width-(i.width+n),i.height)),p.y+=i.height+n,p.height-=i.height+n);break}}for(var w,k=uo.Common(Object.values(s)),_=Di.Sub(c.center,k.center),P=[],C=0;C<o.length;C++){var E,I;r=o[C],i=a[r.id],w=s[r.id];var M=this.getDeltaInParentSpace(r,Di.Sub(w.point,i.point).add(_)),T={id:r.id,type:r.type,x:r.x+M.x,y:r.y+M.y},j=null===(E=(I=this.getShapeUtil(r)).onTranslateStart)||void 0===E?void 0:E.call(I,x(x({},r),T));j?P.push(x(x({},T),j)):P.push(T)}return P.length&&this.updateShapes(P),this}},{key:"alignShapes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pageState.selectedIds;if(this.isReadOnly)return this;if(n.length<2)return this;var r=S(n.map((function(e){return t.getShapeById(e)}))),i=Object.fromEntries(r.map((function(e){return[e.id,t.getPageBounds(e)]}))),o=uo.Common(S(Object.values(i))),a=[];return r.forEach((function(n){var r,s,u=i[n.id];if(u){var l={x:0,y:0};switch(e){case"top":l.y=o.minY-u.minY;break;case"center-vertical":l.y=o.midY-u.minY-u.height/2;break;case"bottom":l.y=o.maxY-u.minY-u.height;break;case"left":l.x=o.minX-u.minX;break;case"center-horizontal":l.x=o.midX-u.minX-u.width/2;break;case"right":l.x=o.maxX-u.minX-u.width}var c=t.getParentShape(n),d=c?Di.Rot(l,-t.getPageRotation(c)):l,p=null===(r=(s=t.getShapeUtil(n)).onTranslateStart)||void 0===r?void 0:r.call(s,n);a.push(p?x(x({},p),{},{x:n.x+d.x,y:n.y+d.y}):{id:n.id,type:n.type,x:n.x+d.x,y:n.y+d.y})}})),this.updateShapes(a),this}},{key:"distributeShapes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pageState.selectedIds;if(this.isReadOnly)return this;if(n.length<3)return this;var r,i,o,a,s,u=n.length,l=S(n.map((function(e){return t.getShapeById(e)}))),c=Object.fromEntries(l.map((function(e){return[e.id,t.getPageBounds(e)]})));"horizontal"===e?(r="x",i="minX",o="maxX",a="midX",s="width"):(r="y",i="minY",o="maxY",a="midY",s="height");var d=[],p=l.sort((function(e,t){return c[e.id][i]-c[t.id][i]}))[0],f=l.sort((function(e,t){return c[t.id][o]-c[e.id][o]}))[0],h=c[p.id][a],v=(c[f.id][a]-h)/(u-1),g=h+v;return l.filter((function(e){return e!==p&&e!==f})).sort((function(e,t){return c[e.id][a]-c[t.id][a]})).forEach((function(e,n){var i,o,a={x:0,y:0};a[r]=g+v*n-c[e.id][s]/2-c[e.id][r];var u=t.getParentShape(e),l=u?Di.Rot(a,-t.getPageRotation(u)):a,p=null===(i=(o=t.getShapeUtil(e)).onTranslateStart)||void 0===i?void 0:i.call(o,e);d.push(p?x(x({},p),{},b({},r,e[r]+l[r])):b({id:e.id,type:e.type},r,e[r]+l[r]))})),this.updateShapes(d),this}},{key:"_resizeUnalignedShape",value:function(e,t,n){var r=n.initialShape.type,i=new Di(t.x,t.y);if(Math.abs(t.x)>Math.abs(t.y)?i.x=Math.sign(t.x)*Math.abs(t.y):i.y=Math.sign(t.y)*Math.abs(t.x),this.resizeShape(e,i,{initialShape:n.initialShape,initialBounds:n.initialBounds}),Math.sign(t.x)*Math.sign(t.y)<0){var o=go.Decompose(n.initialPageTransform).rotation;o-=2*o,this.updateShapes([{id:e,type:r,rotation:o}],!0)}var a=go.applyToPoint(n.initialPageTransform,n.initialBounds.center),s=this._scalePagePoint(a,n.scaleOrigin,t,n.scaleAxisRotation),u=this.getPageCenterById(e),l=this.getPagePointById(e);if(!u||!l)return this;var c=Di.Sub(s,u),d=Di.Add(l,c),p=this.getPointInParentSpace(e,d),f=p.x,h=p.y;return this.updateShapes([{id:e,type:r,x:f,y:h}],!0),this}},{key:"_scalePagePoint",value:function(e,t,n,r){var i=Di.RotWith(e,t,-r).sub(t),o=Di.MulV(i,n);return Di.Add(o,t).rotWith(t,r)}},{key:"resizeShape",value:function(e,t,n){var r,i,o,a,s,u;if(this.isReadOnly)return this;Number.isFinite(t.x)||(t=new Di(1,t.y)),Number.isFinite(t.y)||(t=new Di(t.x,1));var l=null!==(r=null===n||void 0===n?void 0:n.initialShape)&&void 0!==r?r:this.getShapeById(e);if(!l)return this;var c=null!==(i=null===n||void 0===n?void 0:n.scaleOrigin)&&void 0!==i?i:null===(o=this.getPageBoundsById(e))||void 0===o?void 0:o.center;if(!c)return this;var d=this.getPageRotationById(e);if(null==d)return this;var p=null!==(a=null===n||void 0===n?void 0:n.scaleAxisRotation)&&void 0!==a?a:d,f=null!==(s=null===n||void 0===n?void 0:n.initialPageTransform)&&void 0!==s?s:this.getPageTransformById(e);if(!f)return this;var h=null!==(u=null===n||void 0===n?void 0:n.initialBounds)&&void 0!==u?u:this.getBoundsById(e);if(!h)return this;if(!Zi(d,p))return this._resizeUnalignedShape(e,t,x(x({},n),{},{initialBounds:h,scaleOrigin:c,scaleAxisRotation:p,initialPageTransform:f,initialShape:l}));var v=this.getShapeUtil(l);if(v.isAspectRatioLocked(l)&&(t=Math.abs(t.x)>Math.abs(t.y)?new Di(t.x,Math.sign(t.y)*Math.abs(t.x)):new Di(Math.sign(t.x)*Math.abs(t.y),t.y)),v.onResize&&v.canResize(l)){var g,m,y=this._scalePagePoint(go.applyToPoint(f,new Di(0,0)),c,t,p),b=this.getPointInParentSpace(l.id,y),w=new Di(t.x,t.y),k=Wi((d-p)%Math.PI,0);w.x=k?t.x:t.y,w.y=k?t.y:t.x;var S=go.applyToPoint(f,new Di),_=this.getPointInParentSpace(l.id,S),P=_.x,C=_.y;this.updateShapes([x({id:e,type:l.type,x:b.x,y:b.y},v.onResize(x(x({},l),{},{x:P,y:C}),{newPoint:b,handle:null!==(g=null===n||void 0===n?void 0:n.dragHandle)&&void 0!==g?g:"bottom_right",mode:null!==(m=null===n||void 0===n?void 0:n.mode)&&void 0!==m?m:"scale_shape",scaleX:w.x,scaleY:w.y,initialBounds:h,initialShape:l}))],!0)}else{var E=go.applyToPoint(f,h.center),I=this._scalePagePoint(E,c,t,p),M=this.getPointInParentSpace(l.id,E),T=this.getPointInParentSpace(l.id,I),j=Di.Sub(T,M);this.updateShapes([{id:e,type:l.type,x:l.x+j.x,y:l.y+j.y}],!0)}return this}},{key:"stretchShapes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pageState.selectedIds;if(this.isReadOnly)return this;if(n.length<2)return this;var r=S(n.map((function(e){return t.getShapeById(e)}))),i=Object.fromEntries(r.map((function(e){return[e.id,t.getBounds(e)]}))),o=Object.fromEntries(r.map((function(e){return[e.id,t.getPageBounds(e)]}))),a=uo.Common(S(Object.values(o)));switch(e){case"vertical":this.batch((function(){var e,n=y(r);try{for(n.s();!(e=n.n()).done;){var s=e.value;if(!(t.getPageRotation(s)%Bi)){var u=i[s.id],l=o[s.id],c=t.getDeltaInParentSpace(s,new Di(0,a.minY-l.minY)),d=Di.Add(c,s),p=d.x,f=d.y;t.updateShapes([{id:s.id,type:s.type,x:p,y:f}],!0);var h=new Di(1,a.height/l.height);t.resizeShape(s.id,h,{initialBounds:u,scaleOrigin:new Di(l.center.x,a.minY),scaleAxisRotation:0})}}}catch(v){n.e(v)}finally{n.f()}}));break;case"horizontal":this.batch((function(){var e,n=y(r);try{for(n.s();!(e=n.n()).done;){var s=e.value,u=i[s.id],l=o[s.id];if(!(t.getPageRotation(s)%Bi)){var c=t.getDeltaInParentSpace(s,new Di(a.minX-l.minX,0)),d=Di.Add(c,s),p=d.x,f=d.y;t.updateShapes([{id:s.id,type:s.type,x:p,y:f}],!0);var h=new Di(a.width/l.width,1);t.resizeShape(s.id,h,{initialBounds:u,scaleOrigin:new Di(a.minX,l.center.y),scaleAxisRotation:0})}}}catch(v){n.e(v)}finally{n.f()}}))}return this.updateShapes([]),this}},{key:"reparentShapesById",value:function(e,t,n){var r,i=this,o=[],a=Dn.isId(t)?go.Identity():this.getPageTransformById(t),s=a.decompose().rotation,u=[],l=S(this.getSortedChildIds(t).map((function(e){return i.getShapeById(e)})));if(n){var c=l.find((function(e){return e.index===n}));if(c){var d=l[l.indexOf(c)+1];u=d?Ts(n,d.index,e.length):js(n,e.length)}else{var p=l.sort(Ds).find((function(e){return e.index>n}));u=p?Ts(n,p.index,e.length):js(n,e.length)}}else{var f=l.length&&l[l.length-1];u=f?js(f.index,e.length):zs(e.length)}for(var h=0;h<e.length;h++){r=e[h];var v=this.getShapeById(r),g=this.getPagePointById(r);if(v&&g){var m=go.applyToPoint(go.Inverse(a),g),y=this.getPageRotation(v)-s;o.push({id:v.id,type:v.type,parentId:t,x:m.x,y:m.y,rotation:y,index:u[h]})}}return this.updateShapes(o),this}},{key:"select",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.setSelectedIds(t),this}},{key:"deselect",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=this.selectedIds;return r.length>0&&t.length>0&&this.setSelectedIds(r.filter((function(e){return!t.includes(e)}))),this}},{key:"selectAll",value:function(){var e=this.getSortedChildIds(this.currentPageId);return e.length<=0||this.setSelectedIds(e),this}},{key:"getShapesAndDescendantsInOrder",value:function(e){for(var t=this,n=[],r=new Set,i=M(e);i.length>0;){var o=i.pop();if(!o)break;r.has(o)||(n.push(o),this.getSortedChildIds(o).forEach((function(e){i.push(e)})))}var a=n.map((function(e){return t.getShapeById(e)})).filter((function(e){return"group"!==e.type})),s=this.sortedShapesArray;return a.sort((function(e,t){return s.indexOf(e)-s.indexOf(t)})),a}},{key:"selectNone",value:function(){return this.selectedIds.length>0&&this.setSelectedIds([]),this}},{key:"setCurrentPageId",value:function(e){return this._setCurrentPageId(e),this}},{key:"updateInstanceState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._updateInstanceState(e,t,n),this}},{key:"hoveredId",get:function(){return this.pageState.hoveredId}},{key:"hoveredShape",get:function(){var e;return this.hoveredId&&null!==(e=this.getShapeById(this.hoveredId))&&void 0!==e?e:null}},{key:"setHoveredId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e===this.pageState.hoveredId||this.setInstancePageState({hoveredId:e},!0),this}},{key:"setErasingIds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.erasingIdsSet;return e.length===t.size&&e.every((function(e){return t.has(e)}))||this.setInstancePageState({erasingIds:e},!0),this}},{key:"setCursor",value:function(e){var t=this.cursor,n=x(x({},t),{},{rotation:0},e);return t.type===n.type&&t.rotation===n.rotation&&t.color===n.color||this.updateInstanceState({cursor:n},!0),this}},{key:"setScribble",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.updateInstanceState({scribble:e},!0),this}},{key:"setBrush",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!t&&this.brush,this.batch((function(){e.updateInstanceState({brush:t},!0)})),this}},{key:"rotateShapesBy",value:function(e,t){return e.length<=0||Ls({delta:t,snapshot:Rs({app:this}),app:this,stage:"one-off"}),this}},{key:"nudgeShapes",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.length<=0)return this;var r,i=this.isGridMode?n?5*this.gridSize:this.gridSize:n?10:1,o=Di.Mul(Yo[t],i),a=[],s=y(e);try{for(s.s();!(r=s.n()).done;){var u,l,c=r.value,d=this.getShapeById(c);if(!d)throw Error("Could not find a shape with the id ".concat(c,"."));var p=this.getDeltaInParentSpace(d,o),f=null===(u=(l=this.getShapeUtil(d)).onTranslateStart)||void 0===u?void 0:u.call(l,d);a.push(f?x(x({},f),{},{x:d.x+p.x,y:d.y+p.y}):{id:c,x:d.x+p.x,y:d.y+p.y,type:d.type})}}catch(h){s.e(h)}finally{s.f()}return this.updateShapes(a),this}},{key:"duplicateShapes",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedIds,n=arguments.length>1?arguments[1]:void 0;if(t.length<=0)return this;for(var r=new Set(t),i=[],o=M(t);o.length>0;){var a=o.pop();if(!a)break;i.push(a),this.getSortedChildIds(a).forEach((function(e){return o.push(e)}))}i.reverse();var s=new Map(i.map((function(t){return[t,e.createShapeId()]}))),u=S(i.map((function(t){var i,o=e.getShapeById(t);if(!o)return null;var a=s.get(t),u=0,l=0;if(n&&r.has(t)){var c=e.getParentTransform(o),d=new Di(n.x,n.y).rot(-go.Decompose(c).rotation);u=d.x,l=d.y}var p=null!==(i=o.parentId)&&void 0!==i?i:e.currentPageId,f=e.getSortedChildIds(p),h=f.indexOf(o.id),v=f[h+1],g=v?e.getShapeById(v):null,m=g?As(o.index,g.index):Os(o.index),y=x(x({},U(o)),{},{id:a,x:o.x+u,y:o.y+l,index:m});if(cc.is(o)&&cc.is(y)){if("binding"===o.props.start.type){var b=s.get(o.props.start.boundShapeId);if(b)y.props.start.boundShapeId=b;else{var w=e.getPageBoundsById(o.props.start.boundShapeId),k=new Di(o.props.start.normalizedAnchor.x*w.width+w.minX,o.props.start.normalizedAnchor.y*w.height+w.minY),S=go.applyToPoint(go.Inverse(e.getTransform(y)),k);y.props.start={type:"point",x:S.x+u,y:S.y+l}}}if("binding"===o.props.end.type){var _=s.get(o.props.end.boundShapeId);if(_)y.props.end.boundShapeId=_;else{var P=e.getPageBoundsById(o.props.end.boundShapeId),C=new Di(o.props.end.normalizedAnchor.x*P.width+P.minX,o.props.end.normalizedAnchor.y*P.height+P.minY),E=go.applyToPoint(go.Inverse(e.getTransform(y)),C);y.props.end={type:"point",x:E.x+u,y:E.y+l}}}}return y})));return u.forEach((function(e){Cr(e.parentId)&&s.has(e.parentId)&&(e.parentId=s.get(e.parentId))})),this.history.batch((function(){var t=u.length+e.shapeIds.size>Fo;t&&hf(e);var r=t?u.slice(0,Fo-e.shapeIds.size):u,i=r.map((function(e){return e.id}));if(e.createShapes(r),e.setSelectedIds(i),void 0!==n){var o=e.viewportPageBounds,a=e.selectedPageBounds;a&&!o.contains(a)&&e.centerOnPoint(a.center.x,a.center.y,{duration:Uo})}})),this}},{key:"setProp",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=[],a=function e(t){var r,i=y(n.getSortedChildIds(t));try{for(i.s();!(r=i.n()).done;){var a=r.value,s=n.getShapeById(a);"group"===(null===s||void 0===s?void 0:s.type)&&e(s.id),o.push(s)}}catch(u){i.e(u)}finally{i.f()}};return this.history.batch((function(){if(n.updateInstanceState({propsForNextShape:ms(n.instanceState.propsForNextShape,b({},e,t))},r,i),n.isIn("select")){var s=n.pageState.selectedIds;if(s.length>0){var u=S(s.map((function(e){var t=n.getShapeById(e);if("group"===(null===t||void 0===t?void 0:t.type)){var r,i=y(n.getSortedChildIds(t.id));try{for(i.s();!(r=i.n()).done;){var s=r.value,u=n.getShapeById(s);"group"===(null===u||void 0===u?void 0:u.type)&&a(u.id),o.push(u)}}catch(l){i.e(l)}finally{i.f()}return o}return t}))).flat().filter((function(t){return void 0!==t.props[e]&&"group"!==(null===t||void 0===t?void 0:t.type)}));if(n.updateShapes(u.map((function(n){var r=x(x({},n.props),{},b({},e,t));return"color"===e&&"labelColor"in r&&(r.labelColor="black"),{id:n.id,type:n.type,props:r}})),r),"color"!==e&&"opacity"!==e){var l,c=[],d=y(u);try{for(d.s();!(l=d.n()).done;){var p=l.value,f=n.getShapeById(p.id);if(f){var h=n.getShapeUtil(f),v=h.bounds(p),g=h.bounds(f),m={id:p.id,type:p.type},w=!1;if(v.width!==g.width)if(w=!0,jd.is(p))switch(p.props.align){case"middle":m.x=f.x+(v.width-g.width)/2;break;case"end":m.x=f.x+v.width-g.width}else m.x=f.x+(v.width-g.width)/2;v.height!==g.height&&(w=!0,m.y=f.y+(v.height-g.height)/2),w&&c.push(m)}}}catch(k){d.e(k)}finally{d.f()}c.length&&n.updateShapes(c,r)}}}n.updateInstanceState({propsForNextShape:ms(n.instanceState.propsForNextShape,b({},e,t))},r,i)})),this}},{key:"_setCamera",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.camera.z,r=this.camera;return r.x===e&&r.y===t&&r.z===n||(this.store.put([x(x({},r),{},{x:e,y:t,z:n})]),this._cameraManager.tick(),this.emit("change-camera",this.camera)),this}},{key:"setCamera",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.camera.z;return this.stopCameraAnimation(),e=Number.isNaN(e)?0:e,t=Number.isNaN(t)?0:t,n=Number.isNaN(n)?1:n,this._setCamera(e,t,n),this}},{key:"animateCamera",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.camera.z,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$o;e=Number.isNaN(e)?0:e,t=Number.isNaN(t)?0:t,n=Number.isNaN(n)?1:n;var i=this.viewportScreenBounds,o=i.width,a=i.height,s=new uo(-e,-t,o/n,a/n);return this._animateToViewport(s,r)}},{key:"centerOnPoint",value:function(e,t,n){if(!this.canMoveCamera)return this;var r=this.viewportPageBounds,i=r.width,o=r.height,a=this.camera;return null!==n&&void 0!==n&&n.duration?this.animateCamera(-(e-i/2),-(t-o/2),a.z,n):this.setCamera(-(e-i/2),-(t-o/2),a.z),this}},{key:"zoomToFit",value:function(e){var t=this;if(!this.canMoveCamera)return this;var n=M(this.shapeIds);if(n.length<=0)return this;var r=uo.Common(S(n.map((function(e){return t.getPageBoundsById(e)}))));return this.zoomToBounds(r.minX,r.minY,r.width,r.height,void 0,e),this}},{key:"resetZoom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewportScreenCenter,t=arguments.length>1?arguments[1]:void 0;if(!this.canMoveCamera)return this;var n=this.camera,r=n.x,i=n.y,o=n.z,a=e.x,s=e.y;return null!==t&&void 0!==t&&t.duration?this.animateCamera(r+(a/1-a)-(a/o-a),i+(s/1-s)-(s/o-s),1,t):this.setCamera(r+(a/1-a)-(a/o-a),i+(s/1-s)-(s/o-s),1),this}},{key:"zoomIn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewportScreenCenter,t=arguments.length>1?arguments[1]:void 0;if(!this.canMoveCamera)return this;for(var n=this.camera,r=n.x,i=n.y,o=n.z,a=8,s=1;s<Ko.length;s++){var u=Ko[s];if(!(u-o<=(u-Ko[s-1])/2)){a=u;break}}var l=e.x,c=e.y;return null!==t&&void 0!==t&&t.duration?this.animateCamera(r+(l/a-l)-(l/o-l),i+(c/a-c)-(c/o-c),a,t):this.setCamera(r+(l/a-l)-(l/o-l),i+(c/a-c)-(c/o-c),a),this}},{key:"zoomOut",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewportScreenCenter,t=arguments.length>1?arguments[1]:void 0;if(!this.canMoveCamera)return this;for(var n=this.camera,r=n.x,i=n.y,o=n.z,a=Vo,s=Ko.length-1;s>0;s--){var u=Ko[s-1],l=Ko[s];if(!(l-o>=(l-u)/2)){a=u;break}}var c=e.x,d=e.y;return null!==t&&void 0!==t&&t.duration?this.animateCamera(r+(c/a-c)-(c/o-c),i+(d/a-d)-(d/o-d),a,t):this.setCamera(r+(c/a-c)-(c/o-c),i+(d/a-d)-(d/o-d),a),this}},{key:"zoomToSelection",value:function(e){var t=this;if(!this.canMoveCamera)return this;var n=this.selectedIds;if(n.length<=0)return this;var r=uo.Common(S(n.map((function(e){return t.getPageBoundsById(e)}))));return this.zoomToBounds(r.minX,r.minY,r.width,r.height,Math.max(1,this.camera.z),e),this}},{key:"panZoomIntoView",value:function(e,t){var n=this;if(!this.canMoveCamera)return this;if(e.length<=0)return this;var r=uo.Common(S(e.map((function(e){return n.getPageBoundsById(e)})))),i=this.viewportPageBounds;if(i.h<r.h||i.w<r.w)return this.zoomToBounds(r.minX,r.minY,r.width,r.height,this.camera.z,t),this;var o=this._activeAreaManager.offsets.value,a=i.y+o.top,s=i.maxY-o.right,u=i.maxY-o.bottom,l=i.x+o.left,c=r.y,d=r.maxX,p=r.maxY,f=r.x,h=0,v=0;u<p?v=u-p:a>c&&(v=a-c),s<d?h=s-d:l>f&&(h=l-f);var g=this.camera;return null!==t&&void 0!==t&&t.duration?this.animateCamera(g.x+h,g.y+v,g.z,t):this.setCamera(g.x+h,g.y+v,g.z),this}},{key:"zoomToBounds",value:function(e,t,n,r,i,o){if(!this.canMoveCamera)return this;var a=this.viewportScreenBounds,s=Math.min(256,.28*a.width),u=Ki(Math.min((a.width-s)/n,(a.height-s)/r),Vo,8);return void 0!==i&&(u=Math.min(i,u)),null!==o&&void 0!==o&&o.duration?this.animateCamera(-e+(a.width-n*u)/2/u,-t+(a.height-r*u)/2/u,u,o):this.setCamera(-e+(a.width-n*u)/2/u,-t+(a.height-r*u)/2/u,u),this}},{key:"pan",value:function(e,t,n){var r;if(!this.canMoveCamera)return this;var i=this.camera,o=i.x,a=i.y,s=i.z,u=new Di(e,t).div(s);return null!==(r=null===n||void 0===n?void 0:n.duration)&&void 0!==r&&r?this.animateCamera(o+u.x,a+u.y,s,n):(this.setCamera(o+u.x,a+u.y,s),this)}},{key:"stopCameraAnimation",value:function(){return this.emit("stop-camera-animation"),this}},{key:"_animateViewport",value:function(e){var t=this;if(this._viewportAnimation){this.once("stop-camera-animation",(function e(){t.removeListener("tick",t._animateViewport),t.removeListener("stop-camera-animation",e)})),this._viewportAnimation.elapsed+=e;var n=this._viewportAnimation,r=n.elapsed,i=n.easing,o=n.duration,a=n.start,s=n.end;if(r>o){var u=this.viewportScreenBounds.width/s.width,l=-s.x,c=-s.y;return this._setCamera(l,c,u),this.removeListener("tick",this._animateViewport),void(this._viewportAnimation=null)}var d=i(1-(o-r)/o),p=a.minX+(s.minX-a.minX)*d,f=a.minY+(s.minY-a.minY)*d,h=a.maxX+(s.maxX-a.maxX)*d,v=a.maxY+(s.maxY-a.maxY)*d,g=new uo(p,f,h-p,v-f),m=this.viewportScreenBounds.width/g.width,y=-g.x,b=-g.y;this._setCamera(y,b,m)}}},{key:"_animateToViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,r=void 0===n?0:n,i=t.easing,o=void 0===i?zi.easeInOutCubic:i,a=this.viewportPageBounds.clone();return this.stopCameraAnimation(),this._viewportAnimation={elapsed:0,duration:r,easing:o,start:a,end:e},this.addListener("tick",this._animateViewport),this}},{key:"slideCamera",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.canMoveCamera)return this;var n=t.speed,r=t.direction,i=t.friction,o=t.speedThreshold,a=void 0===o?.01:o,s=n;this.stopCameraAnimation();var u=function t(){e.removeListener("tick",l),e.removeListener("stop-camera-animation",t)};this.once("stop-camera-animation",u);var l=function(t){var n=e.camera,o=n.x,l=n.y,c=n.z,d=r.clone().mul(s*t/c);(s*=1-i)<a?u():e._setCamera(o+d.x,l+d.y,c)};return this.addListener("tick",l),this}},{key:"animateToShape",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$o;if(!this.canMoveCamera)return this;var n=Bd(this),r=n.width/n.height,i=this.getPageBoundsById(e);if(!i)return this;var o=i.width/i.height,a=i.clone(),s=i.width/n.width;return a.width+=(n.left+n.right)*s,a.height+=(n.top+n.bottom)*s,a.x-=n.left*s,a.y-=n.top*s,o>r?(a.height=i.width/r,a.y-=(a.height-i.height)/2):(a.width=i.height*r,a.x-=(a.width-i.width)/2),this._animateToViewport(a,t)}},{key:"blur",value:function(){return this.dispatch({type:"misc",name:"blur"}),this}},{key:"cancel",value:function(){return this.dispatch({type:"misc",name:"cancel"}),this}},{key:"interrupt",value:function(){return this.dispatch({type:"misc",name:"interrupt"}),this}},{key:"complete",value:function(){return this.dispatch({type:"misc",name:"complete"}),this}},{key:"onCreateAssetFromFile",value:function(){var e=Ai(Ti().mark((function e(t){return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ka(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onCreateBookmarkFromUrl",value:function(){var e=Ai(Ti().mark((function e(t){var n,r,i,o,a,s,u,l,c;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{method:"GET",mode:"no-cors"});case 3:return u=e.sent,e.next=6,u.text();case 6:return l=e.sent,c=(new DOMParser).parseFromString(l,"text/html"),e.abrupt("return",{image:null!==(n=null===(r=c.head.querySelector('meta[property="og:image"]'))||void 0===r?void 0:r.getAttribute("content"))&&void 0!==n?n:"",title:null!==(i=null===(o=c.head.querySelector('meta[property="og:title"]'))||void 0===o?void 0:o.getAttribute("content"))&&void 0!==i?i:"",description:null!==(a=null===(s=c.head.querySelector('meta[property="og:description"]'))||void 0===s?void 0:s.getAttribute("content"))&&void 0!==a?a:""});case 11:return e.prev=11,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",{image:"",title:"",description:""});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"groupShapes",value:function(){var e,t,n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedIds,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Er();if(this.isReadOnly)return this;if(r.length<=1)return this;var o=S(r.map((function(e){return n.getShapeById(e)}))),a=o.sort(Ds).map((function(e){return e.id})),s=uo.Common(S(o.map((function(e){return n.getPageBounds(e)})))).point,u=s.x,l=s.y,c=null!==(e=this.findCommonAncestor(o))&&void 0!==e?e:this.currentPageId;if("select"!==this.currentToolId)return this;this.isIn("select.idle")||this.cancel();var d=o.filter((function(e){return e.parentId===c})).sort(Ds),p=null===(t=d[d.length-1])||void 0===t?void 0:t.index;return this.batch((function(){n.createShapes([{id:i,type:"group",parentId:c,index:p,x:u,y:l,props:{opacity:"1"}}]),n.reparentShapesById(a,i),n.select(i)})),this}},{key:"ungroupShapes",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedIds;if(this.isReadOnly)return this;if(0===t.length)return this;if("select"!==this.currentToolId)return this;this.isIn("select.idle")||this.cancel();var n=new Set,r=S(t.map((function(t){return e.getShapeById(t)}))),i=[];return r.forEach((function(e){sd.is(e)?i.push(e):n.add(e.id)})),0===i.length||this.batch((function(){for(var t,r=0,o=i.length;r<o;r++){t=i[r];for(var a=e.getSortedChildIds(t.id),s=0,u=a.length;s<u;s++)n.add(a[s]);e.reparentShapesById(a,t.parentId,t.index)}e.deleteShapes(i.map((function(e){return e.id}))),e.select.apply(e,M(n))})),this}}]),n}(No.EventEmitter),b(sf,"styles",ua),sf),ff=pf;function hf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.currentPageId,n=e.getPageById(t).name;e.emit("max-shapes",{name:n,pageId:t,count:Fo})}df([Oe],ff.prototype,"canMoveCamera",1),df([Oe],ff.prototype,"_pageTransformCache",1),df([Oe],ff.prototype,"_pageBoundsCache",1),df([Oe],ff.prototype,"_pageMaskCache",1),df([Oe],ff.prototype,"_clipPathCache",1),df([Oe],ff.prototype,"canUndo",1),df([Oe],ff.prototype,"canRedo",1),df([Oe],ff.prototype,"erasingIds",1),df([Oe],ff.prototype,"hintingIds",1),df([Oe],ff.prototype,"erasingIdsSet",1),df([Oe],ff.prototype,"allowUiPaste",1),df([Oe],ff.prototype,"props",1),df([Oe],ff.prototype,"_arrowBindingsIndex",1),df([Oe],ff.prototype,"documentSettings",1),df([Oe],ff.prototype,"_userDocumentSettings",1),df([Oe],ff.prototype,"_pageState",1),df([Oe],ff.prototype,"camera",1),df([Oe],ff.prototype,"zoomLevel",1),df([Oe],ff.prototype,"selectedIds",1),df([Oe],ff.prototype,"selectedIdsSet",1),df([Oe],ff.prototype,"_pages",1),df([Oe],ff.prototype,"pages",1),df([Oe],ff.prototype,"_pageStates",1),df([Oe],ff.prototype,"renderingShapes",1),df([Oe],ff.prototype,"allShapesCommonBounds",1),df([Oe],ff.prototype,"viewportScreenBounds",1),df([Oe],ff.prototype,"viewportScreenCenter",1),df([Oe],ff.prototype,"viewportPageBounds",1),df([Oe],ff.prototype,"cullingBounds",1),df([Oe],ff.prototype,"cullingBoundsExpanded",1),df([Oe],ff.prototype,"viewportPageCenter",1),df([Oe],ff.prototype,"editingShape",1),df([Oe],ff.prototype,"selectedPageBounds",1),df([Oe],ff.prototype,"selectionRotation",1),df([Oe],ff.prototype,"selectionBounds",1),df([Oe],ff.prototype,"selectionPageCenter",1),df([Oe],ff.prototype,"shapesArray",1),df([Oe],ff.prototype,"sortedShapesArray",1),df([Oe],ff.prototype,"selectedShapes",1),df([Oe],ff.prototype,"onlySelectedShape",1),df([Oe],ff.prototype,"_currentUserPresence",1),df([Oe],ff.prototype,"_assets",1),df([Oe],ff.prototype,"hoveredId",1),df([Oe],ff.prototype,"hoveredShape",1);var vf={fonts:{draw:"./fonts/Shantell_Sans-Normal-SemiBold.woff2",serif:"./fonts/IBMPlexSerif-Medium.woff2",sansSerif:"./fonts/IBMPlexSans-Medium.woff2",monospace:"./fonts/IBMPlexMono-Medium.woff2"}},gf={error:null},mf=function(e){d(n,e);var t=v(n);function n(){var e;o(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return b(h(e=t.call.apply(t,[this].concat(i))),"state",gf),e}return l(n,[{key:"componentDidCatch",value:function(e){var t,n;null===(t=(n=this.props).onError)||void 0===t||t.call(n,e)}},{key:"render",value:function(){var e=this.state.error;return null!==e?this.props.fallback(e):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}}]),n}(t.Component),yf=n(1694),bf=fa((function(){var e=ma(),t=e.brush,n=e.isIn("select.brushing");return t&&n?(0,Mi.jsx)("rect",{className:"rs-brush",width:so(Math.max(1,t.w)),height:so(Math.max(1,t.h)),transform:"translate(".concat(t.x,",").concat(t.y,")")}):null})),wf=fa((function(e){var t=e.size,n=ma(),r=n.camera,i=r.x,o=r.y,a=r.z;return n.isGridMode?(0,Mi.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[(0,Mi.jsx)("defs",{children:na.map((function(e,n){var r=e.min,s=e.mid,u=e.step;return(0,Mi.jsx)(xf,{min:r,mid:s,step:u,x:i,y:o,z:a,size:t},"grid-layer-".concat(n))}))}),na.map((function(e,t){var n=e.step;return(0,Mi.jsx)("rect",{width:"100%",height:"100%",fill:"url(#grid-".concat(n,")")},"grid-rect-".concat(t))}))]}):null}));function xf(e){var t=e.step,n=e.min,r=e.mid,i=e.size,o=e.x,a=e.y,s=e.z,u=t*i*s,l=.5+o*s,c=.5+a*s,d=l>0?l%u:u+l%u,p=c>0?c%u:u+c%u,f=s<r?L(s,[n,r],[0,1]):1;return(0,Mi.jsx)("pattern",{id:"grid-".concat(t),width:u,height:u,patternUnits:"userSpaceOnUse",children:(0,Mi.jsx)("circle",{className:"tl-grid-dot",cx:d,cy:p,r:1,opacity:f})},"grid-pattern-".concat(t))}function kf(e){var n=e.id,r=e.handle,i=function(e,n){var r=ma();return t.useMemo((function(){var t,i;return{onPointerDown:function(t){if(!t.isKilled){us(as(t.currentTarget),t);var i=ml(r,e,n),o=i.shape,a=i.handle;a&&r.dispatch(x({type:"pointer",target:"handle",handle:a,shape:o,name:"pointer_down"},Us(t,r.getContainer())))}},onPointerMove:function(o){if(!o.isKilled&&(o.clientX!==t||o.clientY!==i)){t=o.clientX,i=o.clientY;var a=ml(r,e,n),s=a.shape,u=a.handle;u&&r.dispatch(x({type:"pointer",target:"handle",handle:u,shape:s,name:"pointer_move"},Us(o,r.getContainer())))}},onPointerUp:function(t){if(!t.isKilled){ls(as(t.currentTarget),t);var i=ml(r,e,n),o=i.shape,a=i.handle;a&&r.dispatch(x({type:"pointer",target:"handle",handle:a,shape:o,name:"pointer_up"},Us(t,r.getContainer())))}},onPointerEnter:function(t){if(!t.isKilled){var i=ml(r,e,n),o=i.shape,a=i.handle;a&&r.dispatch(x({type:"pointer",target:"handle",handle:a,shape:o,name:"pointer_enter"},Us(t,r.getContainer())))}},onPointerLeave:function(t){if(!t.isKilled){var i=ml(r,e,n),o=i.shape,a=i.handle;a&&r.dispatch(x({type:"pointer",target:"handle",handle:a,shape:o,name:"pointer_leave"},Us(t,r.getContainer())))}}}}),[r,e,n])}(n,r.id),o=r.x,a=r.y,s=r.type;return(0,Mi.jsxs)("g",x(x({className:yf("rs-handle",{"rs-handle-hint":"vertex"!==s}),"aria-label":"handle",transform:"translate(".concat(o,", ").concat(a,")")},i),{},{children:[(0,Mi.jsx)("circle",{className:"rs-handle-bg"}),(0,Mi.jsx)("circle",{className:"rs-handle-fg"})]}))}var Sf=fa((function(){var e,t=ma(),n=t.zoomLevel,r=t.isChangingStyle,i=t.onlySelectedShape,o=t.isInAny("select.idle","select.pointing_handle")&&!r&&!t.isReadOnly;if(!i||!o)return null;var a=t.getShapeUtil(i),s=null===(e=a.handles)||void 0===e?void 0:e.call(a,i);if(!s)return null;var u=t.getPageTransform(i);if(!u)return null;for(var l=[],c=0,d=s[c];c<s.length;d=s[++c]){if("vertex"!==d.type){var p=s[c-1],f=s[c+1];if(p&&f&&Math.hypot(p.y-f.y,p.x-f.x)<48/n)continue}l.push(d)}return l.sort((function(e){return"vertex"===e.type?1:-1})),(0,Mi.jsx)("g",{transform:go.toCssString(u),children:l.map((function(e){return(0,Mi.jsx)(kf,{id:i.id,handle:e},e.id)}))})})),_f=(0,t.memo)((function(e){var t=e.zoom,n=e.point,r=e.color;return n?(0,Mi.jsx)("use",{href:"#cursor",transform:"translate(".concat(n.x,", ").concat(n.y,") scale(").concat(1/t,")"),color:r}):null})),Pf=function(e){var t=e.zoom,n=e.point,r=e.color,i=e.viewport,o=Ki(n.x,i.minX+5/t,i.maxX-5/t),a=Ki(n.y,i.minY+5/t,i.maxY-5/t),s=Ji(Di.Angle(i.center,n));return(0,Mi.jsx)(Mi.Fragment,{children:(0,Mi.jsx)("use",{href:"#cursor_hint",transform:"translate(".concat(o,", ").concat(a,") scale(").concat(1/t,") rotate(").concat(s,")"),color:r})})},Cf=function(){function e(t){o(this,e),this.shape=t}return l(e,[{key:"equals",value:function(e){var t,n;return(null===(t=this.shape)||void 0===t?void 0:t.props)===(null===e||void 0===e||null===(n=e.shape)||void 0===n?void 0:n.props)}}]),e}(),Ef=function(e){var t=e.shape,n=e.util;return la("Indicator:",(function(){return n.indicator(t)}))},If=function(e){var t=e.app,n=e.id,r=va("shape",(function(){return new Cf(t.store.get(n))}),[t,n]);return r.shape?(0,Mi.jsx)(mf,{fallback:Mf,onError:function(e){return t.annotateError(e,{origin:"react.shapeIndicator",willCrashApp:!1})},children:(0,Mi.jsx)(Ef,{shape:r.shape,util:t.getShapeUtil(r.shape)})}):null};function Mf(){return(0,Mi.jsx)("circle",{cx:4,cy:4,r:8,strokeWidth:"1",stroke:"red"})}var Tf=t.memo((function(e){var t=e.id,n=e.isHinting,r=e.color,i=ma(),o=va("transform",(function(){var e=i.getPageTransformById(t);return e?go.toCssString(e):""}),[i,t]);return(0,Mi.jsx)("g",{className:yf("rs-shape-indicator",{"rs-shape-indicator__hinting":n}),transform:o,stroke:null!==r&&void 0!==r?r:"var(--color-selected)",children:(0,Mi.jsx)(If,{app:i,id:t})})})),jf=fa((function(){var e=ma(),n=e.viewportPageBounds,r=e.zoomLevel,i=function(){var e=ma(),n=ha("time",Date.now());return t.useEffect((function(){var e=setInterval((function(){return n.set(Date.now())}),5e3);return function(){return clearInterval(e)}}),[n]),(0,t.useMemo)((function(){return e.store.query.records("user_presence",(function(){return{lastActivityTimestamp:{gt:n.value-Af},userId:{neq:e.userId}}}))}),[e,n])}();return(0,Mi.jsx)("g",{children:i.value.map((function(e){return(0,Mi.jsx)(Of,{presence:e,viewport:n,zoom:r},e.id)}))})})),Af=1e4,Of=fa((function(e){var n=e.presence,r=e.viewport,i=e.zoom,o=ma(),a=n.userId,s=n.color,u=n.cursor,l=n.lastUsedInstanceId,c=(0,t.useMemo)((function(){return l?o.store.query.record("instance_page_state",(function(){return{instanceId:{eq:l},pageId:{eq:o.currentPageId}}})):null}),[o,l]);if(!l||!c)return null;var d=o.store.get(l);if(!d)return null;if(d.currentPageId!==o.currentPageId)return null;if(!c.value)return null;var p=d.brush,f=d.scribble,h=c.value.selectedIds,v=!(u.x<r.minX-12/i||u.y<r.minY-16/i||u.x>r.maxX-12/i||u.y>r.maxY-16/i);return(0,Mi.jsxs)(Mi.Fragment,{children:[p?(0,Mi.jsxs)("g",{className:"rs-collaborator-brush",transform:"translate(".concat(p.x,",").concat(p.y,")"),children:[(0,Mi.jsx)("rect",{width:so(Math.max(1,p.w)),height:so(Math.max(1,p.h)),fill:s,opacity:.1}),(0,Mi.jsx)("rect",{width:so(Math.max(1,p.w)),height:so(Math.max(1,p.h)),fill:"none",stroke:s,opacity:.1})]},a+"_brush"):null,v?(0,Mi.jsx)(_f,{point:u,color:s,zoom:i},a+"_cursor"):(0,Mi.jsx)(Pf,{point:u,color:s,zoom:i,viewport:r},a+"_cursor_hint"),f?(0,Mi.jsx)(zf,{scribble:f,color:s,zoom:i},a+"_scribble"):null,h.map((function(e){return(0,Mi.jsx)(Tf,{id:e,color:s},a+"_"+e)}))]})}));function zf(e){var t=e.scribble,n=e.color,r=e.zoom;if(!t)return null;var i=uo.FromPoints(t.points),o=Ws(Co(t.points,{size:t.size/r,start:{taper:!0},last:"stopping"===t.state||i.width<128&&i.height<128}));return(0,Mi.jsx)("path",{className:"tl-scribble",d:o,fill:n,opacity:.1})}var Df=fa((function(){var e=ma(),t=e.scribble,n=e.zoomLevel;if(!t)return null;var r=Ws(Co(t.points,{size:t.size/n,start:{taper:!0,easing:zi.linear},last:!1,simulatePressure:!1}));return(0,Mi.jsx)("path",{className:"tl-scribble",d:r,fill:"var(--color-".concat(t.color,")"),opacity:t.opacity})})),Nf=fa((function(){var e=ma(),n=t.useMemo((function(){return{onPointerDown:function(t){if(!t.isKilled){us(t.currentTarget,t);var n=x({type:"pointer",target:"selection",name:"pointer_down"},Us(t,e.getContainer()));e.dispatch(n)}},onPointerMove:function(t){if(!t.isKilled){var n=x({type:"pointer",target:"selection",name:"pointer_move"},Us(t,e.getContainer()));e.dispatch(n)}},onPointerUp:function(t){if(!t.isKilled){ls(t.currentTarget,t);var n=x({type:"pointer",target:"selection",name:"pointer_up"},Us(t,e.getContainer()));e.dispatch(n)}},onPointerEnter:function(t){if(!t.isKilled){var n=x({type:"pointer",target:"selection",name:"pointer_enter"},Us(t,e.getContainer()));e.dispatch(n)}},onPointerLeave:function(t){if(!t.isKilled){var n=x({type:"pointer",target:"selection",name:"pointer_leave"},Us(t,e.getContainer()));e.dispatch(n)}}}}),[e]),r=e.selectionBounds,i=e.selectedIds;if(!r)return null;var o=e.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_shape","select.pointing_selection","text.resizing");if(1===i.length){var a=e.getShapeById(i[0]);if(!a)return null;if(e.getShapeUtil(a).hideSelectionBoundsBg(a))return null}var s=go.toCssString(go.Compose(go.Translate(r.minX,r.minY),go.Rotate(e.selectionRotation)));return(0,Mi.jsx)("div",x({className:"tlui-selection__bg",draggable:!1,style:{transform:s,width:so(Math.max(1,r.width)),height:so(Math.max(1,r.height)),pointerEvents:o?"all":"none",opacity:o?1:0}},n))}));function Rf(e){var n=ma(),r=(0,t.useMemo)((function(){var t,r;return{onPointerDown:function(t){if(!t.isKilled&&0===t.button){var r=as(t.currentTarget);us(r,t),r.addEventListener("pointerup",(function e(){r.removeEventListener("pointerup",e),ls(r,t)})),n.dispatch(x({name:"pointer_down",type:"pointer",target:"selection",handle:e},Us(t,n.getContainer()))),t.stopPropagation()}},onPointerMove:function(i){i.isKilled||0===i.button&&(i.clientX===t&&i.clientY===r||(t=i.clientX,r=i.clientY,n.dispatch(x({name:"pointer_move",type:"pointer",target:"selection",handle:e},Us(i,n.getContainer())))))},onPointerUp:function(t){t.isKilled||0===t.button&&n.dispatch(x({name:"pointer_up",type:"pointer",target:"selection",handle:e},Us(t,n.getContainer())))}}}),[n,e]);return r}var Lf=Math.sqrt(Math.PI),Bf=function(e){var t=e.cx,n=e.cy,r=e.size,i=e.isHidden,o=e["data-wd"],a=Rf("mobile_rotate");return(0,Mi.jsxs)("g",{children:[(0,Mi.jsx)("circle",x({"data-wd":o,className:yf("rs-transparent","rs-mobile-rotate__bg",{"rs-hidden":i}),cx:t,cy:n},a)),(0,Mi.jsx)("circle",{className:yf("rs-mobile-rotate__fg",{"rs-hidden":i}),cx:t,cy:n,r:r/Lf})]})},Ff=function(e){var t=e.cx,n=e.cy,r=e.targetSize,i=e.corner,o=e.cursor,a=e.isHidden,s=e["data-wd"],u=Rf(i);return(0,Mi.jsx)("rect",x({className:yf("rs-transparent","rs-rotate-corner",{"rs-hidden":a}),"data-wd":s,"aria-label":"".concat(i," target"),x:so(t-3*r),y:so(n-3*r),width:so(Math.max(1,3*r)),height:so(Math.max(1,3*r)),cursor:o},u))},Uf=fa((function(){var e=ma(),t=va("isReadOnlyMode",(function(){return e.isReadOnly}),[e]),n=Rf("top"),r=Rf("right"),i=Rf("bottom"),o=Rf("left"),a=Rf("top_left"),s=Rf("top_right"),u=Rf("bottom_right"),l=Rf("bottom_left"),c=!e.isMenuOpen&&"default"===e.cursor.type,d=e.isCoarsePointer,p=e.selectionBounds;if(!p)return null;var f=e.selectedShapes,h=e.selectionRotation,v=e.isChangingStyle,g=Math.max(1,p.width),m=Math.max(1,p.height),y=e.zoomLevel,b=8/y,w=g<2*b,k=m<2*b,S=g<4*b,_=m<4*b,P=d?1.75:1,C=6/y*P,E=(S?C/2:C)*(.75*P),I=(_?C/2:C)*(.75*P),M=go.toCssString(go.Compose(go.Translate(p.minX,p.minY),go.Rotate(e.selectionRotation))),T=1===f.length?f[0]:null,j=(!T||!e.getShapeUtil(T).hideSelectionBoundsFg(T))&&!v,A=(e.isInAny("select.idle","select.brushing","select.editing_shape","select.scribble_brushing","select.pointing_canvas","select.pointing_selection","select.pointing_shape")||e.isIn("select.resizing")&&T&&"text"===f[0].type||e.isIn("select")&&e.inputs.ctrlKey)&&j,O=e.isInAny("select.idle","select.pointing_selection","select.pointing_shape","select.pointing_selection")&&!v&&!t,z=!d&&!(w||k)&&O&&(!T||!e.getShapeUtil(T).hideRotateHandle(T)),D=d&&(!S||!_)&&O&&(!T||!e.getShapeUtil(T).hideRotateHandle(T)),N=O&&(!T||e.getShapeUtil(T).canResize(T)&&!e.getShapeUtil(T).hideResizeHandles(T)),R=w||k,L=w&&k,B=!O||!z,F=!O||!D,U=!O||!N,K=!O||!N||R,V=!O||!N||R,W=!O||!N||L,H=d;H&&f.every((function(t){return e.getShapeUtil(t).isAspectRatioLocked(t)}))&&(H=!1);var Y=!O||!N||R||L||H;return(0,Mi.jsxs)("g",{transform:M,children:[A&&(0,Mi.jsx)("rect",{className:"tlui-selection__fg-outline",width:so(g),height:so(m)}),(0,Mi.jsxs)("g",{children:[(0,Mi.jsx)("g",{pointerEvents:"all",children:(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsx)(Ff,{"data-wd":"selection.rotate.top-left",cx:0,cy:0,targetSize:C,corner:"top_left_rotate",cursor:c?tu("nwse-rotate",h):void 0,isHidden:B}),(0,Mi.jsx)(Ff,{"data-wd":"selection.rotate.top-right",cx:g+3*C,cy:0,targetSize:C,corner:"top_right_rotate",cursor:c?tu("nesw-rotate",h):void 0,isHidden:B}),(0,Mi.jsx)(Ff,{"data-wd":"selection.rotate.bottom-left",cx:0,cy:m+3*C,targetSize:C,corner:"bottom_left_rotate",cursor:c?tu("swne-rotate",h):void 0,isHidden:B}),(0,Mi.jsx)(Ff,{"data-wd":"selection.rotate.bottom-right",cx:g+3*C,cy:m+3*C,targetSize:C,corner:"bottom_right_rotate",cursor:c?tu("senw-rotate",h):void 0,isHidden:B})]})}),(0,Mi.jsx)(Bf,{"data-wd":"selection.rotate.mobile",cx:S?1.5*-C:g/2,cy:S?m/2:1.5*-C,size:b,isHidden:F}),(0,Mi.jsxs)("g",{pointerEvents:"all",children:[(0,Mi.jsx)("rect",x({className:yf("rs-transparent",{"rs-hidden":Y}),"data-wd":"selection.resize.top","aria-label":"top target",x:0,y:so(0-(_?2*I:I)),width:so(Math.max(1,g)),height:so(Math.max(1,2*I)),style:c?{cursor:tu("ns-resize",h)}:void 0},n)),(0,Mi.jsx)("rect",x({className:yf("rs-transparent",{"rs-hidden":Y}),"data-wd":"selection.resize.right","aria-label":"right target",x:so(g-(S?0:E)),y:0,height:so(Math.max(1,m)),width:so(Math.max(1,2*E)),style:c?{cursor:tu("ew-resize",h)}:void 0},r)),(0,Mi.jsx)("rect",x({className:yf("rs-transparent",{"rs-hidden":Y}),"data-wd":"selection.resize.bottom","aria-label":"bottom target",x:0,y:so(m-(_?0:I)),width:so(Math.max(1,g)),height:so(Math.max(1,2*I)),style:c?{cursor:tu("ns-resize",h)}:void 0},i)),(0,Mi.jsx)("rect",x({className:yf("rs-transparent",{"rs-hidden":Y}),"data-wd":"selection.resize.left","aria-label":"left target",x:so(0-(S?2*E:E)),y:0,height:so(Math.max(1,m)),width:so(Math.max(1,2*E)),style:c?{cursor:tu("ew-resize",h)}:void 0},o)),(0,Mi.jsx)("rect",x({className:yf("rs-transparent",{"rs-hidden":U}),"data-wd":"selection.resize.top-left","aria-label":"top-left target",x:so(0-(S?2*E:1.5*E)),y:so(0-(_?2*I:1.5*I)),width:so(3*E),height:so(3*I),style:c?{cursor:tu("nwse-resize",h)}:void 0},a)),(0,Mi.jsx)("rect",x({className:yf("rs-transparent",{"rs-hidden":K}),"data-wd":"selection.resize.top-right","aria-label":"top-right target",x:so(g-(S?0:1.5*E)),y:so(0-(_?2*I:1.5*I)),width:so(3*E),height:so(3*I),style:c?{cursor:tu("nesw-resize",h)}:void 0},s)),(0,Mi.jsx)("rect",x({className:yf("rs-transparent",{"rs-hidden":W}),"data-wd":"selection.resize.bottom-right","aria-label":"bottom-right target",x:so(g-(S?E:1.5*E)),y:so(m-(_?I:1.5*I)),width:so(3*E),height:so(3*I),style:c?{cursor:tu("nwse-resize",h)}:void 0},u)),(0,Mi.jsx)("rect",x({className:yf("rs-transparent",{"rs-hidden":V}),"data-wd":"selection.resize.bottom-left","aria-label":"bottom-left target",x:so(0-(S?3*E:1.5*E)),y:so(m-(_?0:1.5*I)),width:so(3*E),height:so(3*I),style:c?{cursor:tu("nesw-resize",h)}:void 0},l)),(0,Mi.jsx)("rect",{"data-wd":"selection.resize.top-left",className:yf("rs-corner-handle",{"rs-hidden":U}),"aria-label":"top_left handle",x:so(0-b/2),y:so(0-b/2),width:so(b),height:so(b)}),(0,Mi.jsx)("rect",{"data-wd":"selection.resize.top-right",className:yf("rs-corner-handle",{"rs-hidden":K}),"aria-label":"top_right handle",x:so(g-b/2),y:so(0-b/2),width:so(b),height:so(b)}),(0,Mi.jsx)("rect",{"data-wd":"selection.resize.bottom-right",className:yf("rs-corner-handle",{"rs-hidden":W}),"aria-label":"bottom_right handle",x:so(g-b/2),y:so(m-b/2),width:so(b),height:so(b)}),(0,Mi.jsx)("rect",{"data-wd":"selection.resize.bottom-left",className:yf("rs-corner-handle",{"rs-hidden":V}),"aria-label":"bottom_left handle",x:so(0-b/2),y:so(m-b/2),width:so(b),height:so(b)})]})]})]})}));function Kf(){return(0,Mi.jsx)("div",{className:"rs-shape-error-boundary"})}var Vf=fa((function(e){var n=e.id,r=e.index,i=e.opacity,o=e.isCulled,a=ma(),s=function(e){var n=ma();return t.useMemo((function(){var t,r,i=Pl(n,e,"pointer_move");return{onPointerDown:Pl(n,e,"pointer_down"),onPointerUp:Pl(n,e,"pointer_up"),onPointerEnter:Pl(n,e,"pointer_enter"),onPointerLeave:Pl(n,e,"pointer_leave"),onPointerMove:function(e){if(!e.isKilled&&(e.clientX!==t||e.clientY!==r))return t=e.clientX,r=e.clientY,i(e)},onTouchStart:function(e){e.isKilled=!0,ss(e)},onTouchEnd:function(e){e.isKilled=!0,ss(e)}}}),[n,e])}(n),u=t.useRef(null);$s("set shape container transform position",(function(){var e=u.current;if(e){var t=a.getShapeById(n),r=a.getPageTransformById(n);if(!t||!r)return null;var i=go.toCssString(r);e.style.setProperty("transform",i)}}),[a]),$s("set shape container clip path / color",(function(){var e=u.current,t=a.getShapeById(n);if(e){if(!t)return null;var r=a.getClipPathById(n);e.style.setProperty("clip-path",null!==r&&void 0!==r?r:"none"),"color"in t.props&&e.style.setProperty("color",a.getCssColor(t.props.color))}}),[a]),$s("set shape height and width",(function(){var e=u.current,t=a.getShapeById(n);if(e){if(!t)return null;var r=a.getShapeUtil(t).bounds(t);e.style.setProperty("width",Math.ceil(r.width)+"px"),e.style.setProperty("height",Math.ceil(r.height)+"px")}}),[a]),t.useLayoutEffect((function(){var e=u.current;e&&(e.style.setProperty("opacity",i+""),e.style.setProperty("z-index",r+""))}),[i,r]);var l=a.getShapeById(n);if(!l)return null;var c=a.getShapeUtil(l);return(0,Mi.jsx)("div",{ref:u,className:"rs-shape","data-shape-type":l.type,draggable:!1,onPointerDown:s.onPointerDown,onPointerMove:s.onPointerMove,onPointerUp:s.onPointerUp,onPointerEnter:s.onPointerEnter,onPointerLeave:s.onPointerLeave,children:o&&c.canUnmount(l)?(0,Mi.jsx)(Hf,{shape:l,util:c}):(0,Mi.jsxs)(mf,{fallback:Kf,onError:function(e){return a.annotateError(e,{origin:"react.shape",willCrashApp:!1})},children:[" ",(0,Mi.jsx)(Wf,{shape:l,util:c})]})},n)})),Wf=t.memo((function(e){var t=e.shape,n=e.util;return la("InnerShape:"+n.type,(function(){return n.render(t)}))}),(function(e,t){return e.shape.props===t.shape.props})),Hf=t.memo((function(e){var t=e.shape,n=e.util.bounds(t);return(0,Mi.jsx)("div",{className:"rs-shape__culled",style:{transform:"translate(".concat(n.minX,"px, ").concat(n.minY,"px)"),width:n.width,height:n.height}})}),(function(){return!0}));function Yf(e){var t,n,r,i,o=e.points,a=2.5/e.zoom,s=o.reduce((function(e,t){return Math.min(e,t.x)}),1/0),u=o.reduce((function(e,t){return Math.max(e,t.x)}),-1/0),l=o.reduce((function(e,t){return Math.min(e,t.y)}),1/0),c=o.reduce((function(e,t){return Math.max(e,t.y)}),-1/0),d=o.some((function(e){return e.x===s&&e.y===l}));return d?(t=s,n=l,r=u,i=c):(t=s,n=c,r=u,i=l),(0,Mi.jsxs)("g",{className:"rs-snap-line",children:[(0,Mi.jsx)("line",{x1:t,y1:n,x2:r,y2:i}),o.map((function(e,t){return(0,Mi.jsx)("g",{transform:"translate(".concat(e.x,",").concat(e.y,")"),children:(0,Mi.jsx)("path",{className:"rs-snap-point",d:"M ".concat(-a,",").concat(-a," L ").concat(a,",").concat(a," M ").concat(-a,",").concat(a," L ").concat(a,",").concat(-a)})},t)}))]})}function Xf(e){var n,r=e.gaps,i=e.direction,o=3.5/e.zoom,a=[-1/0,1/0],s=null,u="horizontal"===i,l=y(r);try{for(l.s();!(n=l.n()).done;){var c=n.value;(s=io(a[0],a[1],u?c.startEdge[0].y:c.startEdge[0].x,u?c.startEdge[1].y:c.startEdge[1].x))&&((s=io((a=s)[0],a[1],u?c.endEdge[0].y:c.endEdge[0].x,u?c.endEdge[1].y:c.endEdge[1].x))&&(a=s))}}catch(p){l.e(p)}finally{l.f()}if(null===a)return null;var d=(a[0]+a[1])/2;return(0,Mi.jsx)("g",{className:"rs-snap-line",children:r.map((function(e,n){var r=e.startEdge,i=e.endEdge;return(0,Mi.jsx)(t.Fragment,{children:u?(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsx)("line",{x1:r[0].x,y1:d-2*o,x2:r[1].x,y2:d+2*o}),(0,Mi.jsx)("line",{x1:i[0].x,y1:d-2*o,x2:i[1].x,y2:d+2*o}),(0,Mi.jsx)("line",{x1:r[0].x,y1:d,x2:i[0].x,y2:d}),(0,Mi.jsx)("line",{x1:(r[0].x+i[0].x)/2,y1:d-o,x2:(r[0].x+i[0].x)/2,y2:d+o})]}):(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsx)("line",{x1:d-2*o,y1:r[0].y,x2:d+2*o,y2:r[1].y}),(0,Mi.jsx)("line",{x1:d-2*o,y1:i[0].y,x2:d+2*o,y2:i[1].y}),(0,Mi.jsx)("line",{x1:d,y1:r[0].y,x2:d,y2:i[0].y}),(0,Mi.jsx)("line",{x1:d-o,y1:(r[0].y+i[0].y)/2,x2:d+o,y2:(r[0].y+i[0].y)/2})]})},n)}))})}function qf(e){var t=e.line,n=e.zoom;switch(t.type){case"points":return(0,Mi.jsx)(Yf,x(x({},t),{},{zoom:n}));case"gaps":return(0,Mi.jsx)(Xf,x(x({},t),{},{zoom:n}));default:return null}}var $f=fa((function(){var e=ma(),t=e.zoomLevel;return(0,Mi.jsx)(Mi.Fragment,{children:e.snaps.lines.map((function(e){return(0,Mi.jsx)(qf,{line:e,zoom:t},e.id)}))})})),Gf=fa((function(e){var n=e.id,r=ma(),i=r.getShapeById(n),o=N(t.useState(""),2),a=o[0],s=o[1];return t.useEffect((function(){var e=!1;return Ai(Ti().mark((function t(){var i,o;return Ti().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=2;break}return t.abrupt("return");case 2:return i=r.getPageBoundsById(n),t.next=5,r.getSvg([n],{padding:0});case 5:(o=t.sent)&&i&&!e&&(o.style.setProperty("overflow","visible"),o.setAttribute("preserveAspectRatio","xMidYMin slice"),o.style.setProperty("transform","translate(".concat(i.x,"px, ").concat(i.y+i.h+12,"px)")),o.style.setProperty("border","1px solid black"),s(null===o||void 0===o?void 0:o.outerHTML));case 7:case"end":return t.stop()}}),t)})))(),function(){e=!0}}),[r,i,n]),(0,Mi.jsx)("div",{style:{paddingTop:12,position:"absolute"},children:(0,Mi.jsx)("div",{style:{display:"flex"},dangerouslySetInnerHTML:{__html:a}})})})),Qf=fa((function(e){var n=e.onDropOverride,r=ma(),i=t.useRef(null),o=t.useRef(null),a=t.useRef(null);!function(){var e=ma(),n=qs();(0,t.useEffect)((function(){var t=function(t){if(!t.altKey||e.root.path.value.endsWith(".idle")||ru()||t.preventDefault(),!t.isKilled){switch(t.isKilled=!0,t.key){case"=":case"-":case"0":if(t.metaKey||t.ctrlKey)return void ss(t);break;case"Tab":default:if(ru()||e.isMenuOpen)return;break;case",":if(!ru()&&(ss(t),!e.inputs.keys.has(","))){var n=e.inputs.currentScreenPoint,r=n.x,i=n.y,o=n.z,a=e.pageState.hoveredId;e.inputs.keys.add(",");var s=x({type:"pointer",name:"pointer_down",point:{x:r,y:i,z:o},shiftKey:t.shiftKey,altKey:t.altKey,ctrlKey:t.metaKey||t.ctrlKey,pointerId:0,button:0,isPen:e.isPenMode},a?{target:"shape",shape:e.getShapeById(a)}:{target:"canvas"});return void e.dispatch(s)}break;case"Escape":return void(e.inputs.keys.has("Escape")||(e.inputs.keys.add("Escape"),e.cancel()))}var u={type:"keyboard",name:"key_down",key:t.key,shiftKey:t.shiftKey,altKey:t.altKey,ctrlKey:t.metaKey||t.ctrlKey};e.dispatch(u)}},r=function(t){if(!t.isKilled&&(t.isKilled=!0,!ru()&&!e.isMenuOpen)){var n;if(","===t.key&&(null!==(n=document.activeElement)&&void 0!==n&&n.ELEMENT_NODE&&ss(t),e.inputs.keys.has(","))){var r=e.inputs.currentScreenPoint,i=r.x,o=r.y,a=r.z,s=e.pageState.hoveredId;e.inputs.keys.delete(",");var u=x({type:"pointer",name:"pointer_up",point:{x:i,y:o,z:a},shiftKey:t.shiftKey,altKey:t.altKey,ctrlKey:t.metaKey||t.ctrlKey,pointerId:0,button:0,isPen:e.isPenMode},s?{target:"shape",shape:e.getShapeById(s)}:{target:"canvas"});return void e.dispatch(u)}var l={type:"keyboard",name:"key_up",key:t.key,shiftKey:t.shiftKey,altKey:t.altKey,ctrlKey:t.metaKey||t.ctrlKey};e.dispatch(l)}};function i(t){if(n.contains(t.target)){var r,i,o=t.touches[0].pageX,a=t.touches[0].radiusX||0;if(o-a<10||o+a>e.viewportScreenBounds.width-10)"BUTTON"===(null===(r=t.target)||void 0===r?void 0:r.tagName)&&(null===(i=t.target)||void 0===i||i.click()),ss(t)}}var o=function(e){n.contains(e.target)&&(e.ctrlKey||e.metaKey)&&ss(e)};function a(){e.blur()}return n.addEventListener("touchstart",i,{passive:!1}),document.addEventListener("wheel",o,{passive:!1}),document.addEventListener("gesturestart",ss),document.addEventListener("gesturechange",ss),document.addEventListener("gestureend",ss),document.addEventListener("keydown",t),document.addEventListener("keyup",r),window.addEventListener("blur",a),window.addEventListener("focus",(function(){e.updateViewportScreenBounds()})),function(){n.removeEventListener("touchstart",i),document.removeEventListener("wheel",o),document.removeEventListener("gesturestart",ss),document.removeEventListener("gesturechange",ss),document.removeEventListener("gestureend",ss),document.removeEventListener("keydown",t),document.removeEventListener("keyup",r),window.removeEventListener("blur",a),window.removeEventListener("focus",a)}}),[e,n])}(),function(){var e=ma();(0,t.useEffect)((function(){var t=window.matchMedia("(pointer: coarse)"),n=function(){e.isCoarsePointer=t.matches};return n(),t.addEventListener("change",n),function(){return t.removeEventListener("change",n)}}),[e])}(),gl(i),function(e){var n=ma();(0,t.useEffect)((function(){var t=e.current;if(t){var r=function(e){if(e instanceof PointerEvent&&"pen"===e.pointerType){var t;e.isKilled=!0;var r=e.target;if(iu.includes(null===(t=r.tagName)||void 0===t?void 0:t.toLocaleLowerCase())||n.isIn("select.editing_shape"))return;ss(e)}};return t.addEventListener("touchstart",r),t.addEventListener("touchend",r),function(){t.removeEventListener("touchstart",r),t.addEventListener("touchend",r)}}}),[n,e])}(i),function(){var e=ma(),n=qs();(0,t.useLayoutEffect)((function(){var t=_l((function(){e.updateViewportScreenBounds()}),200,{trailing:!0}),r=new ResizeObserver((function(e){e[0].contentRect&&t()}));return n&&r.observe(n),t(),function(){r.disconnect()}}),[e,n])}(),$s("position layers",(function(){var e=a.current,t=o.current;if(e&&t){var n=r.camera,i=n.x,s=n.y,u=n.z,l=u>=1?L(u,[1,8],[.125,.5],!0):L(u,[.1,1],[-2,.125],!0);e.style.setProperty("transform","scale(".concat(so(u),") translate(").concat(so(i),"px,").concat(so(s),"px)")),t.style.setProperty("transform","scale(".concat(so(u),") translate(").concat(so(i+l),"px,").concat(so(s+l),"px)"))}}),[r]);var s=xl(),u=s.context,l=s.isReady,c=function(){var e=ma(),n=(0,t.useMemo)((function(){var t,n;function r(){return r=Ai(Ti().mark((function t(n){var r,i,o;return Ti().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(ss(n),null!==(r=n.dataTransfer)&&void 0!==r&&null!==(i=r.files)&&void 0!==i&&i.length){t.next=3;break}return t.abrupt("return");case 3:return o=Array.from(n.dataTransfer.files).filter((function(e){return!e.name.endsWith(".tldr")})),t.next=6,Xa(e,o,e.screenToPage(n.clientX,n.clientY),!1);case 6:case"end":return t.stop()}}),t)}))),r.apply(this,arguments)}return{onPointerDown:function(t){t.isKilled||0!==t.button&&1!==t.button&&5!==t.button||(us(t.currentTarget,t),e.dispatch(x({type:"pointer",target:"canvas",name:"pointer_down"},Us(t,e.getContainer()))))},onPointerMove:function(r){r.isKilled||r.clientX===t&&r.clientY===n||(t=r.clientX,n=r.clientY,e.dispatch(x({type:"pointer",target:"canvas",name:"pointer_move"},Us(r,e.getContainer()))))},onPointerUp:function(r){r.isKilled||0!==r.button&&1!==r.button&&5!==r.button||(t=r.clientX,n=r.clientY,ls(r.currentTarget,r),e.dispatch(x({type:"pointer",target:"canvas",name:"pointer_up"},Us(r,e.getContainer()))))},onPointerEnter:function(t){t.isKilled||e.dispatch(x({type:"pointer",target:"canvas",name:"pointer_enter"},Us(t,e.getContainer())))},onPointerLeave:function(t){t.isKilled||e.dispatch(x({type:"pointer",target:"canvas",name:"pointer_leave"},Us(t,e.getContainer())))},onDragOver:function(e){ss(e)},onDrop:function(e){return r.apply(this,arguments)},onTouchStart:function(e){e.isKilled=!0,document.body.click(),ss(e)},onTouchEnd:function(e){e.isKilled=!0,"A"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&ss(e)}}}),[e]);return n}();return n&&(c.onDrop=n(c.onDrop)),t.useEffect((function(){if(l&&r.isSafari){var e=a.current,t=o.current;e&&t&&requestAnimationFrame((function(){e.style.display="none",t.style.display="none",requestAnimationFrame((function(){e.style.display="",t.style.display=""}))}))}}),[r,l]),t.useEffect((function(){var e;null===(e=i.current)||void 0===e||e.focus()}),[]),(0,Mi.jsxs)("div",x(x({ref:i,tabIndex:-1,draggable:!1,className:"rs-canvas","data-wd":"canvas"},c),{},{children:[(0,Mi.jsx)(wf,{size:r.gridSize}),(0,Mi.jsxs)("div",{ref:o,className:"rs-html-layer",draggable:!1,children:[(0,Mi.jsx)(Nf,{}),(0,Mi.jsx)(Zf,{})]}),(0,Mi.jsxs)("svg",{className:"rs-svg-layer",children:[u,(0,Mi.jsxs)("defs",{children:[(0,Mi.jsx)(nh,{}),(0,Mi.jsx)(rh,{}),(0,Mi.jsx)("marker",{id:"arrowhead-dot",className:"rs-arrow-hint",refX:"3.0",refY:"3.0",orient:"0",children:(0,Mi.jsx)("circle",{cx:"3",cy:"3",r:"2",strokeDasharray:"100%"})}),(0,Mi.jsxs)("marker",{id:"arrowhead-cross",className:"rs-arrow-hint",refX:"3.0",refY:"3.0",orient:"auto",children:[(0,Mi.jsx)("line",{x1:"1.5",y1:"1.5",x2:"4.5",y2:"4.5",strokeDasharray:"100%"}),(0,Mi.jsx)("line",{x1:"1.5",y1:"4.5",x2:"4.5",y2:"1.5",strokeDasharray:"100%"})]})]}),(0,Mi.jsxs)("g",{ref:a,children:[(0,Mi.jsx)(jf,{}),(0,Mi.jsx)(Df,{}),(0,Mi.jsx)(bf,{}),(0,Mi.jsx)(Jf,{}),(0,Mi.jsx)(eh,{}),(0,Mi.jsx)(Uf,{}),(0,Mi.jsx)(th,{}),(0,Mi.jsx)(Sf,{}),(0,Mi.jsx)($f,{})]})]})]}))})),Zf=fa((function(){var e=ma().renderingShapes;return wa.debugSvg.value?(0,Mi.jsx)(Mi.Fragment,{children:e.map((function(e){return(0,Mi.jsxs)(t.Fragment,{children:[(0,Mi.jsx)(Vf,x({},e),e.id+"_shape"),(0,Mi.jsx)(Gf,{id:e.id},e.id+"_shape_debug")]},e.id+"_fragment")}))}):(0,Mi.jsx)(Mi.Fragment,{children:e.map((function(e){return(0,Mi.jsx)(Vf,x({},e),e.id+"_shape")}))})})),Jf=fa((function(){var e=ma(),t=e.selectedIds,n=e.isChangingStyle;return e.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_shape","select.pointing_selection","select.pointing_handle")&&!n?(0,Mi.jsx)("g",{"aria-label":"SELECTED INDICATORS",children:t.map((function(e){return(0,Mi.jsx)(Tf,{id:e},e+"_indicator")}))}):null})),eh=fa((function(){var e=ma(),t=e.pageState.hoveredId,n=e.isInAny("select.idle","select.editing_shape");return t&&n?(0,Mi.jsx)(Tf,{id:t},t):null})),th=fa((function(){var e=k(ma().hintingIds);return e.length?(0,Mi.jsx)("g",{"aria-label":"HINTED SHAPES",children:e.map((function(e){return(0,Mi.jsx)(Tf,{id:e,isHinting:!0},e+"_hinting")}))}):null}));function nh(){return(0,Mi.jsxs)("g",{id:"cursor",children:[(0,Mi.jsxs)("g",{fill:"rgba(0,0,0,.2)",transform:"translate(-11,-11)",children:[(0,Mi.jsx)("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),(0,Mi.jsx)("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})]}),(0,Mi.jsxs)("g",{fill:"white",transform:"translate(-12,-12)",children:[(0,Mi.jsx)("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),(0,Mi.jsx)("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})]}),(0,Mi.jsxs)("g",{fill:"currentColor",transform:"translate(-12,-12)",children:[(0,Mi.jsx)("path",{d:"m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z"}),(0,Mi.jsx)("path",{d:"m13 10.814v11.188l2.969-2.866.428-.139h4.768z"})]})]})}function rh(){return(0,Mi.jsx)("path",{id:"cursor_hint",fill:"currentColor",d:"M -2,-5 2,0 -2,5 Z",opacity:".8"})}var ih="https://github.com/tldraw/editor/issues/new";function oh(){}function ah(e){var n=e.error,r=e.app,i=(0,t.useRef)(null),o=N((0,t.useState)(!1),2),a=o[0],s=o[1],u=N((0,t.useState)(!1),2),l=u[0],c=u[1],d=N((0,t.useState)(!1),2),p=d[0],f=d[1],h=n instanceof Error?n.message:String(n),v=n instanceof Error?n.stack:null,g=va("isDarkMode",(function(){try{if(r)return r.userDocumentSettings.isDarkMode}catch(e){}return null}),[r]),m=N((0,t.useState)(null),2),y=m[0],b=m[1];(0,t.useLayoutEffect)((function(){var e;null!==g&&b(g);for(var t=null===(e=i.current)||void 0===e?void 0:e.parentElement,n=!1;t;){if(t.classList.contains("rs-theme__dark")||t.classList.contains("rs-theme__light")){n=!0;break}t=t.parentElement}b(n?null:window.matchMedia("(prefers-color-scheme: dark)").matches)}),[g]),(0,t.useEffect)((function(){if(l){var e=setTimeout((function(){c(!1)}),2e3);return function(){return clearTimeout(e)}}}),[l]);var w=function(){var e=Ai(Ti().mark((function e(){var t,n;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=(n=window).__tldraw__hardReset)||void 0===t?void 0:t.call(n);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=new URL(ih);return x.searchParams.set("title",h),x.searchParams.set("labels","bug"),x.searchParams.set("body","Hey, I ran into an error while using tldraw:\n\n```js\n".concat(null!==v&&void 0!==v?v:h,"\n```\n\nMy browser: ").concat(navigator.userAgent)),(0,Mi.jsxs)("div",{ref:i,className:yf("rs-container rs-error-boundary",null===y?"":y?"rs-theme__dark":"rs-theme__light"),children:[(0,Mi.jsx)("div",{className:"rs-error-boundary__overlay"}),r&&(0,Mi.jsx)(mf,{onError:oh,fallback:function(){return null},children:(0,Mi.jsx)(ga.Provider,{value:r,children:(0,Mi.jsx)("div",{className:"rs-overlay rs-error-boundary__canvas",children:(0,Mi.jsx)(Qf,{})})})}),(0,Mi.jsx)("div",{className:yf("rs-modal","rs-error-boundary__content",{"rs-error-boundary__content__expanded":a&&!p}),children:p?(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsx)("h2",{children:"Are you sure?"}),(0,Mi.jsx)("p",{children:"Resetting your data will delete your drawing and cannot be undone."}),(0,Mi.jsxs)("div",{className:"rs-error-boundary__content__actions",children:[(0,Mi.jsx)("button",{onClick:function(){return f(!1)},children:"Cancel"}),(0,Mi.jsx)("button",{className:"rs-error-boundary__reset",onClick:w,children:"Reset data"})]})]}):(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsx)("h2",{children:"Something's gone wrong."}),(0,Mi.jsxs)("p",{children:["Sorry, we encountered an error. Please refresh the page to continue. If you keep seeing this error, you can ",(0,Mi.jsx)("a",{href:x.toString(),children:"create a GitHub issue"})," or"," ",(0,Mi.jsx)("a",{href:"https://discord.gg/Cq6cPsTfNy",children:"ask for help on Discord"}),"."]}),a&&(0,Mi.jsxs)("div",{className:"rs-error-boundary__content__error",children:[(0,Mi.jsx)("pre",{children:(0,Mi.jsx)("code",{children:null!==v&&void 0!==v?v:h})}),(0,Mi.jsx)("button",{onClick:function(){var e=document.createElement("textarea");e.value=null!==v&&void 0!==v?v:h,document.body.appendChild(e),e.select(),document.execCommand("copy"),e.remove(),c(!0)},children:l?"Copied!":"Copy"})]}),(0,Mi.jsxs)("div",{className:"rs-error-boundary__content__actions",children:[(0,Mi.jsx)("button",{onClick:function(){return s(!a)},children:a?"Hide details":"Show details"}),(0,Mi.jsxs)("div",{className:"rs-error-boundary__content__actions__group",children:[(0,Mi.jsx)("button",{className:"rs-error-boundary__reset",onClick:function(){return f(!0)},children:"Reset data"}),(0,Mi.jsx)("button",{className:"rs-error-boundary__refresh",onClick:function(){window.location.reload()},children:"Refresh Page"})]})]})]})})]})}var sh=!1;if("undefined"!==typeof window){var uh=window.navigator.userAgent,lh=!!uh.match(/iPad/i)||!!uh.match(/iPhone/i),ch=!!uh.match(/WebKit/i);sh=lh&&ch&&!uh.match(/CriOS/i)}var dh=function(e){var n=e.children;return function(){var e=ma(),n=qs();t.useEffect((function(){var t=function(e){return n.style.setProperty("--rs-zoom",e.toString())},r=T(t,100),i=new ze("useZoomCss",(function(){e.shapeIds.size<300?t(e.zoomLevel):r(e.zoomLevel)}));return i.attach(),i.execute(),function(){i.detach()}}),[e,n])}(),function(){var e=ma(),t=qs();$s("useCursor",(function(){var n=e.cursor,r=n.type,i=n.rotation,o=n.color;t.style.setProperty("--rs-cursor",tu(r,i,o))}),[e,t])}(),function(){var e=ma(),n=qs(),r=va("isDarkMode",(function(){return e.userDocumentSettings.isDarkMode}),[e]);t.useEffect((function(){r?(n.setAttribute("data-color-mode","dark"),n.classList.remove("rs-theme__light"),n.classList.add("rs-theme__dark"),e.setCursor({color:"white"})):(n.setAttribute("data-color-mode","light"),n.classList.remove("rs-theme__dark"),n.classList.add("rs-theme__light"),e.setCursor({color:"black"}))}),[e,n,r])}(),function(){var e=N((0,t.useState)(0),2),n=(e[0],e[1]);(0,t.useEffect)((function(){return n((function(e){return e+1}))}),[])}(),function(){var e=ma();t.useEffect((function(){if(sh)return document.addEventListener("focusout",t),function(){return document.removeEventListener("focusout",t)};function t(t){(t.target instanceof HTMLInputElement&&"text"===t.target.type||t.target instanceof HTMLTextAreaElement)&&e.complete()}}),[e])}(),n},ph=function(e,n){var r=N((0,t.useState)(2),2),i=r[0],o=r[1];return(0,t.useEffect)((function(){var t=n.url,r=n.style,i=void 0===r?"normal":r,a=n.weight,s=void 0===a?"500":a,u=n.display,l=n.featureSettings,c=n.stretch,d=n.unicodeRange,p=n.variant,f=!1;o(2);var h={style:i,weight:s,display:u,featureSettings:l,stretch:c,unicodeRange:d,variant:p},v=new FontFace(e,"url(".concat(t,")"),h);return v.load().then((function(){f||(document.fonts.add(v),o(0))})).catch((function(e){f||(console.error(e),o(1))})),v.$$_url=t,v.$$_fontface="\n@font-face {\n\tfont-family: ".concat(v.family,";\n\tfont-stretch: ").concat(v.stretch,";\n\tfont-weight: ").concat(v.weight,";\n\tfont-style: ").concat(v.style,';\n\tsrc: url("').concat(t,'") format("woff2")\n}'),function(){document.fonts.delete(v),f=!0}}),[e,n]),i};var fh=["config","userId","instanceId","store"];function hh(e){var n=N(t.useState(null),2),r=n[0],i=n[1];return(0,Mi.jsx)("div",{ref:i,draggable:!1,className:"rs-container rs-theme__light",children:(0,Mi.jsx)(mf,{fallback:function(e){return(0,Mi.jsx)(ah,{error:e})},onError:function(e){return A(e,{tags:{origin:"react.tldraw-before-app"}})},children:r&&(0,Mi.jsx)(Xs,{container:r,children:(0,Mi.jsx)(vh,x({},e))})})})}function vh(e){var n,r,i,o=e.config,a=void 0===o?Nd.default:o,s=e.userId,u=e.instanceId,l=e.store,c=Ye(e,fh),d=function(e){var n=(0,t.useMemo)((function(){return function(e){return{draw:{url:e.fonts.draw},serif:{url:e.fonts.serif},sansSerif:{url:e.fonts.sansSerif},monospace:{url:e.fonts.monospace}}}(e)}),[e]),r=[ph("tldraw_draw",n.draw),ph("tldraw_serif",n.serif),ph("tldraw_sans",n.sansSerif),ph("tldraw_mono",n.monospace)];return{error:r.some((function(e){return 1===e})),done:!r.some((function(e){return 2===e}))}}(null!==(n=c.assetUrls)&&void 0!==n?n:vf),p=d.done,f=d.error;if(null!==(r=l)&&void 0!==r||(l=a.createStore({userId:null!==s&&void 0!==s?s:Bn.createId(),instanceId:null!==u&&void 0!==u?u:Mn.createId()})),l instanceof Ve)i=l;else{if(l.error)throw l.error;if(!l.store)return(0,Mi.jsx)(mh,{children:"Connecting..."});i=l.store}return u&&i.props.instanceId!==u&&console.error("The store's instanceId (".concat(i.props.instanceId,") does not match the instanceId prop (").concat(u,"). This may cause unexpected behavior.")),s&&i.props.userId!==s&&console.error("The store's userId (".concat(i.props.userId,") does not match the userId prop (").concat(s,"). This may cause unexpected behavior.")),f?(0,Mi.jsx)(yh,{children:"Could not load assets. Please refresh the page."}):p?(0,Mi.jsx)(gh,x(x({},c),{},{store:i,config:a})):(0,Mi.jsx)(mh,{children:"Loading assets..."})}function gh(e){var n=e.onMount,r=e.config,i=e.isDarkMode,o=e.children,a=e.onCreateAssetFromFile,s=e.onCreateBookmarkFromUrl,u=e.store,l=qs(),c=N(t.useState(null),2),d=c[0],p=c[1];t.useLayoutEffect((function(){var e=new ff({store:u,getContainer:function(){return l},config:r});return p(e),window.app=e,function(){e.dispose(),p((function(t){return t===e?null:t}))}}),[l,r,u]),t.useEffect((function(){d&&(a&&(d.onCreateAssetFromFile=a),s&&(d.onCreateBookmarkFromUrl=s))}),[d,i,a,s]);var f=function(e){var n=(0,t.useRef)();return(0,t.useLayoutEffect)((function(){n.current=e})),(0,t.useDebugValue)(e),(0,t.useCallback)((function(){var e=n.current;return C(e,"fn does not exist"),e.apply(void 0,arguments)}),[])}((function(e){return null===n||void 0===n?void 0:n(e)}));t.useEffect((function(){d&&(void 0!==i&&d.updateUserDocumentSettings({isDarkMode:i}),window.tldrawReady=!0,f(d))}),[d,f,i]);var h=(0,t.useSyncExternalStore)((0,t.useCallback)((function(e){return d?(d.on("crash",e),function(){return d.off("crash",e)}):function(){}}),[d]),(function(){var e;return null!==(e=null===d||void 0===d?void 0:d.crashingError)&&void 0!==e?e:null}));return d?(0,Mi.jsx)(mf,{fallback:function(e){return(0,Mi.jsx)(ah,{error:e,app:d})},onError:function(e){return d.annotateError(e,{origin:"react.tldraw",willCrashApp:!0})},children:h?(0,Mi.jsx)(ah,{error:h,app:d}):(0,Mi.jsx)(ga.Provider,{value:d,children:(0,Mi.jsx)(dh,{children:o})})}):null}function mh(e){var t=e.children;return(0,Mi.jsxs)("div",{className:"rs-loading",children:[(0,Mi.jsx)(Ec,{}),t]})}function yh(e){var t=e.children;return(0,Mi.jsx)("div",{className:"rs-loading",children:t})}var bh,wh,xh=function(e,t){return t.some((function(t){return e instanceof t}))};var kh=new WeakMap,Sh=new WeakMap,_h=new WeakMap,Ph=new WeakMap,Ch=new WeakMap;var Eh={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Sh.get(e);if("objectStoreNames"===t)return e.objectStoreNames||_h.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Th(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Ih(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(wh||(wh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(jh(this),n),Th(kh.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Th(e.apply(jh(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=e.call.apply(e,[jh(this),t].concat(r));return _h.set(o,t.sort?t.sort():[t]),Th(o)}}function Mh(e){return"function"===typeof e?Ih(e):(e instanceof IDBTransaction&&function(e){if(!Sh.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=function(){t(),r()},o=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));Sh.set(e,t)}}(e),xh(e,bh||(bh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Eh):e)}function Th(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",o)},i=function(){t(Th(e.result)),r()},o=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((function(t){t instanceof IDBCursor&&kh.set(t,e)})).catch((function(){})),Ch.set(t,e),t}(e);if(Ph.has(e))return Ph.get(e);var t=Mh(e);return t!==e&&(Ph.set(e,t),Ch.set(t,e)),t}var jh=function(e){return Ch.get(e)};function Ah(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,o=n.blocking,a=n.terminated,s=indexedDB.open(e,t),u=Th(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(Th(s.result),e.oldVersion,e.newVersion,Th(s.transaction),e)})),r&&s.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),u.then((function(e){a&&e.addEventListener("close",(function(){return a()})),o&&e.addEventListener("versionchange",(function(e){return o(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),u}function Oh(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).blocked,n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(function(e){return t(e.oldVersion,e)})),Th(n).then((function(){}))}var zh,Dh,Nh,Rh,Lh=["get","getKey","getAll","getAllKeys","count"],Bh=["put","add","delete","clear"],Fh=new Map;function Uh(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Fh.get(t))return Fh.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Bh.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Lh.includes(n))){var o=function(){var e=Ai(Ti().mark((function e(t){var o,a,s,u,l,c,d=arguments;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=this.transaction(t,i?"readwrite":"readonly"),s=a.store,u=d.length,l=new Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=d[c];return r&&(s=s.index(l.shift())),e.next=6,Promise.all([(o=s)[n].apply(o,l),i&&a.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Fh.set(t,o),o}}}Eh=function(e){return x(x({},e),{},{get:function(t,n,r){return Uh(t,n)||e.get(t,n,r)},has:function(t,n){return!!Uh(t,n)||e.has(t,n)}})}(Eh);var Kh="TLDRAW_TAB_ID_v2",Vh=globalThis.window;var Wh="TLDRAW_USER_DATA_v2",Hh=_e("globalUserData",null!==(zh=JSON.parse((null===Vh||void 0===Vh?void 0:Vh.localStorage.getItem(Wh))||"null"))&&void 0!==zh?zh:Bn.create({}));De("set global user data",(function(){Vh&&Vh.localStorage.setItem(Wh,JSON.stringify(Hh.value))}));var Yh="TLDRAW_DEFAULT_DOCUMENT_NAME_v2",Xh=null!==(Dh=null===Vh||void 0===Vh?void 0:Vh.localStorage.getItem(Yh))&&void 0!==Dh?Dh:os();null===Vh||void 0===Vh||Vh.localStorage.setItem(Yh,Xh);var qh="TLDRAW_DOCUMENT_v2",$h=null!==(Nh=null!==(Rh=null===Vh||void 0===Vh?void 0:Vh[Kh])&&void 0!==Rh?Rh:null===Vh||void 0===Vh?void 0:Vh.sessionStorage[Kh])&&void 0!==Nh?Nh:Mn.createId();Vh&&(Vh[Kh]=$h,Vh&&(["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(Vh.navigator.platform)||Vh.navigator.userAgent.includes("Mac")&&"ontouchend"in document)?Vh.sessionStorage[Kh]=$h:delete Vh.sessionStorage[Kh]),null===Vh||void 0===Vh||Vh.addEventListener("beforeunload",(function(){Vh.sessionStorage[Kh]=$h}));var Gh="TLDRAW_DB_NAME_INDEX_v2";function Qh(){var e,t=null!==(e=JSON.parse((null===Vh||void 0===Vh?void 0:Vh.localStorage.getItem(Gh))||"[]"))&&void 0!==e?e:[];return Array.isArray(t)?t:[]}function Zh(e){var t=new Set(Qh());t.add(e),null===Vh||void 0===Vh||Vh.localStorage.setItem(Gh,JSON.stringify(M(t)))}function Jh(e,t){return ev.apply(this,arguments)}function ev(){return(ev=Ai(Ti().mark((function e(t,n){var r;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zh(t),e.next=3,Ah(t,2,{upgrade:function(e){e.objectStoreNames.contains("records")||e.createObjectStore("records"),e.createObjectStore("schema")}});case 3:return r=e.sent,e.prev=4,e.next=7,n(r);case 7:return e.abrupt("return",e.sent);case 8:return e.prev=8,r.close(),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[4,,8,11]])})))).apply(this,arguments)}function tv(e,t){return nv.apply(this,arguments)}function nv(){return nv=Ai(Ti().mark((function e(t,n){var r;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=qh+t,Qh().includes(r)){e.next=3;break}return e.abrupt("return",void 0);case 3:return e.next=5,Jh(r,function(){var e=Ai(Ti().mark((function e(t){var r,i,o,a;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===n||void 0===n||null===(r=n.didCancel)||void 0===r||!r.call(n)){e.next=2;break}return e.abrupt("return",void 0);case 2:return i=t.transaction(["records","schema"],"readonly"),o=i.objectStore("records"),a=i.objectStore("schema"),e.next=7,o.getAll();case 7:return e.t0=e.sent,e.next=10,a.get("schema");case 10:return e.t1=e.sent,e.abrupt("return",{records:e.t0,schema:e.t1});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),nv.apply(this,arguments)}function rv(e,t,n,r){return iv.apply(this,arguments)}function iv(){return iv=Ai(Ti().mark((function e(t,n,r,i){var o;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=qh+t,e.next=3,Jh(o,function(){var e=Ai(Ti().mark((function e(t){var o,a,s,u,l,c,d,p,f,h,v,g,m,y,b,w;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.transaction(["records","schema"],"readwrite"),s=a.objectStore("records"),u=a.objectStore("schema"),l=0,c=Object.entries(r.added);case 4:if(!(l<c.length)){e.next=11;break}return d=N(c[l],2),p=d[0],f=d[1],e.next=8,s.put(f,p);case 8:l++,e.next=4;break;case 11:h=0,v=Object.values(r.updated);case 12:if(!(h<v.length)){e.next=19;break}return g=N(v[h],2),g[0],m=g[1],e.next=16,s.put(m,m.id);case 16:h++,e.next=12;break;case 19:y=0,b=Object.keys(r.removed);case 20:if(!(y<b.length)){e.next=27;break}return w=b[y],e.next=24,s.delete(w);case 24:y++,e.next=20;break;case 27:if(u.put(n.serialize(),"schema"),null===i||void 0===i||null===(o=i.didCancel)||void 0===o||!o.call(i)){e.next=30;break}return e.abrupt("return",a.abort());case 30:return e.next=32,a.done;case 32:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)}))),iv.apply(this,arguments)}function ov(e,t,n,r){return av.apply(this,arguments)}function av(){return av=Ai(Ti().mark((function e(t,n,r,i){var o;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=qh+t,e.next=3,Jh(o,function(){var e=Ai(Ti().mark((function e(t){var o,a,s,u,l,c,d,p,f;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.transaction(["records","schema"],"readwrite"),s=a.objectStore("records"),u=a.objectStore("schema"),e.next=5,s.clear();case 5:l=0,c=Object.entries(r);case 6:if(!(l<c.length)){e.next=13;break}return d=N(c[l],2),p=d[0],f=d[1],e.next=10,s.put(f,p);case 10:l++,e.next=6;break;case 13:if(u.put(n.serialize(),"schema"),null===i||void 0===i||null===(o=i.didCancel)||void 0===o||!o.call(i)){e.next=16;break}return e.abrupt("return",a.abort());case 16:return e.next=18,a.done;case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)}))),av.apply(this,arguments)}var sv="undefined"===typeof BroadcastChannel?function(){function e(t){o(this,e),b(this,"onmessage",void 0)}return l(e,[{key:"postMessage",value:function(e){}},{key:"close",value:function(){}}]),e}():BroadcastChannel,uv=function(){function e(t,n){var r=this,i=n.universalPersistenceKey,a=n.onLoad,s=n.onLoadError,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new sv("tldraw-tab-sync-".concat(i));o(this,e),b(this,"disposables",new Set),b(this,"diffQueue",[]),b(this,"didDispose",!1),b(this,"shouldDoFullDBWrite",!0),b(this,"isReloading",!1),b(this,"universalPersistenceKey",void 0),b(this,"serializedSchema",void 0),b(this,"isDebugging",!1),b(this,"initTime",Date.now()),b(this,"isPersisting",!1),b(this,"didLastWriteError",!1),b(this,"scheduledPersistTimeout",null),this.store=t,this.channel=u,"undefined"!==typeof window&&(window.tlsync=this),this.universalPersistenceKey=i,this.serializedSchema=this.store.schema.serialize(),this.disposables.add(t.listen((function(e){var t=e.changes,n=e.source;r.debug("changes",t,n),"user"===n&&(r.diffQueue.push(t),r.channel.postMessage({type:"diff",instanceId:r.store.props.instanceId,changes:t,schema:r.serializedSchema}),r.schedulePersist())}))),this.connect(a,s)}return l(e,[{key:"debug",value:function(){var e;this.isDebugging&&(e=console).debug.apply(e,arguments)}},{key:"connect",value:function(){var e=Ai(Ti().mark((function e(t,n){var r,i,o,a,s=this;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.debug("connecting"),e.prev=1,e.next=4,tv(this.universalPersistenceKey);case 4:r=e.sent,e.next=13;break;case 7:return e.prev=7,e.t0=e.catch(1),n(e.t0),window.alert("Oops! We could not access to your browser's storage\u2014and the app won't work correctly without that. We now need to reload the page and try again.\n\nKeep seeing this message?\n\u2022 If you're using tldraw in a private or \"incognito\" window, try loading tldraw in a regular window or in a different browser."),"undefined"!==typeof window&&window.location.reload(),e.abrupt("return");case 13:if(this.debug("loaded data from store",r,"didDispose",this.didDispose),!this.didDispose){e.next=16;break}return e.abrupt("return");case 16:if(e.prev=16,!r){e.next=25;break}if(o=Object.fromEntries(r.records.map((function(e){return[e.id,e]}))),"error"!==(a=this.store.schema.migrateStoreSnapshot(o,null!==(i=r.schema)&&void 0!==i?i:this.store.schema.serializeEarliestVersion())).type){e.next=24;break}return console.error("failed to migrate store",a),n(new Error("Failed to migrate store: ".concat(a.reason))),e.abrupt("return");case 24:this.store.mergeRemoteChanges((function(){s.store.put(Object.values(a.value),"initialize")}));case 25:this.channel.onmessage=function(e){var t,r=e.data;s.debug("got message",r);var i,o,a,u=r,l=Ze(s.serializedSchema,null!==(t=u.schema)&&void 0!==t?t:s.store.schema.serializeEarliestVersion());if(-1===l)return Date.now()-s.initTime<5e3?void n(new Error("Schema mismatch, please close other tabs and reload the page")):(s.debug("reloading"),s.isReloading=!0,void(null===(i=window)||void 0===i||null===(o=i.location)||void 0===o||null===(a=o.reload)||void 0===a||a.call(o)));if(1===l)return s.debug("telling them to reload"),s.channel.postMessage({type:"announce",schema:s.serializedSchema}),s.shouldDoFullDBWrite=!0,void s.persistIfNeeded();if("diff"===u.type){s.debug("applying diff");var c=B(u.changes.removed,s.store.props.instanceId);ke((function(){s.store.mergeRemoteChanges((function(){s.store.applyDiff(u.changes)})),c&&s.store.ensureStoreIsUsable()}))}},this.channel.postMessage({type:"announce",schema:this.serializedSchema}),this.disposables.add((function(){s.channel.close()})),t(this),e.next=38;break;case 31:if(e.prev=31,e.t1=e.catch(16),this.debug("error loading data from store",e.t1),!this.didDispose){e.next=36;break}return e.abrupt("return");case 36:return n(e.t1),e.abrupt("return");case 38:case"end":return e.stop()}}),e,this,[[1,7],[16,31]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.debug("closing"),this.didDispose=!0,this.disposables.forEach((function(e){return e()}))}},{key:"schedulePersist",value:function(){var e=this;this.debug("schedulePersist",this.scheduledPersistTimeout),this.scheduledPersistTimeout||(this.scheduledPersistTimeout=setTimeout((function(){e.scheduledPersistTimeout=null,e.persistIfNeeded()}),this.didLastWriteError?1e4:350))}},{key:"persistIfNeeded",value:function(){this.debug("persistIfNeeded",{isPersisting:this.isPersisting,isReloading:this.isReloading,shouldDoFullDBWrite:this.shouldDoFullDBWrite,diffQueueLength:this.diffQueue.length,storeIsPossiblyCorrupt:this.store.isPossiblyCorrupted()}),this.scheduledPersistTimeout&&(clearTimeout(this.scheduledPersistTimeout),this.scheduledPersistTimeout=null),this.isPersisting||this.isReloading||this.store.isPossiblyCorrupted()||(this.shouldDoFullDBWrite||this.diffQueue.length>0)&&this.doPersist()}},{key:"doPersist",value:function(){var e=Ai(Ti().mark((function e(){var t,n,r=this;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C(!this.isPersisting,"persist already in progress"),this.isPersisting=!0,this.debug("doPersist start"),t=this.diffQueue,this.diffQueue=[],e.prev=5,!this.shouldDoFullDBWrite){e.next=12;break}return this.shouldDoFullDBWrite=!1,e.next=10,ov(this.universalPersistenceKey,this.store.schema,this.store.serialize(),{didCancel:function(){return r.didDispose}});case 10:e.next=15;break;case 12:return n=We(t),e.next=15,rv(this.universalPersistenceKey,this.store.schema,n);case 15:this.didLastWriteError=!1,e.next=25;break;case 18:e.prev=18,e.t0=e.catch(5),this.shouldDoFullDBWrite=!0,this.didLastWriteError=!0,console.error("failed to store changes in indexed db",e.t0),window.alert("Oops! We could not save changes to your browser's storage. We now need to reload the page and try again.\n\nKeep seeing this message?\n\u2022 If you're using tldraw in a private or \"incognito\" window, try loading tldraw in a regular window or in a different browser.\n\u2022 If your hard disk is full, try clearing up some space and then reload the page."),"undefined"!==typeof window&&window.location.reload();case 25:this.isPersisting=!1,this.debug("doPersist end"),this.schedulePersist();case 28:case"end":return e.stop()}}),e,this,[[5,18]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function lv(){return lv=Ai(Ti().mark((function e(){var t,n,r=arguments;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(r.length>0&&void 0!==r[0]?r[0]:{}).shouldReload,n=void 0===t||t,sessionStorage.clear(),e.next=4,Promise.all(Qh().map((function(e){return Oh(e)})));case 4:localStorage.clear(),n&&window.location.reload();case 6:case"end":return e.stop()}}),e)}))),lv.apply(this,arguments)}function cv(e){var n,r=e.universalPersistenceKey,i=e.instanceId,o=e.userId,a=e.config,s=void 0===a?Nd.default:a,u=N((0,t.useState)(null),2),l=u[0],c=u[1];return(0,t.useEffect)((function(){var e=os();c({id:e,syncedStore:{status:"loading"}});var t=function(t){c((function(n){return(null===n||void 0===n?void 0:n.id)===e?{id:e,syncedStore:t}:n}))},n=s.createStore({userId:o,instanceId:i}),a=new uv(n,{universalPersistenceKey:r,onLoad:function(){t({status:"synced",store:n})},onLoadError:function(e){t({status:"error",error:e})}}),u=function(e){var t=Hh.value.id;return e.listen((function(e){for(var n=e.changes,r=0,i=Object.values(n.added);r<i.length;r++){var o=i[r];"user"===o.typeName&&t===o.id&&Hh.set(o)}for(var a=0,s=Object.values(n.updated);a<s.length;a++){var u=N(s[a],2),l=(u[0],u[1]);"user"===l.typeName&&t===l.id&&Hh.set(l)}}))}(n);return function(){c((function(t){return(null===t||void 0===t?void 0:t.id)===e?null:t})),u(),a.close()}}),[i,r,s,o]),null!==(n=null===l||void 0===l?void 0:l.syncedStore)&&void 0!==n?n:{status:"loading"}}function dv(){return dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dv.apply(this,arguments)}function pv(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).checkForDefaultPrevented,r=void 0===n||n;return function(n){if(null===e||void 0===e||e(n),!1===r||!n.defaultPrevented)return null===t||void 0===t?void 0:t(n)}}function fv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.forEach((function(t){return function(e,t){"function"===typeof e?e(t):null!==e&&void 0!==e&&(e.current=t)}(t,e)}))}}function hv(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0,t.useCallback)(fv.apply(void 0,n),n)}"undefined"!==typeof window&&(window.__tldraw__hardReset=function(){return lv.apply(this,arguments)});var vv=["children"],gv=["scope","children"];function mv(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];var i=function(){var n=r.map((function(e){return(0,t.createContext)(e)}));return function(r){var i=(null===r||void 0===r?void 0:r[e])||n;return(0,t.useMemo)((function(){return b({},"__scope".concat(e),x(x({},r),{},b({},e,i)))}),[r,i])}};return i.scopeName=e,[function(n,i){var o=(0,t.createContext)(i),a=r.length;function s(n){var r=n.scope,i=n.children,s=Ye(n,gv),u=(null===r||void 0===r?void 0:r[e][a])||o,l=(0,t.useMemo)((function(){return s}),Object.values(s));return(0,t.createElement)(u.Provider,{value:l},i)}return r=[].concat(M(r),[i]),s.displayName=n+"Provider",[s,function(r,s){var u=(null===s||void 0===s?void 0:s[e][a])||o,l=(0,t.useContext)(u);if(l)return l;if(void 0!==i)return i;throw new Error("`".concat(r,"` must be used within `").concat(n,"`"))}]},yv.apply(void 0,[i].concat(M(n)))]}function yv(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(1===n.length)return i;var o=function(){var e=n.map((function(e){return{useScope:e(),scopeName:e.scopeName}}));return function(n){var r=e.reduce((function(e,t){var r=t.useScope,i=t.scopeName,o=r(n)["__scope".concat(i)];return x(x({},e),o)}),{});return(0,t.useMemo)((function(){return b({},"__scope".concat(i.scopeName),r)}),[r])}};return o.scopeName=i.scopeName,o}var bv=["children"],wv=["children"],xv=(0,t.forwardRef)((function(e,n){var r=e.children,i=Ye(e,bv),o=t.Children.toArray(r),a=o.find(_v);if(a){var s=a.props.children,u=o.map((function(e){return e===a?t.Children.count(s)>1?t.Children.only(null):(0,t.isValidElement)(s)?s.props.children:null:e}));return(0,t.createElement)(kv,dv({},i,{ref:n}),(0,t.isValidElement)(s)?(0,t.cloneElement)(s,void 0,u):null)}return(0,t.createElement)(kv,dv({},i,{ref:n}),r)}));xv.displayName="Slot";var kv=(0,t.forwardRef)((function(e,n){var r=e.children,i=Ye(e,wv);return(0,t.isValidElement)(r)?(0,t.cloneElement)(r,x(x({},function(e,t){var n=x({},t),r=function(){var r=e[i],o=t[i];/^on[A-Z]/.test(i)?r&&o?n[i]=function(){o.apply(void 0,arguments),r.apply(void 0,arguments)}:r&&(n[i]=r):"style"===i?n[i]=x(x({},r),o):"className"===i&&(n[i]=[r,o].filter(Boolean).join(" "))};for(var i in t)r();return x(x({},e),n)}(i,r.props)),{},{ref:fv(n,r.ref)})):t.Children.count(r)>1?t.Children.only(null):null}));kv.displayName="SlotClone";var Sv=function(e){var n=e.children;return(0,t.createElement)(t.Fragment,null,n)};function _v(e){return(0,t.isValidElement)(e)&&e.type===Sv}var Pv=["scope","children"];function Cv(e){var n=e+"CollectionProvider",r=N(mv(n),2),i=r[0],o=r[1],a=N(i(n,{collectionRef:{current:null},itemMap:new Map}),2),s=a[0],u=a[1],l=function(e){var n=e.scope,r=e.children,i=t.useRef(null),o=t.useRef(new Map).current;return t.createElement(s,{scope:n,itemMap:o,collectionRef:i},r)},c=e+"CollectionSlot",d=t.forwardRef((function(e,n){var r=e.scope,i=e.children,o=hv(n,u(c,r).collectionRef);return t.createElement(xv,{ref:o},i)})),p=e+"CollectionItemSlot",f="data-radix-collection-item",h=t.forwardRef((function(e,n){var r,i=e.scope,o=e.children,a=Ye(e,Pv),s=t.useRef(null),l=hv(n,s),c=u(p,i);return t.useEffect((function(){return c.itemMap.set(s,x({ref:s},a)),function(){c.itemMap.delete(s)}})),t.createElement(xv,(b(r={},f,""),b(r,"ref",l),r),o)}));return[{Provider:l,Slot:d,ItemSlot:h},function(n){var r=u(e+"CollectionConsumer",n),i=t.useCallback((function(){var e=r.collectionRef.current;if(!e)return[];var t=Array.from(e.querySelectorAll("[".concat(f,"]"))),n=Array.from(r.itemMap.values()).sort((function(e,n){return t.indexOf(e.ref.current)-t.indexOf(n.ref.current)}));return n}),[r.collectionRef,r.itemMap]);return i},o]}var Ev=["asChild"],Iv=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((function(e,n){var r=(0,t.forwardRef)((function(e,r){var i=e.asChild,o=Ye(e,Ev),a=i?xv:n;return(0,t.useEffect)((function(){window[Symbol.for("radix-ui")]=!0}),[]),(0,t.createElement)(a,dv({},o,{ref:r}))}));return r.displayName="Primitive.".concat(n),x(x({},e),{},b({},n,r))}),{});function Mv(e,t){e&&(0,i.flushSync)((function(){return e.dispatchEvent(t)}))}function Tv(e){var n=(0,t.useRef)(e);return(0,t.useEffect)((function(){n.current=e})),(0,t.useMemo)((function(){return function(){for(var e,t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return null===(t=n.current)||void 0===t?void 0:(e=t).call.apply(e,[n].concat(i))}}),[])}var jv,Av=["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"],Ov="dismissableLayer.update",zv="dismissableLayer.pointerDownOutside",Dv="dismissableLayer.focusOutside",Nv=(0,t.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Rv=(0,t.forwardRef)((function(e,n){var r,i=e.disableOutsidePointerEvents,o=void 0!==i&&i,a=e.onEscapeKeyDown,s=e.onPointerDownOutside,u=e.onFocusOutside,l=e.onInteractOutside,c=e.onDismiss,d=Ye(e,Av),p=(0,t.useContext)(Nv),f=N((0,t.useState)(null),2),h=f[0],v=f[1],g=null!==(r=null===h||void 0===h?void 0:h.ownerDocument)&&void 0!==r?r:null===globalThis||void 0===globalThis?void 0:globalThis.document,m=N((0,t.useState)({}),2)[1],y=hv(n,(function(e){return v(e)})),b=Array.from(p.layers),w=N(M(p.layersWithOutsidePointerEventsDisabled).slice(-1),1)[0],k=b.indexOf(w),S=h?b.indexOf(h):-1,_=p.layersWithOutsidePointerEventsDisabled.size>0,P=S>=k,C=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,r=Tv(e),i=(0,t.useRef)(!1),o=(0,t.useRef)((function(){}));return(0,t.useEffect)((function(){var e=function(e){if(e.target&&!i.current){var t=function(){Fv(zv,r,a,{discrete:!0})},a={originalEvent:e};"touch"===e.pointerType?(n.removeEventListener("click",o.current),o.current=t,n.addEventListener("click",o.current,{once:!0})):t()}i.current=!1},t=window.setTimeout((function(){n.addEventListener("pointerdown",e)}),0);return function(){window.clearTimeout(t),n.removeEventListener("pointerdown",e),n.removeEventListener("click",o.current)}}),[n,r]),{onPointerDownCapture:function(){return i.current=!0}}}((function(e){var t=e.target,n=M(p.branches).some((function(e){return e.contains(t)}));P&&!n&&(null===s||void 0===s||s(e),null===l||void 0===l||l(e),e.defaultPrevented||null===c||void 0===c||c())}),g),E=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,r=Tv(e),i=(0,t.useRef)(!1);return(0,t.useEffect)((function(){var e=function(e){e.target&&!i.current&&Fv(Dv,r,{originalEvent:e},{discrete:!1})};return n.addEventListener("focusin",e),function(){return n.removeEventListener("focusin",e)}}),[n,r]),{onFocusCapture:function(){return i.current=!0},onBlurCapture:function(){return i.current=!1}}}((function(e){var t=e.target;M(p.branches).some((function(e){return e.contains(t)}))||(null===u||void 0===u||u(e),null===l||void 0===l||l(e),e.defaultPrevented||null===c||void 0===c||c())}),g);return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,r=Tv(e);(0,t.useEffect)((function(){var e=function(e){"Escape"===e.key&&r(e)};return n.addEventListener("keydown",e),function(){return n.removeEventListener("keydown",e)}}),[r,n])}((function(e){S===p.layers.size-1&&(null===a||void 0===a||a(e),!e.defaultPrevented&&c&&(e.preventDefault(),c()))}),g),(0,t.useEffect)((function(){if(h)return o&&(0===p.layersWithOutsidePointerEventsDisabled.size&&(jv=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(h)),p.layers.add(h),Bv(),function(){o&&1===p.layersWithOutsidePointerEventsDisabled.size&&(g.body.style.pointerEvents=jv)}}),[h,g,o,p]),(0,t.useEffect)((function(){return function(){h&&(p.layers.delete(h),p.layersWithOutsidePointerEventsDisabled.delete(h),Bv())}}),[h,p]),(0,t.useEffect)((function(){var e=function(){return m({})};return document.addEventListener(Ov,e),function(){return document.removeEventListener(Ov,e)}}),[]),(0,t.createElement)(Iv.div,dv({},d,{ref:y,style:x({pointerEvents:_?P?"auto":"none":void 0},e.style),onFocusCapture:pv(e.onFocusCapture,E.onFocusCapture),onBlurCapture:pv(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:pv(e.onPointerDownCapture,C.onPointerDownCapture)}))})),Lv=(0,t.forwardRef)((function(e,n){var r=(0,t.useContext)(Nv),i=(0,t.useRef)(null),o=hv(n,i);return(0,t.useEffect)((function(){var e=i.current;if(e)return r.branches.add(e),function(){r.branches.delete(e)}}),[r.branches]),(0,t.createElement)(Iv.div,dv({},e,{ref:o}))}));function Bv(){var e=new CustomEvent(Ov);document.dispatchEvent(e)}function Fv(e,t,n,r){var i=r.discrete,o=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),i?Mv(o,a):o.dispatchEvent(a)}var Uv=Rv,Kv=Lv,Vv=["container"],Wv=(0,t.forwardRef)((function(e,n){var r,o=e.container,a=void 0===o?null===globalThis||void 0===globalThis||null===(r=globalThis.document)||void 0===r?void 0:r.body:o,s=Ye(e,Vv);return a?i.createPortal((0,t.createElement)(Iv.div,dv({},s,{ref:n})),a):null})),Hv=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?t.useLayoutEffect:function(){};var Yv=function(e){var n=e.present,r=e.children,o=function(e){var n=N((0,t.useState)(),2),r=n[0],o=n[1],a=(0,t.useRef)({}),s=(0,t.useRef)(e),u=(0,t.useRef)("none"),l=e?"mounted":"unmounted",c=function(e,n){return(0,t.useReducer)((function(e,t){var r=n[e][t];return null!==r&&void 0!==r?r:e}),e)}(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),d=N(c,2),p=d[0],f=d[1];return(0,t.useEffect)((function(){var e=Xv(a.current);u.current="mounted"===p?e:"none"}),[p]),Hv((function(){var t=a.current,n=s.current;if(n!==e){var r=u.current,i=Xv(t);if(e)f("MOUNT");else if("none"===i||"none"===(null===t||void 0===t?void 0:t.display))f("UNMOUNT");else{f(n&&r!==i?"ANIMATION_OUT":"UNMOUNT")}s.current=e}}),[e,f]),Hv((function(){if(r){var e=function(e){var t=Xv(a.current).includes(e.animationName);e.target===r&&t&&(0,i.flushSync)((function(){return f("ANIMATION_END")}))},t=function(e){e.target===r&&(u.current=Xv(a.current))};return r.addEventListener("animationstart",t),r.addEventListener("animationcancel",e),r.addEventListener("animationend",e),function(){r.removeEventListener("animationstart",t),r.removeEventListener("animationcancel",e),r.removeEventListener("animationend",e)}}f("ANIMATION_END")}),[r,f]),{isPresent:["mounted","unmountSuspended"].includes(p),ref:(0,t.useCallback)((function(e){e&&(a.current=getComputedStyle(e)),o(e)}),[])}}(n),a="function"===typeof r?r({present:o.isPresent}):t.Children.only(r),s=hv(o.ref,a.ref);return"function"===typeof r||o.isPresent?(0,t.cloneElement)(a,{ref:s}):null};function Xv(e){return(null===e||void 0===e?void 0:e.animationName)||"none"}function qv(e){var n=e.prop,r=e.defaultProp,i=e.onChange,o=void 0===i?function(){}:i,a=function(e){var n=e.defaultProp,r=e.onChange,i=(0,t.useState)(n),o=N(i,1)[0],a=(0,t.useRef)(o),s=Tv(r);return(0,t.useEffect)((function(){a.current!==o&&(s(o),a.current=o)}),[o,a,s]),i}({defaultProp:r,onChange:o}),s=N(a,2),u=s[0],l=s[1],c=void 0!==n,d=c?n:u,p=Tv(o);return[d,(0,t.useCallback)((function(e){if(c){var t="function"===typeof e?e(n):e;t!==n&&p(t)}else l(e)}),[c,n,l,p])]}Yv.displayName="Presence";var $v=(0,t.forwardRef)((function(e,n){return(0,t.createElement)(Iv.span,dv({},e,{ref:n,style:x({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},e.style)}))})),Gv=["__scopeToast","hotkey","label"],Qv=["__scopeToast","onFocusFromOutsideViewport"],Zv=["forceMount","open","defaultOpen","onOpenChange"],Jv=["__scopeToast","type","duration","open","onClose","onEscapeKeyDown","onPause","onResume","onSwipeStart","onSwipeMove","onSwipeCancel","onSwipeEnd"],eg=["__scopeToast","children"],tg=["__scopeToast"],ng=["__scopeToast"],rg=["altText"],ig=["__scopeToast"],og=["__scopeToast","altText"],ag="ToastProvider",sg=N(Cv("Toast"),3),ug=sg[0],lg=sg[1],cg=N(mv("Toast",[sg[2]]),2),dg=cg[0],pg=(cg[1],N(dg(ag),2)),fg=pg[0],hg=pg[1],vg=function(e){var n=e.__scopeToast,r=e.label,i=void 0===r?"Notification":r,o=e.duration,a=void 0===o?5e3:o,s=e.swipeDirection,u=void 0===s?"right":s,l=e.swipeThreshold,c=void 0===l?50:l,d=e.children,p=N((0,t.useState)(null),2),f=p[0],h=p[1],v=N((0,t.useState)(0),2),g=v[0],m=v[1],y=(0,t.useRef)(!1),b=(0,t.useRef)(!1);return(0,t.createElement)(ug.Provider,{scope:n},(0,t.createElement)(fg,{scope:n,label:i,duration:a,swipeDirection:u,swipeThreshold:c,toastCount:g,viewport:f,onViewportChange:h,onToastAdd:(0,t.useCallback)((function(){return m((function(e){return e+1}))}),[]),onToastRemove:(0,t.useCallback)((function(){return m((function(e){return e-1}))}),[]),isFocusedToastEscapeKeyDownRef:y,isClosePausedRef:b},d))};vg.propTypes={label:function(e){if(e.label&&"string"===typeof e.label&&!e.label.trim()){var t="Invalid prop `label` supplied to `".concat(ag,"`. Expected non-empty `string`.");return new Error(t)}return null}};var gg="ToastViewport",mg=["F8"],yg="toast.viewportPause",bg="toast.viewportResume",wg=(0,t.forwardRef)((function(e,n){var r=e.__scopeToast,i=e.hotkey,o=void 0===i?mg:i,a=e.label,s=void 0===a?"Notifications ({hotkey})":a,u=Ye(e,Gv),l=hg(gg,r),c=lg(r),d=(0,t.useRef)(null),p=(0,t.useRef)(null),f=(0,t.useRef)(null),h=(0,t.useRef)(null),v=hv(n,h,l.onViewportChange),g=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=l.toastCount>0;(0,t.useEffect)((function(){var e=function(e){var t;o.every((function(t){return e[t]||e.code===t}))&&(null===(t=h.current)||void 0===t||t.focus())};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[o]),(0,t.useEffect)((function(){var e=d.current,t=h.current;if(m&&e&&t){var n=function(){if(!l.isClosePausedRef.current){var e=new CustomEvent(yg);t.dispatchEvent(e),l.isClosePausedRef.current=!0}},r=function(){if(l.isClosePausedRef.current){var e=new CustomEvent(bg);t.dispatchEvent(e),l.isClosePausedRef.current=!1}},i=function(t){!e.contains(t.relatedTarget)&&r()},o=function(){e.contains(document.activeElement)||r()};return e.addEventListener("focusin",n),e.addEventListener("focusout",i),e.addEventListener("pointermove",n),e.addEventListener("pointerleave",o),window.addEventListener("blur",n),window.addEventListener("focus",r),function(){e.removeEventListener("focusin",n),e.removeEventListener("focusout",i),e.removeEventListener("pointermove",n),e.removeEventListener("pointerleave",o),window.removeEventListener("blur",n),window.removeEventListener("focus",r)}}}),[m,l.isClosePausedRef]);var y=(0,t.useCallback)((function(e){var t=e.tabbingDirection,n=c().map((function(e){var n=e.ref.current,r=[n].concat(M(function(e){var t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){var t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}(n)));return"forwards"===t?r:r.reverse()}));return("forwards"===t?n.reverse():n).flat()}),[c]);return(0,t.useEffect)((function(){var e=h.current;if(e){var t=function(t){var n=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!n){var r,i=document.activeElement,o=t.shiftKey;if(t.target===e&&o)return void(null===(r=p.current)||void 0===r||r.focus());var a,s,u=y({tabbingDirection:o?"backwards":"forwards"}),l=u.findIndex((function(e){return e===i}));if(Fg(u.slice(l+1)))t.preventDefault();else o?null===(a=p.current)||void 0===a||a.focus():null===(s=f.current)||void 0===s||s.focus()}};return e.addEventListener("keydown",t),function(){return e.removeEventListener("keydown",t)}}}),[c,y]),(0,t.createElement)(Kv,{ref:d,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:m?void 0:"none"}},m&&(0,t.createElement)(kg,{ref:p,onFocusFromOutsideViewport:function(){Fg(y({tabbingDirection:"forwards"}))}}),(0,t.createElement)(ug.Slot,{scope:r},(0,t.createElement)(Iv.ol,dv({tabIndex:-1},u,{ref:v}))),m&&(0,t.createElement)(kg,{ref:f,onFocusFromOutsideViewport:function(){Fg(y({tabbingDirection:"backwards"}))}}))})),xg="ToastFocusProxy",kg=(0,t.forwardRef)((function(e,n){var r=e.__scopeToast,i=e.onFocusFromOutsideViewport,o=Ye(e,Qv),a=hg(xg,r);return(0,t.createElement)($v,dv({"aria-hidden":!0,tabIndex:0},o,{ref:n,style:{position:"fixed"},onFocus:function(e){var t,n=e.relatedTarget;!(null!==(t=a.viewport)&&void 0!==t&&t.contains(n))&&i()}}))})),Sg="Toast",_g=(0,t.forwardRef)((function(e,n){var r=e.forceMount,i=e.open,o=e.defaultOpen,a=e.onOpenChange,s=Ye(e,Zv),u=N(qv({prop:i,defaultProp:o,onChange:a}),2),l=u[0],c=void 0===l||l,d=u[1];return(0,t.createElement)(Yv,{present:r||c},(0,t.createElement)(Ig,dv({open:c},s,{ref:n,onClose:function(){return d(!1)},onPause:Tv(e.onPause),onResume:Tv(e.onResume),onSwipeStart:pv(e.onSwipeStart,(function(e){e.currentTarget.setAttribute("data-swipe","start")})),onSwipeMove:pv(e.onSwipeMove,(function(e){var t=e.detail.delta,n=t.x,r=t.y;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x","".concat(n,"px")),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y","".concat(r,"px"))})),onSwipeCancel:pv(e.onSwipeCancel,(function(e){e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")})),onSwipeEnd:pv(e.onSwipeEnd,(function(e){var t=e.detail.delta,n=t.x,r=t.y;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x","".concat(n,"px")),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y","".concat(r,"px")),d(!1)}))})))})),Pg=N(dg(Sg,{onClose:function(){}}),2),Cg=Pg[0],Eg=Pg[1],Ig=(0,t.forwardRef)((function(e,n){var r=e.__scopeToast,o=e.type,a=void 0===o?"foreground":o,s=e.duration,u=e.open,l=e.onClose,c=e.onEscapeKeyDown,d=e.onPause,p=e.onResume,f=e.onSwipeStart,h=e.onSwipeMove,v=e.onSwipeCancel,g=e.onSwipeEnd,m=Ye(e,Jv),y=hg(Sg,r),b=N((0,t.useState)(null),2),w=b[0],k=b[1],S=hv(n,(function(e){return k(e)})),_=(0,t.useRef)(null),P=(0,t.useRef)(null),C=s||y.duration,E=(0,t.useRef)(0),I=(0,t.useRef)(C),M=(0,t.useRef)(0),T=y.onToastAdd,j=y.onToastRemove,A=Tv((function(){var e;(null===w||void 0===w?void 0:w.contains(document.activeElement))&&(null===(e=y.viewport)||void 0===e||e.focus()),l()})),O=(0,t.useCallback)((function(e){e&&e!==1/0&&(window.clearTimeout(M.current),E.current=(new Date).getTime(),M.current=window.setTimeout(A,e))}),[A]);(0,t.useEffect)((function(){var e=y.viewport;if(e){var t=function(){O(I.current),null===p||void 0===p||p()},n=function(){var e=(new Date).getTime()-E.current;I.current=I.current-e,window.clearTimeout(M.current),null===d||void 0===d||d()};return e.addEventListener(yg,n),e.addEventListener(bg,t),function(){e.removeEventListener(yg,n),e.removeEventListener(bg,t)}}}),[y.viewport,C,d,p,O]),(0,t.useEffect)((function(){u&&!y.isClosePausedRef.current&&O(C)}),[u,C,y.isClosePausedRef,O]),(0,t.useEffect)((function(){return T(),function(){return j()}}),[T,j]);var z=(0,t.useMemo)((function(){return w?Rg(w):null}),[w]);return y.viewport?(0,t.createElement)(t.Fragment,null,z&&(0,t.createElement)(Mg,{__scopeToast:r,role:"status","aria-live":"foreground"===a?"assertive":"polite","aria-atomic":!0},z),(0,t.createElement)(Cg,{scope:r,onClose:A},(0,i.createPortal)((0,t.createElement)(ug.ItemSlot,{scope:r},(0,t.createElement)(Uv,{asChild:!0,onEscapeKeyDown:pv(c,(function(){y.isFocusedToastEscapeKeyDownRef.current||A(),y.isFocusedToastEscapeKeyDownRef.current=!1}))},(0,t.createElement)(Iv.li,dv({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":u?"open":"closed","data-swipe-direction":y.swipeDirection},m,{ref:S,style:x({userSelect:"none",touchAction:"none"},e.style),onKeyDown:pv(e.onKeyDown,(function(e){"Escape"===e.key&&(null===c||void 0===c||c(e.nativeEvent),e.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,A()))})),onPointerDown:pv(e.onPointerDown,(function(e){0===e.button&&(_.current={x:e.clientX,y:e.clientY})})),onPointerMove:pv(e.onPointerMove,(function(e){if(_.current){var t=e.clientX-_.current.x,n=e.clientY-_.current.y,r=Boolean(P.current),i=["left","right"].includes(y.swipeDirection),o=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,a=i?o(0,t):0,s=i?0:o(0,n),u="touch"===e.pointerType?10:2,l={x:a,y:s},c={originalEvent:e,delta:l};r?(P.current=l,Lg("toast.swipeMove",h,c,{discrete:!1})):Bg(l,y.swipeDirection,u)?(P.current=l,Lg("toast.swipeStart",f,c,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>u||Math.abs(n)>u)&&(_.current=null)}})),onPointerUp:pv(e.onPointerUp,(function(e){var t=P.current,n=e.target;if(n.hasPointerCapture(e.pointerId)&&n.releasePointerCapture(e.pointerId),P.current=null,_.current=null,t){var r=e.currentTarget,i={originalEvent:e,delta:t};Bg(t,y.swipeDirection,y.swipeThreshold)?Lg("toast.swipeEnd",g,i,{discrete:!0}):Lg("toast.swipeCancel",v,i,{discrete:!0}),r.addEventListener("click",(function(e){return e.preventDefault()}),{once:!0})}}))})))),y.viewport))):null}));Ig.propTypes={type:function(e){if(e.type&&!["foreground","background"].includes(e.type)){var t="Invalid prop `type` supplied to `".concat(Sg,"`. Expected `foreground | background`.");return new Error(t)}return null}};var Mg=function(e){var n=e.__scopeToast,r=e.children,i=Ye(e,eg),o=hg(Sg,n),a=N((0,t.useState)(!1),2),s=a[0],u=a[1],l=N((0,t.useState)(!1),2),c=l[0],d=l[1];return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=Tv(e);Hv((function(){var e=0,n=0;return e=window.requestAnimationFrame((function(){return n=window.requestAnimationFrame(t)})),function(){window.cancelAnimationFrame(e),window.cancelAnimationFrame(n)}}),[t])}((function(){return u(!0)})),(0,t.useEffect)((function(){var e=window.setTimeout((function(){return d(!0)}),1e3);return function(){return window.clearTimeout(e)}}),[]),c?null:(0,t.createElement)(Wv,{asChild:!0},(0,t.createElement)($v,i,s&&(0,t.createElement)(t.Fragment,null,o.label," ",r)))},Tg=(0,t.forwardRef)((function(e,n){e.__scopeToast;var r=Ye(e,tg);return(0,t.createElement)(Iv.div,dv({},r,{ref:n}))})),jg=(0,t.forwardRef)((function(e,n){e.__scopeToast;var r=Ye(e,ng);return(0,t.createElement)(Iv.div,dv({},r,{ref:n}))})),Ag="ToastAction",Og=(0,t.forwardRef)((function(e,n){var r=e.altText,i=Ye(e,rg);return r?(0,t.createElement)(Ng,{altText:r,asChild:!0},(0,t.createElement)(Dg,dv({},i,{ref:n}))):null}));Og.propTypes={altText:function(e){return e.altText?null:new Error("Missing prop `altText` expected on `".concat(Ag,"`"))}};var zg="ToastClose",Dg=(0,t.forwardRef)((function(e,n){var r=e.__scopeToast,i=Ye(e,ig),o=Eg(zg,r);return(0,t.createElement)(Ng,{asChild:!0},(0,t.createElement)(Iv.button,dv({type:"button"},i,{ref:n,onClick:pv(e.onClick,o.onClose)})))})),Ng=(0,t.forwardRef)((function(e,n){e.__scopeToast;var r=e.altText,i=Ye(e,og);return(0,t.createElement)(Iv.div,dv({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0},i,{ref:n}))}));function Rg(e){var t=[];return Array.from(e.childNodes).forEach((function(e){if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){var n=e.ariaHidden||e.hidden||"none"===e.style.display,r=""===e.dataset.radixToastAnnounceExclude;if(!n)if(r){var i=e.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push.apply(t,M(Rg(e)))}})),t}function Lg(e,t,n,r){var i=r.discrete,o=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),i?Mv(o,a):o.dispatchEvent(a)}var Bg=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.abs(e.x),i=Math.abs(e.y),o=r>i;return"left"===t||"right"===t?o&&r>n:!o&&i>n};function Fg(e){var t=document.activeElement;return e.some((function(e){return e===t||(e.focus(),document.activeElement!==t)}))}var Ug=_g,Kg=Tg,Vg=jg,Wg=Og,Hg=Dg,Yg=(0,t.createContext)(void 0);function Xg(e){var n=(0,t.useContext)(Yg);return e||n||"ltr"}var qg=0;function $g(){(0,t.useEffect)((function(){var e,t,n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=n[0])&&void 0!==e?e:Gg()),document.body.insertAdjacentElement("beforeend",null!==(t=n[1])&&void 0!==t?t:Gg()),qg++,function(){1===qg&&document.querySelectorAll("[data-radix-focus-guard]").forEach((function(e){return e.remove()})),qg--}}),[])}function Gg(){var e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var Qg=["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"],Zg="focusScope.autoFocusOnMount",Jg="focusScope.autoFocusOnUnmount",em={bubbles:!1,cancelable:!0},tm=(0,t.forwardRef)((function(e,n){var r=e.loop,i=void 0!==r&&r,o=e.trapped,a=void 0!==o&&o,s=e.onMountAutoFocus,u=e.onUnmountAutoFocus,l=Ye(e,Qg),c=N((0,t.useState)(null),2),d=c[0],p=c[1],f=Tv(s),h=Tv(u),v=(0,t.useRef)(null),g=hv(n,(function(e){return p(e)})),m=(0,t.useRef)({paused:!1,pause:function(){this.paused=!0},resume:function(){this.paused=!1}}).current;(0,t.useEffect)((function(){if(a){var e=function(e){if(!m.paused&&d){var t=e.target;d.contains(t)?v.current=t:om(v.current,{select:!0})}},t=function(e){!m.paused&&d&&(d.contains(e.relatedTarget)||om(v.current,{select:!0}))};return document.addEventListener("focusin",e),document.addEventListener("focusout",t),function(){document.removeEventListener("focusin",e),document.removeEventListener("focusout",t)}}}),[a,d,m.paused]),(0,t.useEffect)((function(){if(d){am.add(m);var e=document.activeElement;if(!d.contains(e)){var t=new CustomEvent(Zg,em);d.addEventListener(Zg,f),d.dispatchEvent(t),t.defaultPrevented||(!function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.select,i=void 0!==r&&r,o=document.activeElement,a=y(e);try{for(a.s();!(t=a.n()).done;){if(om(t.value,{select:i}),document.activeElement!==o)return}}catch(s){a.e(s)}finally{a.f()}}((n=nm(d),n.filter((function(e){return"A"!==e.tagName}))),{select:!0}),document.activeElement===e&&om(d))}return function(){d.removeEventListener(Zg,f),setTimeout((function(){var t=new CustomEvent(Jg,em);d.addEventListener(Jg,h),d.dispatchEvent(t),t.defaultPrevented||om(null!==e&&void 0!==e?e:document.body,{select:!0}),d.removeEventListener(Jg,h),am.remove(m)}),0)}}var n}),[d,f,h,m]);var b=(0,t.useCallback)((function(e){if((i||a)&&!m.paused){var t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,n=document.activeElement;if(t&&n){var r=e.currentTarget,o=function(e){var t=nm(e),n=rm(t,e),r=rm(t.reverse(),e);return[n,r]}(r),s=N(o,2),u=s[0],l=s[1];u&&l?e.shiftKey||n!==l?e.shiftKey&&n===u&&(e.preventDefault(),i&&om(l,{select:!0})):(e.preventDefault(),i&&om(u,{select:!0})):n===r&&e.preventDefault()}}}),[i,a,m.paused]);return(0,t.createElement)(Iv.div,dv({tabIndex:-1},l,{ref:g,onKeyDown:b}))}));function nm(e){for(var t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){var t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});n.nextNode();)t.push(n.currentNode);return t}function rm(e,t){var n,r=y(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!im(i,{upTo:t}))return i}}catch(o){r.e(o)}finally{r.f()}}function im(e,t){var n=t.upTo;if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==n&&e===n)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function om(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).select,n=void 0!==t&&t;if(e&&e.focus){var r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&n&&e.select()}}var am=function(){var e=[];return{add:function(t){var n=e[0];t!==n&&(null===n||void 0===n||n.pause()),(e=sm(e,t)).unshift(t)},remove:function(t){var n;null===(n=(e=sm(e,t))[0])||void 0===n||n.resume()}}}();function sm(e,t){var n=M(e),r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}var um=r["useId".toString()]||function(){},lm=0;function cm(e){var n=N(t.useState(um()),2),r=n[0],i=n[1];return Hv((function(){e||i((function(e){return null!==e&&void 0!==e?e:String(lm++)}))}),[e]),e||(r?"radix-".concat(r):"")}var dm=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"],pm=["strategy"],fm=["mainAxis","crossAxis","limiter"],hm=["apply"];function vm(e){return e.split("-")[0]}function gm(e){return e.split("-")[1]}function mm(e){return["top","bottom"].includes(vm(e))?"x":"y"}function ym(e){return"y"===e?"height":"width"}function bm(e,t,n){var r,i=e.reference,o=e.floating,a=i.x+i.width/2-o.width/2,s=i.y+i.height/2-o.height/2,u=mm(t),l=ym(u),c=i[l]/2-o[l]/2,d="x"===u;switch(vm(t)){case"top":r={x:a,y:i.y-o.height};break;case"bottom":r={x:a,y:i.y+i.height};break;case"right":r={x:i.x+i.width,y:s};break;case"left":r={x:i.x-o.width,y:s};break;default:r={x:i.x,y:i.y}}switch(gm(t)){case"start":r[u]-=c*(n&&d?-1:1);break;case"end":r[u]+=c*(n&&d?-1:1)}return r}var wm=function(){var e=Ai(Ti().mark((function e(t,n,r){var i,o,a,s,u,l,c,d,p,f,h,v,g,m,y,w,k,S,_,P,C,E,I,M,T;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.placement,o=void 0===i?"bottom":i,a=r.strategy,s=void 0===a?"absolute":a,u=r.middleware,l=void 0===u?[]:u,c=r.platform,e.next=9,null==c.isRTL?void 0:c.isRTL(n);case 9:return d=e.sent,e.next=12,c.getElementRects({reference:t,floating:n,strategy:s});case 12:p=e.sent,f=bm(p,o,d),h=f.x,v=f.y,g=o,m={},y=0,w=0;case 20:if(!(w<l.length)){e.next=55;break}return S=l[w],_=S.name,P=S.fn,e.next=26,P({x:h,y:v,initialPlacement:o,placement:g,strategy:s,middlewareData:m,rects:p,platform:c,elements:{reference:t,floating:n}});case 26:if(C=e.sent,E=C.x,I=C.y,M=C.data,T=C.reset,h=null!=E?E:h,v=null!=I?I:v,m=x(x({},m),{},b({},_,x(x({},m[_]),M))),e.t0=T&&y<=50,!e.t0){e.next=52;break}if(y++,e.t1="object"==typeof T,!e.t1){e.next=51;break}if(T.placement&&(g=T.placement),e.t2=T.rects,!e.t2){e.next=50;break}if(!0!==T.rects){e.next=48;break}return e.next=45,c.getElementRects({reference:t,floating:n,strategy:s});case 45:e.t3=e.sent,e.next=49;break;case 48:e.t3=T.rects;case 49:p=e.t3;case 50:k=bm(p,g,d),h=k.x,v=k.y;case 51:w=-1;case 52:w++,e.next=20;break;case 55:return e.abrupt("return",{x:h,y:v,placement:g,strategy:s,middlewareData:m});case 56:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function xm(e){return"number"!=typeof e?function(e){return x({top:0,right:0,bottom:0,left:0},e)}(e):{top:e,right:e,bottom:e,left:e}}function km(e){return x(x({},e),{},{top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height})}function Sm(e,t){return _m.apply(this,arguments)}function _m(){return _m=Ai(Ti().mark((function e(t,n){var r,i,o,a,s,u,l,c,d,p,f,h,v,g,m,y,b,w,k,S,_;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),i=t.x,o=t.y,a=t.platform,s=t.rects,u=t.elements,l=t.strategy,d=(c=n).boundary,p=void 0===d?"clippingAncestors":d,f=c.rootBoundary,h=void 0===f?"viewport":f,v=c.elementContext,g=void 0===v?"floating":v,m=c.altBoundary,y=void 0!==m&&m,b=c.padding,w=xm(void 0===b?0:b),k=u[y?"floating"===g?"reference":"floating":g],e.t0=km,e.t1=a,e.next=24,null==a.isElement?void 0:a.isElement(k);case 24:if(e.t3=r=e.sent,e.t2=null==e.t3,e.t2){e.next=28;break}e.t2=r;case 28:if(!e.t2){e.next=32;break}e.t4=k,e.next=38;break;case 32:if(e.t5=k.contextElement,e.t5){e.next=37;break}return e.next=36,null==a.getDocumentElement?void 0:a.getDocumentElement(u.floating);case 36:e.t5=e.sent;case 37:e.t4=e.t5;case 38:return e.t6=e.t4,e.t7=p,e.t8=h,e.t9=l,e.t10={element:e.t6,boundary:e.t7,rootBoundary:e.t8,strategy:e.t9},e.next=45,e.t1.getClippingRect.call(e.t1,e.t10);case 45:if(e.t11=e.sent,S=(0,e.t0)(e.t11),e.t12=km,!a.convertOffsetParentRelativeRectToViewportRelativeRect){e.next=61;break}return e.t14=a,e.t15="floating"===g?x(x({},s.floating),{},{x:i,y:o}):s.reference,e.next=53,null==a.getOffsetParent?void 0:a.getOffsetParent(u.floating);case 53:return e.t16=e.sent,e.t17=l,e.t18={rect:e.t15,offsetParent:e.t16,strategy:e.t17},e.next=58,e.t14.convertOffsetParentRelativeRectToViewportRelativeRect.call(e.t14,e.t18);case 58:e.t13=e.sent,e.next=62;break;case 61:e.t13=s[g];case 62:return e.t19=e.t13,_=(0,e.t12)(e.t19),e.abrupt("return",{top:S.top-_.top+w.top,bottom:_.bottom-S.bottom+w.bottom,left:S.left-_.left+w.left,right:_.right-S.right+w.right});case 65:case"end":return e.stop()}}),e)}))),_m.apply(this,arguments)}var Pm=Math.min,Cm=Math.max;function Em(e,t,n){return Cm(e,Pm(t,n))}var Im=function(e){return{name:"arrow",options:e,fn:function(t){return Ai(Ti().mark((function n(){var r,i,o,a,s,u,l,c,d,p,f,h,v,g,m,y,w,x,k,S,_,P,C,E,I,M,T,j,A;return Ti().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=(o=null!=e?e:{}).element,s=o.padding,u=void 0===s?0:s,l=t.x,c=t.y,d=t.placement,p=t.rects,f=t.platform,null!=a){n.next=3;break}return n.abrupt("return",{});case 3:return h=xm(u),v={x:l,y:c},g=mm(d),m=gm(d),y=ym(g),n.next=10,f.getDimensions(a);case 10:return w=n.sent,x="y"===g?"top":"left",k="y"===g?"bottom":"right",S=p.reference[y]+p.reference[g]-v[g]-p.floating[y],_=v[g]-p.reference[g],n.next=17,null==f.getOffsetParent?void 0:f.getOffsetParent(a);case 17:return P=n.sent,0===(C=P?"y"===g?P.clientHeight||0:P.clientWidth||0:0)&&(C=p.floating[y]),E=S/2-_/2,I=h[x],M=C-w[y]-h[k],T=C/2-w[y]/2+E,j=Em(I,T,M),A=("start"===m?h[x]:h[k])>0&&T!==j&&p.reference[y]<=p.floating[y],n.abrupt("return",(b(i={},g,v[g]-(A?T<I?I-T:M-T:0)),b(i,"data",(b(r={},g,j),b(r,"centerOffset",T-j),r)),i));case 22:case"end":return n.stop()}}),n)})))()}}},Mm={left:"right",right:"left",bottom:"top",top:"bottom"};function Tm(e){return e.replace(/left|right|bottom|top/g,(function(e){return Mm[e]}))}function jm(e,t,n){void 0===n&&(n=!1);var r=gm(e),i=mm(e),o=ym(i),a="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=Tm(a)),{main:a,cross:Tm(a)}}var Am={start:"end",end:"start"};function Om(e){return e.replace(/start|end/g,(function(e){return Am[e]}))}var zm=["top","right","bottom","left"],Dm=(zm.reduce((function(e,t){return e.concat(t,t+"-start",t+"-end")}),[]),function(e){return void 0===e&&(e={}),{name:"flip",options:e,fn:function(t){return Ai(Ti().mark((function n(){var r,i,o,a,s,u,l,c,d,p,f,h,v,g,m,y,b,w,x,k,S,_,P,C,E,I,T,j,A,O,z,D,N,R;return Ti().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.placement,o=t.middlewareData,a=t.rects,s=t.initialPlacement,u=t.platform,l=t.elements,d=(c=e).mainAxis,p=void 0===d||d,f=c.crossAxis,h=void 0===f||f,v=c.fallbackPlacements,g=c.fallbackStrategy,m=void 0===g?"bestFit":g,y=c.flipAlignment,b=void 0===y||y,w=Ye(c,dm),x=vm(i),k=v||(x!==s&&b?function(e){var t=Tm(e);return[Om(e),t,Om(t)]}(s):[Tm(s)]),S=[s].concat(M(k)),n.next=22,Sm(t,w);case 22:if(_=n.sent,P=[],C=(null==(r=o.flip)?void 0:r.overflows)||[],p&&P.push(_[x]),!h){n.next=36;break}return n.t0=jm,n.t1=i,n.t2=a,n.next=31,null==u.isRTL?void 0:u.isRTL(l.floating);case 31:n.t3=n.sent,E=(0,n.t0)(n.t1,n.t2,n.t3),I=E.main,T=E.cross,P.push(_[I],_[T]);case 36:if(C=[].concat(M(C),[{placement:i,overflows:P}]),P.every((function(e){return e<=0}))){n.next=50;break}if(O=(null!=(j=null==(A=o.flip)?void 0:A.index)?j:0)+1,!(z=S[O])){n.next=40;break}return n.abrupt("return",{data:{index:O,overflows:C},reset:{placement:z}});case 40:D="bottom",n.t4=m,n.next="bestFit"===n.t4?44:"initialPlacement"===n.t4?47:48;break;case 44:return R=null==(N=C.map((function(e){return[e,e.overflows.filter((function(e){return e>0})).reduce((function(e,t){return e+t}),0)]})).sort((function(e,t){return e[1]-t[1]}))[0])?void 0:N[0].placement,R&&(D=R),n.abrupt("break",48);case 47:D=s;case 48:if(i===D){n.next=50;break}return n.abrupt("return",{reset:{placement:D}});case 50:return n.abrupt("return",{});case 51:case"end":return n.stop()}}),n)})))()}}});function Nm(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Rm(e){return zm.some((function(t){return e[t]>=0}))}var Lm=function(e){var t=void 0===e?{}:e,n=t.strategy,r=void 0===n?"referenceHidden":n,i=Ye(t,pm);return{name:"hide",fn:function(e){return Ai(Ti().mark((function t(){var n,o,a;return Ti().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.rects,t.t0=r,t.next="referenceHidden"===t.t0?4:"escaped"===t.t0?11:18;break;case 4:return t.t1=Nm,t.next=7,Sm(e,x(x({},i),{},{elementContext:"reference"}));case 7:return t.t2=t.sent,t.t3=n.reference,o=(0,t.t1)(t.t2,t.t3),t.abrupt("return",{data:{referenceHiddenOffsets:o,referenceHidden:Rm(o)}});case 11:return t.t4=Nm,t.next=14,Sm(e,x(x({},i),{},{altBoundary:!0}));case 14:return t.t5=t.sent,t.t6=n.floating,a=(0,t.t4)(t.t5,t.t6),t.abrupt("return",{data:{escapedOffsets:a,escaped:Rm(a)}});case 18:return t.abrupt("return",{});case 19:case"end":return t.stop()}}),t)})))()}}},Bm=function(e){return void 0===e&&(e=0),{name:"offset",options:e,fn:function(t){return Ai(Ti().mark((function n(){var r,i,o;return Ti().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.x,i=t.y,n.next=4,function(){var e=Ai(Ti().mark((function e(t,n){var r,i,o,a,s,u,l,c,d,p,f,h,v,g;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.placement,i=t.platform,o=t.elements,e.next=5,null==i.isRTL?void 0:i.isRTL(o.floating);case 5:return a=e.sent,s=vm(r),u=gm(r),l="x"===mm(r),c=["left","top"].includes(s)?-1:1,d=a&&l?-1:1,p="function"==typeof n?n(t):n,f="number"==typeof p?{mainAxis:p,crossAxis:0,alignmentAxis:null}:x({mainAxis:0,crossAxis:0,alignmentAxis:null},p),h=f.mainAxis,v=f.crossAxis,g=f.alignmentAxis,e.abrupt("return",(u&&"number"==typeof g&&(v="end"===u?-1*g:g),l?{x:v*d,y:h*c}:{x:h*c,y:v*d}));case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,e);case 4:return o=n.sent,n.abrupt("return",{x:r+o.x,y:i+o.y,data:o});case 6:case"end":return n.stop()}}),n)})))()}}};function Fm(e){return"x"===e?"y":"x"}var Um=function(e){return void 0===e&&(e={}),{name:"shift",options:e,fn:function(t){return Ai(Ti().mark((function n(){var r,i,o,a,s,u,l,c,d,p,f,h,v,g,m,y,w,k,S,_,P;return Ti().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.x,o=t.y,a=t.placement,u=(s=e).mainAxis,l=void 0===u||u,c=s.crossAxis,d=void 0!==c&&c,p=s.limiter,f=void 0===p?{fn:function(e){return{x:e.x,y:e.y}}}:p,h=Ye(s,fm),v={x:i,y:o},n.next=14,Sm(t,h);case 14:return g=n.sent,m=mm(vm(a)),y=Fm(m),w=v[m],k=v[y],l&&(S="y"===m?"bottom":"right",w=Em(w+g["y"===m?"top":"left"],w,w-g[S])),d&&(_="y"===y?"bottom":"right",k=Em(k+g["y"===y?"top":"left"],k,k-g[_])),P=f.fn(x(x({},t),{},(b(r={},m,w),b(r,y,k),r))),n.abrupt("return",x(x({},P),{},{data:{x:P.x-i,y:P.y-o}}));case 22:case"end":return n.stop()}}),n)})))()}}},Km=function(e){return void 0===e&&(e={}),{options:e,fn:function(t){var n,r=t.x,i=t.y,o=t.placement,a=t.rects,s=t.middlewareData,u=e,l=u.offset,c=void 0===l?0:l,d=u.mainAxis,p=void 0===d||d,f=u.crossAxis,h=void 0===f||f,v={x:r,y:i},g=mm(o),m=Fm(g),y=v[g],w=v[m],k="function"==typeof c?c(x(x({},a),{},{placement:o})):c,S="number"==typeof k?{mainAxis:k,crossAxis:0}:x({mainAxis:0,crossAxis:0},k);if(p){var _="y"===g?"height":"width",P=a.reference[g]-a.floating[_]+S.mainAxis,C=a.reference[g]+a.reference[_]-S.mainAxis;y<P?y=P:y>C&&(y=C)}if(h){var E,I,M,T,j="y"===g?"width":"height",A=["top","left"].includes(vm(o)),O=a.reference[m]-a.floating[j]+(A&&null!=(E=null==(I=s.offset)?void 0:I[m])?E:0)+(A?0:S.crossAxis),z=a.reference[m]+a.reference[j]+(A?0:null!=(M=null==(T=s.offset)?void 0:T[m])?M:0)-(A?S.crossAxis:0);w<O?w=O:w>z&&(w=z)}return b(n={},g,y),b(n,m,w),n}}},Vm=function(e){return void 0===e&&(e={}),{name:"size",options:e,fn:function(t){return Ai(Ti().mark((function n(){var r,i,o,a,s,u,l,c,d,p,f,h,v,g,m,y,b,w,k;return Ti().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.placement,i=t.rects,o=t.platform,a=t.elements,u=(s=e).apply,l=Ye(s,hm),n.next=9,Sm(t,l);case 9:if(c=n.sent,d=vm(r),p=gm(r),"top"!==d&&"bottom"!==d){n.next=31;break}return f=d,n.t0=p,n.next=17,null==o.isRTL?void 0:o.isRTL(a.floating);case 17:if(!n.sent){n.next=21;break}n.t1="start",n.next=22;break;case 21:n.t1="end";case 22:if(n.t2=n.t1,n.t0!==n.t2){n.next=27;break}n.t3="left",n.next=28;break;case 27:n.t3="right";case 28:h=n.t3,n.next=32;break;case 31:h=d,f="end"===p?"top":"bottom";case 32:return v=Cm(c.left,0),g=Cm(c.right,0),m=Cm(c.top,0),y=Cm(c.bottom,0),b={availableHeight:i.floating.height-(["left","right"].includes(r)?2*(0!==m||0!==y?m+y:Cm(c.top,c.bottom)):c[f]),availableWidth:i.floating.width-(["top","bottom"].includes(r)?2*(0!==v||0!==g?v+g:Cm(c.left,c.right)):c[h])},n.next=39,o.getDimensions(a.floating);case 39:return w=n.sent,null==u||u(x(x({},t),b)),n.next=43,o.getDimensions(a.floating);case 43:return k=n.sent,n.abrupt("return",w.width!==k.width||w.height!==k.height?{reset:{rects:!0}}:{});case 45:case"end":return n.stop()}}),n)})))()}}};function Wm(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function Hm(e){if(null==e)return window;if(!Wm(e)){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Ym(e){return Hm(e).getComputedStyle(e)}function Xm(e){return Wm(e)?"":e?(e.nodeName||"").toLowerCase():""}function qm(){var e=navigator.userAgentData;return null!=e&&e.brands?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function $m(e){return e instanceof Hm(e).HTMLElement}function Gm(e){return e instanceof Hm(e).Element}function Qm(e){return"undefined"!=typeof ShadowRoot&&(e instanceof Hm(e).ShadowRoot||e instanceof ShadowRoot)}function Zm(e){var t=Ym(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Jm(e){return["table","td","th"].includes(Xm(e))}function ey(e){var t=/firefox/i.test(qm()),n=Ym(e);return"none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||["transform","perspective"].includes(n.willChange)||t&&"filter"===n.willChange||t&&!!n.filter&&"none"!==n.filter}function ty(){return!/^((?!chrome|android).)*safari/i.test(qm())}var ny=Math.min,ry=Math.max,iy=Math.round;function oy(e,t,n){var r,i,o,a;void 0===t&&(t=!1),void 0===n&&(n=!1);var s=e.getBoundingClientRect(),u=1,l=1;t&&$m(e)&&(u=e.offsetWidth>0&&iy(s.width)/e.offsetWidth||1,l=e.offsetHeight>0&&iy(s.height)/e.offsetHeight||1);var c=Gm(e)?Hm(e):window,d=!ty()&&n,p=(s.left+(d&&null!=(r=null==(i=c.visualViewport)?void 0:i.offsetLeft)?r:0))/u,f=(s.top+(d&&null!=(o=null==(a=c.visualViewport)?void 0:a.offsetTop)?o:0))/l,h=s.width/u,v=s.height/l;return{width:h,height:v,top:f,right:p+h,bottom:f+v,left:p,x:p,y:f}}function ay(e){return(t=e,(t instanceof Hm(t).Node?e.ownerDocument:e.document)||window.document).documentElement;var t}function sy(e){return Gm(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function uy(e){return oy(ay(e)).left+sy(e).scrollLeft}function ly(e,t,n){var r=$m(t),i=ay(t),o=oy(e,r&&function(e){var t=oy(e);return iy(t.width)!==e.offsetWidth||iy(t.height)!==e.offsetHeight}(t),"fixed"===n),a={scrollLeft:0,scrollTop:0},s={x:0,y:0};if(r||!r&&"fixed"!==n)if(("body"!==Xm(t)||Zm(i))&&(a=sy(t)),$m(t)){var u=oy(t,!0);s.x=u.x+t.clientLeft,s.y=u.y+t.clientTop}else i&&(s.x=uy(i));return{x:o.left+a.scrollLeft-s.x,y:o.top+a.scrollTop-s.y,width:o.width,height:o.height}}function cy(e){return"html"===Xm(e)?e:e.assignedSlot||e.parentNode||(Qm(e)?e.host:null)||ay(e)}function dy(e){return $m(e)&&"fixed"!==getComputedStyle(e).position?e.offsetParent:null}function py(e){for(var t=Hm(e),n=dy(e);n&&Jm(n)&&"static"===getComputedStyle(n).position;)n=dy(n);return n&&("html"===Xm(n)||"body"===Xm(n)&&"static"===getComputedStyle(n).position&&!ey(n))?t:n||function(e){var t=cy(e);for(Qm(t)&&(t=t.host);$m(t)&&!["html","body"].includes(Xm(t));){if(ey(t))return t;t=t.parentNode}return null}(e)||t}function fy(e){if($m(e))return{width:e.offsetWidth,height:e.offsetHeight};var t=oy(e);return{width:t.width,height:t.height}}function hy(e){var t=cy(e);return["html","body","#document"].includes(Xm(t))?e.ownerDocument.body:$m(t)&&Zm(t)?t:hy(t)}function vy(e,t){var n;void 0===t&&(t=[]);var r=hy(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=Hm(r),a=i?[o].concat(o.visualViewport||[],Zm(r)?r:[]):r,s=t.concat(a);return i?s:s.concat(vy(a))}function gy(e,t,n){return"viewport"===t?km(function(e,t){var n=Hm(e),r=ay(e),i=n.visualViewport,o=r.clientWidth,a=r.clientHeight,s=0,u=0;if(i){o=i.width,a=i.height;var l=ty();(l||!l&&"fixed"===t)&&(s=i.offsetLeft,u=i.offsetTop)}return{width:o,height:a,x:s,y:u}}(e,n)):Gm(t)?function(e,t){var n=oy(e,!1,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft;return{top:r,left:i,x:i,y:r,right:i+e.clientWidth,bottom:r+e.clientHeight,width:e.clientWidth,height:e.clientHeight}}(t,n):km(function(e){var t,n=ay(e),r=sy(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=ry(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=ry(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+uy(e),u=-r.scrollTop;return"rtl"===Ym(i||n).direction&&(s+=ry(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:s,y:u}}(ay(e)))}var my={getClippingRect:function(e){var t=e.element,n=e.boundary,r=e.rootBoundary,i=e.strategy,o=[].concat(M("clippingAncestors"===n?function(e){var t=vy(e),n=["absolute","fixed"].includes(Ym(e).position)&&$m(e)?py(e):e;return Gm(n)?t.filter((function(e){return Gm(e)&&function(e,t){var n=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&Qm(n)){var r=t;do{if(r&&e===r)return!0;r=r.parentNode||r.host}while(r)}return!1}(e,n)&&"body"!==Xm(e)})):[]}(t):[].concat(n)),[r]),a=o[0],s=o.reduce((function(e,n){var r=gy(t,n,i);return e.top=ry(r.top,e.top),e.right=ny(r.right,e.right),e.bottom=ny(r.bottom,e.bottom),e.left=ry(r.left,e.left),e}),gy(t,a,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){var t=e.rect,n=e.offsetParent,r=e.strategy,i=$m(n),o=ay(n);if(n===o)return t;var a={scrollLeft:0,scrollTop:0},s={x:0,y:0};if((i||!i&&"fixed"!==r)&&(("body"!==Xm(n)||Zm(o))&&(a=sy(n)),$m(n))){var u=oy(n,!0);s.x=u.x+n.clientLeft,s.y=u.y+n.clientTop}return x(x({},t),{},{x:t.x-a.scrollLeft+s.x,y:t.y-a.scrollTop+s.y})},isElement:Gm,getDimensions:fy,getOffsetParent:py,getDocumentElement:ay,getElementRects:function(e){var t=e.reference,n=e.floating,r=e.strategy;return{reference:ly(t,py(n),r),floating:x(x({},fy(n)),{},{x:0,y:0})}},getClientRects:function(e){return Array.from(e.getClientRects())},isRTL:function(e){return"rtl"===Ym(e).direction}};function yy(e,t,n,r){void 0===r&&(r={});var i=r,o=i.ancestorScroll,a=void 0===o||o,s=i.ancestorResize,u=void 0===s||s,l=i.elementResize,c=void 0===l||l,d=i.animationFrame,p=void 0!==d&&d,f=a&&!p,h=u&&!p,v=f||h?[].concat(M(Gm(e)?vy(e):[]),M(vy(t))):[];v.forEach((function(e){f&&e.addEventListener("scroll",n,{passive:!0}),h&&e.addEventListener("resize",n)}));var g,m=null;if(c){var y=!0;m=new ResizeObserver((function(){y||n(),y=!1})),Gm(e)&&!p&&m.observe(e),m.observe(t)}var b=p?oy(e):null;return p&&function t(){var r=oy(e);!b||r.x===b.x&&r.y===b.y&&r.width===b.width&&r.height===b.height||n(),b=r,g=requestAnimationFrame(t)}(),n(),function(){var e;v.forEach((function(e){f&&e.removeEventListener("scroll",n),h&&e.removeEventListener("resize",n)})),null==(e=m)||e.disconnect(),m=null,p&&cancelAnimationFrame(g)}}var by="undefined"!==typeof document?t.useLayoutEffect:t.useEffect;function wy(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;var n,r,i;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((n=e.length)!=t.length)return!1;for(r=n;0!==r--;)if(!wy(e[r],t[r]))return!1;return!0}if((n=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!==r--;){var o=i[r];if(("_owner"!==o||!e.$$typeof)&&!wy(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function xy(e){var n=void 0===e?{}:e,r=n.middleware,o=n.placement,a=void 0===o?"bottom":o,s=n.strategy,u=void 0===s?"absolute":s,l=n.whileElementsMounted,c=t.useRef(null),d=t.useRef(null),p=function(e){var n=t.useRef(e);return by((function(){n.current=e})),n}(l),f=t.useRef(null),h=N(t.useState({x:null,y:null,strategy:u,placement:a,middlewareData:{}}),2),v=h[0],g=h[1],m=N(t.useState(r),2),y=m[0],b=m[1];wy(null==y?void 0:y.map((function(e){return e.options})),null==r?void 0:r.map((function(e){return e.options})))||b(r);var w=t.useCallback((function(){c.current&&d.current&&function(e,t,n){return wm(e,t,x({platform:my},n))}(c.current,d.current,{middleware:y,placement:a,strategy:u}).then((function(e){k.current&&i.flushSync((function(){g(e)}))}))}),[y,a,u]);by((function(){k.current&&w()}),[w]);var k=t.useRef(!1);by((function(){return k.current=!0,function(){k.current=!1}}),[]);var S=t.useCallback((function(){if("function"===typeof f.current&&(f.current(),f.current=null),c.current&&d.current)if(p.current){var e=p.current(c.current,d.current,w);f.current=e}else w()}),[w,p]),_=t.useCallback((function(e){c.current=e,S()}),[S]),P=t.useCallback((function(e){d.current=e,S()}),[S]),C=t.useMemo((function(){return{reference:c,floating:d}}),[]);return t.useMemo((function(){return x(x({},v),{},{update:w,refs:C,reference:_,floating:P})}),[v,w,C,_,P])}var ky=function(e){var t=e.element,n=e.padding;return{name:"arrow",options:e,fn:function(e){return r=t,Object.prototype.hasOwnProperty.call(r,"current")?null!=t.current?Im({element:t.current,padding:n}).fn(e):{}:t?Im({element:t,padding:n}).fn(e):{};var r}}};function Sy(e){var n=N((0,t.useState)(void 0),2),r=n[0],i=n[1];return Hv((function(){if(e){i({width:e.offsetWidth,height:e.offsetHeight});var t=new ResizeObserver((function(t){if(Array.isArray(t)&&t.length){var n,r,o=t[0];if("borderBoxSize"in o){var a=o.borderBoxSize,s=Array.isArray(a)?a[0]:a;n=s.inlineSize,r=s.blockSize}else n=e.offsetWidth,r=e.offsetHeight;i({width:n,height:r})}}));return t.observe(e,{box:"border-box"}),function(){return t.unobserve(e)}}i(void 0)}),[e]),r}var _y=["__scopePopper","virtualRef"],Py=["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions","onPlaced"],Cy="Popper",Ey=N(mv(Cy),2),Iy=Ey[0],My=Ey[1],Ty=N(Iy(Cy),2),jy=Ty[0],Ay=Ty[1],Oy=function(e){var n=e.__scopePopper,r=e.children,i=N((0,t.useState)(null),2),o=i[0],a=i[1];return(0,t.createElement)(jy,{scope:n,anchor:o,onAnchorChange:a},r)},zy="PopperAnchor",Dy=(0,t.forwardRef)((function(e,n){var r=e.__scopePopper,i=e.virtualRef,o=Ye(e,_y),a=Ay(zy,r),s=(0,t.useRef)(null),u=hv(n,s);return(0,t.useEffect)((function(){a.onAnchorChange((null===i||void 0===i?void 0:i.current)||s.current)})),i?null:(0,t.createElement)(Iv.div,dv({},o,{ref:u}))})),Ny="PopperContent",Ry=N(Iy(Ny),2),Ly=Ry[0],By=(Ry[1],N(Iy(Ny,{hasParent:!1,positionUpdateFns:new Set}),2)),Fy=By[0],Uy=By[1],Ky=(0,t.forwardRef)((function(e,n){var r,i,o,a,s,u,l,c,d=e.__scopePopper,p=e.side,f=void 0===p?"bottom":p,h=e.sideOffset,v=void 0===h?0:h,g=e.align,m=void 0===g?"center":g,y=e.alignOffset,w=void 0===y?0:y,k=e.arrowPadding,S=void 0===k?0:k,_=e.collisionBoundary,P=void 0===_?[]:_,C=e.collisionPadding,E=void 0===C?0:C,I=e.sticky,M=void 0===I?"partial":I,T=e.hideWhenDetached,j=void 0!==T&&T,A=e.avoidCollisions,O=void 0===A||A,z=e.onPlaced,D=Ye(e,Py),R=Ay(Ny,d),L=N((0,t.useState)(null),2),B=L[0],F=L[1],U=hv(n,(function(e){return F(e)})),K=N((0,t.useState)(null),2),V=K[0],W=K[1],H=Sy(V),Y=null!==(r=null===H||void 0===H?void 0:H.width)&&void 0!==r?r:0,X=null!==(i=null===H||void 0===H?void 0:H.height)&&void 0!==i?i:0,q=f+("center"!==m?"-"+m:""),$="number"===typeof E?E:x({top:0,right:0,bottom:0,left:0},E),G=Array.isArray(P)?P:[P],Q=G.length>0,Z={padding:$,boundary:G.filter(Wy),altBoundary:Q},J=xy({strategy:"fixed",placement:q,whileElementsMounted:yy,middleware:[Hy(),Bm({mainAxis:v+X,alignmentAxis:w}),O?Um(x({mainAxis:!0,crossAxis:!1,limiter:"partial"===M?Km():void 0},Z)):void 0,V?ky({element:V,padding:S}):void 0,O?Dm(x({},Z)):void 0,Vm(x(x({},Z),{},{apply:function(e){var t=e.elements,n=e.availableWidth,r=e.availableHeight;t.floating.style.setProperty("--radix-popper-available-width","".concat(n,"px")),t.floating.style.setProperty("--radix-popper-available-height","".concat(r,"px"))}})),Yy({arrowWidth:Y,arrowHeight:X}),j?Lm({strategy:"referenceHidden"}):void 0].filter(Vy)}),ee=J.reference,te=J.floating,ne=J.strategy,re=J.x,ie=J.y,oe=J.placement,ae=J.middlewareData,se=J.update;Hv((function(){ee(R.anchor)}),[ee,R.anchor]);var ue=null!==re&&null!==ie,le=N(Xy(oe),2),ce=le[0],de=le[1],pe=Tv(z);Hv((function(){ue&&(null===pe||void 0===pe||pe())}),[ue,pe]);var fe=null===(o=ae.arrow)||void 0===o?void 0:o.x,he=null===(a=ae.arrow)||void 0===a?void 0:a.y,ve=0!==(null===(s=ae.arrow)||void 0===s?void 0:s.centerOffset),ge=N((0,t.useState)(),2),me=ge[0],ye=ge[1];Hv((function(){B&&ye(window.getComputedStyle(B).zIndex)}),[B]);var be=Uy(Ny,d),we=be.hasParent,xe=be.positionUpdateFns,ke=!we;(0,t.useLayoutEffect)((function(){if(!ke)return xe.add(se),function(){xe.delete(se)}}),[ke,xe,se]),Hv((function(){ke&&ue&&Array.from(xe).reverse().forEach((function(e){return requestAnimationFrame(e)}))}),[ke,ue,xe]);var Se=x(x({"data-side":ce,"data-align":de},D),{},{ref:U,style:x(x({},D.style),{},{animation:ue?void 0:"none",opacity:null!==(u=ae.hide)&&void 0!==u&&u.referenceHidden?0:void 0})});return(0,t.createElement)("div",{ref:te,"data-radix-popper-content-wrapper":"",style:b({position:ne,left:0,top:0,transform:ue?"translate3d(".concat(Math.round(re),"px, ").concat(Math.round(ie),"px, 0)"):"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:me},"--radix-popper-transform-origin",[null===(l=ae.transformOrigin)||void 0===l?void 0:l.x,null===(c=ae.transformOrigin)||void 0===c?void 0:c.y].join(" ")),dir:e.dir},(0,t.createElement)(Ly,{scope:d,placedSide:ce,onArrowChange:W,arrowX:fe,arrowY:he,shouldHideArrow:ve},ke?(0,t.createElement)(Fy,{scope:d,hasParent:!0,positionUpdateFns:xe},(0,t.createElement)(Iv.div,Se)):(0,t.createElement)(Iv.div,Se)))}));function Vy(e){return void 0!==e}function Wy(e){return null!==e}var Hy=function(){return{name:"anchorCssProperties",fn:function(e){var t=e.rects,n=e.elements,r=t.reference,i=r.width,o=r.height;return n.floating.style.setProperty("--radix-popper-anchor-width","".concat(i,"px")),n.floating.style.setProperty("--radix-popper-anchor-height","".concat(o,"px")),{}}}},Yy=function(e){return{name:"transformOrigin",options:e,fn:function(t){var n,r,i,o,a,s=t.placement,u=t.rects,l=t.middlewareData,c=0!==(null===(n=l.arrow)||void 0===n?void 0:n.centerOffset),d=c?0:e.arrowWidth,p=c?0:e.arrowHeight,f=N(Xy(s),2),h=f[0],v={start:"0%",center:"50%",end:"100%"}[f[1]],g=(null!==(r=null===(i=l.arrow)||void 0===i?void 0:i.x)&&void 0!==r?r:0)+d/2,m=(null!==(o=null===(a=l.arrow)||void 0===a?void 0:a.y)&&void 0!==o?o:0)+p/2,y="",b="";return"bottom"===h?(y=c?v:"".concat(g,"px"),b="".concat(-p,"px")):"top"===h?(y=c?v:"".concat(g,"px"),b="".concat(u.floating.height+p,"px")):"right"===h?(y="".concat(-p,"px"),b=c?v:"".concat(m,"px")):"left"===h&&(y="".concat(u.floating.width+p,"px"),b=c?v:"".concat(m,"px")),{data:{x:y,y:b}}}}};function Xy(e){var t=N(e.split("-"),2),n=t[0],r=t[1];return[n,void 0===r?"center":r]}var qy=Oy,$y=Dy,Gy=Ky,Qy=["__scopeRovingFocusGroup","orientation","loop","dir","currentTabStopId","defaultCurrentTabStopId","onCurrentTabStopIdChange","onEntryFocus"],Zy=["__scopeRovingFocusGroup","focusable","active","tabStopId"],Jy="rovingFocusGroup.onEntryFocus",eb={bubbles:!1,cancelable:!0},tb="RovingFocusGroup",nb=N(Cv(tb),3),rb=nb[0],ib=nb[1],ob=N(mv(tb,[nb[2]]),2),ab=ob[0],sb=ob[1],ub=N(ab(tb),2),lb=ub[0],cb=ub[1],db=(0,t.forwardRef)((function(e,n){return(0,t.createElement)(rb.Provider,{scope:e.__scopeRovingFocusGroup},(0,t.createElement)(rb.Slot,{scope:e.__scopeRovingFocusGroup},(0,t.createElement)(pb,dv({},e,{ref:n}))))})),pb=(0,t.forwardRef)((function(e,n){var r=e.__scopeRovingFocusGroup,i=e.orientation,o=e.loop,a=void 0!==o&&o,s=e.dir,u=e.currentTabStopId,l=e.defaultCurrentTabStopId,c=e.onCurrentTabStopIdChange,d=e.onEntryFocus,p=Ye(e,Qy),f=(0,t.useRef)(null),h=hv(n,f),v=Xg(s),g=N(qv({prop:u,defaultProp:l,onChange:c}),2),m=g[0],y=void 0===m?null:m,b=g[1],w=N((0,t.useState)(!1),2),k=w[0],S=w[1],_=Tv(d),P=ib(r),C=(0,t.useRef)(!1),E=N((0,t.useState)(0),2),I=E[0],T=E[1];return(0,t.useEffect)((function(){var e=f.current;if(e)return e.addEventListener(Jy,_),function(){return e.removeEventListener(Jy,_)}}),[_]),(0,t.createElement)(lb,{scope:r,orientation:i,dir:v,loop:a,currentTabStopId:y,onItemFocus:(0,t.useCallback)((function(e){return b(e)}),[b]),onItemShiftTab:(0,t.useCallback)((function(){return S(!0)}),[]),onFocusableItemAdd:(0,t.useCallback)((function(){return T((function(e){return e+1}))}),[]),onFocusableItemRemove:(0,t.useCallback)((function(){return T((function(e){return e-1}))}),[])},(0,t.createElement)(Iv.div,dv({tabIndex:k||0===I?-1:0,"data-orientation":i},p,{ref:h,style:x({outline:"none"},e.style),onMouseDown:pv(e.onMouseDown,(function(){C.current=!0})),onFocus:pv(e.onFocus,(function(e){var t=!C.current;if(e.target===e.currentTarget&&t&&!k){var n=new CustomEvent(Jy,eb);if(e.currentTarget.dispatchEvent(n),!n.defaultPrevented){var r=P().filter((function(e){return e.focusable}));gb([r.find((function(e){return e.active})),r.find((function(e){return e.id===y}))].concat(M(r)).filter(Boolean).map((function(e){return e.ref.current})))}}C.current=!1})),onBlur:pv(e.onBlur,(function(){return S(!1)}))})))})),fb="RovingFocusGroupItem",hb=(0,t.forwardRef)((function(e,n){var r=e.__scopeRovingFocusGroup,i=e.focusable,o=void 0===i||i,a=e.active,s=void 0!==a&&a,u=e.tabStopId,l=Ye(e,Zy),c=cm(),d=u||c,p=cb(fb,r),f=p.currentTabStopId===d,h=ib(r),v=p.onFocusableItemAdd,g=p.onFocusableItemRemove;return(0,t.useEffect)((function(){if(o)return v(),function(){return g()}}),[o,v,g]),(0,t.createElement)(rb.ItemSlot,{scope:r,id:d,focusable:o,active:s},(0,t.createElement)(Iv.span,dv({tabIndex:f?0:-1,"data-orientation":p.orientation},l,{ref:n,onMouseDown:pv(e.onMouseDown,(function(e){o?p.onItemFocus(d):e.preventDefault()})),onFocus:pv(e.onFocus,(function(){return p.onItemFocus(d)})),onKeyDown:pv(e.onKeyDown,(function(e){if("Tab"===e.key&&e.shiftKey)p.onItemShiftTab();else if(e.target===e.currentTarget){var t=function(e,t,n){var r=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,n);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(r)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)?void 0:vb[r]}(e,p.orientation,p.dir);if(void 0!==t){e.preventDefault();var n=h().filter((function(e){return e.focusable})).map((function(e){return e.ref.current}));if("last"===t)n.reverse();else if("prev"===t||"next"===t){"prev"===t&&n.reverse();var r=n.indexOf(e.currentTarget);n=p.loop?function(e,t){return e.map((function(n,r){return e[(t+r)%e.length]}))}(n,r+1):n.slice(r+1)}setTimeout((function(){return gb(n)}))}}}))})))})),vb={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function gb(e){var t,n=document.activeElement,r=y(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i===n)return;if(i.focus(),document.activeElement!==n)return}}catch(o){r.e(o)}finally{r.f()}}var mb=db,yb=hb,bb=function(e){return"undefined"===typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body},wb=new WeakMap,xb=new WeakMap,kb={},Sb=0,_b=function e(t){return t&&(t.host||e(t.parentNode))},Pb=function(e,t,n,r){var i=function(e,t){return t.map((function(t){if(e.contains(t))return t;var n=_b(t);return n&&e.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)})).filter((function(e){return Boolean(e)}))}(t,Array.isArray(e)?e:[e]);kb[n]||(kb[n]=new WeakMap);var o=kb[n],a=[],s=new Set,u=new Set(i);i.forEach((function e(t){t&&!s.has(t)&&(s.add(t),e(t.parentNode))}));return function e(t){t&&!u.has(t)&&Array.prototype.forEach.call(t.children,(function(t){if(s.has(t))e(t);else{var i=t.getAttribute(r),u=null!==i&&"false"!==i,l=(wb.get(t)||0)+1,c=(o.get(t)||0)+1;wb.set(t,l),o.set(t,c),a.push(t),1===l&&u&&xb.set(t,!0),1===c&&t.setAttribute(n,"true"),u||t.setAttribute(r,"true")}}))}(t),s.clear(),Sb++,function(){a.forEach((function(e){var t=wb.get(e)-1,i=o.get(e)-1;wb.set(e,t),o.set(e,i),t||(xb.has(e)||e.removeAttribute(r),xb.delete(e)),i||e.removeAttribute(n)})),--Sb||(wb=new WeakMap,wb=new WeakMap,xb=new WeakMap,kb={})}},Cb=function(e,t,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=t||bb(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),Pb(r,i,n,"aria-hidden")):function(){return null}};var Eb=function(){return Eb=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Eb.apply(this,arguments)};function Ib(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;var Mb="right-scroll-bar-position",Tb="width-before-scroll-bar";function jb(e,n){return function(e,n){var r=(0,t.useState)((function(){return{value:e,callback:n,facade:{get current(){return r.value},set current(e){var t=r.value;t!==e&&(r.value=e,r.callback(e,t))}}}}))[0];return r.callback=n,r.facade}(n||null,(function(t){return e.forEach((function(e){return function(e,t){return"function"===typeof e?e(t):e&&(e.current=t),e}(e,t)}))}))}function Ab(e){return e}function Ob(e,t){void 0===t&&(t=Ab);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var i=t(e,r);return n.push(i),function(){n=n.filter((function(e){return e!==i}))}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var i=n;n=[],i.forEach(e),t=n}var o=function(){var n=t;t=[],n.forEach(e)},a=function(){return Promise.resolve().then(o)};a(),n={push:function(e){t.push(e),a()},filter:function(e){return t=t.filter(e),n}}}};return i}var zb=function(e){void 0===e&&(e={});var t=Ob(null);return t.options=Eb({async:!0,ssr:!1},e),t}(),Db=function(){},Nb=t.forwardRef((function(e,n){var r=t.useRef(null),i=t.useState({onScrollCapture:Db,onWheelCapture:Db,onTouchMoveCapture:Db}),o=i[0],a=i[1],s=e.forwardProps,u=e.children,l=e.className,c=e.removeScrollBar,d=e.enabled,p=e.shards,f=e.sideCar,h=e.noIsolation,v=e.inert,g=e.allowPinchZoom,m=e.as,y=void 0===m?"div":m,b=Ib(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=f,x=jb([r,n]),k=Eb(Eb({},b),o);return t.createElement(t.Fragment,null,d&&t.createElement(w,{sideCar:zb,removeScrollBar:c,shards:p,noIsolation:h,inert:v,setCallbacks:a,allowPinchZoom:!!g,lockRef:r}),s?t.cloneElement(t.Children.only(u),Eb(Eb({},k),{ref:x})):t.createElement(y,Eb({},k,{className:l,ref:x}),u))}));Nb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Nb.classNames={fullWidth:Tb,zeroRight:Mb};var Rb,Lb=function(e){var n=e.sideCar,r=Ib(e,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=n.read();if(!i)throw new Error("Sidecar medium not found");return t.createElement(i,Eb({},r))};Lb.isSideCarExport=!0;function Bb(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Rb||n.nc;return t&&e.setAttribute("nonce",t),e}var Fb=function(){var e=0,t=null;return{add:function(n){var r,i;0==e&&(t=Bb())&&(i=n,(r=t).styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){!--e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Ub=function(){var e=function(){var e=Fb();return function(n,r){t.useEffect((function(){return e.add(n),function(){e.remove()}}),[n&&r])}}();return function(t){var n=t.styles,r=t.dynamic;return e(n,r),null}},Kb={left:0,top:0,right:0,gap:0},Vb=function(e){return parseInt(e||"",10)||0},Wb=function(e){if(void 0===e&&(e="margin"),"undefined"===typeof window)return Kb;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],i=t["padding"===e?"paddingRight":"marginRight"];return[Vb(n),Vb(r),Vb(i)]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Hb=Ub(),Yb=function(e,t,n,r){var i=e.left,o=e.top,a=e.right,s=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(s,"px ").concat(r,";\n  }\n  body {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(o,"px;\n    padding-right: ").concat(a,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(s,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(Mb," {\n    right: ").concat(s,"px ").concat(r,";\n  }\n  \n  .").concat(Tb," {\n    margin-right: ").concat(s,"px ").concat(r,";\n  }\n  \n  .").concat(Mb," .").concat(Mb," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(Tb," .").concat(Tb," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(s,"px;\n  }\n")},Xb=function(e){var n=e.noRelative,r=e.noImportant,i=e.gapMode,o=void 0===i?"margin":i,a=t.useMemo((function(){return Wb(o)}),[o]);return t.createElement(Hb,{styles:Yb(a,!n,o,r?"":"!important")})},qb=!1;if("undefined"!==typeof window)try{var $b=Object.defineProperty({},"passive",{get:function(){return qb=!0,!0}});window.addEventListener("test",$b,$b),window.removeEventListener("test",$b,$b)}catch(yM){qb=!1}var Gb=!!qb&&{passive:!1},Qb=function(e,t){var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},Zb=function(e,t){var n=t;do{if("undefined"!==typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),Jb(e,n)){var r=ew(e,n);if(r[1]>r[2])return!0}n=n.parentNode}while(n&&n!==document.body);return!1},Jb=function(e,t){return"v"===e?function(e){return Qb(e,"overflowY")}(t):function(e){return Qb(e,"overflowX")}(t)},ew=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},tw=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},nw=function(e){return[e.deltaX,e.deltaY]},rw=function(e){return e&&"current"in e?e.current:e},iw=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},ow=0,aw=[];var sw,uw=(sw=function(e){var n=t.useRef([]),r=t.useRef([0,0]),i=t.useRef(),o=t.useState(ow++)[0],a=t.useState((function(){return Ub()}))[0],s=t.useRef(e);t.useEffect((function(){s.current=e}),[e]),t.useEffect((function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var t=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([e.lockRef.current],(e.shards||[]).map(rw),!0).filter(Boolean);return t.forEach((function(e){return e.classList.add("allow-interactivity-".concat(o))})),function(){document.body.classList.remove("block-interactivity-".concat(o)),t.forEach((function(e){return e.classList.remove("allow-interactivity-".concat(o))}))}}}),[e.inert,e.lockRef.current,e.shards]);var u=t.useCallback((function(e,t){if("touches"in e&&2===e.touches.length)return!s.current.allowPinchZoom;var n,o=tw(e),a=r.current,u="deltaX"in e?e.deltaX:a[0]-o[0],l="deltaY"in e?e.deltaY:a[1]-o[1],c=e.target,d=Math.abs(u)>Math.abs(l)?"h":"v";if("touches"in e&&"h"===d&&"range"===c.type)return!1;var p=Zb(d,c);if(!p)return!0;if(p?n=d:(n="v"===d?"h":"v",p=Zb(d,c)),!p)return!1;if(!i.current&&"changedTouches"in e&&(u||l)&&(i.current=n),!n)return!0;var f=i.current||n;return function(e,t,n,r,i){var o=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),a=o*r,s=n.target,u=t.contains(s),l=!1,c=a>0,d=0,p=0;do{var f=ew(e,s),h=f[0],v=f[1]-f[2]-o*h;(h||v)&&Jb(e,s)&&(d+=v,p+=h),s=s.parentNode}while(!u&&s!==document.body||u&&(t.contains(s)||t===s));return(c&&(i&&0===d||!i&&a>d)||!c&&(i&&0===p||!i&&-a>p))&&(l=!0),l}(f,t,e,"h"===f?u:l,!0)}),[]),l=t.useCallback((function(e){var t=e;if(aw.length&&aw[aw.length-1]===a){var r="deltaY"in t?nw(t):tw(t),i=n.current.filter((function(e){return e.name===t.type&&e.target===t.target&&function(e,t){return e[0]===t[0]&&e[1]===t[1]}(e.delta,r)}))[0];if(i&&i.should)t.cancelable&&t.preventDefault();else if(!i){var o=(s.current.shards||[]).map(rw).filter(Boolean).filter((function(e){return e.contains(t.target)}));(o.length>0?u(t,o[0]):!s.current.noIsolation)&&t.cancelable&&t.preventDefault()}}}),[]),c=t.useCallback((function(e,t,r,i){var o={name:e,delta:t,target:r,should:i};n.current.push(o),setTimeout((function(){n.current=n.current.filter((function(e){return e!==o}))}),1)}),[]),d=t.useCallback((function(e){r.current=tw(e),i.current=void 0}),[]),p=t.useCallback((function(t){c(t.type,nw(t),t.target,u(t,e.lockRef.current))}),[]),f=t.useCallback((function(t){c(t.type,tw(t),t.target,u(t,e.lockRef.current))}),[]);t.useEffect((function(){return aw.push(a),e.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Gb),document.addEventListener("touchmove",l,Gb),document.addEventListener("touchstart",d,Gb),function(){aw=aw.filter((function(e){return e!==a})),document.removeEventListener("wheel",l,Gb),document.removeEventListener("touchmove",l,Gb),document.removeEventListener("touchstart",d,Gb)}}),[]);var h=e.removeScrollBar,v=e.inert;return t.createElement(t.Fragment,null,v?t.createElement(a,{styles:iw(o)}):null,h?t.createElement(Xb,{gapMode:"margin"}):null)},zb.useMedium(sw),Lb),lw=t.forwardRef((function(e,n){return t.createElement(Nb,Eb({},e,{ref:n,sideCar:uw}))}));lw.classNames=Nb.classNames;var cw=lw,dw=["__scopeMenu"],pw=["forceMount"],fw=["__scopeMenu","loop","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEntryFocus","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","disableOutsideScroll"],hw=["__scopeMenu"],vw=["disabled","onSelect"],gw=["__scopeMenu","disabled","textValue"],mw=["checked","onCheckedChange"],yw=["__scopeMenu","forceMount"],bw=["forceMount"],ww=["Enter"," "],xw=["ArrowUp","PageDown","End"],kw=[].concat(["ArrowDown","PageUp","Home"],xw),Sw={ltr:[].concat(ww,["ArrowRight"]),rtl:[].concat(ww,["ArrowLeft"])},_w={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Pw="Menu",Cw=N(Cv(Pw),3),Ew=Cw[0],Iw=Cw[1],Mw=N(mv(Pw,[Cw[2],My,sb]),2),Tw=Mw[0],jw=Mw[1],Aw=My(),Ow=sb(),zw=N(Tw(Pw),2),Dw=zw[0],Nw=zw[1],Rw=N(Tw(Pw),2),Lw=Rw[0],Bw=Rw[1],Fw=function(e){var n=e.__scopeMenu,r=e.open,i=void 0!==r&&r,o=e.children,a=e.dir,s=e.onOpenChange,u=e.modal,l=void 0===u||u,c=Aw(n),d=N((0,t.useState)(null),2),p=d[0],f=d[1],h=(0,t.useRef)(!1),v=Tv(s),g=Xg(a);return(0,t.useEffect)((function(){var e=function(){h.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=function(){return h.current=!1};return document.addEventListener("keydown",e,{capture:!0}),function(){document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}}),[]),(0,t.createElement)(qy,c,(0,t.createElement)(Dw,{scope:n,open:i,onOpenChange:v,content:p,onContentChange:f},(0,t.createElement)(Lw,{scope:n,onClose:(0,t.useCallback)((function(){return v(!1)}),[v]),isUsingKeyboardRef:h,dir:g,modal:l},o)))},Uw=(0,t.forwardRef)((function(e,n){var r=e.__scopeMenu,i=Ye(e,dw),o=Aw(r);return(0,t.createElement)($y,dv({},o,i,{ref:n}))})),Kw="MenuPortal",Vw=N(Tw(Kw,{forceMount:void 0}),2),Ww=Vw[0],Hw=Vw[1],Yw=function(e){var n=e.__scopeMenu,r=e.forceMount,i=e.children,o=e.container,a=Nw(Kw,n);return(0,t.createElement)(Ww,{scope:n,forceMount:r},(0,t.createElement)(Yv,{present:r||a.open},(0,t.createElement)(Wv,{asChild:!0,container:o},i)))},Xw="MenuContent",qw=N(Tw(Xw),2),$w=qw[0],Gw=qw[1],Qw=(0,t.forwardRef)((function(e,n){var r=Hw(Xw,e.__scopeMenu),i=e.forceMount,o=void 0===i?r.forceMount:i,a=Ye(e,pw),s=Nw(Xw,e.__scopeMenu),u=Bw(Xw,e.__scopeMenu);return(0,t.createElement)(Ew.Provider,{scope:e.__scopeMenu},(0,t.createElement)(Yv,{present:o||s.open},(0,t.createElement)(Ew.Slot,{scope:e.__scopeMenu},u.modal?(0,t.createElement)(Zw,dv({},a,{ref:n})):(0,t.createElement)(Jw,dv({},a,{ref:n})))))})),Zw=(0,t.forwardRef)((function(e,n){var r=Nw(Xw,e.__scopeMenu),i=(0,t.useRef)(null),o=hv(n,i);return(0,t.useEffect)((function(){var e=i.current;if(e)return Cb(e)}),[]),(0,t.createElement)(ex,dv({},e,{ref:o,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:pv(e.onFocusOutside,(function(e){return e.preventDefault()}),{checkForDefaultPrevented:!1}),onDismiss:function(){return r.onOpenChange(!1)}}))})),Jw=(0,t.forwardRef)((function(e,n){var r=Nw(Xw,e.__scopeMenu);return(0,t.createElement)(ex,dv({},e,{ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:function(){return r.onOpenChange(!1)}}))})),ex=(0,t.forwardRef)((function(e,n){var r=e.__scopeMenu,i=e.loop,o=void 0!==i&&i,a=e.trapFocus,s=e.onOpenAutoFocus,u=e.onCloseAutoFocus,l=e.disableOutsidePointerEvents,c=e.onEntryFocus,d=e.onEscapeKeyDown,p=e.onPointerDownOutside,f=e.onFocusOutside,h=e.onInteractOutside,v=e.onDismiss,g=e.disableOutsideScroll,m=Ye(e,fw),b=Nw(Xw,r),w=Bw(Xw,r),k=Aw(r),S=Ow(r),_=Iw(r),P=N((0,t.useState)(null),2),C=P[0],E=P[1],I=(0,t.useRef)(null),M=hv(n,I,b.onContentChange),T=(0,t.useRef)(0),j=(0,t.useRef)(""),A=(0,t.useRef)(0),O=(0,t.useRef)(null),z=(0,t.useRef)("right"),D=(0,t.useRef)(0),R=g?cw:t.Fragment,L=g?{as:xv,allowPinchZoom:!0}:void 0,B=function(e){var t,n,r=j.current+e,i=_().filter((function(e){return!e.disabled})),o=document.activeElement,a=null===(t=i.find((function(e){return e.ref.current===o})))||void 0===t?void 0:t.textValue,s=function(e,t,n){var r=t.length>1&&Array.from(t).every((function(e){return e===t[0]})),i=r?t[0]:t,o=n?e.indexOf(n):-1,a=function(e,t){return e.map((function(n,r){return e[(t+r)%e.length]}))}(e,Math.max(o,0));1===i.length&&(a=a.filter((function(e){return e!==n})));var s=a.find((function(e){return e.toLowerCase().startsWith(i.toLowerCase())}));return s!==n?s:void 0}(i.map((function(e){return e.textValue})),r,a),u=null===(n=i.find((function(e){return e.textValue===s})))||void 0===n?void 0:n.ref.current;!function e(t){j.current=t,window.clearTimeout(T.current),""!==t&&(T.current=window.setTimeout((function(){return e("")}),1e3))}(r),u&&setTimeout((function(){return u.focus()}))};(0,t.useEffect)((function(){return function(){return window.clearTimeout(T.current)}}),[]),$g();var F=(0,t.useCallback)((function(e){var t,n;return z.current===(null===(t=O.current)||void 0===t?void 0:t.side)&&function(e,t){if(!t)return!1;var n={x:e.clientX,y:e.clientY};return function(e,t){for(var n=e.x,r=e.y,i=!1,o=0,a=t.length-1;o<t.length;a=o++){var s=t[o].x,u=t[o].y,l=t[a].x,c=t[a].y;u>r!==c>r&&n<(l-s)*(r-u)/(c-u)+s&&(i=!i)}return i}(n,t)}(e,null===(n=O.current)||void 0===n?void 0:n.area)}),[]);return(0,t.createElement)($w,{scope:r,searchRef:j,onItemEnter:(0,t.useCallback)((function(e){F(e)&&e.preventDefault()}),[F]),onItemLeave:(0,t.useCallback)((function(e){var t;F(e)||(null===(t=I.current)||void 0===t||t.focus(),E(null))}),[F]),onTriggerLeave:(0,t.useCallback)((function(e){F(e)&&e.preventDefault()}),[F]),pointerGraceTimerRef:A,onPointerGraceIntentChange:(0,t.useCallback)((function(e){O.current=e}),[])},(0,t.createElement)(R,L,(0,t.createElement)(tm,{asChild:!0,trapped:a,onMountAutoFocus:pv(s,(function(e){var t;e.preventDefault(),null===(t=I.current)||void 0===t||t.focus()})),onUnmountAutoFocus:u},(0,t.createElement)(Rv,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:p,onFocusOutside:f,onInteractOutside:h,onDismiss:v},(0,t.createElement)(mb,dv({asChild:!0},S,{dir:w.dir,orientation:"vertical",loop:o,currentTabStopId:C,onCurrentTabStopIdChange:E,onEntryFocus:pv(c,(function(e){w.isUsingKeyboardRef.current||e.preventDefault()}))}),(0,t.createElement)(Gy,dv({role:"menu","aria-orientation":"vertical","data-state":Sx(b.open),"data-radix-menu-content":"",dir:w.dir},k,m,{ref:M,style:x({outline:"none"},m.style),onKeyDown:pv(m.onKeyDown,(function(e){var t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,n=e.ctrlKey||e.altKey||e.metaKey,r=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!n&&r&&B(e.key));var i=I.current;if(e.target===i&&kw.includes(e.key)){e.preventDefault();var o=_().filter((function(e){return!e.disabled})).map((function(e){return e.ref.current}));xw.includes(e.key)&&o.reverse(),function(e){var t,n=document.activeElement,r=y(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i===n)return;if(i.focus(),document.activeElement!==n)return}}catch(yM){r.e(yM)}finally{r.f()}}(o)}})),onBlur:pv(e.onBlur,(function(e){e.currentTarget.contains(e.target)||(window.clearTimeout(T.current),j.current="")})),onPointerMove:pv(e.onPointerMove,Cx((function(e){var t=e.target,n=D.current!==e.clientX;if(e.currentTarget.contains(t)&&n){var r=e.clientX>D.current?"right":"left";z.current=r,D.current=e.clientX}})))})))))))})),tx=(0,t.forwardRef)((function(e,n){e.__scopeMenu;var r=Ye(e,hw);return(0,t.createElement)(Iv.div,dv({role:"group"},r,{ref:n}))})),nx="MenuItem",rx="menu.itemSelect",ix=(0,t.forwardRef)((function(e,n){var r=e.disabled,i=void 0!==r&&r,o=e.onSelect,a=Ye(e,vw),s=(0,t.useRef)(null),u=Bw(nx,e.__scopeMenu),l=Gw(nx,e.__scopeMenu),c=hv(n,s),d=(0,t.useRef)(!1);return(0,t.createElement)(ox,dv({},a,{ref:c,disabled:i,onClick:pv(e.onClick,(function(){var e=s.current;if(!i&&e){var t=new CustomEvent(rx,{bubbles:!0,cancelable:!0});e.addEventListener(rx,(function(e){return null===o||void 0===o?void 0:o(e)}),{once:!0}),Mv(e,t),t.defaultPrevented?d.current=!1:u.onClose()}})),onPointerDown:function(t){var n;null===(n=e.onPointerDown)||void 0===n||n.call(e,t),d.current=!0},onPointerUp:pv(e.onPointerUp,(function(e){var t;d.current||null===(t=e.currentTarget)||void 0===t||t.click()})),onKeyDown:pv(e.onKeyDown,(function(e){var t=""!==l.searchRef.current;i||t&&" "===e.key||ww.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())}))}))})),ox=(0,t.forwardRef)((function(e,n){var r=e.__scopeMenu,i=e.disabled,o=void 0!==i&&i,a=e.textValue,s=Ye(e,gw),u=Gw(nx,r),l=Ow(r),c=(0,t.useRef)(null),d=hv(n,c),p=N((0,t.useState)(!1),2),f=p[0],h=p[1],v=N((0,t.useState)(""),2),g=v[0],m=v[1];return(0,t.useEffect)((function(){var e,t=c.current;t&&m((null!==(e=t.textContent)&&void 0!==e?e:"").trim())}),[s.children]),(0,t.createElement)(Ew.ItemSlot,{scope:r,disabled:o,textValue:null!==a&&void 0!==a?a:g},(0,t.createElement)(yb,dv({asChild:!0},l,{focusable:!o}),(0,t.createElement)(Iv.div,dv({role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":o||void 0,"data-disabled":o?"":void 0},s,{ref:d,onPointerMove:pv(e.onPointerMove,Cx((function(e){o?u.onItemLeave(e):(u.onItemEnter(e),e.defaultPrevented||e.currentTarget.focus())}))),onPointerLeave:pv(e.onPointerLeave,Cx((function(e){return u.onItemLeave(e)}))),onFocus:pv(e.onFocus,(function(){return h(!0)})),onBlur:pv(e.onBlur,(function(){return h(!1)}))}))))})),ax=(0,t.forwardRef)((function(e,n){var r=e.checked,i=void 0!==r&&r,o=e.onCheckedChange,a=Ye(e,mw);return(0,t.createElement)(dx,{scope:e.__scopeMenu,checked:i},(0,t.createElement)(ix,dv({role:"menuitemcheckbox","aria-checked":_x(i)?"mixed":i},a,{ref:n,"data-state":Px(i),onSelect:pv(a.onSelect,(function(){return null===o||void 0===o?void 0:o(!!_x(i)||!i)}),{checkForDefaultPrevented:!1})})))})),sx="MenuRadioGroup",ux=N(Tw(sx,{value:void 0,onValueChange:function(){}}),2),lx=(ux[0],ux[1],"MenuItemIndicator"),cx=N(Tw(lx,{checked:!1}),2),dx=cx[0],px=cx[1],fx=(0,t.forwardRef)((function(e,n){var r=e.__scopeMenu,i=e.forceMount,o=Ye(e,yw),a=px(lx,r);return(0,t.createElement)(Yv,{present:i||_x(a.checked)||!0===a.checked},(0,t.createElement)(Iv.span,dv({},o,{ref:n,"data-state":Px(a.checked)})))})),hx="MenuSub",vx=N(Tw(hx),2),gx=vx[0],mx=vx[1],yx=function(e){var n=e.__scopeMenu,r=e.children,i=e.open,o=void 0!==i&&i,a=e.onOpenChange,s=Nw(hx,n),u=Aw(n),l=N((0,t.useState)(null),2),c=l[0],d=l[1],p=N((0,t.useState)(null),2),f=p[0],h=p[1],v=Tv(a);return(0,t.useEffect)((function(){return!1===s.open&&v(!1),function(){return v(!1)}}),[s.open,v]),(0,t.createElement)(qy,u,(0,t.createElement)(Dw,{scope:n,open:o,onOpenChange:v,content:f,onContentChange:h},(0,t.createElement)(gx,{scope:n,contentId:cm(),triggerId:cm(),trigger:c,onTriggerChange:d},r)))},bx="MenuSubTrigger",wx=(0,t.forwardRef)((function(e,n){var r=Nw(bx,e.__scopeMenu),i=Bw(bx,e.__scopeMenu),o=mx(bx,e.__scopeMenu),a=Gw(bx,e.__scopeMenu),s=(0,t.useRef)(null),u=a.pointerGraceTimerRef,l=a.onPointerGraceIntentChange,c={__scopeMenu:e.__scopeMenu},d=(0,t.useCallback)((function(){s.current&&window.clearTimeout(s.current),s.current=null}),[]);return(0,t.useEffect)((function(){return d}),[d]),(0,t.useEffect)((function(){var e=u.current;return function(){window.clearTimeout(e),l(null)}}),[u,l]),(0,t.createElement)(Uw,dv({asChild:!0},c),(0,t.createElement)(ox,dv({id:o.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":o.contentId,"data-state":Sx(r.open)},e,{ref:fv(n,o.onTriggerChange),onClick:function(t){var n;null===(n=e.onClick)||void 0===n||n.call(e,t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:pv(e.onPointerMove,Cx((function(t){a.onItemEnter(t),t.defaultPrevented||e.disabled||r.open||s.current||(a.onPointerGraceIntentChange(null),s.current=window.setTimeout((function(){r.onOpenChange(!0),d()}),100))}))),onPointerLeave:pv(e.onPointerLeave,Cx((function(e){var t;d();var n=null===(t=r.content)||void 0===t?void 0:t.getBoundingClientRect();if(n){var i,o=null===(i=r.content)||void 0===i?void 0:i.dataset.side,s="right"===o,l=s?-5:5,c=n[s?"left":"right"],p=n[s?"right":"left"];a.onPointerGraceIntentChange({area:[{x:e.clientX+l,y:e.clientY},{x:c,y:n.top},{x:p,y:n.top},{x:p,y:n.bottom},{x:c,y:n.bottom}],side:o}),window.clearTimeout(u.current),u.current=window.setTimeout((function(){return a.onPointerGraceIntentChange(null)}),300)}else{if(a.onTriggerLeave(e),e.defaultPrevented)return;a.onPointerGraceIntentChange(null)}}))),onKeyDown:pv(e.onKeyDown,(function(t){var n,o=""!==a.searchRef.current;e.disabled||o&&" "===t.key||Sw[i.dir].includes(t.key)&&(r.onOpenChange(!0),null===(n=r.content)||void 0===n||n.focus(),t.preventDefault())}))})))})),xx="MenuSubContent",kx=(0,t.forwardRef)((function(e,n){var r=Hw(Xw,e.__scopeMenu),i=e.forceMount,o=void 0===i?r.forceMount:i,a=Ye(e,bw),s=Nw(Xw,e.__scopeMenu),u=Bw(Xw,e.__scopeMenu),l=mx(xx,e.__scopeMenu),c=(0,t.useRef)(null),d=hv(n,c);return(0,t.createElement)(Ew.Provider,{scope:e.__scopeMenu},(0,t.createElement)(Yv,{present:o||s.open},(0,t.createElement)(Ew.Slot,{scope:e.__scopeMenu},(0,t.createElement)(ex,dv({id:l.contentId,"aria-labelledby":l.triggerId},a,{ref:d,align:"start",side:"rtl"===u.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:function(e){var t;u.isUsingKeyboardRef.current&&(null===(t=c.current)||void 0===t||t.focus()),e.preventDefault()},onCloseAutoFocus:function(e){return e.preventDefault()},onFocusOutside:pv(e.onFocusOutside,(function(e){e.target!==l.trigger&&s.onOpenChange(!1)})),onEscapeKeyDown:pv(e.onEscapeKeyDown,(function(e){u.onClose(),e.preventDefault()})),onKeyDown:pv(e.onKeyDown,(function(e){var t,n=e.currentTarget.contains(e.target),r=_w[u.dir].includes(e.key);n&&r&&(s.onOpenChange(!1),null===(t=l.trigger)||void 0===t||t.focus(),e.preventDefault())}))})))))}));function Sx(e){return e?"open":"closed"}function _x(e){return"indeterminate"===e}function Px(e){return _x(e)?"indeterminate":e?"checked":"unchecked"}function Cx(e){return function(t){return"mouse"===t.pointerType?e(t):void 0}}var Ex=Fw,Ix=Uw,Mx=Yw,Tx=Qw,jx=tx,Ax=ix,Ox=ax,zx=fx,Dx=yx,Nx=wx,Rx=kx,Lx=["__scopeContextMenu","disabled"],Bx=["__scopeContextMenu"],Fx=["__scopeContextMenu"],Ux=["__scopeContextMenu"],Kx=["__scopeContextMenu"],Vx=["__scopeContextMenu"],Wx=["__scopeContextMenu"],Hx=["__scopeContextMenu"],Yx="ContextMenu",Xx=N(mv(Yx,[jw]),2),qx=Xx[0],$x=(Xx[1],jw()),Gx=N(qx(Yx),2),Qx=Gx[0],Zx=Gx[1],Jx=function(e){var n=e.__scopeContextMenu,r=e.children,i=e.onOpenChange,o=e.dir,a=e.modal,s=void 0===a||a,u=N((0,t.useState)(!1),2),l=u[0],c=u[1],d=$x(n),p=Tv(i),f=(0,t.useCallback)((function(e){c(e),p(e)}),[p]);return(0,t.createElement)(Qx,{scope:n,open:l,onOpenChange:f,modal:s},(0,t.createElement)(Ex,dv({},d,{dir:o,open:l,onOpenChange:f,modal:s}),r))},ek="ContextMenuTrigger",tk=(0,t.forwardRef)((function(e,n){var r=e.__scopeContextMenu,i=e.disabled,o=void 0!==i&&i,a=Ye(e,Lx),s=Zx(ek,r),u=$x(r),l=(0,t.useRef)({x:0,y:0}),c=(0,t.useRef)({getBoundingClientRect:function(){return DOMRect.fromRect(x({width:0,height:0},l.current))}}),d=(0,t.useRef)(0),p=(0,t.useCallback)((function(){return window.clearTimeout(d.current)}),[]),f=function(e){l.current={x:e.clientX,y:e.clientY},s.onOpenChange(!0)};return(0,t.useEffect)((function(){return p}),[p]),(0,t.useEffect)((function(){o&&p()}),[o,p]),(0,t.createElement)(t.Fragment,null,(0,t.createElement)(Ix,dv({},u,{virtualRef:c})),(0,t.createElement)(Iv.span,dv({"data-state":s.open?"open":"closed","data-disabled":o?"":void 0},a,{ref:n,style:x({WebkitTouchCallout:"none"},e.style),onContextMenu:o?e.onContextMenu:pv(e.onContextMenu,(function(e){p(),f(e),e.preventDefault()})),onPointerDown:o?e.onPointerDown:pv(e.onPointerDown,dk((function(e){p(),d.current=window.setTimeout((function(){return f(e)}),700)}))),onPointerMove:o?e.onPointerMove:pv(e.onPointerMove,dk(p)),onPointerCancel:o?e.onPointerCancel:pv(e.onPointerCancel,dk(p)),onPointerUp:o?e.onPointerUp:pv(e.onPointerUp,dk(p))})))})),nk=function(e){var n=e.__scopeContextMenu,r=Ye(e,Bx),i=$x(n);return(0,t.createElement)(Mx,dv({},i,r))},rk="ContextMenuContent",ik=(0,t.forwardRef)((function(e,n){var r=e.__scopeContextMenu,i=Ye(e,Fx),o=Zx(rk,r),a=$x(r),s=(0,t.useRef)(!1);return(0,t.createElement)(Tx,dv({},a,i,{ref:n,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:function(t){var n;null===(n=e.onCloseAutoFocus)||void 0===n||n.call(e,t),!t.defaultPrevented&&s.current&&t.preventDefault(),s.current=!1},onInteractOutside:function(t){var n;null===(n=e.onInteractOutside)||void 0===n||n.call(e,t),t.defaultPrevented||o.modal||(s.current=!0)},style:x(x({},e.style),{},{"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))})),ok=(0,t.forwardRef)((function(e,n){var r=e.__scopeContextMenu,i=Ye(e,Ux),o=$x(r);return(0,t.createElement)(jx,dv({},o,i,{ref:n}))})),ak=(0,t.forwardRef)((function(e,n){var r=e.__scopeContextMenu,i=Ye(e,Kx),o=$x(r);return(0,t.createElement)(Ax,dv({},o,i,{ref:n}))})),sk=(0,t.forwardRef)((function(e,n){var r=e.__scopeContextMenu,i=Ye(e,Vx),o=$x(r);return(0,t.createElement)(Ox,dv({},o,i,{ref:n}))})),uk=function(e){var n=e.__scopeContextMenu,r=e.children,i=e.onOpenChange,o=e.open,a=e.defaultOpen,s=$x(n),u=N(qv({prop:o,defaultProp:a,onChange:i}),2),l=u[0],c=u[1];return(0,t.createElement)(Dx,dv({},s,{open:l,onOpenChange:c}),r)},lk=(0,t.forwardRef)((function(e,n){var r=e.__scopeContextMenu,i=Ye(e,Wx),o=$x(r);return(0,t.createElement)(Nx,dv({},o,i,{ref:n}))})),ck=(0,t.forwardRef)((function(e,n){var r=e.__scopeContextMenu,i=Ye(e,Hx),o=$x(r);return(0,t.createElement)(Rx,dv({},o,i,{ref:n,style:x(x({},e.style),{},{"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))}));function dk(e){return function(t){return"mouse"!==t.pointerType?e(t):void 0}}var pk=Jx,fk=tk,hk=nk,vk=ik,gk=ok,mk=ak,yk=sk,bk=uk,wk=lk,xk=ck;function kk(e){return e.filter((function(e){return void 0!==e&&null!==e&&!1!==e}))}function Sk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=kk(n);return 0===i.length?null:{id:e,type:"group",checkbox:i.every((function(e){return"item"===e.type&&e.actionItem.checkbox})),disabled:i.every((function(e){return e.disabled})),readonlyOk:i.some((function(e){return e.readonlyOk})),children:i}}function _k(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=kk(r);return 0===o.length?null:{id:e,type:"submenu",label:t,children:o,disabled:o.every((function(e){return e.disabled})),readonlyOk:o.some((function(e){return e.readonlyOk}))}}function Pk(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.readonlyOk,r=void 0===n||n,i=t.disabled;return{id:e,type:"custom",disabled:void 0!==i&&i,readonlyOk:r}}function Ck(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw Error("No action item provided to menuItem");if(!e.label)throw Error("Trying to create menu item for action item that doesn't have a label");var n=t.checked,r=void 0!==n&&n,i=t.disabled,o=void 0!==i&&i;return{id:e.id,type:"item",actionItem:e,disabled:o,checked:r,readonlyOk:e.readonlyOk}}function Ek(e){return e.selectedIds.map((function(t){return e.getShapeById(t)})).filter((function(e){return!!e&&((!cc.is(e)||"binding"!==e.props.start.type)&&(!cc.is(e)||"binding"!==e.props.end.type))}))}var Ik=function(){var e=ma();return va("threeStackableItems",(function(){return Ek(e).length>2}),[e])},Mk=function(){var e=ma();return va("allowGroup",(function(){return Ek(e).length>1}),[e])},Tk=function(){var e=ma();return va("allowUngroup",(function(){return e.selectedIds.some((function(t){var n;return"group"===(null===(n=e.getShapeById(t))||void 0===n?void 0:n.type)}))}),[])},jk="undefined"!==typeof window&&"navigator"in window&&Boolean(navigator.clipboard)&&Boolean(navigator.clipboard.read),Ak=function(e,t,n){var r,i;return null!==(r=e.meta)&&void 0!==r&&r.geo?"geo"===t&&n===(null===(i=e.meta)||void 0===i?void 0:i.geo):t===e.id};var Ok=["forceMount"],zk=["__scopeDialog"],Dk=["forceMount"],Nk=["__scopeDialog","trapFocus","onOpenAutoFocus","onCloseAutoFocus"],Rk=["__scopeDialog"],Lk=["__scopeDialog"],Bk="Dialog",Fk=N(mv(Bk),2),Uk=Fk[0],Kk=(Fk[1],N(Uk(Bk),2)),Vk=Kk[0],Wk=Kk[1],Hk=function(e){var n=e.__scopeDialog,r=e.children,i=e.open,o=e.defaultOpen,a=e.onOpenChange,s=e.modal,u=void 0===s||s,l=(0,t.useRef)(null),c=(0,t.useRef)(null),d=N(qv({prop:i,defaultProp:o,onChange:a}),2),p=d[0],f=void 0!==p&&p,h=d[1];return(0,t.createElement)(Vk,{scope:n,triggerRef:l,contentRef:c,contentId:cm(),titleId:cm(),descriptionId:cm(),open:f,onOpenChange:h,onOpenToggle:(0,t.useCallback)((function(){return h((function(e){return!e}))}),[h]),modal:u},r)},Yk="DialogPortal",Xk=N(Uk(Yk,{forceMount:void 0}),2),qk=Xk[0],$k=Xk[1],Gk=function(e){var n=e.__scopeDialog,r=e.forceMount,i=e.children,o=e.container,a=Wk(Yk,n);return(0,t.createElement)(qk,{scope:n,forceMount:r},t.Children.map(i,(function(e){return(0,t.createElement)(Yv,{present:r||a.open},(0,t.createElement)(Wv,{asChild:!0,container:o},e))})))},Qk="DialogOverlay",Zk=(0,t.forwardRef)((function(e,n){var r=$k(Qk,e.__scopeDialog),i=e.forceMount,o=void 0===i?r.forceMount:i,a=Ye(e,Ok),s=Wk(Qk,e.__scopeDialog);return s.modal?(0,t.createElement)(Yv,{present:o||s.open},(0,t.createElement)(Jk,dv({},a,{ref:n}))):null})),Jk=(0,t.forwardRef)((function(e,n){var r=e.__scopeDialog,i=Ye(e,zk),o=Wk(Qk,r);return(0,t.createElement)(cw,{as:xv,allowPinchZoom:!0,shards:[o.contentRef]},(0,t.createElement)(Iv.div,dv({"data-state":lS(o.open)},i,{ref:n,style:x({pointerEvents:"auto"},i.style)})))})),eS="DialogContent",tS=(0,t.forwardRef)((function(e,n){var r=$k(eS,e.__scopeDialog),i=e.forceMount,o=void 0===i?r.forceMount:i,a=Ye(e,Dk),s=Wk(eS,e.__scopeDialog);return(0,t.createElement)(Yv,{present:o||s.open},s.modal?(0,t.createElement)(nS,dv({},a,{ref:n})):(0,t.createElement)(rS,dv({},a,{ref:n})))})),nS=(0,t.forwardRef)((function(e,n){var r=Wk(eS,e.__scopeDialog),i=(0,t.useRef)(null),o=hv(n,r.contentRef,i);return(0,t.useEffect)((function(){var e=i.current;if(e)return Cb(e)}),[]),(0,t.createElement)(iS,dv({},e,{ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:pv(e.onCloseAutoFocus,(function(e){var t;e.preventDefault(),null===(t=r.triggerRef.current)||void 0===t||t.focus()})),onPointerDownOutside:pv(e.onPointerDownOutside,(function(e){var t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()})),onFocusOutside:pv(e.onFocusOutside,(function(e){return e.preventDefault()}))}))})),rS=(0,t.forwardRef)((function(e,n){var r=Wk(eS,e.__scopeDialog),i=(0,t.useRef)(!1);return(0,t.createElement)(iS,dv({},e,{ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:function(t){var n,o;(null===(n=e.onCloseAutoFocus)||void 0===n||n.call(e,t),t.defaultPrevented)||(i.current||null===(o=r.triggerRef.current)||void 0===o||o.focus(),t.preventDefault());i.current=!1},onInteractOutside:function(t){var n,o;null===(n=e.onInteractOutside)||void 0===n||n.call(e,t),t.defaultPrevented||(i.current=!0);var a=t.target;(null===(o=r.triggerRef.current)||void 0===o?void 0:o.contains(a))&&t.preventDefault()}}))})),iS=(0,t.forwardRef)((function(e,n){var r=e.__scopeDialog,i=e.trapFocus,o=e.onOpenAutoFocus,a=e.onCloseAutoFocus,s=Ye(e,Nk),u=Wk(eS,r),l=hv(n,(0,t.useRef)(null));return $g(),(0,t.createElement)(t.Fragment,null,(0,t.createElement)(tm,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:o,onUnmountAutoFocus:a},(0,t.createElement)(Rv,dv({role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":lS(u.open)},s,{ref:l,onDismiss:function(){return u.onOpenChange(!1)}}))),!1)})),oS="DialogTitle",aS=(0,t.forwardRef)((function(e,n){var r=e.__scopeDialog,i=Ye(e,Rk),o=Wk(oS,r);return(0,t.createElement)(Iv.h2,dv({id:o.titleId},i,{ref:n}))})),sS="DialogClose",uS=(0,t.forwardRef)((function(e,n){var r=e.__scopeDialog,i=Ye(e,Lk),o=Wk(sS,r);return(0,t.createElement)(Iv.button,dv({type:"button"},i,{ref:n,onClick:pv(e.onClick,(function(){return o.onOpenChange(!1)}))}))}));function lS(e){return e?"open":"closed"}var cS="DialogTitleWarning",dS=N(function(e,n){var r=(0,t.createContext)(n);function i(e){var n=e.children,i=Ye(e,vv),o=(0,t.useMemo)((function(){return i}),Object.values(i));return(0,t.createElement)(r.Provider,{value:o},n)}return i.displayName=e+"Provider",[i,function(i){var o=(0,t.useContext)(r);if(o)return o;if(void 0!==n)return n;throw new Error("`".concat(i,"` must be used within `").concat(e,"`"))}]}(cS,{contentName:eS,titleName:oS,docsSlug:"dialog"}),2),pS=(dS[0],dS[1],Hk),fS=Gk,hS=Zk,vS=tS;function gS(e){return(0,Mi.jsx)("svg",x(x({width:16,height:16,viewBox:"0 0 16 16"},e),{},{children:(0,Mi.jsxs)("g",{strokeWidth:2,fill:"none",fillRule:"evenodd",children:[(0,Mi.jsx)("circle",{strokeOpacity:.25,cx:8,cy:8,r:7,stroke:"currentColor"}),(0,Mi.jsx)("path",{strokeLinecap:"round",d:"M15 8c0-4.5-4.5-7-7-7",stroke:"currentColor",children:(0,Mi.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 8 8",to:"360 8 8",dur:"1s",repeatCount:"indefinite"})})]})}))}var mS=["small","invertIcon","icon","className"],yS=(0,t.forwardRef)((function(e,t){var n=e.small,r=e.invertIcon,i=e.icon,o=e.className,a=Ye(e,mS),s=oC();return(0,Mi.jsx)("div",x(x({ref:t},a),{},{className:yf("tlui-icon",{"tlui-icon__small":n},o),style:{mask:"url(".concat(s.icons[i],") center 100% / 100% no-repeat"),WebkitMask:"url(".concat(s.icons[i],") center 100% / 100% no-repeat"),backgroundColor:"currentcolor",transform:r?"scale(-1, 1)":void 0}}))}));var bS="undefined"!==typeof window&&window.navigator.userAgent.toLowerCase().indexOf("mac")>-1,wS=bS?"\u2318":"Ctrl",xS=bS?"\u2325":"Alt";function kS(e){return"\u2014 "+e.split(",")[0].split("").map((function(e){var t=e.replace(/\$/g,wS).replace(/\?/g,xS).replace(/!/g,"\u21e7");return t[0].toUpperCase()+t.slice(1)})).join("\u2009")}"undefined"===typeof process||"production"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NEXT_PUBLIC_VERCEL_ENV||"preview"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NEXT_PUBLIC_VERCEL_ENV&&"https://".concat({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NEXT_PUBLIC_VERCEL_URL);function SS(e){var t,n=e.children;return(0,Mi.jsx)("kbd",{className:"tlui-kbd",children:(t=n,t.split(",")[0].split("").map((function(e){var t=e.replace(/\$/g,wS).replace(/\?/g,xS).replace(/!/g,"\u21e7");return t[0].toUpperCase()+t.slice(1)}))).map((function(e,t){return(0,Mi.jsx)("span",{children:e},t)}))})}var _S=["label","icon","invertIcon","iconLeft","smallIcon","kbd","isChecked","type","children","spinner"],PS=t.forwardRef((function(e,t){var n,r=e.label,i=e.icon,o=e.invertIcon,a=e.iconLeft,s=e.smallIcon,u=e.kbd,l=e.isChecked,c=void 0!==l&&l,d=e.type,p=void 0===d?"normal":d,f=e.children,h=e.spinner,v=Ye(e,_S),g=lC(),m=r?g(r):"";return(0,Mi.jsxs)("button",x(x({ref:t,draggable:!1,type:"button"},v),{},{title:null!==(n=v.title)&&void 0!==n?n:m,className:yf("tlui-button","tlui-button__".concat(p),v.className),children:[a&&(0,Mi.jsx)(yS,{icon:a,className:"tlui-icon-left",small:!0}),f,r&&(0,Mi.jsxs)("span",{draggable:!1,children:[m,c&&(0,Mi.jsx)(yS,{icon:"check"})]}),u&&(0,Mi.jsx)(SS,{children:u}),i&&!h&&(0,Mi.jsx)(yS,{icon:i,small:!!r||s,invertIcon:o}),h&&(0,Mi.jsx)(gS,{})]}))}));function CS(e){var t=e.className,n=e.children;return(0,Mi.jsx)("div",{className:yf("tlui-dialog__header",t),children:n})}function ES(e){var t=e.className,n=e.children;return(0,Mi.jsx)(aS,{dir:"ltr",className:yf("tlui-dialog__header__title",t),children:n})}function IS(){return(0,Mi.jsx)("div",{className:"tlui-dialog__header__close",children:(0,Mi.jsx)(uS,{"data-wd":"dialog.close",dir:"ltr",asChild:!0,children:(0,Mi.jsx)(PS,{"aria-label":"Close",onTouchEnd:function(e){return e.target.click()},children:(0,Mi.jsx)(yS,{small:!0,icon:"cross-2"})})})})}function MS(e){var t=e.className,n=e.children,r=e.style;return(0,Mi.jsx)("div",{className:yf("tlui-dialog__body",t),style:r,children:n})}function TS(e){var t=e.className,n=e.children;return(0,Mi.jsx)("div",{className:yf("tlui-dialog__footer",t),children:n})}var jS=["__scopeDropdownMenu","disabled"],AS=["__scopeDropdownMenu"],OS=["__scopeDropdownMenu"],zS=["__scopeDropdownMenu"],DS=["__scopeDropdownMenu"],NS=["__scopeDropdownMenu"],RS=["__scopeDropdownMenu"],LS=["__scopeDropdownMenu"],BS=["__scopeDropdownMenu"],FS="DropdownMenu",US=N(mv(FS,[jw]),2),KS=US[0],VS=(US[1],jw()),WS=N(KS(FS),2),HS=WS[0],YS=WS[1],XS=function(e){var n=e.__scopeDropdownMenu,r=e.children,i=e.dir,o=e.open,a=e.defaultOpen,s=e.onOpenChange,u=e.modal,l=void 0===u||u,c=VS(n),d=(0,t.useRef)(null),p=N(qv({prop:o,defaultProp:a,onChange:s}),2),f=p[0],h=void 0!==f&&f,v=p[1];return(0,t.createElement)(HS,{scope:n,triggerId:cm(),triggerRef:d,contentId:cm(),open:h,onOpenChange:v,onOpenToggle:(0,t.useCallback)((function(){return v((function(e){return!e}))}),[v]),modal:l},(0,t.createElement)(Ex,dv({},c,{open:h,onOpenChange:v,dir:i,modal:l}),r))},qS="DropdownMenuTrigger",$S=(0,t.forwardRef)((function(e,n){var r=e.__scopeDropdownMenu,i=e.disabled,o=void 0!==i&&i,a=Ye(e,jS),s=YS(qS,r),u=VS(r);return(0,t.createElement)(Ix,dv({asChild:!0},u),(0,t.createElement)(Iv.button,dv({type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":o?"":void 0,disabled:o},a,{ref:fv(n,s.triggerRef),onPointerDown:pv(e.onPointerDown,(function(e){o||0!==e.button||!1!==e.ctrlKey||(s.onOpenToggle(),s.open||e.preventDefault())})),onKeyDown:pv(e.onKeyDown,(function(e){o||(["Enter"," "].includes(e.key)&&s.onOpenToggle(),"ArrowDown"===e.key&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())}))})))})),GS=function(e){var n=e.__scopeDropdownMenu,r=Ye(e,AS),i=VS(n);return(0,t.createElement)(Mx,dv({},i,r))},QS="DropdownMenuContent",ZS=(0,t.forwardRef)((function(e,n){var r=e.__scopeDropdownMenu,i=Ye(e,OS),o=YS(QS,r),a=VS(r),s=(0,t.useRef)(!1);return(0,t.createElement)(Tx,dv({id:o.contentId,"aria-labelledby":o.triggerId},a,i,{ref:n,onCloseAutoFocus:pv(e.onCloseAutoFocus,(function(e){var t;s.current||null===(t=o.triggerRef.current)||void 0===t||t.focus(),s.current=!1,e.preventDefault()})),onInteractOutside:pv(e.onInteractOutside,(function(e){var t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;o.modal&&!r||(s.current=!0)})),style:x(x({},e.style),{},{"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))})),JS=(0,t.forwardRef)((function(e,n){var r=e.__scopeDropdownMenu,i=Ye(e,zS),o=VS(r);return(0,t.createElement)(jx,dv({},o,i,{ref:n}))})),e_=(0,t.forwardRef)((function(e,n){var r=e.__scopeDropdownMenu,i=Ye(e,DS),o=VS(r);return(0,t.createElement)(Ax,dv({},o,i,{ref:n}))})),t_=(0,t.forwardRef)((function(e,n){var r=e.__scopeDropdownMenu,i=Ye(e,NS),o=VS(r);return(0,t.createElement)(Ox,dv({},o,i,{ref:n}))})),n_=(0,t.forwardRef)((function(e,n){var r=e.__scopeDropdownMenu,i=Ye(e,RS),o=VS(r);return(0,t.createElement)(zx,dv({},o,i,{ref:n}))})),r_=(0,t.forwardRef)((function(e,n){var r=e.__scopeDropdownMenu,i=Ye(e,LS),o=VS(r);return(0,t.createElement)(Nx,dv({},o,i,{ref:n}))})),i_=(0,t.forwardRef)((function(e,n){var r=e.__scopeDropdownMenu,i=Ye(e,BS),o=VS(r);return(0,t.createElement)(Rx,dv({},o,i,{ref:n,style:x(x({},e.style),{},{"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))})),o_=XS,a_=$S,s_=GS,u_=ZS,l_=JS,c_=e_,d_=t_,p_=n_,f_=function(e){var n=e.__scopeDropdownMenu,r=e.children,i=e.open,o=e.onOpenChange,a=e.defaultOpen,s=VS(n),u=N(qv({prop:i,defaultProp:a,onChange:o}),2),l=u[0],c=void 0!==l&&l,d=u[1];return(0,t.createElement)(Dx,dv({},s,{open:c,onOpenChange:d}),r)},h_=r_,v_=i_,g_=["noClose"],m_=["children","onSelect"],y_=["children","onSelect"];function b_(e){var t=e.id,n=e.open,r=e.children,i=e.modal,o=void 0!==i&&i,a=xE(t);return(0,Mi.jsx)(o_,{open:n,dir:"ltr",modal:o,onOpenChange:a,children:r})}function w_(e){var t=e.children,n=e["data-wd"];return(0,Mi.jsx)(a_,{dir:"ltr","data-wd":n,asChild:!0,children:t})}function x_(e){var t=e.side,n=void 0===t?"bottom":t,r=e.align,i=void 0===r?"start":r,o=e.sideOffset,a=void 0===o?8:o,s=e.alignOffset,u=void 0===s?8:s,l=e.children,c=qs();return(0,Mi.jsx)(s_,{dir:"ltr",container:c,children:(0,Mi.jsx)(u_,{className:"tlui-menu",align:i,sideOffset:a,side:n,alignOffset:u,collisionPadding:4,children:l})})}function k_(e){var t=e.id,n=e.children,r=e.open,i=xE(t);return(0,Mi.jsx)(f_,{open:r,onOpenChange:i,children:n})}function S_(e){var t=e.label,n=e["data-wd"],r=e["data-direction"];return(0,Mi.jsx)(h_,{dir:"ltr","data-direction":r,"data-wd":n,asChild:!0,children:(0,Mi.jsx)(PS,{className:"tlui-menu__button tlui-menu__submenu__trigger",label:t,icon:"chevron-right"})})}function __(e){var t=e.alignOffset,n=void 0===t?0:t,r=e.sideOffset,i=void 0===r?5:r,o=e.children,a=qs();return(0,Mi.jsx)(s_,{container:a,dir:"ltr",children:(0,Mi.jsx)(v_,{className:"tlui-menu tlui-menu__submenu__content",alignOffset:n,sideOffset:i,collisionPadding:4,children:o})})}function P_(e){var t=e.children,n=e.size,r=void 0===n?"medium":n;return(0,Mi.jsx)(l_,{dir:"ltr",className:"tlui-menu__group","data-size":r,children:t})}function C_(e){var t=e.noClose,n=Ye(e,g_);return(0,Mi.jsx)(c_,{dir:"ltr",asChild:!0,onClick:t||void 0!==n.isChecked?ss:void 0,children:(0,Mi.jsx)(PS,x({className:"tlui-menu__button"},n))})}function E_(e){var t=e.children,n=e.onSelect,r=Ye(e,m_);return(0,Mi.jsxs)(d_,x(x({dir:"ltr",className:"tlui-button tlui-menu__button tlui-menu__checkbox-item",onSelect:function(e){null===n||void 0===n||n(e),ss(e)}},r),{},{children:[(0,Mi.jsx)("div",{className:"tlui-menu__checkbox-item__check",style:{transformOrigin:"75% center",transform:"scale(".concat(r.checked?1:.5,")"),opacity:r.checked?1:.5},children:(0,Mi.jsx)(yS,{small:!0,icon:r.checked?"check":"checkbox-empty"})}),t]}))}function I_(e){var t=e.children,n=e.onSelect,r=Ye(e,y_);return(0,Mi.jsxs)(d_,x(x({dir:"ltr",className:"tlui-button tlui-menu__button tlui-menu__checkbox-item",onSelect:function(e){null===n||void 0===n||n(e),ss(e)}},r),{},{children:[(0,Mi.jsx)(p_,{dir:"ltr",className:"tlui-menu__checkbox-item__check",children:(0,Mi.jsx)(yS,{icon:"check"})}),t]}))}var M_=t.memo((function(e){var n=e.items,r=e.title,i=e.styleType,o=e.value,a=void 0===o?null:o,s=e.onValueChange,u=e.columns,l=void 0===u?n.length<4?2:4:u,c=ma(),d=lC(),p=(0,t.useRef)(!1),f=t.useMemo((function(){var e=function e(){p.current=!1,window.removeEventListener("pointerup",e)};return{handleButtonClick:function(e){var t=e.currentTarget.dataset.id;a!==t&&(c.mark("point picker item"),s(n.find((function(e){return e.id===t})),!1))},handleButtonPointerDown:function(t){var r=t.currentTarget.dataset.id;c.mark("point picker item"),s(n.find((function(e){return e.id===r})),!0),p.current=!0,window.addEventListener("pointerup",e)},handleButtonPointerEnter:function(e){if(p.current){var t=e.currentTarget.dataset.id;s(n.find((function(e){return e.id===t})),!0)}},handleButtonPointerUp:function(e){var t=e.currentTarget.dataset.id;s(n.find((function(e){return e.id===t})),!1)}}}),[c,a,s,n]),h=f.handleButtonClick,v=f.handleButtonPointerDown,g=f.handleButtonPointerEnter,m=f.handleButtonPointerUp;return(0,Mi.jsx)("div",{className:yf("tlui-button-grid",{"tlui-button-grid__two":2===l,"tlui-button-grid__three":3===l,"tlui-button-grid__four":4===l}),children:n.map((function(t){return(0,Mi.jsx)(PS,{"data-id":t.id,"data-wd":"".concat(e["data-wd"],".").concat(t.id),"aria-label":t.id,"data-state":a===t.id?"hinted":void 0,title:r+" \u2014 "+d("".concat(i,"-style.").concat(t.id)),className:yf("tlui-button-grid__button"),style:"color"===t.type?{color:"var(--palette-".concat(t.id,")")}:void 0,onPointerEnter:g,onPointerDown:v,onPointerUp:m,onClick:h,icon:t.icon},t.id)}))})})),T_=t.forwardRef((function(e,n){var r=e.className,i=e.label,o=e.icon,a=e.iconLeft,s=e.autoselect,u=void 0!==s&&s,l=e.autofocus,c=void 0!==l&&l,d=e.defaultValue,p=e.placeholder,f=e.onComplete,h=e.onValueChange,v=e.onCancel,g=e.shouldManuallyMaintainScrollPositionWhenFocused,m=void 0!==g&&g,y=e.children,b=t.useRef(null);t.useImperativeHandle(n,(function(){return b.current}));var w=lC(),x=t.useRef(null!==d&&void 0!==d?d:""),k=t.useRef(null!==d&&void 0!==d?d:""),S=N(t.useState(!1),2),_=S[0],P=S[1],C=t.useCallback((function(e){P(!0);var t=e.currentTarget;k.current=t.value,requestAnimationFrame((function(){u&&t.select()}))}),[u]),E=t.useCallback((function(e){var t=e.currentTarget.value;k.current=t,null===h||void 0===h||h(t)}),[h]),I=t.useCallback((function(e){switch(e.key){case"Enter":e.currentTarget.blur(),e.stopPropagation(),null===f||void 0===f||f(e.currentTarget.value);break;case"Escape":e.currentTarget.value=x.current,e.currentTarget.blur(),e.stopPropagation(),null===v||void 0===v||v(e.currentTarget.value)}}),[f,v]),M=t.useCallback((function(){return P(!1)}),[]);return t.useEffect((function(){var e=window.visualViewport;if(_&&m&&e){var t=function(){var e;null===(e=b.current)||void 0===e||e.scrollIntoView({block:"center"})};return e.addEventListener("resize",t),e.addEventListener("scroll",t),requestAnimationFrame((function(){var e;null===(e=b.current)||void 0===e||e.scrollIntoView({block:"center"})})),function(){e.removeEventListener("resize",t),e.removeEventListener("scroll",t)}}}),[_,m]),(0,Mi.jsxs)("div",{draggable:!1,className:"tlui-input__wrapper",children:[y,i&&(0,Mi.jsx)("label",{children:w(i)}),a&&(0,Mi.jsx)(yS,{icon:a,className:"tlui-icon-left",small:!0}),(0,Mi.jsx)("input",{ref:b,className:yf("tlui-input",r),type:"text",defaultValue:d,onKeyUp:I,onChange:E,onFocus:C,onBlur:M,autoFocus:c,placeholder:p}),o&&(0,Mi.jsx)(yS,{icon:o,small:!!i})]})}));var j_=["name","min","max","step","orientation","disabled","minStepsBetweenThumbs","defaultValue","value","onValueChange","onValueCommit","inverted"],A_=["min","max","dir","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"],O_=["min","max","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"],z_=["__scopeSlider","onSlideStart","onSlideMove","onSlideEnd","onHomeKeyDown","onEndKeyDown","onStepKeyDown"],D_=["__scopeSlider"],N_=["__scopeSlider"],R_=["__scopeSlider","index"],L_=["value"],B_=["PageUp","PageDown"],F_=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],U_={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},K_="Slider",V_=N(Cv(K_),3),W_=V_[0],H_=V_[1],Y_=V_[2],X_=N(mv(K_,[Y_]),2),q_=X_[0],$_=(X_[1],N(q_(K_),2)),G_=$_[0],Q_=$_[1],Z_=(0,t.forwardRef)((function(e,n){var r=e.name,i=e.min,o=void 0===i?0:i,a=e.max,s=void 0===a?100:a,u=e.step,l=void 0===u?1:u,c=e.orientation,d=void 0===c?"horizontal":c,p=e.disabled,f=void 0!==p&&p,h=e.minStepsBetweenThumbs,v=void 0===h?0:h,g=e.defaultValue,m=void 0===g?[o]:g,y=e.value,b=e.onValueChange,w=void 0===b?function(){}:b,x=e.onValueCommit,k=void 0===x?function(){}:x,S=e.inverted,_=void 0!==S&&S,P=Ye(e,j_),C=N((0,t.useState)(null),2),E=C[0],I=C[1],T=hv(n,(function(e){return I(e)})),j=(0,t.useRef)(new Set),A=(0,t.useRef)(0),O="horizontal"===d,z=!E||Boolean(E.closest("form")),D=O?nP:rP,R=N(qv({prop:y,defaultProp:m,onChange:function(e){var t;null===(t=M(j.current)[A.current])||void 0===t||t.focus(),w(e)}}),2),L=R[0],B=void 0===L?[]:L,F=R[1],U=(0,t.useRef)(B);function K(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{commit:!1}).commit,r=function(e){return(String(e).split(".")[1]||"").length}(l),i=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}(Math.round((e-o)/l)*l+o,r),a=function(e,t){var n=N(t,2),r=n[0],i=n[1];return Math.min(i,Math.max(r,e))}(i,[o,s]);F((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=M(e);return r[n]=t,r.sort((function(e,t){return e-t}))}(e,a,t);if(function(e,t){if(t>0){var n=function(e){return e.slice(0,-1).map((function(t,n){return e[n+1]-t}))}(e);return Math.min.apply(Math,M(n))>=t}return!0}(r,v*l)){A.current=r.indexOf(a);var i=String(r)!==String(e);return i&&n&&k(r),i?r:e}return e}))}return(0,t.createElement)(G_,{scope:e.__scopeSlider,disabled:f,min:o,max:s,valueIndexToChangeRef:A,thumbs:j.current,values:B,orientation:d},(0,t.createElement)(W_.Provider,{scope:e.__scopeSlider},(0,t.createElement)(W_.Slot,{scope:e.__scopeSlider},(0,t.createElement)(D,dv({"aria-disabled":f,"data-disabled":f?"":void 0},P,{ref:T,onPointerDown:pv(P.onPointerDown,(function(){f||(U.current=B)})),min:o,max:s,inverted:_,onSlideStart:f?void 0:function(e){var t=function(e,t){if(1===e.length)return 0;var n=e.map((function(e){return Math.abs(e-t)})),r=Math.min.apply(Math,M(n));return n.indexOf(r)}(B,e);K(e,t)},onSlideMove:f?void 0:function(e){K(e,A.current)},onSlideEnd:f?void 0:function(){var e=U.current[A.current];B[A.current]!==e&&k(B)},onHomeKeyDown:function(){return!f&&K(o,0,{commit:!0})},onEndKeyDown:function(){return!f&&K(s,B.length-1,{commit:!0})},onStepKeyDown:function(e){var t=e.event,n=e.direction;if(!f){var r=B_.includes(t.key)||t.shiftKey&&F_.includes(t.key)?10:1,i=A.current;K(B[i]+l*r*n,i,{commit:!0})}}})))),z&&B.map((function(e,n){return(0,t.createElement)(pP,{key:n,name:r?r+(B.length>1?"[]":""):void 0,value:e})})))})),J_=N(q_(K_,{startEdge:"left",endEdge:"right",size:"width",direction:1}),2),eP=J_[0],tP=J_[1],nP=(0,t.forwardRef)((function(e,n){var r=e.min,i=e.max,o=e.dir,a=e.inverted,s=e.onSlideStart,u=e.onSlideMove,l=e.onSlideEnd,c=e.onStepKeyDown,d=Ye(e,A_),p=N((0,t.useState)(null),2),f=p[0],h=p[1],v=hv(n,(function(e){return h(e)})),g=(0,t.useRef)(),m=Xg(o),y="ltr"===m,w=y&&!a||!y&&a;function k(e){var t=g.current||f.getBoundingClientRect(),n=hP([0,t.width],w?[r,i]:[i,r]);return g.current=t,n(e-t.left)}return(0,t.createElement)(eP,{scope:e.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width"},(0,t.createElement)(iP,dv({dir:m,"data-orientation":"horizontal"},d,{ref:v,style:x(x({},d.style),{},b({},"--radix-slider-thumb-transform","translateX(-50%)")),onSlideStart:function(e){var t=k(e.clientX);null===s||void 0===s||s(t)},onSlideMove:function(e){var t=k(e.clientX);null===u||void 0===u||u(t)},onSlideEnd:function(){g.current=void 0,null===l||void 0===l||l()},onStepKeyDown:function(e){var t=U_[w?"from-left":"from-right"].includes(e.key);null===c||void 0===c||c({event:e,direction:t?-1:1})}})))})),rP=(0,t.forwardRef)((function(e,n){var r=e.min,i=e.max,o=e.inverted,a=e.onSlideStart,s=e.onSlideMove,u=e.onSlideEnd,l=e.onStepKeyDown,c=Ye(e,O_),d=(0,t.useRef)(null),p=hv(n,d),f=(0,t.useRef)(),h=!o;function v(e){var t=f.current||d.current.getBoundingClientRect(),n=hP([0,t.height],h?[i,r]:[r,i]);return f.current=t,n(e-t.top)}return(0,t.createElement)(eP,{scope:e.__scopeSlider,startEdge:h?"bottom":"top",endEdge:h?"top":"bottom",size:"height",direction:h?1:-1},(0,t.createElement)(iP,dv({"data-orientation":"vertical"},c,{ref:p,style:x(x({},c.style),{},b({},"--radix-slider-thumb-transform","translateY(50%)")),onSlideStart:function(e){var t=v(e.clientY);null===a||void 0===a||a(t)},onSlideMove:function(e){var t=v(e.clientY);null===s||void 0===s||s(t)},onSlideEnd:function(){f.current=void 0,null===u||void 0===u||u()},onStepKeyDown:function(e){var t=U_[h?"from-bottom":"from-top"].includes(e.key);null===l||void 0===l||l({event:e,direction:t?-1:1})}})))})),iP=(0,t.forwardRef)((function(e,n){var r=e.__scopeSlider,i=e.onSlideStart,o=e.onSlideMove,a=e.onSlideEnd,s=e.onHomeKeyDown,u=e.onEndKeyDown,l=e.onStepKeyDown,c=Ye(e,z_),d=Q_(K_,r);return(0,t.createElement)(Iv.span,dv({},c,{ref:n,onKeyDown:pv(e.onKeyDown,(function(e){"Home"===e.key?(s(e),e.preventDefault()):"End"===e.key?(u(e),e.preventDefault()):B_.concat(F_).includes(e.key)&&(l(e),e.preventDefault())})),onPointerDown:pv(e.onPointerDown,(function(e){var t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),d.thumbs.has(t)?t.focus():i(e)})),onPointerMove:pv(e.onPointerMove,(function(e){e.target.hasPointerCapture(e.pointerId)&&o(e)})),onPointerUp:pv(e.onPointerUp,(function(e){var t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),a(e))}))}))})),oP="SliderTrack",aP=(0,t.forwardRef)((function(e,n){var r=e.__scopeSlider,i=Ye(e,D_),o=Q_(oP,r);return(0,t.createElement)(Iv.span,dv({"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation},i,{ref:n}))})),sP="SliderRange",uP=(0,t.forwardRef)((function(e,n){var r,i=e.__scopeSlider,o=Ye(e,N_),a=Q_(sP,i),s=tP(sP,i),u=hv(n,(0,t.useRef)(null)),l=a.values.length,c=a.values.map((function(e){return fP(e,a.min,a.max)})),d=l>1?Math.min.apply(Math,M(c)):0,p=100-Math.max.apply(Math,M(c));return(0,t.createElement)(Iv.span,dv({"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0},o,{ref:u,style:x(x({},e.style),{},(r={},b(r,s.startEdge,d+"%"),b(r,s.endEdge,p+"%"),r))}))})),lP="SliderThumb",cP=(0,t.forwardRef)((function(e,n){var r=H_(e.__scopeSlider),i=N((0,t.useState)(null),2),o=i[0],a=i[1],s=hv(n,(function(e){return a(e)})),u=(0,t.useMemo)((function(){return o?r().findIndex((function(e){return e.ref.current===o})):-1}),[r,o]);return(0,t.createElement)(dP,dv({},e,{ref:s,index:u}))})),dP=(0,t.forwardRef)((function(e,n){var r=e.__scopeSlider,i=e.index,o=Ye(e,R_),a=Q_(lP,r),s=tP(lP,r),u=N((0,t.useState)(null),2),l=u[0],c=u[1],d=hv(n,(function(e){return c(e)})),p=Sy(l),f=a.values[i],h=void 0===f?0:fP(f,a.min,a.max),v=function(e,t){return t>2?"Value ".concat(e+1," of ").concat(t):2===t?["Minimum","Maximum"][e]:void 0}(i,a.values.length),g=null===p||void 0===p?void 0:p[s.size],m=g?function(e,t,n){var r=e/2,i=hP([0,50],[0,r]);return(r-i(t)*n)*n}(g,h,s.direction):0;return(0,t.useEffect)((function(){if(l)return a.thumbs.add(l),function(){a.thumbs.delete(l)}}),[l,a.thumbs]),(0,t.createElement)("span",{style:b({transform:"var(--radix-slider-thumb-transform)",position:"absolute"},s.startEdge,"calc(".concat(h,"% + ").concat(m,"px)"))},(0,t.createElement)(W_.ItemSlot,{scope:e.__scopeSlider},(0,t.createElement)(Iv.span,dv({role:"slider","aria-label":e["aria-label"]||v,"aria-valuemin":a.min,"aria-valuenow":f,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0},o,{ref:d,style:void 0===f?{display:"none"}:e.style,onFocus:pv(e.onFocus,(function(){a.valueIndexToChangeRef.current=i}))}))))})),pP=function(e){var n=e.value,r=Ye(e,L_),i=(0,t.useRef)(null),o=function(e){var n=(0,t.useRef)({value:e,previous:e});return(0,t.useMemo)((function(){return n.current.value!==e&&(n.current.previous=n.current.value,n.current.value=e),n.current.previous}),[e])}(n);return(0,t.useEffect)((function(){var e=i.current,t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"value").set;if(o!==n&&r){var a=new Event("input",{bubbles:!0});r.call(e,n),e.dispatchEvent(a)}}),[o,n]),(0,t.createElement)("input",dv({style:{display:"none"}},r,{ref:i,defaultValue:n}))};function fP(e,t,n){return 100/(n-t)*(e-t)}function hP(e,t){return function(n){if(e[0]===e[1]||t[0]===t[1])return t[0];var r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}var vP=Z_,gP=aP,mP=uP,yP=cP;function bP(e){var n=e.title,r=e.steps,i=e.value,o=e.label,a=e.onValueChange,s=ma(),u=lC(),l=(0,t.useCallback)((function(e){a(e[0],!0)}),[a]),c=(0,t.useCallback)((function(){s.mark("click slider")}),[s]),d=(0,t.useCallback)((function(){i&&a(i,!1)}),[i,a]);return(0,Mi.jsx)("div",{className:"tlui-slider__container",children:(0,Mi.jsxs)(vP,{"data-wd":e["data-wd"],className:"tlui-slider","area-label":"Opacity",dir:"ltr",min:0,max:r,step:1,value:i?[i]:void 0,onPointerDown:c,onValueChange:l,onPointerUp:d,title:n+" \u2014 "+u(o),children:[(0,Mi.jsx)(gP,{className:"tlui-slider__track",dir:"ltr",children:null!==i&&(0,Mi.jsx)(mP,{className:"tlui-slider__range",dir:"ltr"})}),null!==i&&(0,Mi.jsx)(yP,{className:"tlui-slider__thumb",dir:"ltr"})]})})}var wP=new RegExp(/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i);function xP(e){return!!wP.test(e)||!!wP.test("https://"+e)&&"needs protocol"}var kP=fa((function(e){var n=e.onClose,r=ma(),i=lC(),o=r.onlySelectedShape,a=N((0,t.useState)(xP(null===o||void 0===o?void 0:o.props.url)),2),s=a[0],u=a[1],l=(0,t.useRef)(null===o||void 0===o?void 0:o.props.url),c=(0,t.useRef)(null===o||void 0===o?void 0:o.props.url),d=(0,t.useCallback)((function(e){var t=xP(e.trim());u((function(e){return e===t?e:t})),t&&(c.current=e)}),[]),p=(0,t.useCallback)((function(){r.setProp("url","",!1),n()}),[r,n]),f=(0,t.useCallback)((function(e){var t=xP(e=e.trim()),i=r.selectedShapes[0];if(i){var o=i.props.url,a=t?"needs protocol"===t?"https://"+e:e:"bookmark"===i.type?l.current:"";void 0!==o&&o!==a&&r.setProp("url",a,!1)}n()}),[r,n]),h=(0,t.useCallback)((function(){n()}),[n]);if(!o)return n(),null;var v=l.current&&!s;return(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsxs)(CS,{children:[(0,Mi.jsx)(ES,{children:i("edit-link-dialog.title")}),(0,Mi.jsx)(IS,{})]}),(0,Mi.jsx)(MS,{children:(0,Mi.jsxs)("div",{className:"tlui-edit-link-dialog",children:[(0,Mi.jsx)(T_,{className:"tlui-edit-link-dialog__input",label:"edit-link-dialog.url",defaultValue:s?"needs protocol"===s?"https://"+o.props.url:o.props.url:"https://",autofocus:!0,onValueChange:d,onComplete:f,onCancel:h}),(0,Mi.jsx)("div",{children:i(s?"edit-link-dialog.detail":"edit-link-dialog.invalid-url")})]})}),(0,Mi.jsxs)(TS,{className:"tlui-dialog__footer__actions",children:[(0,Mi.jsx)(PS,{onClick:h,onTouchEnd:h,children:i("edit-link-dialog.cancel")}),v?(0,Mi.jsx)(PS,{type:"danger",onTouchEnd:p,onClick:p,children:i("edit-link-dialog.clear")}):(0,Mi.jsx)(PS,{type:"primary",disabled:!s,onTouchEnd:function(){return f(c.current)},onClick:function(){return f(c.current)},children:i("edit-link-dialog.save")})]})]})})),SP=n(4235);function _P(e){return PP.apply(this,arguments)}function PP(){return(PP=Ai(Ti().mark((function e(t){return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.addEventListener("loadend",(function(){var t=r.result;e(t)})),r.addEventListener("error",(function(){n(r.error)})),r.readAsText(t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function CP(e){return EP.apply(this,arguments)}function EP(){return(EP=Ai(Ti().mark((function e(t){return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t.getAsString((function(t){e(t)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var IP=["input","select","textarea"];function MP(e){var t=document.activeElement;return e.isMenuOpen||t&&(t.getAttribute("contenteditable")||IP.indexOf(t.tagName.toLowerCase())>-1)}function TP(e){var t=document.implementation.createHTMLDocument("");return t.documentElement.innerHTML=e,t.body.textContent||t.body.innerText||""}var jP=function(){var e=Ai(Ti().mark((function e(t,n,r){var i;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=null!==r&&void 0!==r?r:t.inputs.shiftKey?t.inputs.currentPagePoint:void 0,t.mark("paste"),t.putContent(n,{point:i,select:!0});case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),AP=function(){var e=Ai(Ti().mark((function e(t,n,r){var i,o,a,s,u;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=null!==r&&void 0!==r?r:t.inputs.shiftKey?t.inputs.currentPagePoint:t.viewportPageCenter,o=t.getShapeUtilByDef(jd).defaultProps(),a=t.textMeasure.measureText(x(x({},ra),{},{text:TP(n),fontFamily:sa[o.font],fontSize:ia[o.size],width:"fit-content"})),s=a.w,u=a.h,t.mark("paste"),t.createShapes([{id:Er(),type:"text",x:i.x-s/2,y:i.y-u/2,props:{text:TP(n),autoSize:!0}}]);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),OP=function(){var e=Ai(Ti().mark((function e(t,n,r){var i,o,a,s;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=null!==r&&void 0!==r?r:t.inputs.shiftKey?t.inputs.currentPagePoint:t.viewportPageCenter,e.prev=1,e.next=4,fetch(n);case 4:if(a=e.sent,null===(o=a.headers.get("content-type"))||void 0===o||!o.match(/^image\//)){e.next=9;break}return t.mark("paste"),DP(t,[n]),e.abrupt("return");case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),"Failed to fetch"!==e.t0.message&&console.error(e.t0);case 14:if(!(s=gs(n))){e.next=20;break}t.mark("paste"),$a(t,s.url,i,s.definition),e.next=23;break;case 20:return t.mark("paste"),e.next=23,Ga(t,n,i);case 23:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n,r){return e.apply(this,arguments)}}(),zP=function(e,t,n){var r=null!==n&&void 0!==n?n:e.inputs.shiftKey?e.inputs.currentPagePoint:e.viewportPageCenter;e.mark("paste"),function(e,t,n){var r=(new DOMParser).parseFromString(t,"image/svg+xml").querySelector("svg");if(!r)throw new Error("No <svg/> element present");var i=Ia(r),o=parseFloat(r.getAttribute("width")||"0"),a=parseFloat(r.getAttribute("height")||"0");if(!o||!a){document.body.appendChild(r);var s=r.getBoundingClientRect();document.body.removeChild(r),o=s.width,a=s.height}var u=xr.createCustomId(O(i));e.batch((function(){e.createAssets([{id:u,typeName:"asset",type:"image",props:{src:i,w:o,h:a,name:"svg",isAnimated:!0,mimeType:"image/svg+xml"}}]),e.createShapes([{id:Er(),type:"image",x:n.x-o/2,y:n.y-a/2,props:{assetId:u,w:o,h:a,opacity:"1"}}],!0)}))}(e,t,r)},DP=function(){var e=Ai(Ti().mark((function e(t,n,r){var i,o,a;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=null!==r&&void 0!==r?r:t.inputs.shiftKey?t.inputs.currentPagePoint:t.viewportPageCenter,e.next=3,Promise.all(n.map(function(){var e=Ai(Ti().mark((function e(t){return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return e.next=4,e.sent.blob();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return o=e.sent,a=o.map((function(e){return new File([e],"TLdrawFile",{type:e.type})})),t.mark("paste"),e.next=8,Xa(t,a,i,!1);case 8:n.forEach((function(e){return URL.revokeObjectURL(e)}));case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),NP=function(e){var t,n=e.getContent();if(n){var r,i,o=(r=n,i="content",(0,SP.compressToBase64)(JSON.stringify({type:"application/tldraw",kind:i,data:r})));if("undefined"!==typeof(null===(t=window)||void 0===t?void 0:t.navigator)){var a,s=n.shapes.map((function(e){return jd.is(e)||od.is(e)||cc.is(e)?e.props.text:yc.is(e)||Tc.is(e)?e.props.url:null})).filter(W);if(null!==(a=navigator.clipboard)&&void 0!==a&&a.write){var u=new Blob(["<tldraw>".concat(o,"</tldraw>")],{type:"text/html"}),l=s.join(" ");""===l&&(l=" "),navigator.clipboard.write([new ClipboardItem({"text/html":u,"text/plain":new Blob([l],{type:"text/plain"})})])}else navigator.clipboard.writeText&&navigator.clipboard.writeText("<tldraw>".concat(o,"</tldraw>"))}}else window.navigator.clipboard.writeText("")},RP=function(e,t,n){var r=function(e){var t,n=e.split(/[\n\s]/),r=y(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;try{var o=new URL(i);if("http:"!==o.protocol&&"https:"!==o.protocol)return}catch(gm){return}}}catch(yM){r.e(yM)}finally{r.f()}return ba(n)}(t);if(r){var i,o=y(r);try{for(o.s();!(i=o.n()).done;){var a=i.value;OP(e,a,n)}}catch(yM){o.e(yM)}finally{o.f()}}else!function(e){try{var t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch(gm){return!1}}(t)?/^<svg/.test(t)?zP(e,t,n):AP(e,t,n):OP(e,t,n)};function LP(e,t,n){return BP.apply(this,arguments)}function BP(){return BP=Ai(Ti().mark((function e(t,n,r){var i,o,a,s,u,l,c,d,p,f,h,v,g,m,b,w,k,_,P,C,E,I,M,T,j,A,O,z,D,R,L,B,F,U,K,V,W,H,Y;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w=function(e,t,n){var r=0;if(e.points.length>2){var i=new Di(t[0],t[1]),o=new Di(n[0],n[1]),a=new Di(e.points[1][0],e.points[1][1]),s=Di.Sub(o,i),u=Di.Per(s),l=Di.Med(o,i),c=Di.Sub(l,u),d=Di.Add(l,u),p=Di.NearestPointOnLineSegment(c,d,a,!1);r=Di.Dist(p,l),Di.Clockwise(p,o,l)&&(r*=-1)}return r},p=function(e){var t=d[e];return t?{size:t,scale:1}:e<16?{size:"s",scale:e/16}:e>36?{size:"xl",scale:e/36}:{size:"m",scale:1}},i=n.elements,o=n.files,a={shapes:[],rootShapeIds:[],assets:[],schema:t.store.schema.serialize()},s=new Map,u=new Map,l=function(e){var t=e/100;return t<.2?"0.1":t<.4?"0.25":t<.6?"0.5":t<.8?"0.75":"1"},c={1:"s",2:"m",3:"l",4:"xl"},d={16:"s",20:"m",28:"l",36:"xl"},f={1:"draw",2:"sans",3:"mono"},h={"#ffffff":"grey","#000000":"black","#343a40":"grey","#495057":"grey","#c92a2a":"red","#a61e4d":"light-red","#862e9c":"violet","#5f3dc4":"light-violet","#364fc7":"blue","#1864ab":"light-blue","#0b7285":"light-green","#087f5b":"light-green","#2b8a3e":"green","#5c940d":"light-green","#e67700":"yellow","#d9480f":"orange","#ced4da":"grey","#868e96":"grey","#fa5252":"light-red","#e64980":"red","#be4bdb":"light-violet","#7950f2":"violet","#4c6ef5":"blue","#228be6":"light-blue","#15aabf":"light-green","#12b886":"green","#40c057":"green","#82c91e":"light-green","#fab005":"yellow","#fd7e14":"orange","#212529":"grey"},v={solid:"draw",dashed:"dashed",dotted:"dotted"},g={"cross-hatch":"pattern",hachure:"pattern",solid:"solid"},m={left:"start",center:"middle",right:"end"},b={arrow:"arrow",dot:"dot",triangle:"triangle",bar:"pipe"},k=function(e){var t,n=null!==(t=v[e.strokeStyle])&&void 0!==t?t:"draw";return"draw"===n&&0===e.roughness&&(n="solid"),n},_=function(e){var t;return"transparent"===e.backgroundColor?"none":null!==(t=g[e.fillStyle])&&void 0!==t?t:"solid"},P=t.currentPageId,C="a1",E=new Map,I=[],M=new Set,i.forEach((function(e){if(E.set(e.id,t.createShapeId()),null!==e.boundElements){var n,r=y(e.boundElements);try{for(r.s();!(n=r.n()).done;){var i=n.value;"text"===i.type&&M.add(i.id)}}catch(yM){r.e(yM)}finally{r.f()}}})),T=y(i),e.prev=24,A=Ti().mark((function e(){var t,n,r,d,v,g,S,T,A,O,z,D,R,L,B,F,U,K,V,W,H,Y,X,q,$,G,Q,Z,J,ee,te,ne,re,ie,oe,ae,se,ue,le,ce;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=j.value,!M.has(t.id)){e.next=3;break}return e.abrupt("return","continue");case 3:n=E.get(t.id),r={id:n,typeName:"shape",parentId:P,index:C,x:t.x,y:t.y,rotation:0,isLocked:t.locked},0!==t.angle&&u.set(n,t.angle),t.groupIds&&t.groupIds.length>0?s.has(t.groupIds[0])?null===(d=s.get(t.groupIds[0]))||void 0===d||d.push(n):s.set(t.groupIds[0],[n]):I.push(n),e.t0=t.type,e.next="rectangle"===e.t0||"ellipse"===e.t0||"diamond"===e.t0?10:"freedraw"===e.t0?32:"line"===e.t0?34:"arrow"===e.t0?39:"text"===e.t0?63:"image"===e.t0?66:72;break;case 10:if(T="",A="middle",null===t.boundElements){e.next=29;break}O=y(t.boundElements),e.prev=14,D=Ti().mark((function e(){var t,n;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"text"===(t=z.value).type&&(n=i.find((function(e){return e.id===t.id})))&&(T=n.text,A=m[n.textAlign]);case 2:case"end":return e.stop()}}),e)})),O.s();case 17:if((z=O.n()).done){e.next=21;break}return e.delegateYield(D(),"t1",19);case 19:e.next=17;break;case 21:e.next=26;break;case 23:e.prev=23,e.t2=e.catch(14),O.e(e.t2);case 26:return e.prev=26,O.f(),e.finish(26);case 29:return R="transparent"===t.backgroundColor?t.strokeColor:t.backgroundColor,a.shapes.push(x(x({},r),{},{type:"geo",props:{geo:t.type,opacity:l(t.opacity),url:null!==(v=t.link)&&void 0!==v?v:"",w:t.width,h:t.height,size:null!==(g=c[t.strokeWidth])&&void 0!==g?g:"draw",color:null!==(S=h[R])&&void 0!==S?S:"black",text:T,align:A,dash:k(t),fill:_(t)}})),e.abrupt("break",72);case 32:return a.shapes.push(x(x({},r),{},{type:"draw",props:{dash:k(t),size:c[t.strokeWidth],opacity:l(t.opacity),color:null!==(L=h[t.strokeColor])&&void 0!==L?L:"black",segments:[{type:"free",points:t.points.map((function(e){var t=N(e,3),n=t[0],r=t[1],i=t[2];return{x:n,y:r,z:void 0===i?.5:i}}))}]}})),e.abrupt("break",72);case 34:return F=t.points[0],U=t.points[t.points.length-1],K=zs(t.points.length),a.shapes.push(x(x({},r),{},{type:"line",props:{dash:k(t),size:c[t.strokeWidth],opacity:l(t.opacity),color:null!==(B=h[t.strokeColor])&&void 0!==B?B:"black",spline:t.roundness?"cubic":"line",handles:x({start:{id:"start",type:"vertex",index:K[0],x:F[0],y:F[1]},end:{id:"end",type:"vertex",index:K[K.length-1],x:U[0],y:U[1]}},Object.fromEntries(t.points.slice(1,-1).map((function(e,t){var n=N(e,2),r=n[0],i=n[1],o=os();return[o,{id:o,type:"vertex",index:K[t+1],x:r,y:i}]}))))}})),e.abrupt("break",72);case 39:if($="",null===t.boundElements){e.next=57;break}G=y(t.boundElements),e.prev=42,Z=Ti().mark((function e(){var t,n;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"text"===(t=Q.value).type&&(n=i.find((function(e){return e.id===t.id})))&&($=n.text);case 2:case"end":return e.stop()}}),e)})),G.s();case 45:if((Q=G.n()).done){e.next=49;break}return e.delegateYield(Z(),"t3",47);case 47:e.next=45;break;case 49:e.next=54;break;case 51:e.prev=51,e.t4=e.catch(42),G.e(e.t4);case 54:return e.prev=54,G.f(),e.finish(54);case 57:return J=t.points[0],ee=t.points[t.points.length-1],te=E.get(null===(V=t.startBinding)||void 0===V?void 0:V.elementId),ne=E.get(null===(W=t.endBinding)||void 0===W?void 0:W.elementId),a.shapes.push(x(x({},r),{},{type:"arrow",props:{text:$,bend:w(t,J,ee),dash:k(t),opacity:l(t.opacity),size:null!==(H=c[t.strokeWidth])&&void 0!==H?H:"m",color:null!==(Y=h[t.strokeColor])&&void 0!==Y?Y:"black",start:te?{type:"binding",boundShapeId:te,normalizedAnchor:{x:.5,y:.5},isExact:!1}:{type:"point",x:J[0],y:J[1]},end:ne?{type:"binding",boundShapeId:ne,normalizedAnchor:{x:.5,y:.5},isExact:!1}:{type:"point",x:ee[0],y:ee[1]},arrowheadEnd:null!==(X=b[t.endArrowhead])&&void 0!==X?X:"none",arrowheadStart:null!==(q=b[t.startArrowhead])&&void 0!==q?q:"none"}})),e.abrupt("break",72);case 63:return oe=p(t.fontSize),ae=oe.size,se=oe.scale,a.shapes.push(x(x({},r),{},{type:"text",props:{size:ae,scale:se,font:null!==(re=f[t.fontFamily])&&void 0!==re?re:"draw",opacity:l(t.opacity),color:null!==(ie=h[t.strokeColor])&&void 0!==ie?ie:"black",text:t.text,align:m[t.textAlign]}})),e.abrupt("break",72);case 66:if(le=o[t.fileId]){e.next=69;break}return e.abrupt("break",72);case 69:ce=xr.createId(),a.assets.push({id:ce,typeName:"asset",type:"image",props:{w:t.width,h:t.height,name:null!==(ue=t.id)&&void 0!==ue?ue:"Untitled",isAnimated:!1,mimeType:le.mimeType,src:le.dataURL}}),a.shapes.push(x(x({},r),{},{type:"image",props:{opacity:l(t.opacity),w:t.width,h:t.height,assetId:ce}}));case 72:C=Os(C);case 73:case"end":return e.stop()}}),e,null,[[14,23,26,29],[42,51,54,57]])})),T.s();case 27:if((j=T.n()).done){e.next=34;break}return e.delegateYield(A(),"t0",29);case 29:if("continue"!==e.t0){e.next=32;break}return e.abrupt("continue",32);case 32:e.next=27;break;case 34:e.next=39;break;case 36:e.prev=36,e.t1=e.catch(24),T.e(e.t1);case 39:return e.prev=39,T.f(),e.finish(39);case 42:O=null!==r&&void 0!==r?r:t.inputs.shiftKey?t.inputs.currentPagePoint:void 0,t.mark("paste"),t.putContent(a,{point:O,select:!1,preserveIds:!0}),z=y(s.values());try{for(z.s();!(D=z.n()).done;)(R=D.value).length>1&&(t.groupShapes(R),null!==(L=t.getShapeById(R[0]))&&void 0!==L&&L.parentId&&Cr(L.parentId)&&I.push(L.parentId))}catch(yM){z.e(yM)}finally{z.f()}B=y(u);try{for(B.s();!(F=B.n()).done;)U=N(F.value,2),K=U[0],V=U[1],t.select(K),t.rotateShapesBy([K],V)}catch(yM){B.e(yM)}finally{B.f()}W=S(I.map((function(e){return t.getShapeById(e)}))),H=uo.Common(W.map((function(e){return t.getPageBounds(e)}))),Y=t.viewportPageBounds.center,t.updateShapes(W.map((function(e){var t,n,r=(null!==(t=e.x)&&void 0!==t?t:0)-(H.x+H.w/2),i=(null!==(n=e.y)&&void 0!==n?n:0)-(H.y+H.h/2);return{id:e.id,type:e.type,x:Y.x+r,y:Y.y+i}}))),t.setSelectedIds(I);case 54:case"end":return e.stop()}}),e,null,[[24,36,39,42]])}))),BP.apply(this,arguments)}var FP=function(){var e=Ai(Ti().mark((function e(t,n,r){var i;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=n.map((function(e){return URL.createObjectURL(e)})),DP(t,i,r);case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),UP=function(){var e=Ai(Ti().mark((function e(t,n,r){var i,o,a,s,u,l;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=null===(i=n.match(/<tldraw[^>]*>(.*)<\/tldraw>/))||void 0===i?void 0:i[1])try{"application/tldraw"===(a=JSON.parse((0,SP.decompressFromBase64)(o))).type?jP(t,a.data,r):RP(t,o,r)}catch(c){RP(t,o,r)}else s=(new DOMParser).parseFromString(n,"text/html"),u=s.querySelector("body"),u&&1===Array.from(u.children).filter((function(e){return 1===e.nodeType})).length&&u.firstElementChild&&"A"===u.firstElementChild.tagName&&u.firstElementChild.hasAttribute("href")&&""!==u.firstElementChild.getAttribute("href")?(l=u.firstElementChild.getAttribute("href"),RP(t,l,r)):RP(t,n,r);case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),KP=function(){var e=Ai(Ti().mark((function e(t,n,r){var i,o,a;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.trim(),null===(i=n.match(/<tldraw[^>]*>(.*)<\/tldraw>/))||void 0===i?void 0:i[1])UP(t,n);else if(o)try{"application/tldraw"===(a=JSON.parse(o)).type?jP(t,a.data,r):"excalidraw/clipboard"===a.type?LP(t,a,r):RP(t,o,r)}catch(s){RP(t,o,r)}case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),VP=function(){var e=Ai(Ti().mark((function e(t,n,r){var i,o,a,s,u,l,c,d;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isIn("select.editing")){e.next=2;break}return e.abrupt("return");case 2:if(!n){e.next=37;break}i=Object.values(n.items),o=i.some((function(e){return"file"===e.kind})),a=i.some((function(e){return"text/html"===e.type})),s=[],u=[],i.forEach((function(e){if("file"===e.kind){var t=e.getAsFile();t&&s.push(t)}else"string"===e.kind&&u.push(e)})),s.length>0&&FP(t,s,r),l=0,c=u;case 11:if(!(l<c.length)){e.next=37;break}if(d=c[l],o||"text/html"!==d.type){e.next=24;break}return e.t0=UP,e.t1=t,e.next=18,CP(d);case 18:return e.t2=e.sent,e.t3=r,e.next=22,(0,e.t0)(e.t1,e.t2,e.t3);case 22:e.next=34;break;case 24:if("text/plain"!==d.type){e.next=34;break}if(a){e.next=34;break}return e.t4=KP,e.t5=t,e.next=30,CP(d);case 30:return e.t6=e.sent,e.t7=r,e.next=34,(0,e.t4)(e.t5,e.t6,e.t7);case 34:l++,e.next=11;break;case 37:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),WP=function(){var e=Ai(Ti().mark((function e(t,n,r){var i,o,a,s,u,l,c,d,p,f;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isIn("select.editing")){e.next=2;break}return e.abrupt("return");case 2:return i=function(e){return e.types.find((function(e){return e.match(/^image\//)}))},o=n.some((function(e){return i(e)})),a=n.some((function(e){return e.types.includes("text/html")})),s=n.filter((function(e){return!!e.types.find((function(e){return e.match(/^image\//)}))})),e.next=8,Promise.all(s.map(function(){var e=Ai(Ti().mark((function e(n){var i,o;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.types.find((function(e){return"text/plain"!==e&&"text/html"!==e})),!i){e.next=8;break}return e.next=4,n.getType(i);case 4:if(!(o=e.sent)){e.next=8;break}return e.next=8,FP(t,[o],r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:u=y(n),e.prev=9,u.s();case 11:if((l=u.n()).done){e.next=61;break}if(!(c=l.value).types.includes("text/html")){e.next=29;break}if(!o){e.next=16;break}return e.abrupt("break",61);case 16:return e.next=18,c.getType("text/html");case 18:return d=e.sent,e.t0=UP,e.t1=t,e.next=23,_P(d);case 23:return e.t2=e.sent,e.t3=r,e.next=27,(0,e.t0)(e.t1,e.t2,e.t3);case 27:e.next=59;break;case 29:if(!c.types.includes("text/uri-list")){e.next=45;break}if(!a){e.next=32;break}return e.abrupt("break",61);case 32:return e.next=34,c.getType("text/uri-list");case 34:return p=e.sent,e.t4=OP,e.t5=t,e.next=39,_P(p);case 39:return e.t6=e.sent,e.t7=r,e.next=43,(0,e.t4)(e.t5,e.t6,e.t7);case 43:e.next=59;break;case 45:if(!c.types.includes("text/plain")){e.next=59;break}if(!a){e.next=48;break}return e.abrupt("break",61);case 48:return e.next=50,c.getType("text/plain");case 50:return f=e.sent,e.t8=KP,e.t9=t,e.next=55,_P(f);case 55:return e.t10=e.sent,e.t11=r,e.next=59,(0,e.t8)(e.t9,e.t10,e.t11);case 59:e.next=11;break;case 61:e.next=66;break;case 63:e.prev=63,e.t12=e.catch(9),u.e(e.t12);case 66:return e.prev=66,u.f(),e.finish(66);case 69:case"end":return e.stop()}}),e,null,[[9,63,66,69]])})));return function(t,n,r){return e.apply(this,arguments)}}();function HP(){var e=ma(),n=(0,t.useCallback)((function(){0!==e.selectedIds.length&&NP(e)}),[e]),r=(0,t.useCallback)((function(){0!==e.selectedIds.length&&(NP(e),e.deleteShapes())}),[e]),i=(0,t.useCallback)(function(){var t=Ai(Ti().mark((function t(n,r){return Ti().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Array.isArray(n)&&n[0]instanceof ClipboardItem?WP(e,n,r):navigator.clipboard.read().then((function(t){i(t,e.inputs.currentPagePoint)}));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),[e]);return{copy:n,cut:r,paste:i}}var YP=(0,t.createContext)({});function XP(e){var n=e.children,r=N((0,t.useState)([]),2),i=r[0],o=r[1],a=(0,t.useCallback)((function(e){var t,n=null!==(t=e.id)&&void 0!==t?t:os();return o((function(t){return[].concat(M(t.filter((function(t){return t.id!==e.id}))),[x(x({},e),{},{id:n})])})),n}),[]),s=(0,t.useCallback)((function(e){return o((function(t){return t.filter((function(t){return t.id!==e}))})),e}),[]),u=(0,t.useCallback)((function(){o((function(){return[]}))}),[]);return(0,Mi.jsx)(YP.Provider,{value:{toasts:i,addToast:a,removeToast:s,clearToasts:u},children:n})}function qP(){var e=(0,t.useContext)(YP);if(!e)throw new Error("useToasts must be used within a ToastsProvider");return e}var $P={"action.convert-to-bookmark":"Convert to Bookmark","action.convert-to-embed":"Convert to Embed","action.open-embed-link":"Open link","action.align-bottom":"Align bottom","action.align-center-horizontal":"Align horizontally","action.align-center-vertical":"Align vertically","action.align-center-horizontal.short":"Align H","action.align-center-vertical.short":"Align V","action.align-left":"Align left","action.align-right":"Align right","action.align-top":"Align top","action.back-to-content":"Back to content","action.bring-forward":"Bring forward","action.bring-to-front":"Bring to front","action.copy-as-json.short":"JSON","action.copy-as-json":"Copy as JSON","action.copy-as-png.short":"PNG","action.copy-as-png":"Copy as PNG","action.copy-as-svg.short":"SVG","action.copy-as-svg":"Copy as SVG","action.copy":"Copy","action.cut":"Cut","action.delete":"Delete","action.distribute-horizontal":"Distribute horizontally","action.distribute-vertical":"Distribute vertically","action.distribute-horizontal.short":"Distribute H","action.distribute-vertical.short":"Distribute V","action.duplicate":"Duplicate","action.edit-link":"Edit link","action.exit-pen-mode":"Exit pen mode","action.export-as-json.short":"JSON","action.export-as-json":"Export as JSON","action.export-as-png.short":"PNG","action.export-as-png":"Export as PNG","action.export-as-svg.short":"SVG","action.export-as-svg":"Export as SVG","action.flip-horizontal":"Flip horizontally","action.flip-vertical":"Flip vertically","action.flip-horizontal.short":"Flip H","action.flip-vertical.short":"Flip V","action.group":"Group","action.insert-media":"Upload media","action.new-shared-project":"New shared project","action.nudge-down":"Nudge down","action.nudge-left":"Nudge left","action.nudge-right":"Nudge right","action.nudge-up":"Nudge up","action.open-file":"Open file","action.pack":"Pack","action.paste":"Paste","action.print":"Print","action.redo":"Redo","action.rotate-ccw":"Rotate counterclockwise","action.rotate-cw":"Rotate clockwise","action.save-copy":"Save a copy","action.select-all":"Select all","action.select-none":"Select none","action.send-backward":"Send backward","action.send-to-back":"Send to back","action.share-project":"Share this project","action.stack-horizontal":"Stack horizontally","action.stack-vertical":"Stack vertically","action.stack-horizontal.short":"Stack H","action.stack-vertical.short":"Stack V","action.stretch-horizontal":"Stretch horizontally","action.stretch-vertical":"Stretch vertically","action.stretch-horizontal.short":"Stretch H","action.stretch-vertical.short":"Stretch V","action.toggle-auto-size":"Toggle auto size","action.toggle-dark-mode.menu":"Dark mode","action.toggle-dark-mode":"Toggle dark mode","action.toggle-debug-mode.menu":"Debug mode","action.toggle-debug-mode":"Toggle debug mode","action.toggle-focus-mode.menu":"Focus mode","action.toggle-focus-mode":"Toggle focus mode","action.toggle-grid.menu":"Show grid","action.toggle-grid":"Toggle grid","action.toggle-snap-mode.menu":"Always snap","action.toggle-snap-mode":"Toggle always snap","action.toggle-tool-lock.menu":"Tool lock","action.toggle-tool-lock":"Toggle tool lock","action.toggle-transparent.context-menu":"Transparent","action.toggle-transparent.menu":"Transparent","action.toggle-transparent":"Toggle transparent background","action.undo":"Undo","action.ungroup":"Ungroup","action.zoom-in":"Zoom in","action.zoom-out":"Zoom out","action.zoom-to-100":"Zoom to 100%","action.zoom-to-fit":"Zoom to fit","action.zoom-to-selection":"Zoom to selection","color-style.black":"Black","color-style.blue":"Blue","color-style.green":"Green","color-style.grey":"Grey","color-style.light-blue":"Light blue","color-style.light-green":"Light green","color-style.light-red":"Light red","color-style.light-violet":"Light violet","color-style.orange":"Orange","color-style.red":"Red","color-style.violet":"Violet","color-style.yellow":"Yellow","fill-style.none":"None","fill-style.semi":"Semi","fill-style.solid":"Solid","fill-style.pattern":"Pattern","dash-style.dashed":"Dashed","dash-style.dotted":"Dotted","dash-style.draw":"Draw","dash-style.solid":"Solid","size-style.s":"Small","size-style.m":"Medium","size-style.l":"Large","size-style.xl":"Extra large","opacity-style.0.1":"10%","opacity-style.0.25":"25%","opacity-style.0.5":"50%","opacity-style.0.75":"75%","opacity-style.1":"100%","font-style.draw":"Draw","font-style.sans":"Sans","font-style.serif":"Serif","font-style.mono":"Mono","align-style.start":"Start","align-style.middle":"Middle","align-style.end":"End","align-style.justify":"Justify","geo-style.arrow-down":"Arrow down","geo-style.arrow-left":"Arrow left","geo-style.arrow-right":"Arrow right","geo-style.arrow-up":"Arrow up","geo-style.diamond":"Diamond","geo-style.ellipse":"Ellipse","geo-style.hexagon":"Hexagon","geo-style.octagon":"Octagon","geo-style.oval":"Oval","geo-style.pentagon":"Pentagon","geo-style.rectangle":"Rectangle","geo-style.rhombus-2":"Rhombus 2","geo-style.rhombus":"Rhombus","geo-style.star":"Star","geo-style.trapezoid":"Trapezoid","geo-style.triangle":"Triangle","geo-style.x-box":"X Box","arrowheadStart-style.none":"None","arrowheadStart-style.arrow":"Arrow","arrowheadStart-style.bar":"Bar","arrowheadStart-style.diamond":"Diamond","arrowheadStart-style.dot":"Dot","arrowheadStart-style.inverted":"Inverted","arrowheadStart-style.pipe":"Pipe","arrowheadStart-style.square":"Square","arrowheadStart-style.triangle":"Triangle","arrowheadEnd-style.none":"None","arrowheadEnd-style.arrow":"Arrow","arrowheadEnd-style.bar":"Bar","arrowheadEnd-style.diamond":"Diamond","arrowheadEnd-style.dot":"Dot","arrowheadEnd-style.inverted":"Inverted","arrowheadEnd-style.pipe":"Pipe","arrowheadEnd-style.square":"Square","arrowheadEnd-style.triangle":"Triangle","spline-style.line":"Line","spline-style.cubic":"Cubic","tool.select":"Select","tool.hand":"Hand","tool.draw":"Draw","tool.eraser":"Eraser","tool.arrow-down":"Arrow down","tool.arrow-left":"Arrow left","tool.arrow-right":"Arrow right","tool.arrow-up":"Arrow up","tool.arrow":"Arrow","tool.diamond":"Diamond","tool.ellipse":"Ellipse","tool.hexagon":"Hexagon","tool.line":"Line","tool.octagon":"Octagon","tool.oval":"Oval","tool.pentagon":"Pentagon","tool.rectangle":"Rectangle","tool.rhombus":"Rhombus","tool.star":"Star","tool.trapezoid":"Trapezoid","tool.triangle":"Triangle","tool.x-box":"X box","tool.asset":"Asset","tool.frame":"Frame","tool.note":"Note","tool.embed":"Embed","tool.text":"Text","menu.title":"Menu","menu.copy-as":"Copy as","menu.edit":"Edit","menu.export-as":"Export as","menu.file":"File","menu.language":"Language","menu.preferences":"Preferences","menu.view":"View","context-menu.arrange":"Arrange","context-menu.copy-as":"Copy as","context-menu.export-as":"Export as","context-menu.move-to-page":"Move to page","context-menu.reorder":"Reorder","page-menu.title":"Pages","page-menu.create-new-page":"Create new page","page-menu.edit-pages":"Edit pages","page-menu.max-page-count-reached":"Max pages reached","page-menu.new-page-initial-name":"Page 1","page-menu.page":"Page","page-menu.edit-start":"Edit","page-menu.edit-done":"Done","page-menu.submenu.rename":"Rename","page-menu.submenu.duplicate-page":"Duplicate","page-menu.submenu.go-to-page":"Go to page","page-menu.submenu.title":"Menu","page-menu.submenu.move-down":"Move down","page-menu.submenu.move-up":"Move up","page-menu.submenu.delete":"Delete","share-menu.title":"Share","share-menu.share-project":"Share this project","share-menu.create-project":"New shared project","share-menu.copy-link":"Copy link","share-menu.readonly-link":"Read-only","share-menu.copy-readonly-link":"Copy read-only link","share-menu.offline-note":"Sharing this project will create a hosted live copy at a new URL. You can share the URL with up to thirty other people to view and edit the project together.","share-menu.copy-link-note":"Anyone with the link will be able to view and edit this project.","share-menu.copy-readonly-link-note":"Anyone with the link will be able to view (but not edit) this project.","share-menu.project-too-large":"Sorry, this project can't be shared because it's too large. We're working on it!","people-menu.title":"People","people-menu.change-name":"Change name","people-menu.change-color":"Change color","people-menu.user":"(You)","people-menu.invite":"Invite others","debug-menu.hard-reset":"Hard reset","debug-menu.create-shapes":"Create 100 shapes","help-menu.title":"Help and resources","help-menu.about":"About","help-menu.discord":"Discord","help-menu.github":"GitHub","help-menu.keyboard-shortcuts":"Keyboard shortcuts","help-menu.twitter":"Twitter","links-menu.about":"About","links-menu.discord":"Discord","links-menu.github":"GitHub","links-menu.twitter":"Twitter","actions-menu.title":"Actions","edit-link-dialog.title":"Edit link","edit-link-dialog.invalid-url":"A link must be a valid URL.","edit-link-dialog.detail":"Links will open in a new tab.","edit-link-dialog.url":"URL","edit-link-dialog.clear":"Clear","edit-link-dialog.save":"Continue","edit-link-dialog.cancel":"Cancel","embed-dialog.title":"Create embed","embed-dialog.url-title":"Create %s embed","embed-dialog.url-label":"Paste URL","embed-dialog.back":"Back","embed-dialog.create":"Create","embed-dialog.cancel":"Cancel","embed-dialog.url":"URL","embed-dialog.instruction":"Paste in the site's URL to create the embed.","embed-dialog.invalid-url":"We could not create an embed from that URL.","edit-pages-dialog.title":"Edit pages","edit-pages-dialog.create-new-page":"Create new page","edit-pages-dialog.delete":"Delete","edit-pages-dialog.duplicate-page":"Duplicate","edit-pages-dialog.go-to-page":"Go to page","edit-pages-dialog.max-page-count-reached":"Max pages reached","edit-pages-dialog.more-menu":"Menu","edit-pages-dialog.move-down":"Move down","edit-pages-dialog.move-up":"Move up","edit-pages-dialog.new-page-initial-name":"Page 1","reload-file-dialog.title":"Continue editing file","reload-file-dialog.description":"You were just editing a file. Would you like to continue editing it?","reload-file-dialog.failure":"Failed to reload file. Try again?","reload-file-dialog.reload":"Continue editing","reload-file-dialog.revert":"No thanks","shortcuts-dialog.title":"Keyboard shortcuts","shortcuts-dialog.edit":"Edit","shortcuts-dialog.file":"File","shortcuts-dialog.preferences":"Preferences","shortcuts-dialog.tools":"Tools","shortcuts-dialog.transform":"Transform","shortcuts-dialog.view":"View","shortcuts-dialog.save":"Continue","style-panel.title":"Styles","style-panel.align":"Align","style-panel.arrowheads":"Arrowheads","style-panel.arrowhead-start":"Start","style-panel.arrowhead-end":"End","style-panel.color":"Color","style-panel.dash":"Dash","style-panel.fill":"Fill","style-panel.font":"Font","style-panel.geo":"Shape","style-panel.label":"Label","style-panel.mixed":"Mixed","style-panel.opacity":"Opacity","style-panel.size":"Size","style-panel.spline":"Spline","style-panel.text":"Text","tool-panel.drawing":"Drawing","tool-panel.geo":"Shape","tool-panel.shapes":"Shapes","tool-panel.things":"Things","tool-panel.tools":"Tools","save-changes-prompt.title":"You have unsaved changes","save-changes-prompt.description":"Would you like to save changes to your current file?","save-changes-prompt.go-back":"Go back","save-changes-prompt.continue":"Continue","navigation-zone.toggle-minimap":"Toggle minimap","navigation-zone.zoom":"Zoom","focus-mode.toggle-focus-mode":"Toggle focus mode","toast.close":"Close","file-system.file-open-error.title":"Could not open file","file-system.file-open-error.not-a-tldraw-file":"The file you tried to open doesn't look like a tldraw file.","file-system.file-open-error.file-format-version-too-new":"The file you tried to open is from a newer version of tldraw. Please reload the page and try again.","file-system.file-open-error.generic-corrupted-file":"The file you tried to open is corrupted.","file-system.confirm-open.title":"Overwrite current project?","file-system.confirm-open.description":"Opening a file will replace your current project and any unsaved changes will be lost. Are you sure you want to continue?","file-system.confirm-open.cancel":"Cancel","file-system.confirm-open.open":"Open file","file-system.confirm-open.dont-show-again":"Don't ask again","file-system.shared-document-file-open-error.title":"Could not open file","file-system.shared-document-file-open-error.description":"Opening files from shared projects is not supported.","toast.error.export-fail.title":"Failed export","toast.error.export-fail.desc":"Failed to export image","toast.error.copy-fail.title":"Failed copy","toast.error.copy-fail.desc":"Failed to copy image","context.pages.new-page":"New page","vscode.file-open.desc":"We've updated this document to work with the current version of tldraw. If you'd like to keep the original version (which will work on old.tldraw.com), click below to create a backup.","vscode.file-open.open":"Continue","vscode.file-open.backup":"Backup","vscode.file-open.backup-saved":"Backup saved","vscode.file-open.backup-failed":"Backup failed: this is not a .tldr file.","vscode.file-open.dont-show-again":"Don't ask again"},GP=[{locale:"ar",label:"\u0639\u0631\u0628\u064a"},{locale:"ca",label:"Catal\xe0"},{locale:"da",label:"Danish"},{locale:"de",label:"Deutsch"},{locale:"en",label:"English"},{locale:"es",label:"Espa\xf1ol"},{locale:"fa",label:"\u0641\u0627\u0631\u0633\u06cc"},{locale:"fi",label:"Suomi"},{locale:"fr",label:"Fran\xe7ais"},{locale:"gl",label:"Galego"},{locale:"he",label:"\u05e2\u05d1\u05e8\u05d9\u05ea"},{locale:"it",label:"Italiano"},{locale:"ja",label:"\u65e5\u672c\u8a9e"},{locale:"ko-kr",label:"\ud55c\uad6d\uc5b4"},{locale:"ku",label:"\u06a9\u0648\u0631\u062f\u06cc"},{locale:"hi-in",label:"\u0939\u093f\u0928\u094d\u0926\u0940"},{locale:"hu",label:"Magyar"},{locale:"my",label:"\u1019\u103c\u1014\u103a\u1019\u102c\u1005\u102c"},{locale:"ne",label:"\u0928\u0947\u092a\u093e\u0932\u0940"},{locale:"no",label:"Norwegian"},{locale:"pl",label:"Polski"},{locale:"pt-br",label:"Portugu\xeas - Brasil"},{locale:"pt-pt",label:"Portugu\xeas - Europeu"},{locale:"ro",label:"Rom\xe2n\u0103"},{locale:"ru",label:"Russian"},{locale:"sv",label:"Svenska"},{locale:"te",label:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41"},{locale:"th",label:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22"},{locale:"tr",label:"T\xfcrk\xe7e"},{locale:"uk",label:"Ukrainian"},{locale:"vi",label:"Ti\u1ebfng Vi\u1ec7t"},{locale:"zh-cn",label:"Chinese - Simplified"},{locale:"zh-tw",label:"\u7e41\u9ad4\u4e2d\u6587 (\u53f0\u7063)"}],QP={locale:"en",label:"English",messages:$P};function ZP(e,t){return JP.apply(this,arguments)}function JP(){return JP=Ai(Ti().mark((function e(t,n){var r,i,o,a,s;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n.translations.en);case 2:if(e.sent.ok){e.next=6;break}return console.warn("No main translations found."),e.abrupt("return",QP);case 6:if("en"!==t){e.next=8;break}return e.abrupt("return",QP);case 8:if(r=GP.find((function(e){return e.locale===t})),r){e.next=12;break}return console.warn("No translation found for locale ".concat(t)),e.abrupt("return",QP);case 12:return e.next=14,fetch(n.translations[r.locale]);case 14:return i=e.sent,e.next=17,i.json();case 17:if(o=e.sent){e.next=21;break}return console.warn("No messages found for locale ".concat(t)),e.abrupt("return",QP);case 21:for(s in a=[],QP)o[s]||a.push(s);return a.length,e.abrupt("return",x(x({},QP),{},{messages:x(x({},QP.messages),o)}));case 25:case"end":return e.stop()}}),e)}))),JP.apply(this,arguments)}function eC(e,t){return tC.apply(this,arguments)}function tC(){return(tC=Ai(Ti().mark((function e(t,n){return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ZP(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nC(){var e=ma();return{languages:GP,currentLanguage:e.user.locale}}var rC=(0,t.createContext)(null);function iC(e){var t=e.assetUrls,n=e.children;return(0,Mi.jsx)(rC.Provider,{value:t,children:n})}function oC(){var e=(0,t.useContext)(rC);if(!e)throw new Error("useAssetUrls must be used within an AssetUrlsProvider");return e}var aC=t.createContext({}),sC=function(){return t.useContext(aC)},uC=fa((function(e){var n=e.overrides,r=e.children,i=ma().userSettings.locale,o=oC(),a=N(t.useState((function(){return n&&n.en?{locale:"en",label:"English",messages:x(x({},$P),n.en)}:{locale:"en",label:"English",messages:$P}})),2),s=a[0],u=a[1];return t.useEffect((function(){var e=!1;function t(){return(t=Ai(Ti().mark((function t(){var r,a;return Ti().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=null!==i&&void 0!==i?i:navigator.language.split(/[-_]/)[0],t.next=3,eC(r,o);case 3:(a=t.sent)&&!e&&(n&&n[r]?u(x(x({},a),{},{messages:x(x({},a.messages),n[r])})):u(a));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e=!0}}),[o,i,n]),(0,Mi.jsx)(aC.Provider,{value:s,children:r})}));function lC(){var e=sC();return t.useCallback((function(t){var n;return null!==(n=e.messages[t])&&void 0!==n?n:t}),[e])}function cC(e,t,n){return dC.apply(this,arguments)}function dC(){return(dC=Ai(Ti().mark((function e(t,n,r){var i;return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getSvg(n,{scale:"svg"===r?1:2,background:t.instanceState.exportBackground});case 2:if(i=e.sent){e.next=5;break}throw new Error("Could not construct SVG.");case 5:return e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pC(e,t){return fC.apply(this,arguments)}function fC(){return(fC=Ai(Ti().mark((function e(t,n){return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Blob,e.t1=Sa,e.next=4,cC(t,n,"svg");case 4:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.t4=[e.t3],e.t5={type:"text/plain"},e.abrupt("return",new e.t0(e.t4,e.t5));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hC(e,t,n){return vC.apply(this,arguments)}function vC(){return(vC=Ai(Ti().mark((function e(t,n,r){return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=_a,e.next=3,cC(t,n,r);case 3:return e.t1=e.sent,e.t2={type:r,quality:1,scale:1},e.next=7,(0,e.t0)(e.t1,e.t2);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gC(e){return mC.apply(this,arguments)}function mC(){return(mC=Ai(Ti().mark((function e(t){return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=navigator.clipboard,e.next=3,t();case 3:e.t1=e.sent,e.t0.writeText.call(e.t0,e.t1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var yC=(0,t.createContext)({});function bC(e){var n=e.children,r=ma(),i=N((0,t.useState)([]),2),o=i[0],a=i[1],s=(0,t.useCallback)((function(e){var t,n=null!==(t=e.id)&&void 0!==t?t:os();return a((function(t){return[].concat(M(t.filter((function(t){return t.id!==e.id}))),[x(x({},e),{},{id:n})])})),r.openMenus.add(n),n}),[r]),u=(0,t.useCallback)((function(e,t){return a((function(n){return n.map((function(n){return n.id===e?x(x({},n),t):n}))})),r.openMenus.add(e),e}),[r]),l=(0,t.useCallback)((function(e){return a((function(t){return t.filter((function(t){var n;return t.id!==e||(null===(n=t.onClose)||void 0===n||n.call(t),!1)}))})),r.openMenus.delete(e),e}),[r]),c=(0,t.useCallback)((function(){a((function(e){return e.forEach((function(e){var t;null===(t=e.onClose)||void 0===t||t.call(e),r.openMenus.delete(e.id)})),[]}))}),[r]);return(0,Mi.jsx)(yC.Provider,{value:{dialogs:o,addDialog:s,removeDialog:l,clearDialogs:c,updateDialog:u},children:n})}function wC(){var e=(0,t.useContext)(yC);if(!e)throw new Error("useDialogs must be used within a DialogsProvider");return e}function xC(){var e=ma(),n=(0,t.useRef)();return(0,t.useEffect)((function(){var t=window.document.createElement("input");function r(e){return i.apply(this,arguments)}function i(){return i=Ai(Ti().mark((function n(r){var i;return Ti().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((i=r.target.files)&&0!==i.length){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,Xa(e,Array.from(i),e.viewportPageBounds.center,!1);case 5:t.value="";case 6:case"end":return n.stop()}}),n)}))),i.apply(this,arguments)}return t.type="file",t.accept=za,t.multiple=!0,n.current=t,t.addEventListener("change",r),function(){n.current=void 0,t.removeEventListener("change",r)}}),[e]),(0,t.useCallback)((function(){var e;null===(e=n.current)||void 0===e||e.click()}),[n])}var kC=t.createContext({});function SC(e){var n=e.overrides,r=e.children,i=ma(),o=wC(),a=o.addDialog,s=o.clearDialogs,u=qP().clearToasts,l=xC(),c=function(){var e=ma(),n=(0,t.useRef)(null),r=(0,t.useRef)(null);return(0,t.useCallback)(function(){var t=Ai(Ti().mark((function t(){var i,o,a,s,u,l,c,d,p,f,h,v,g,m,y,b,w,x,k,S;return Ti().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p=function(){e.isSafari?(l(),document.execCommand("print",!1)):window.print()},d=function(e,t,n){try{i.innerHTML+='<div class="'.concat(s,'__item">\n        <div class="').concat(s,'__item__header">\n          ').concat(e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),'\n        </div>\n        <div class="').concat(s,'__item__main">\n          ').concat(n.outerHTML,'\n        </div>\n        <div class="').concat(s,"__item__footer ").concat(s,"__item__footer__").concat(t?"":"hide",'">\n          ').concat(null!==t&&void 0!==t?t:"","\n        </div>\n      </div>")}catch(gm){console.error(gm)}},i=document.createElement("div"),o=document.createElement("style"),(a=function(e,t){e&&(e.innerHTML=""),t&&document.head.contains(t)&&document.head.removeChild(t),e&&document.body.contains(e)&&document.body.removeChild(e)})(n.current,r.current),n.current=i,r.current=o,s="rs-print-surface-".concat(os()),i.className=s,u=!1,o.innerHTML="\n\t\t\t.".concat(s," {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\n\t\t\t.").concat(s," svg {\n\t\t\t\tmax-width: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\tdisplay: block;\n\t\t\t}\n\n\t\t\t@media print {\t\t\t\t  \n\t\t\t\thtml, body {\n\t\t\t\t\tmin-height: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tmargin: 0;\n\t\t\t\t}\n\n\t\t\t\tbody {\n\t\t\t\t\tposition: relative;\n\t\t\t\t}\n\n\t\t\t\tbody > * {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t.").concat(s," {\n\t\t\t\t\tdisplay: block !important;\n\t\t\t\t\tbackground: white;\n\t\t\t\t\tmin-height: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tmax-width: 100%;\n\t\t\t\t}\n\n\t\t\t\t.").concat(s,"__item {\n\t\t\t\t\tpadding: 10mm;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tmin-height: 100%;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\tpage-break-after: always;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\theight: 100%;\n\t\t\t\t}\n\n\t\t\t\t.").concat(s,"__item__main {\n\t\t\t\t\tflex: 1;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tmax-height: 100%;\n\t\t\t\t}\n\n\t\t\t\t.").concat(s,"__item__header {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t.").concat(s,"__item__footer {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t\ttext-align: right;\n\t\t\t\t}\n\n\t\t\t\t.").concat(s,"__item__footer__hide {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t").concat("","\n\t\t\t}\n\n\t\t"),l=function(){document.head.appendChild(o),document.body.appendChild(i)},c=function(){e.once("change-camera",(function(){a(i,o)}))},window.addEventListener("beforeprint",l),window.addEventListener("afterprint",c),f=e.pages,h=e.currentPageId,v=e.selectedIds,g={scale:1,background:!1,darkMode:!1,preserveAspectRatio:"xMidYMid meet"},!(e.selectedIds.length>0)){t.next=27;break}return t.next=23,e.getSvg(v,g);case 23:(m=t.sent)&&(y=f.find((function(e){return e.id===h})),d("tldraw \u2014 ".concat(null===y||void 0===y?void 0:y.name),null,m),p()),t.next=46;break;case 27:if(!u){t.next=41;break}b=0;case 29:if(!(b<f.length)){t.next=38;break}return w=f[b],t.next=33,e.getSvg(e.getSortedChildIds(w.id),g);case 33:(x=t.sent)&&d("tldraw \u2014 ".concat(w.name),"".concat(b,"/").concat(f.length),x);case 35:b++,t.next=29;break;case 38:p(),t.next=46;break;case 41:return k=e.currentPage,t.next=44,e.getSvg(e.getSortedChildIds(k.id),g);case 44:(S=t.sent)&&(d("tldraw \u2014 ".concat(k.name),null,S),p());case 46:window.removeEventListener("beforeprint",l),window.removeEventListener("afterprint",c);case 48:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),[e])}(),d=HP(),p=d.cut,f=d.copy,h=function(){var e=ma(),n=qP().addToast,r=lC();return(0,t.useCallback)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.selectedIds,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"svg";if(0===t.length&&(t=M(e.shapeIds)),0!==t.length)switch(i){case"svg":window.navigator.clipboard&&(window.navigator.clipboard.write?window.navigator.clipboard.write([new ClipboardItem({"text/plain":pC(e,t)})]):gC(Ai(Ti().mark((function n(){return Ti().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Sa,n.next=3,cC(e,t,i);case 3:return n.t1=n.sent,n.abrupt("return",(0,n.t0)(n.t1));case 5:case"end":return n.stop()}}),n)})))));break;case"jpeg":case"png":var o="jpeg"===i?"image/jpeg":"image/png";window.navigator.clipboard.write([new ClipboardItem(b({},o,hC(e,t,i).then((function(e){if(e){if(window.navigator.clipboard)return e;throw new Error("Copy not supported")}throw n({id:"copy-fail",icon:"warning-triangle",title:r("toast.error.copy-fail.title"),description:r("toast.error.copy-fail.desc")}),new Error("Copy not possible")}))))]);break;case"json":var a=e.getContent(t);if(window.navigator.clipboard){var s=JSON.stringify(a);window.navigator.clipboard.write?window.navigator.clipboard.write([new ClipboardItem({"text/plain":new Blob([s],{type:"text/plain"})})]):gC(Ai(Ti().mark((function e(){return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s);case 1:case"end":return e.stop()}}),e)}))))}break;default:throw new Error("Copy type ".concat(i," not supported."))}}),[e,n,r])}(),v=function(){var e=ma(),n=qP().addToast,r=lC();return(0,t.useCallback)(function(){var t=Ai(Ti().mark((function t(){var i,o,a,s,u,l,c,d,p,f=arguments;return Ti().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=f.length>0&&void 0!==f[0]?f[0]:e.selectedIds,a=f.length>1&&void 0!==f[1]?f[1]:"png",0===o.length&&(o=M(e.shapeIds)),0!==o.length){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,e.getSvg(o,{scale:"svg"===a?1:2,background:e.instanceState.exportBackground});case 7:if(s=t.sent){t.next=10;break}throw new Error("Could not construct SVG.");case 10:u=1===o.length?null===(i=e.getShapeById(o[0]))||void 0===i?void 0:i.id.replace(/:/,"_"):"shapes",t.t0=a,t.next="svg"===t.t0?14:"webp"===t.t0||"png"===t.t0?19:"json"===t.t0?29:34;break;case 14:return t.next=16,Ca(s);case 16:return Ma(t.sent,"".concat(u||"shapes",".svg")),t.abrupt("return");case 19:return t.next=21,_a(s,{type:a,quality:1,scale:1});case 21:if(l=t.sent){t.next=25;break}return n({id:"export-fail",title:r("toast.error.export-fail.title"),description:r("toast.error.export-fail.desc")}),t.abrupt("return");case 25:return Ma(c=URL.createObjectURL(l),"".concat(u||"shapes",".").concat(a)),URL.revokeObjectURL(c),t.abrupt("return");case 29:return d=e.getContent(o),Ma(p=URL.createObjectURL(new Blob([JSON.stringify(d,null,4)],{type:"application/json"})),"".concat(u||"shapes",".json")),URL.revokeObjectURL(p),t.abrupt("return");case 34:throw new Error("Export type ".concat(a," not supported."));case 35:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),[e,n,r])}(),g=t.useMemo((function(){var e=function(e){return Object.fromEntries(e.map((function(e){return[e.id,e]})))}([{id:"edit-link",label:"action.edit-link",icon:"link",readonlyOk:!1,onSelect:function(){i.mark("edit-link"),a({component:kP})}},{id:"insert-media",label:"action.insert-media",kbd:"$u",readonlyOk:!1,onSelect:function(){l()}},{id:"undo",label:"action.undo",icon:"undo",kbd:"$z",readonlyOk:!1,onSelect:function(){i.undo()}},{id:"redo",label:"action.redo",icon:"redo",kbd:"$!z",readonlyOk:!1,onSelect:function(){i.redo()}},{id:"export-as-svg",label:"action.export-as-svg",menuLabel:"action.export-as-svg.short",contextMenuLabel:"action.export-as-svg.short",readonlyOk:!0,onSelect:function(){v(i.selectedIds,"svg")}},{id:"export-as-png",label:"action.export-as-png",menuLabel:"action.export-as-png.short",contextMenuLabel:"action.export-as-png.short",readonlyOk:!0,onSelect:function(){v(i.selectedIds,"png")}},{id:"export-as-json",label:"action.export-as-json",menuLabel:"action.export-as-json.short",contextMenuLabel:"action.export-as-json.short",readonlyOk:!0,onSelect:function(){v(i.selectedIds,"json")}},{id:"copy-as-svg",label:"action.copy-as-svg",menuLabel:"action.copy-as-svg.short",contextMenuLabel:"action.copy-as-svg.short",kbd:"$!c",readonlyOk:!0,onSelect:function(){h(i.selectedIds,"svg")}},{id:"copy-as-png",label:"action.copy-as-png",menuLabel:"action.copy-as-png.short",contextMenuLabel:"action.copy-as-png.short",readonlyOk:!0,onSelect:function(){h(i.selectedIds,"png")}},{id:"copy-as-json",label:"action.copy-as-json",menuLabel:"action.copy-as-json.short",contextMenuLabel:"action.copy-as-json.short",readonlyOk:!0,onSelect:function(){h(i.selectedIds,"json")}},{id:"toggle-auto-size",label:"action.toggle-auto-size",readonlyOk:!1,onSelect:function(){i.mark(),i.updateShapes(i.selectedShapes.filter((function(e){return e&&"text"===e.type&&!1===e.props.autoSize})).map((function(e){return{id:e.id,type:e.type,props:x(x({},e.props),{},{w:8,autoSize:!0})}})))}},{id:"open-embed-link",label:"action.open-embed-link",readonlyOk:!0,onSelect:function(){var e=i.selectedIds,t="No embed shapes selected";if(1===e.length){var n=i.getShapeById(e[0]);n&&Tc.is(n)?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_blank";Bs.openWindow(e,t)}(n.props.url,"_blank"):console.error(t)}else console.error(t)}},{id:"convert-to-bookmark",label:"action.convert-to-bookmark",readonlyOk:!1,onSelect:function(){var e,t=[],n=[],r=y(i.selectedIds.map((function(e){return i.getShapeById(e)})));try{for(r.s();!(e=r.n()).done;){var o=e.value;if(o&&Tc.is(o)&&o.props.url){var a=new Di(o.x,o.y);a.rot(-o.rotation),a.add(new Di(o.props.w/2-Jo/2,o.props.h/2-ea/2)),a.rot(o.rotation),t.push({id:i.createShapeId(),type:"bookmark",rotation:o.rotation,x:a.x,y:a.y,props:{url:o.props.url,opacity:"1"}}),n.push(o.id)}}}catch(yM){r.e(yM)}finally{r.f()}i.mark("convert shapes to bookmark"),i.deleteShapes(n),i.createShapes(t)}},{id:"convert-to-embed",label:"action.convert-to-embed",readonlyOk:!1,onSelect:function(){var e,t=[],n=[],r=y(S(i.selectedIds.map((function(e){return i.getShapeById(e)}))));try{for(r.s();!(e=r.n()).done;){var o=e.value;if(yc.is(o)){var a=o.props.url,s=gs(o.props.url);if(s&&s.definition){var u=s.definition,l=u.width,c=u.height,d=u.doesResize,p=new Di(o.x,o.y);p.rot(-o.rotation),p.add(new Di(o.props.w/2-l/2,o.props.h/2-c/2)),p.rot(o.rotation),t.push({id:i.createShapeId(),type:"embed",x:p.x,y:p.y,rotation:o.rotation,props:{url:a,w:l,h:c,doesResize:d}}),n.push(o.id)}}}}catch(yM){r.e(yM)}finally{r.f()}i.mark("convert shapes to embed"),i.deleteShapes(n),i.createShapes(t)}},{id:"duplicate",kbd:"$d",label:"action.duplicate",icon:"duplicate",readonlyOk:!1,onSelect:function(){if("select"===i.currentToolId){var e=i.selectedIds,t=uo.Common(S(e.map((function(e){return i.getPageBoundsById(e)})))),n=i.canMoveCamera?{x:t.width+10,y:0}:{x:16/i.camera.z,y:16/i.camera.z};i.mark("duplicate shapes"),i.duplicateShapes(e,n)}}},{id:"ungroup",label:"action.ungroup",kbd:"$!g",icon:"ungroup",readonlyOk:!1,onSelect:function(){i.mark("ungroup"),i.ungroupShapes(i.selectedIds)}},{id:"group",label:"action.group",kbd:"$g",icon:"group",readonlyOk:!1,onSelect:function(){1===i.selectedShapes.length&&"group"===i.selectedShapes[0].type?(i.mark("ungroup"),i.ungroupShapes(i.selectedIds)):(i.mark("group"),i.groupShapes(i.selectedIds))}},{id:"align-left",label:"action.align-left",kbd:"?A",icon:"align-left",readonlyOk:!1,onSelect:function(){i.mark("align left"),i.alignShapes("left",i.selectedIds)}},{id:"align-center-horizontal",label:"action.align-center-horizontal",contextMenuLabel:"action.align-center-horizontal.short",kbd:"?H",icon:"align-center-horizontal",readonlyOk:!1,onSelect:function(){i.mark("align center horizontal"),i.alignShapes("center-horizontal",i.selectedIds)}},{id:"align-right",label:"action.align-right",kbd:"?D",icon:"align-right",readonlyOk:!1,onSelect:function(){i.mark("align right"),i.alignShapes("right",i.selectedIds)}},{id:"align-center-vertical",label:"action.align-center-vertical",contextMenuLabel:"action.align-center-vertical.short",kbd:"?V",icon:"align-center-vertical",readonlyOk:!1,onSelect:function(){i.mark("align center vertical"),i.alignShapes("center-vertical",i.selectedIds)}},{id:"align-top",label:"action.align-top",icon:"align-top",kbd:"?W",readonlyOk:!1,onSelect:function(){i.mark("align top"),i.alignShapes("top",i.selectedIds)}},{id:"align-bottom",label:"action.align-bottom",icon:"align-bottom",kbd:"?S",readonlyOk:!1,onSelect:function(){i.mark("align bottom"),i.alignShapes("bottom",i.selectedIds)}},{id:"distribute-horizontal",label:"action.distribute-horizontal",contextMenuLabel:"action.distribute-horizontal.short",icon:"distribute-horizontal",readonlyOk:!1,onSelect:function(){i.mark("distribute horizontal"),i.distributeShapes("horizontal",i.selectedIds)}},{id:"distribute-vertical",label:"action.distribute-vertical",contextMenuLabel:"action.distribute-vertical.short",icon:"distribute-vertical",readonlyOk:!1,onSelect:function(){i.mark("distribute vertical"),i.distributeShapes("vertical",i.selectedIds)}},{id:"stretch-horizontal",label:"action.stretch-horizontal",contextMenuLabel:"action.stretch-horizontal.short",icon:"stretch-horizontal",readonlyOk:!1,onSelect:function(){i.mark("stretch horizontal"),i.stretchShapes("horizontal",i.selectedIds)}},{id:"stretch-vertical",label:"action.stretch-vertical",contextMenuLabel:"action.stretch-vertical.short",icon:"stretch-vertical",readonlyOk:!1,onSelect:function(){i.mark("stretch vertical"),i.stretchShapes("vertical",i.selectedIds)}},{id:"flip-horizontal",label:"action.flip-horizontal",contextMenuLabel:"action.flip-horizontal.short",kbd:"!h",readonlyOk:!1,onSelect:function(){i.mark("flip horizontal"),i.flipShapes("horizontal",i.selectedIds)}},{id:"flip-vertical",label:"action.flip-vertical",contextMenuLabel:"action.flip-vertical.short",kbd:"!v",readonlyOk:!1,onSelect:function(){i.mark("flip vertical"),i.flipShapes("vertical",i.selectedIds)}},{id:"pack",label:"action.pack",icon:"pack",readonlyOk:!1,onSelect:function(){i.mark("pack"),i.packShapes(i.selectedIds)}},{id:"stack-vertical",label:"action.stack-vertical",contextMenuLabel:"action.stack-vertical.short",icon:"stack-vertical",readonlyOk:!1,onSelect:function(){i.mark("stack-vertical"),i.stackShapes("vertical",i.selectedIds)}},{id:"stack-horizontal",label:"action.stack-horizontal",contextMenuLabel:"action.stack-horizontal.short",icon:"stack-horizontal",readonlyOk:!1,onSelect:function(){i.mark("stack-horizontal"),i.stackShapes("horizontal",i.selectedIds)}},{id:"bring-to-front",label:"action.bring-to-front",kbd:"]",icon:"bring-to-front",readonlyOk:!1,onSelect:function(){i.mark("bring to front"),i.bringToFront()}},{id:"bring-forward",label:"action.bring-forward",icon:"bring-forward",kbd:"?]",readonlyOk:!1,onSelect:function(){i.mark("bring forward"),i.bringForward()}},{id:"send-backward",label:"action.send-backward",icon:"send-backward",kbd:"?[",readonlyOk:!1,onSelect:function(){i.mark("send backward"),i.sendBackward()}},{id:"send-to-back",label:"action.send-to-back",icon:"send-to-back",kbd:"[",readonlyOk:!1,onSelect:function(){i.mark("send to back"),i.sendToBack()}},{id:"cut",label:"action.cut",kbd:"$x",readonlyOk:!1,onSelect:function(){i.mark("cut"),p()}},{id:"copy",label:"action.copy",kbd:"$c",readonlyOk:!0,onSelect:function(){f()}},{id:"paste",label:"action.paste",kbd:"$v",readonlyOk:!1,onSelect:function(){}},{id:"select-all",label:"action.select-all",kbd:"$a",readonlyOk:!0,onSelect:function(){"select"!==i.currentToolId&&(i.cancel(),i.setSelectedTool("select")),i.mark("select all kbd"),i.selectAll()}},{id:"select-none",label:"action.select-none",readonlyOk:!0,onSelect:function(){i.mark("select none"),i.selectNone()}},{id:"delete",label:"action.delete",kbd:"\u232b",icon:"trash",readonlyOk:!1,onSelect:function(){"select"===i.currentToolId&&(i.mark("delete"),i.deleteShapes())}},{id:"rotate-cw",label:"action.rotate-cw",icon:"rotate-cw",readonlyOk:!1,onSelect:function(){if(0!==i.selectedIds.length){i.mark("rotate-cw");var e=i.selectionRotation%(Li/2),t=Wi(e,0)||Wi(e,Li/2);i.rotateShapesBy(i.selectedIds,Li/2-(t?0:e))}}},{id:"rotate-ccw",label:"action.rotate-ccw",icon:"rotate-ccw",readonlyOk:!1,onSelect:function(){if(0!==i.selectedIds.length){i.mark("rotate-ccw");var e=i.selectionRotation%(Li/2),t=Wi(e,0);i.rotateShapesBy(i.selectedIds,t?-Li/2:-e)}}},{id:"zoom-in",label:"action.zoom-in",kbd:"$=",readonlyOk:!0,onSelect:function(){i.zoomIn(i.viewportScreenCenter,{duration:Uo})}},{id:"zoom-out",label:"action.zoom-out",kbd:"$-",readonlyOk:!0,onSelect:function(){i.zoomOut(i.viewportScreenCenter,{duration:Uo})}},{id:"zoom-to-100",label:"action.zoom-to-100",icon:"reset-zoom",kbd:"!0",readonlyOk:!0,onSelect:function(){i.resetZoom(i.viewportScreenCenter,{duration:Uo})}},{id:"zoom-to-fit",label:"action.zoom-to-fit",kbd:"!1",readonlyOk:!0,onSelect:function(){i.zoomToFit({duration:Uo})}},{id:"zoom-to-selection",label:"action.zoom-to-selection",kbd:"!2",readonlyOk:!0,onSelect:function(){i.zoomToSelection({duration:Uo})}},{id:"toggle-snap-mode",label:"action.toggle-snap-mode",menuLabel:"action.toggle-snap-mode.menu",readonlyOk:!1,onSelect:function(){i.updateUserDocumentSettings({isSnapMode:!i.userDocumentSettings.isSnapMode},!0)},checkbox:!0},{id:"toggle-dark-mode",label:"action.toggle-dark-mode",menuLabel:"action.toggle-dark-mode.menu",kbd:"$/",readonlyOk:!0,onSelect:function(){i.updateUserDocumentSettings({isDarkMode:!i.userDocumentSettings.isDarkMode},!0)},checkbox:!0},{id:"toggle-transparent",label:"action.toggle-transparent",menuLabel:"action.toggle-transparent.menu",contextMenuLabel:"action.toggle-transparent.context-menu",readonlyOk:!0,onSelect:function(){i.updateInstanceState({exportBackground:!i.instanceState.exportBackground},!0)},checkbox:!0},{id:"toggle-tool-lock",label:"action.toggle-tool-lock",menuLabel:"action.toggle-tool-lock.menu",readonlyOk:!1,kbd:"q",onSelect:function(){i.updateInstanceState({isToolLocked:!i.instanceState.isToolLocked},!0)},checkbox:!0},{id:"toggle-focus-mode",label:"action.toggle-focus-mode",menuLabel:"action.toggle-focus-mode.menu",readonlyOk:!0,kbd:"$.",checkbox:!0,onSelect:function(){requestAnimationFrame((function(){i.batch((function(){s(),u(),i.updateInstanceState({isFocusMode:!i.instanceState.isFocusMode},!0)}))}))}},{id:"toggle-grid",label:"action.toggle-grid",menuLabel:"action.toggle-grid.menu",readonlyOk:!0,kbd:"$'",onSelect:function(){i.updateUserDocumentSettings({isGridMode:!i.userDocumentSettings.isGridMode},!0)},checkbox:!0},{id:"toggle-debug-mode",label:"action.toggle-debug-mode",menuLabel:"action.toggle-debug-mode.menu",readonlyOk:!0,onSelect:function(){i.updateInstanceState({isDebugMode:!i.instanceState.isDebugMode},!0)},checkbox:!0},{id:"print",label:"action.print",kbd:"$p",readonlyOk:!0,onSelect:function(){c()}},{id:"nudge-left",kbd:"left,shift+left",label:"action.nudge-left",readonlyOk:!1,onSelect:function(){i.mark("nudge left"),i.nudgeShapes(i.selectedIds,"left",i.inputs.shiftKey)}},{id:"nudge-up",kbd:"up,shift+up",label:"action.nudge-up",readonlyOk:!1,onSelect:function(){i.mark("nudge up"),i.nudgeShapes(i.selectedIds,"up",i.inputs.shiftKey)}},{id:"nudge-right",kbd:"right,shift+right",label:"action.nudge-right",readonlyOk:!1,onSelect:function(){i.mark("nudge right"),i.nudgeShapes(i.selectedIds,"right",i.inputs.shiftKey)}},{id:"nudge-down",kbd:"down,shift+down",label:"action.nudge-down",readonlyOk:!1,onSelect:function(){i.mark("nudge down"),i.nudgeShapes(i.selectedIds,"down",i.inputs.shiftKey)}},{id:"exit-pen-mode",label:"action.exit-pen-mode",icon:"cross-2",readonlyOk:!0,onSelect:function(){i.setPenMode(!1)}},{id:"back-to-content",label:"action.back-to-content",icon:"arrow-left",readonlyOk:!0,onSelect:function(){var e,t=null!==(e=i.selectedPageBounds)&&void 0!==e?e:i.allShapesCommonBounds;t&&i.zoomToBounds(t.minX,t.minY,t.width,t.height,Math.min(1,i.camera.z),{duration:220})}}]);return n?n(i,e,void 0):e}),[n,i,a,l,v,h,p,f,s,u,c]);return(0,Mi.jsx)(kC.Provider,{value:g,children:r})}function _C(){var e=t.useContext(kC);if(!e)throw new Error("useTools must be used within a ToolProvider");return e}var PC=[0,380,420,460,580,640,840,1023],CC=t.createContext(0);function EC(e){var t=e.children,n=ma(),r=va("breakpoint",(function(){for(var e=n.viewportScreenBounds.width,t=PC,r=0;r<t.length-1;r++)if(e>t[r]&&e<=t[r+1])return r;return t.length}),[n]);return(0,Mi.jsx)(CC.Provider,{value:r,children:t})}function IC(){var e=(0,t.useContext)(CC),n=new URL(window.location.href).searchParams.get("layout");return"desktop"===n?e=7:"mobile"===n&&(e=1),e}function MC(){var e=ma();return va("hasLinkShapeSelected",(function(){var t=e.selectedShapes;return 1===t.length&&"url"in t[0].props&&"embed"!==t[0].type}),[e])}var TC=t.createContext({}),jC=fa((function(e){var n=e.overrides,r=e.children,i=ma(),o=_C(),a=i.selectedIds.length,s=a>0,u=a>1,l=a>2,c=Ik(),d=Mk(),p=Tk(),f=MC(),h=IC(),v=1===i.camera.z,g=(0,t.useMemo)((function(){var e=[Ck(o["align-left"],{disabled:!u}),Ck(o["align-center-horizontal"],{disabled:!u}),Ck(o["align-right"],{disabled:!u}),Ck(o["stretch-horizontal"],{disabled:!u}),Ck(o["align-top"],{disabled:!u}),Ck(o["align-center-vertical"],{disabled:!u}),Ck(o["align-bottom"],{disabled:!u}),Ck(o["stretch-vertical"],{disabled:!u}),Ck(o["distribute-horizontal"],{disabled:!l}),Ck(o["distribute-vertical"],{disabled:!l}),Ck(o["stack-horizontal"],{disabled:!c}),Ck(o["stack-vertical"],{disabled:!c}),Ck(o["send-to-back"],{disabled:!s}),Ck(o["send-backward"],{disabled:!s}),Ck(o["bring-forward"],{disabled:!s}),Ck(o["bring-to-front"],{disabled:!s}),h<5?Ck(o["zoom-to-100"],{disabled:!!v}):Ck(o["rotate-ccw"],{disabled:!s}),Ck(o["rotate-cw"],{disabled:!s}),Ck(o["edit-link"],{disabled:!f}),d?Ck(o.group,{disabled:!u}):p?Ck(o.ungroup):Ck(o.group,{disabled:!u})];return n?n(i,e,{actions:o,oneSelected:s,twoSelected:u,threeSelected:l}):e}),[i,v,d,n,o,s,u,l,c,p,f,h]);return(0,Mi.jsx)(TC.Provider,{value:g,children:r})}));function AC(){var e=ma();return va("useCanRedo",(function(){return e.canRedo}),[e])}function OC(){var e=ma();return va("useCanUndo",(function(){return e.canUndo}),[e])}function zC(){var e=ma();return va("showAutoSizeToggle",(function(){var t=e.selectedShapes;return 1===t.length&&"text"===t[0].type&&!1===t[0].props.autoSize}),[e])}var DC=t.createContext({}),NC="undefined"!==typeof window&&"navigator"in window&&Boolean(navigator.clipboard)&&Boolean(navigator.clipboard.read),RC=fa((function(e){var n,r=e.overrides,i=e.children,o=ma(),a=_C(),s=zC(),u=function(){var e=ma();return va("onlyFlippableShape",(function(){var t=e.selectedShapes;return 1===t.length&&t.every((function(e){return"group"===e.type||function(e){return"arrow"===e.type||"line"===e.type||"draw"===e.type}(e)}))}),[e])}(),l=o.selectedIds.length,c=l>0,d=va("oneEmbedSelected",(function(){return 1===o.selectedIds.length&&o.selectedIds.some((function(e){var t=o.getShapeById(e);return t&&Tc.is(t)&&t.props.url}))}),[]),p=va("oneEmbeddableBookmarkSelected",(function(){return 1===o.selectedIds.length&&o.selectedIds.some((function(e){var t=o.getShapeById(e);return t&&yc.is(t)&&gs(t.props.url)}))}),[]),f=l>1,h=l>2,v=Ik(),g=va("atLeastOneShapeOnPage",(function(){return o.shapeIds.size>0}),[]),m=va("isTransparentBg",(function(){return o.instanceState.exportBackground}),[]),y=Mk(),b=Tk(),w=Boolean(null===(n=window.navigator.clipboard)||void 0===n?void 0:n.write),x=MC(),k=(0,t.useMemo)((function(){var e=kk([Sk("selection",d&&Ck(a["open-embed-link"]),d&&Ck(a["convert-to-bookmark"]),p&&Ck(a["convert-to-embed"]),s&&Ck(a["toggle-auto-size"]),x&&Ck(a["edit-link"]),c&&Ck(a.duplicate),y&&Ck(a.group),b&&Ck(a.ungroup)),Sk("modify",(f||u)&&_k("arrange","context-menu.arrange",f&&Sk("align",Ck(a["align-left"]),Ck(a["align-center-horizontal"]),Ck(a["align-right"]),Ck(a["align-top"]),Ck(a["align-center-vertical"]),Ck(a["align-bottom"])),h&&Sk("distribute",Ck(a["distribute-horizontal"]),Ck(a["distribute-vertical"])),f&&Sk("stretch",Ck(a["stretch-horizontal"]),Ck(a["stretch-vertical"])),u&&Sk("flip",Ck(a["flip-horizontal"]),Ck(a["flip-vertical"])),f&&Sk("order",Ck(a.pack,{disabled:!f}),v&&Ck(a["stack-vertical"]),v&&Ck(a["stack-horizontal"]))),c&&_k("reorder","context-menu.reorder",Sk("reorder",Ck(a["bring-to-front"]),Ck(a["bring-forward"]),Ck(a["send-backward"]),Ck(a["send-to-back"]))),c&&Pk("MOVE_TO_PAGE_MENU",{readonlyOk:!1})),Sk("clipboard-group",c&&Ck(a.cut),c&&Ck(a.copy),NC&&Pk("MENU_PASTE",{readonlyOk:!1})),g&&Sk("conversions",_k("copy-as","context-menu.copy-as",Sk("copy-as-group",Ck(a["copy-as-svg"]),w&&Ck(a["copy-as-png"]),Ck(a["copy-as-json"])),Sk("export-bg",Ck(a["toggle-transparent"],{checked:!m}))),_k("export-as","context-menu.export-as",Sk("export-as-group",Ck(a["export-as-svg"]),Ck(a["export-as-png"]),Ck(a["export-as-json"])),Sk("export-bg,",Ck(a["toggle-transparent"],{checked:!m})))),g&&Sk("set-selection-group",Ck(a["select-all"]),c&&Ck(a["select-none"])),c&&Sk("delete-group",Ck(a.delete))]);return r&&(e=r(o,e,{actions:a,oneSelected:c,twoSelected:f,threeSelected:h,showAutoSizeToggle:s,showUngroup:b,onlyFlippableShapeSelected:u})),e}),[o,r,a,c,f,h,s,u,g,v,y,b,w,x,d,p,m]);return(0,Mi.jsx)(DC.Provider,{value:k,children:i})}));function LC(){var e=t.useContext(DC);if(!e)throw new Error("useContextMenuSchema must be used inside of a ContextMenuSchemaProvider.");return e}var BC=function(){var e=lC(),n=pE(),r=function(){var e=t.useContext(bE);if(!e)throw new Error("Shortcuts must be used inside of a ShortcutsProvider.");return e}();return(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsxs)(CS,{className:"tlui-shortcuts-dialog__header",children:[(0,Mi.jsx)(ES,{children:e("shortcuts-dialog.title")}),(0,Mi.jsx)(IS,{})]}),(0,Mi.jsx)(MS,{className:"tlui-shortcuts-dialog__body",children:r.map((function t(r){if(n&&!r.readonlyOk)return null;switch(r.type){case"group":return(0,Mi.jsxs)("div",{className:"tlui-shortcuts-dialog__group",children:[(0,Mi.jsx)("h2",{className:"tlui-shortcuts-dialog__group__title",children:e(r.id)}),(0,Mi.jsx)("div",{className:"tlui-shortcuts-dialog__group__content",children:r.children.filter((function(e){return"item"===e.type&&e.actionItem.kbd})).map(t)})]},r.id);case"item":var i=r.actionItem,o=i.id,a=i.label,s=i.shortcutsLabel,u=i.kbd;return(0,Mi.jsxs)("div",{className:"tlui-shortcuts-dialog__key-pair",children:[(0,Mi.jsx)("div",{className:"tlui-shortcuts-dialog__key-pair__key",children:e(null!==s&&void 0!==s?s:a)}),(0,Mi.jsx)("div",{className:"tlui-shortcuts-dialog__key-pair__value",children:(0,Mi.jsx)(SS,{children:u})})]},o)}}))}),(0,Mi.jsx)("div",{className:"tlui-dialog__scrim"})]})},FC=t.createContext({}),UC=fa((function(e){var n=e.overrides,r=e.children,i=ma(),o=_C(),a=i.selectedIds.length,s=a>0,u=a>1,l=a>2,c=nC(),d=c.languages,p=c.currentLanguage,f=wC().addDialog,h=(0,t.useMemo)((function(){var e=S([Sk("top",Pk("LANGUAGE_MENU",{readonlyOk:!0}),Ck({id:"keyboard-shortcuts",label:"help-menu.keyboard-shortcuts",readonlyOk:!0,onSelect:function(){f({component:BC})}}))]);return n?n(i,e,{actions:o,currentLanguage:p,languages:d,oneSelected:s,twoSelected:u,threeSelected:l}):e}),[i,n,d,o,s,u,l,p,f]);return(0,Mi.jsx)(FC.Provider,{value:h,children:r})}));var KC="undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function VC(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on".concat(t),(function(){n(window.event)}))}function WC(e,t){for(var n=t.slice(0,t.length-1),r=0;r<n.length;r++)n[r]=e[n[r].toLowerCase()];return n}function HC(e){"string"!==typeof e&&(e="");for(var t=(e=e.replace(/\s/g,"")).split(","),n=t.lastIndexOf("");n>=0;)t[n-1]+=",",t.splice(n,1),n=t.lastIndexOf("");return t}for(var YC={backspace:8,"\u232b":8,tab:9,clear:12,enter:13,"\u21a9":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21ea":20,",":188,".":190,"/":191,"`":192,"-":KC?173:189,"=":KC?61:187,";":KC?59:186,"'":222,"[":219,"]":221,"\\":220},XC={"\u21e7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},qC={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},$C={16:!1,18:!1,17:!1,91:!1},GC={},QC=1;QC<20;QC++)YC["f".concat(QC)]=111+QC;var ZC=[],JC=!1,eE="all",tE=[],nE=function(e){return YC[e.toLowerCase()]||XC[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)};function rE(e){eE=e||"all"}function iE(){return eE||"all"}var oE=function(e){var t=e.key,n=e.scope,r=e.method,i=e.splitKey,o=void 0===i?"+":i;HC(t).forEach((function(e){var t=e.split(o),i=t.length,a=t[i-1],s="*"===a?"*":nE(a);if(GC[s]){n||(n=iE());var u=i>1?WC(XC,t):[];GC[s]=GC[s].filter((function(e){return!((!r||e.method===r)&&e.scope===n&&function(e,t){for(var n=e.length>=t.length?e:t,r=e.length>=t.length?t:e,i=!0,o=0;o<n.length;o++)-1===r.indexOf(n[o])&&(i=!1);return i}(e.mods,u))}))}}))};function aE(e,t,n,r){var i;if(t.element===r&&(t.scope===n||"all"===t.scope)){for(var o in i=t.mods.length>0,$C)Object.prototype.hasOwnProperty.call($C,o)&&(!$C[o]&&t.mods.indexOf(+o)>-1||$C[o]&&-1===t.mods.indexOf(+o))&&(i=!1);(0!==t.mods.length||$C[16]||$C[18]||$C[17]||$C[91])&&!i&&"*"!==t.shortcut||!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function sE(e,t){var n=GC["*"],r=e.keyCode||e.which||e.charCode;if(uE.filter.call(this,e)){if(93!==r&&224!==r||(r=91),-1===ZC.indexOf(r)&&229!==r&&ZC.push(r),["ctrlKey","altKey","shiftKey","metaKey"].forEach((function(t){var n=qC[t];e[t]&&-1===ZC.indexOf(n)?ZC.push(n):!e[t]&&ZC.indexOf(n)>-1?ZC.splice(ZC.indexOf(n),1):"metaKey"===t&&e[t]&&3===ZC.length&&(e.ctrlKey||e.shiftKey||e.altKey||(ZC=ZC.slice(ZC.indexOf(n))))})),r in $C){for(var i in $C[r]=!0,XC)XC[i]===r&&(uE[i]=!0);if(!n)return}for(var o in $C)Object.prototype.hasOwnProperty.call($C,o)&&($C[o]=e[qC[o]]);e.getModifierState&&(!e.altKey||e.ctrlKey)&&e.getModifierState("AltGraph")&&(-1===ZC.indexOf(17)&&ZC.push(17),-1===ZC.indexOf(18)&&ZC.push(18),$C[17]=!0,$C[18]=!0);var a=iE();if(n)for(var s=0;s<n.length;s++)n[s].scope===a&&("keydown"===e.type&&n[s].keydown||"keyup"===e.type&&n[s].keyup)&&aE(e,n[s],a,t);if(r in GC)for(var u=0;u<GC[r].length;u++)if(("keydown"===e.type&&GC[r][u].keydown||"keyup"===e.type&&GC[r][u].keyup)&&GC[r][u].key){for(var l=GC[r][u],c=l.splitKey,d=l.key.split(c),p=[],f=0;f<d.length;f++)p.push(nE(d[f]));p.sort().join("")===ZC.sort().join("")&&aE(e,l,a,t)}}}function uE(e,t,n){ZC=[];var r=HC(e),i=[],o="all",a=document,s=0,u=!1,l=!0,c="+",d=!1;for(void 0===n&&"function"===typeof t&&(n=t),"[object Object]"===Object.prototype.toString.call(t)&&(t.scope&&(o=t.scope),t.element&&(a=t.element),t.keyup&&(u=t.keyup),void 0!==t.keydown&&(l=t.keydown),void 0!==t.capture&&(d=t.capture),"string"===typeof t.splitKey&&(c=t.splitKey)),"string"===typeof t&&(o=t);s<r.length;s++)i=[],(e=r[s].split(c)).length>1&&(i=WC(XC,e)),(e="*"===(e=e[e.length-1])?"*":nE(e))in GC||(GC[e]=[]),GC[e].push({keyup:u,keydown:l,scope:o,mods:i,shortcut:r[s],method:n,key:r[s],splitKey:c,element:a});"undefined"!==typeof a&&!function(e){return tE.indexOf(e)>-1}(a)&&window&&(tE.push(a),VC(a,"keydown",(function(e){sE(e,a)}),d),JC||(JC=!0,VC(window,"focus",(function(){ZC=[]}),d)),VC(a,"keyup",(function(e){sE(e,a),function(e){var t=e.keyCode||e.which||e.charCode,n=ZC.indexOf(t);if(n>=0&&ZC.splice(n,1),e.key&&"meta"===e.key.toLowerCase()&&ZC.splice(0,ZC.length),93!==t&&224!==t||(t=91),t in $C)for(var r in $C[t]=!1,XC)XC[r]===t&&(uE[r]=!1)}(e)}),d))}var lE={getPressedKeyString:function(){return ZC.map((function(e){return function(e){return Object.keys(YC).find((function(t){return YC[t]===e}))}(e)||function(e){return Object.keys(XC).find((function(t){return XC[t]===e}))}(e)||String.fromCharCode(e)}))},setScope:rE,getScope:iE,deleteScope:function(e,t){var n,r;for(var i in e||(e=iE()),GC)if(Object.prototype.hasOwnProperty.call(GC,i))for(n=GC[i],r=0;r<n.length;)n[r].scope===e?n.splice(r,1):r++;iE()===e&&rE(t||"all")},getPressedKeyCodes:function(){return ZC.slice(0)},isPressed:function(e){return"string"===typeof e&&(e=nE(e)),-1!==ZC.indexOf(e)},filter:function(e){var t=e.target||e.srcElement,n=t.tagName,r=!0;return!t.isContentEditable&&("INPUT"!==n&&"TEXTAREA"!==n&&"SELECT"!==n||t.readOnly)||(r=!1),r},trigger:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";Object.keys(GC).forEach((function(n){GC[n].filter((function(n){return n.scope===t&&n.shortcut===e})).forEach((function(e){e&&e.method&&e.method()}))}))},unbind:function(e){if("undefined"===typeof e)Object.keys(GC).forEach((function(e){return delete GC[e]}));else if(Array.isArray(e))e.forEach((function(e){e.key&&oE(e)}));else if("object"===typeof e)e.key&&oE(e);else if("string"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n[0],o=n[1];"function"===typeof i&&(o=i,i=""),oE({key:e,scope:i,method:o,splitKey:"+"})}},keyMap:YC,modifier:XC,modifierMap:qC};for(var cE in lE)Object.prototype.hasOwnProperty.call(lE,cE)&&(uE[cE]=lE[cE]);if("undefined"!==typeof window){var dE=window.hotkeys;uE.noConflict=function(e){return e&&window.hotkeys===uE&&(window.hotkeys=dE),uE},window.hotkeys=uE}function pE(){var e=ma();return va("isReadOnlyMode",(function(){return e.isReadOnly}),[e])}var fE=fa((function(e){var n=e.onClose,r=ma(),i=lC(),o=oC(),a=N((0,t.useState)(null),2),s=a[0],u=a[1],l=N((0,t.useState)(""),2),c=l[0],d=l[1],p=N((0,t.useState)(null),2),f=p[0],h=p[1],v=N((0,t.useState)(!1),2),g=v[0],m=v[1],y=(0,t.useRef)(-1);return(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsxs)(CS,{children:[(0,Mi.jsx)(ES,{children:s?"".concat(i("embed-dialog.title")," \u2014 ").concat(s.title):i("embed-dialog.title")}),(0,Mi.jsx)(IS,{})]}),s?(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsx)(MS,{className:"tlui-embed-dialog__enter",children:(0,Mi.jsxs)("div",{className:"tlui-embed-dialog",children:[(0,Mi.jsx)(T_,{className:"tlui-embed-dialog__input",label:"embed-dialog.url",placeholder:"http://example.com",autofocus:!0,onValueChange:function(e){d(e);var t=gs(e);h(t&&t.definition.type===s.type?t:null),m(!1),clearTimeout(y.current),y.current=setTimeout((function(){return m(!t)}),320)}}),""===c?(0,Mi.jsxs)("div",{className:"tlui-embed-dialog__instruction",children:[(0,Mi.jsx)("span",{children:i("embed-dialog.instruction")})," ",s.instructionLink&&(0,Mi.jsxs)("a",{target:"_blank",rel:"noopener noreferrer",href:s.instructionLink,className:"tlui-embed-dialog__instruction__link",children:["Learn more.",(0,Mi.jsx)(yS,{icon:"external-link",small:!0})]})]}):(0,Mi.jsx)("div",{className:"tlui-embed-dialog__warning",children:g?i("embed-dialog.invalid-url"):"\xa0"})]})}),(0,Mi.jsxs)(TS,{className:"tlui-dialog__footer__actions",children:[(0,Mi.jsx)(PS,{onClick:function(){u(null),h(null),d("")},label:"embed-dialog.back"}),(0,Mi.jsx)("div",{className:"tlui-spacer"}),(0,Mi.jsx)(PS,{label:"embed-dialog.cancel",onClick:n}),(0,Mi.jsx)(PS,{type:"primary",disabled:!f,label:"embed-dialog.create",onClick:function(){f&&($a(r,c,r.viewportPageCenter,{width:f.definition.width,height:f.definition.height,doesResize:f.definition.doesResize}),n())}})]})]}):(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsx)(MS,{className:"tlui-embed-dialog__list",children:Gr.map((function(e){return(0,Mi.jsxs)("button",{className:"tlui-embed-dialog__item",onClick:function(){return u(e)},children:[(0,Mi.jsx)("div",{className:"tlui-embed-dialog__item__image",children:(0,Mi.jsx)("div",{className:"tlui-embed-dialog__item__image__img",style:{backgroundImage:"url(".concat(o.embedIcons[e.type],")")}})}),(0,Mi.jsx)("div",{className:"tlui-embed-dialog__item__title",children:e.title})]},e.type)}))}),(0,Mi.jsx)("div",{className:"tlui-dialog__scrim"})]})]})})),hE=t.createContext({});function vE(e){var n=e.overrides,r=e.children,i=ma(),o=wC().addDialog,a=xC(),s=t.useMemo((function(){var e=function(e){return Object.fromEntries(e.map((function(e){return[e.id,e]})))}([{id:"select",label:"tool.select",icon:"tool-pointer",kbd:"v",readonlyOk:!0,onSelect:function(){i.setSelectedTool("select")}},{id:"hand",label:"tool.hand",icon:"tool-hand",kbd:"h",readonlyOk:!0,onSelect:function(){i.setSelectedTool("hand")}},{id:"eraser",label:"tool.eraser",icon:"tool-eraser",kbd:"e",readonlyOk:!0,onSelect:function(){i.setSelectedTool("eraser")}},{id:"draw",label:"tool.draw",readonlyOk:!0,icon:"tool-pencil",kbd:"d,b,x",onSelect:function(){i.setSelectedTool("draw")}}].concat(M(M(zt).map((function(e){return{id:e,label:"tool.".concat(e),readonlyOk:!0,meta:{geo:e},kbd:"rectangle"===e?"r":"ellipse"===e?"o":void 0,icon:"geo-"+e,onSelect:function(){i.batch((function(){i.updateInstanceState({propsForNextShape:x(x({},i.instanceState.propsForNextShape),{},{geo:e})},!0),i.setSelectedTool("geo")}))}}}))),[{id:"arrow",label:"tool.arrow",readonlyOk:!0,icon:"tool-arrow",kbd:"a",onSelect:function(){i.setSelectedTool("arrow")}},{id:"line",label:"tool.line",readonlyOk:!0,icon:"tool-line",kbd:"l",onSelect:function(){i.setSelectedTool("line")}},{id:"frame",label:"tool.frame",readonlyOk:!0,icon:"tool-frame",kbd:"f",onSelect:function(){i.setSelectedTool("frame")}},{id:"text",label:"tool.text",readonlyOk:!0,icon:"tool-text",kbd:"t",onSelect:function(){i.setSelectedTool("text")}},{id:"asset",label:"tool.asset",readonlyOk:!0,icon:"tool-media",kbd:"$u",onSelect:function(){a()}},{id:"note",label:"tool.note",readonlyOk:!0,icon:"tool-note",kbd:"n",onSelect:function(){i.setSelectedTool("note")}},{id:"embed",label:"tool.embed",readonlyOk:!0,icon:"tool-embed",onSelect:function(){o({component:fE})}}]));return n?n(i,e,{insertMedia:a}):e}),[i,n,a,o]);return(0,Mi.jsx)(hE.Provider,{value:s,children:r})}function gE(){var e=t.useContext(hE);if(!e)throw new Error("useTools must be used within a ToolProvider");return e}var mE=["copy","cut","paste","asset"];function yE(e){var t=e.split("");return 1===t.length?t[0]:"!"===t[0]?"shift+".concat(t[1]):"?"===t[0]?"alt+".concat(t[1]):"$"===t[0]?"!"===t[1]?"cmd+shift+".concat(t[2],",ctrl+shift+").concat(t[2]):"?"===t[1]?"cmd+\u2325+".concat(t[2],",ctrl+alt+").concat(t[2]):"cmd+".concat(t[1],",ctrl+").concat(t[1]):e}var bE=t.createContext({}),wE=fa((function(e){var n=e.overrides,r=e.children,i=ma(),o=gE(),a=_C(),s=(0,t.useMemo)((function(){var e=S([Sk("shortcuts-dialog.tools",Ck(a["toggle-tool-lock"]),Ck(o.select),Ck(o.draw),Ck(o.eraser),Ck(o.hand),Ck(o.rectangle),Ck(o.ellipse),Ck(o.arrow),Ck(o.line),Ck(o.text),Ck(o.frame),Ck(o.note)),Sk("shortcuts-dialog.file",Ck(a["insert-media"]),Ck(a.print)),Sk("shortcuts-dialog.preferences",Ck(a["toggle-dark-mode"]),Ck(a["toggle-focus-mode"]),Ck(a["toggle-grid"])),Sk("shortcuts-dialog.edit",Ck(a.undo),Ck(a.redo),Ck(a.cut),Ck(a.copy),Ck(a.paste),Ck(a["select-all"]),Ck(a.delete),Ck(a.duplicate),Ck(a["export-as-svg"]),Ck(a["export-as-png"])),Sk("shortcuts-dialog.view",Ck(a["zoom-in"]),Ck(a["zoom-out"]),Ck(a["zoom-to-100"]),Ck(a["zoom-to-fit"]),Ck(a["zoom-to-selection"])),Sk("shortcuts-dialog.transform",Ck(a["bring-to-front"]),Ck(a["bring-forward"]),Ck(a["send-backward"]),Ck(a["send-to-back"]),Ck(a.group),Ck(a.ungroup),Ck(a["flip-horizontal"]),Ck(a["flip-vertical"]),Ck(a["align-top"]),Ck(a["align-center-vertical"]),Ck(a["align-bottom"]),Ck(a["align-left"]),Ck(a["align-center-horizontal"]),Ck(a["align-right"]))]);return n?n(i,e,{tools:o,actions:a}):e}),[i,n,a,o]);return(0,Mi.jsx)(bE.Provider,{value:s,children:r})}));function xE(e,n){var r=ma(),i=(0,t.useRef)(!1),o=(0,t.useCallback)((function(t){i.current=t,t?(r.complete(),r.openMenus.add(e)):(r.openMenus.delete(e),r.openMenus.forEach((function(t){t.startsWith(e)&&r.openMenus.delete(t)}))),null===n||void 0===n||n(t)}),[r,e,n]);return(0,t.useEffect)((function(){return i.current&&r.openMenus.add(e),function(){i.current&&(r.openMenus.delete(e),r.openMenus.forEach((function(t){t.startsWith(e)&&r.openMenus.delete(t)})),i.current=!1)}}),[r,e]),o}var kE=t.createContext({});function SE(e){var n,r=e.overrides,i=e.children,o=ma(),a=_C(),s=IC()<5,u=va("isDarkMode",(function(){return o.userDocumentSettings.isDarkMode}),[o]),l=va("isGridMode",(function(){return o.userDocumentSettings.isGridMode}),[o]),c=va("isSnapMode",(function(){return o.userDocumentSettings.isSnapMode}),[o]),d=va("isToolLock",(function(){return o.instanceState.isToolLocked}),[o]),p=va("isFocusMode",(function(){return o.instanceState.isFocusMode}),[o]),f=va("isDebugMode",(function(){return o.instanceState.isDebugMode}),[o]),h=va("exportBackground",(function(){return o.instanceState.exportBackground}),[o]),v=va("emptyPage",(function(){return 0===o.shapeIds.size}),[o]),g=va("selectedCount",(function(){return o.selectedIds.length}),[o]),m=0===g,y=g>0,b=g>1,w=g>2,x=Boolean(null===(n=window.navigator.clipboard)||void 0===n?void 0:n.write),k=MC(),_=zC(),P=Mk(),C=Tk(),E=OC(),I=AC(),M=va("isZoomedTo100",(function(){return 1===o.camera.z}),[o]),T=(0,t.useMemo)((function(){var e=S([Sk("menu",_k("file","menu.file",Sk("print",Ck(a.print,{disabled:v}))),_k("edit","menu.edit",Sk("undo-actions",Ck(a.undo,{disabled:!E}),Ck(a.redo,{disabled:!I})),Sk("clipboard-actions",Ck(a.cut,{disabled:m}),Ck(a.copy,{disabled:m}),{id:"MENU_PASTE",type:"custom",disabled:!jk,readonlyOk:!1}),Sk("conversions",_k("copy-as","menu.copy-as",Sk("copy-as-group",Ck(a["copy-as-svg"],{disabled:v}),Ck(a["copy-as-png"],{disabled:v||!x}),Ck(a["copy-as-json"],{disabled:v})),Sk("export-bg",Ck(a["toggle-transparent"],{checked:!h}))),_k("export-as","menu.export-as",Sk("export-as-group",Ck(a["export-as-svg"],{disabled:v}),Ck(a["export-as-png"],{disabled:v}),Ck(a["export-as-json"],{disabled:v})),Sk("export-bg",Ck(a["toggle-transparent"],{checked:!h})))),Sk("set-selection-group",Ck(a["select-all"],{disabled:v}),Ck(a["select-none"],{disabled:!y})),Sk("selection",_&&Ck(a["toggle-auto-size"]),k&&Ck(a["edit-link"]),Ck(a.duplicate,{disabled:!y}),P&&Ck(a.group),C&&Ck(a.ungroup)),Sk("delete-group",Ck(a.delete,{disabled:!y}))),_k("view","menu.view",Sk("view-actions",Ck(a["zoom-in"]),Ck(a["zoom-out"]),Ck(a["zoom-to-100"],{disabled:M}),Ck(a["zoom-to-fit"],{disabled:v}),Ck(a["zoom-to-selection"],{disabled:v||!y}))),Ck(a["insert-media"])),Sk("preferences",_k("preferences","menu.preferences",Sk("preferences-actions",Ck(a["toggle-snap-mode"],{checked:c}),Ck(a["toggle-tool-lock"],{checked:d}),Ck(a["toggle-grid"],{checked:l}),Ck(a["toggle-dark-mode"],{checked:u}),Ck(a["toggle-focus-mode"],{checked:p}),Ck(a["toggle-debug-mode"],{checked:f}))),s&&Pk("LANGUAGE_MENU",{readonlyOk:!0}))]);return r?r(o,e,{actions:a,noneSelected:m,oneSelected:y,twoSelected:b,threeSelected:w}):e}),[o,r,a,y,b,w,v,s,P,C,k,x,_,m,E,I,u,l,c,d,p,h,f,M]);return(0,Mi.jsx)(kE.Provider,{value:T,children:i})}function _E(e){return{id:e.id,type:"item",readonlyOk:e.readonlyOk,toolItem:e}}var PE=t.createContext([]);function CE(e){var n=e.overrides,r=e.children,i=ma(),o=gE(),a=t.useMemo((function(){var e=[_E(o.select),_E(o.hand),_E(o.draw),_E(o.eraser),_E(o.arrow),_E(o.text),_E(o.note),_E(o.asset),_E(o.rectangle),_E(o.ellipse),_E(o.diamond),_E(o.triangle),_E(o.trapezoid),_E(o.rhombus),_E(o.pentagon),_E(o.hexagon),_E(o.octagon),_E(o.star),_E(o.oval),_E(o["x-box"]),_E(o["arrow-right"]),_E(o["arrow-left"]),_E(o["arrow-up"]),_E(o["arrow-down"]),_E(o.line),_E(o.frame),_E(o.embed)];return n?n(i,e,{tools:o}):e}),[i,n,o]);return(0,Mi.jsx)(PE.Provider,{value:a,children:r})}var EE=fa((function(){var e=ma(),t=qs(),n=e.pages,r=e.currentPageId,i=lC();return(0,Mi.jsxs)(bk,{children:[(0,Mi.jsx)(wk,{dir:"ltr",asChild:!0,children:(0,Mi.jsx)(PS,{className:"tlui-menu__button",label:"context-menu.move-to-page","data-wd":"menu-item.move-to-page",icon:"chevron-right"})}),(0,Mi.jsx)(hk,{container:t,dir:"ltr",children:(0,Mi.jsxs)(xk,{className:"tlui-menu",sideOffset:-4,collisionPadding:4,children:[(0,Mi.jsx)(gk,{dir:"ltr",className:"tlui-menu__group","data-wd":"menu-item.pages",children:n.map((function(t){return(0,Mi.jsx)(mk,{disabled:r===t.id,onSelect:function(){e.mark("move_shapes_to_page"),e.moveShapesToPage(e.selectedIds,t.id)},asChild:!0,children:(0,Mi.jsx)(PS,{title:t.name,className:"tlui-menu__button tlui-context-menu__move-to-page__name",children:(0,Mi.jsx)("span",{children:t.name})})},t.id)}))},"pages"),(0,Mi.jsx)(gk,{dir:"ltr",className:"tlui-menu__group","data-wd":"menu-item.new-page",children:(0,Mi.jsx)(mk,{onSelect:function(){e.mark("move_shapes_to_page");var t=Dn.createId(),n=e.selectedIds,r=e.currentPageId;e.batch((function(){e.createPage("Page 1",t),e.setCurrentPageId(r),e.moveShapesToPage(n,t)}))},asChild:!0,children:(0,Mi.jsx)(PS,{title:i("context.pages.new-page"),className:"tlui-menu__button tlui-context-menu__move-to-page__name",children:i("context.pages.new-page")})},"new-page")},"new-page")]})})]})})),IE=function(e){var t=e.children,n=ma(),r=LC(),i=xE("context menu"),o=pE(),a=0===r.length||o&&r.every((function(e){return!e.readonlyOk})),s=!va("isSelectToolActive",(function(){return"select"===n.currentToolId}),[n])||a;return(0,Mi.jsxs)(pk,{dir:"ltr",onOpenChange:i,children:[(0,Mi.jsx)(fk,{onContextMenu:s?ss:void 0,dir:"ltr",disabled:s,children:t}),(0,Mi.jsx)(ME,{})]})};function ME(){var e=ma(),n=lC(),r=LC(),i=xE("context menu sub"),o=pE(),a=HP().paste,s=IC(),u=qs(),l=N(t.useState(!1),2),c=l[0],d=l[1];function p(e,t,r,l){if(o&&!t.readonlyOk)return null;switch(t.type){case"custom":switch(t.id){case"MENU_PASTE":return(0,Mi.jsx)(mk,{children:(0,Mi.jsx)(PS,{className:"tlui-menu__button","data-wd":"menu-item.".concat(t.id),kbd:"$v",label:"action.paste",disabled:t.disabled,onClick:function(){(!e.isSafari||e.isSafari&&e.isIos)&&navigator.clipboard.read().then((function(t){a(t,e.inputs.currentPagePoint)}))},onMouseDown:function(){e.isSafari&&!e.isIos&&navigator.clipboard.read().then((function(t){a(t,e.inputs.currentPagePoint)}))}})},t.id);case"MOVE_TO_PAGE_MENU":return(0,Mi.jsx)(EE,{},t.id)}break;case"group":return(0,Mi.jsx)(gk,{dir:"ltr",className:yf("tlui-menu__group",{"tlui-menu__group__small":"submenu"===(null===r||void 0===r?void 0:r.type)}),"data-wd":"menu-item.".concat(t.id),children:t.children.map((function(n){return p(e,n,t,l+1)}))},t.id);case"submenu":return(0,Mi.jsxs)(bk,{onOpenChange:i,children:[(0,Mi.jsx)(wk,{dir:"ltr",disabled:t.disabled,asChild:!0,children:(0,Mi.jsx)(PS,{className:"tlui-menu__button",label:t.label,"data-wd":"menu-item.".concat(t.id),icon:"chevron-right"})}),(0,Mi.jsx)(hk,{container:u,dir:"ltr",children:(0,Mi.jsx)(xk,{className:"tlui-menu",sideOffset:-4,collisionPadding:4,children:t.children.map((function(n){return p(e,n,t,l+1)}))})})]},t.id);case"item":if(o&&!t.readonlyOk)return null;var f=t.actionItem,h=f.id,v=f.checkbox,g=f.contextMenuLabel,m=f.label,y=f.onSelect,b=f.kbd,w=f.icon,x=null!==g&&void 0!==g?g:m,k=x?n(x):void 0;return v?(0,Mi.jsxs)(yk,{className:"tlui-button tlui-menu__button tlui-menu__checkbox-item",dir:"ltr",disabled:t.disabled,onSelect:function(e){y(),ss(e)},title:k||void 0,checked:t.checked,children:[(0,Mi.jsx)("div",{className:"tlui-menu__checkbox-item__check",style:{transformOrigin:"75% center",transform:"scale(".concat(t.checked?1:.5,")"),opacity:t.checked?1:.5},children:(0,Mi.jsx)(yS,{small:!0,icon:t.checked?"check":"checkbox-empty"})}),k&&(0,Mi.jsx)("span",{children:k}),b&&(0,Mi.jsx)(SS,{children:b})]},h):(0,Mi.jsx)(mk,{dir:"ltr",asChild:!0,children:(0,Mi.jsx)(PS,{className:"tlui-menu__button","data-wd":"menu-item.".concat(h),kbd:b,label:x,disabled:t.disabled,iconLeft:s<3&&l>2?w:void 0,onClick:function(){c?d(!1):y()}})},h)}}return(0,Mi.jsx)(hk,{dir:"ltr",container:u,children:(0,Mi.jsx)(vk,{className:"tlui-menu scrollable",alignOffset:-4,collisionPadding:4,onContextMenu:ss,children:r.map((function(t){return p(e,t,null,0)}))})})}var TE=0;var jE=t.memo((function(e){var t=e.renderDebugMenuItems;return(0,Mi.jsxs)("div",{className:"tlui-debug-panel",children:[(0,Mi.jsx)(AE,{}),(0,Mi.jsx)(OE,{}),(0,Mi.jsxs)(b_,{id:"debug",children:[(0,Mi.jsx)(w_,{children:(0,Mi.jsx)(PS,{icon:"dots-horizontal"})}),(0,Mi.jsx)(x_,{side:"top",align:"end",alignOffset:0,children:(0,Mi.jsx)(zE,{renderDebugMenuItems:t})})]})]})})),AE=fa((function(){var e=ma();return(0,Mi.jsx)("div",{className:"tlui-debug-panel__current-state",children:e.root.path.value})})),OE=fa((function(){var e=ma();return(0,Mi.jsxs)("div",{children:[e.renderingShapes.length," Shapes"]})}));function zE(e){var n=e.renderDebugMenuItems,r=ma(),i=qP().addToast,o=wC().addDialog,a=N(t.useState(!1),2),s=a[0],u=a[1];return(0,Mi.jsxs)(P_,{children:[function(){if(s)throw Error("oh no!")}(),(0,Mi.jsx)(C_,{onClick:function(){u(!0)},children:(0,Mi.jsx)("span",{children:"Throw Error"})}),(0,Mi.jsx)(C_,{onClick:function(){i({id:os(),title:"Something happened",description:"Hey, attend to this thing over here. It might be important!"})},children:(0,Mi.jsx)("span",{children:"Show Toast"})}),(0,Mi.jsx)(C_,{onClick:function(){o({component:function(e){var t=e.onClose;return(0,Mi.jsx)(DE,{onCancel:function(){t()},onContinue:function(){t()}})},onClose:function(){}})},children:"Show Dialog"}),(0,Mi.jsx)(C_,{onClick:function(){r.updateUserDocumentSettings({isReadOnly:!r.isReadOnly})},children:(0,Mi.jsx)("span",{children:"Toggle Read Only"})}),(0,Mi.jsx)(C_,{onClick:function(){wa.peopleMenu.set(!wa.peopleMenu.value)},children:(0,Mi.jsx)("span",{children:"Toggle People Menu"})}),(0,Mi.jsx)(C_,{label:"debug-menu.hard-reset",onClick:function(){window.__tldraw__hardReset()}}),(0,Mi.jsx)(C_,{label:"debug-menu.create-shapes",onClick:function(){return function(e,t){for(var n=Array(t),r=Math.floor(Math.sqrt(t)),i=0;i<t;i++)TE++,n[i]={id:e.createShapeId("box"+TE),type:"geo",x:i%r*132,y:132*Math.floor(i/r)};e.batch((function(){e.createShapes(n).setSelectedIds(n.map((function(e){return e.id})))}))}(r,100)}}),(0,Mi.jsx)(C_,{onClick:function(){function e(t){var n=t.children,r=0;if(!n.length)return 0;for(var i=0,o=M(n);i<o.length;i++){r++,r+=e(o[i])}return r}var t,n=r.selectedShapes,i=0===n.length?r.renderingShapes:n,o=i.map((function(e){return document.getElementById(e.id).parentElement})),a=o.length,s=y(o);try{for(s.s();!(t=s.n()).done;){a+=e(t.value)}}catch(yM){s.e(yM)}finally{s.f()}window.alert("Shapes ".concat(i.length,", DOM nodes:").concat(a))},children:(0,Mi.jsx)("span",{children:"Count Shapes and Nodes"})}),null===n||void 0===n?void 0:n()]})}function DE(e){var n=e.onCancel,r=e.onContinue,i=N(t.useState(!1),2),o=i[0],a=i[1];return(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsxs)(CS,{children:[(0,Mi.jsx)(ES,{children:"Hello"}),(0,Mi.jsx)(IS,{})]}),(0,Mi.jsx)(MS,{style:{maxWidth:350},children:"Hello Hello Hello"}),(0,Mi.jsxs)(TS,{className:"tlui-dialog__footer__actions",children:[(0,Mi.jsx)(PS,{onClick:function(){return a(!o)},iconLeft:o?"checkbox-checked":"checkbox-empty",style:{marginRight:"auto"},children:"Don't show again"}),(0,Mi.jsx)(PS,{onClick:n,children:"Cancel"}),(0,Mi.jsx)(PS,{type:"primary",onClick:function(){var e=Ai(Ti().mark((function e(){return Ti().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),children:"Continue"})]})]})}fa((function(){var e=ma(),n=t.useRef(null),r=e.camera,i=e.shapesArray;if(n.current){var o=n.current,a=o.getContext("2d");a.resetTransform(),a.clearRect(0,0,o.width,o.height);var s=new Path2D;a.translate(r.x,r.y);var u,l=y(i);try{for(l.s();!(u=l.n()).done;){var c=u.value,d=e.getPageBounds(c);s.rect(d.minX,d.minY,d.width,d.height)}}catch(yM){l.e(yM)}finally{l.f()}a.fillStyle="#cccccc",a.fill(s);var p,f=y(i);try{for(f.s();!(p=f.n()).done;){var h=p.value;a.save(),e.getPageCorners(h).forEach((function(e){return NE(a,e.x,e.y,"red")})),a.restore()}}catch(yM){f.e(yM)}finally{f.f()}}return(0,Mi.jsx)("canvas",{ref:n,width:e.viewportScreenBounds.width,height:e.viewportScreenBounds.height,style:{width:"100%",height:"100%"}})}));function NE(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#000";e.save(),e.beginPath(),e.ellipse(t,n,4,4,0,0,2*Math.PI),e.fillStyle=r,e.fill(),e.restore()}function RE(){var e=ma(),n=nC(),r=n.languages,i=n.currentLanguage,o=(0,t.useCallback)((function(t){e.updateUser({locale:t})}),[e]);return(0,Mi.jsxs)(k_,{id:"help menu language",children:[(0,Mi.jsx)(S_,{label:"menu.language","data-direction":"left"}),(0,Mi.jsx)(__,{sideOffset:-4,children:(0,Mi.jsx)(P_,{children:r.map((function(e){var t=e.locale,n=e.label;return(0,Mi.jsx)(I_,{title:t,checked:t===i,onSelect:function(){return o(t)},children:(0,Mi.jsx)("span",{children:n})},t)}))})})]})}var LE=t.memo((function(){var e=qs(),t=lC(),n=xE("help menu");return(0,Mi.jsx)("div",{className:"tlui-help-menu",children:(0,Mi.jsxs)(o_,{dir:"ltr",onOpenChange:n,modal:!1,children:[(0,Mi.jsx)(a_,{className:"tlui-button tlui-help-menu__button",dir:"ltr",title:t("help-menu.title"),children:(0,Mi.jsx)(yS,{icon:"question-mark"})}),(0,Mi.jsx)(s_,{container:e,dir:"ltr",children:(0,Mi.jsx)(u_,{className:"tlui-menu",side:"top",sideOffset:8,align:"end",alignOffset:0,collisionPadding:4,children:(0,Mi.jsx)(BE,{})})})]})})}));function BE(){var e=function(){var e=t.useContext(FC);if(!e)throw new Error("useHelpMenuSchema must be used inside of a helpMenuSchemaProvider.");return e}(),n=pE();return(0,Mi.jsx)(Mi.Fragment,{children:e.map((function e(t){if(n&&!t.readonlyOk)return null;switch(t.type){case"custom":if("LANGUAGE_MENU"===t.id)return(0,Mi.jsx)(RE,{},"item");break;case"group":return(0,Mi.jsx)(P_,{size:"small",children:t.children.map(e)},t.id);case"submenu":return(0,Mi.jsxs)(k_,{id:"help menu ".concat(t.id),children:[(0,Mi.jsx)(S_,{label:t.label}),(0,Mi.jsx)(__,{children:t.children.map(e)})]},t.id);case"item":var r=t.actionItem,i=r.id,o=r.kbd,a=r.label,s=r.onSelect,u=r.icon;return(0,Mi.jsx)(C_,{kbd:o,label:a,onClick:s,iconLeft:u},i)}}))})}var FE=function(){function e(t,n){var r=this;o(this,e),b(this,"colors",{shapeFill:"rgba(144, 144, 144, .1)",selectFill:"#2f80ed",viewportFill:"rgba(144, 144, 144, .1)"}),b(this,"id",os()),b(this,"cvs",null),b(this,"pageBounds",[]),b(this,"collaborators",[]),b(this,"canvasScreenBounds",new uo),b(this,"canvasPageBounds",new uo),b(this,"contentPageBounds",new uo),b(this,"contentScreenBounds",new uo),b(this,"originPagePoint",new Di),b(this,"originPageCenter",new Di),b(this,"isInViewport",!1),b(this,"debug",!1),b(this,"updateContentScreenBounds",(function(){var e=r.contentScreenBounds,t=r.contentPageBounds,n=r.canvasScreenBounds,i=e.x,o=e.y,a=e.w,s=e.h;if(t.w>t.h){var u=n.w/(t.w/t.h);u>n.h?(i=(n.w-n.w*(n.h/u))/2,o=0,a=n.w*(n.h/u),s=n.h):(i=0,o=(n.h-u)/2,a=n.w,s=u)}else if(t.w<t.h){var l=n.h/(t.h/t.w);i=(n.w-l)/2,o=0,a=l,s=n.h}else i=n.h/2,o=0,a=n.h,s=n.h;e.set(i,o,a,s)})),b(this,"updateCanvasPageBounds",(function(){var e=r.canvasPageBounds,t=r.canvasScreenBounds,n=r.contentPageBounds,i=r.contentScreenBounds;e.set(0,0,n.width/(i.width/t.width),n.height/(i.height/t.height)),e.center=n.center})),b(this,"getScreenPoint",(function(e,t){var n=r.canvasScreenBounds;return{x:(e-n.minX)*r.dpr,y:(t-n.minY)*r.dpr}})),b(this,"getPagePoint",(function(e,t){var n=r.contentPageBounds,i=r.contentScreenBounds,o=r.canvasPageBounds,a=r.getScreenPoint(e,t),s=a.x,u=a.y;return{x:o.minX+s*n.width/i.width,y:o.minY+u*n.height/i.height,z:1}})),b(this,"minimapScreenPointToPagePoint",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=r.app.viewportPageBounds,a=r.getPagePoint(e,t),s=a.x,u=a.y;if(i){var l,c,d,p,f=r.app.allShapesCommonBounds,h=o,v=(null!==(l=null===f||void 0===f?void 0:f.minX)&&void 0!==l?l:0)-h.width/2,g=(null!==(c=null===f||void 0===f?void 0:f.maxX)&&void 0!==c?c:0)+h.width/2,m=(null!==(d=null===f||void 0===f?void 0:f.minY)&&void 0!==d?d:0)-h.height/2,y=(null!==(p=null===f||void 0===f?void 0:f.maxY)&&void 0!==p?p:0)+h.height/2,b=Math.max(0,v+h.width-s),w=Math.max(0,-(g-h.width-s)),x=Math.max(0,m+h.height-u),k=Math.max(0,-(y-h.height-u)),S=Math.max(0,b-w),_=Math.max(0,w-b),P=Math.max(0,x-k),C=Math.max(0,k-x);S&&S>_?s+=S/2:_&&(s-=_/2),P&&P>C?u+=P/2:C&&(u-=C/2),s=Ki(s,v,g),u=Ki(u,m,y)}if(n){var E=r.originPagePoint;Math.abs(s-E.x)>Math.abs(u-E.y)?u=E.y:s=E.x}return{x:s,y:u}})),b(this,"render",(function(){var t=r.cvs,n=r.pageBounds;r.updateCanvasPageBounds();var i=r.app,o=r.canvasScreenBounds,a=r.canvasPageBounds,s=r.contentPageBounds,u=r.contentScreenBounds,l=o.width,c=o.height,d=i.viewportPageBounds,p=i.selectedIds;if(t&&n){var f=t.getContext("2d");if(!f)throw new Error("Minimap (shapes): Could not get context");f.resetTransform(),f.globalAlpha=1,f.clearRect(0,0,l,c);var h=u.width/s.width,v=u.height/s.height;f.translate((l-u.width)/2,(c-u.height)/2),f.scale(h,v),f.translate(-s.minX,-s.minY);for(var g,m=8/h,y=8/h,b=1/h,w=1/h,x=m/4,k=y/4,S=new Path2D,_=new Path2D,P=r.colors,C=P.shapeFill,E=P.selectFill,I=P.viewportFill,M=0,T=n.length;M<T;M++)g=n[M],e.roundedRect(p.includes(g.id)?_:S,g.minX,g.minY,g.width,g.height,Ki(m,b,g.width/x),Ki(y,w,g.height/k));if(f.fillStyle=C,f.fill(S),f.fillStyle=E,f.fill(_),r.debug){var j=uo.Common(n),A=j.minX,O=j.minY,z=j.width,D=j.height;f.strokeStyle="green",f.lineWidth=2/h,f.strokeRect(A+1/h,O+1/v,z-2/h,D-2/v)}var N=i.brush;if(N){var R=N.x,L=N.y,B=N.w,F=N.h;f.beginPath(),e.sharpRect(f,R,L,B,F),f.closePath(),f.fillStyle=I,f.fill()}var U=d.minX,K=d.minY,V=d.width,W=d.height;f.beginPath();var H=12/h,Y=12/h;e.roundedRect(f,U,K,V,W,Math.min(V/4,H),Math.min(W/4,Y)),f.closePath(),f.fillStyle=I,f.fill(),r.debug&&(f.strokeStyle="orange",f.strokeRect(U+1/h,K+1/v,V-2/h,W-2/v));for(var X,q=2.5/h,$=2.5/v,G=i.currentPageId,Q=0;Q<r.collaborators.length;Q++){var Z=(X=r.collaborators[Q]).lastUsedInstanceId?i.store.get(X.lastUsedInstanceId):null;(null===Z||void 0===Z?void 0:Z.currentPageId)===G&&(f.beginPath(),f.ellipse(Ki(X.cursor.x,a.minX+q,a.maxX-q),Ki(X.cursor.y,a.minY+$,a.maxY-$),5/h,5/v,0,0,Bi),f.fillStyle=X.color,f.fill())}if(r.debug){f.lineWidth=2/h;var J=s.minX,ee=s.minY,te=s.width,ne=s.height;f.strokeStyle="red",f.strokeRect(J+1/h,ee+1/v,te-2/h,ne-2/v);var re=a.minX,ie=a.minY,oe=a.width,ae=a.height;f.strokeStyle="blue",f.strokeRect(re+1/h,ie+1/v,oe-2/h,ae-2/v)}}})),this.app=t,this.dpr=n}return l(e,[{key:"setDpr",value:function(e){this.dpr=+e.toFixed(2)}}],[{key:"roundedRect",value:function(e,t,n,r,i,o,a){o<1&&a<1?e.rect(t,n,r,i):(e.moveTo(t+o,n),e.lineTo(t+r-o,n),e.quadraticCurveTo(t+r,n,t+r,n+a),e.lineTo(t+r,n+i-a),e.quadraticCurveTo(t+r,n+i,t+r-o,n+i),e.lineTo(t+o,n+i),e.quadraticCurveTo(t,n+i,t,n+i-a),e.lineTo(t,n+a),e.quadraticCurveTo(t,n,t+o,n))}},{key:"sharpRect",value:function(e,t,n,r,i,o,a){e.rect(t,n,r,i)}}]),e}(),UE=fa((function(e){var n=e.shapeFill,r=e.selectFill,i=e.viewportFill,o=ma(),a=t.useRef(null),s=qs(),u=t.useRef(!1),l=t.useMemo((function(){return new FE(o,o.devicePixelRatio)}),[o]),c=o.userDocumentSettings.isDarkMode;t.useEffect((function(){var e=requestAnimationFrame((function(){var e=getComputedStyle(s);l.colors={shapeFill:e.getPropertyValue(n).trim(),selectFill:e.getPropertyValue(r).trim(),viewportFill:e.getPropertyValue(i).trim()},l.render()}));return function(){cancelAnimationFrame(e)}}),[s,r,n,i,l,c]);var d=t.useCallback((function(e){if(o.shapeIds.size){var t=l.minimapScreenPointToPagePoint(e.clientX,e.clientY,!1,!1),n=t.x,r=t.y,i=l.minimapScreenPointToPagePoint(e.clientX,e.clientY,!1,!0);l.originPagePoint.setTo(i),l.originPageCenter.setTo(o.viewportPageBounds.center),o.centerOnPoint(n,r,{duration:Uo})}}),[o,l]),p=t.useCallback((function(e){if(e.currentTarget.setPointerCapture(e.pointerId),o.shapeIds.size){u.current=!0,l.isInViewport=!1;var t=l.minimapScreenPointToPagePoint(e.clientX,e.clientY,!1,!1),n=t.x,r=t.y,i=l.minimapScreenPointToPagePoint(e.clientX,e.clientY,!1,!0),a=o.viewportPageBounds;l.originPagePoint.setTo(i),l.originPageCenter.setTo(a.center),l.isInViewport=a.containsPoint(i),l.isInViewport||o.centerOnPoint(n,r,{duration:Uo})}}),[o,l]),f=t.useCallback((function(e){if(u.current){var t=l.minimapScreenPointToPagePoint(e.clientX,e.clientY,e.shiftKey,!0),n=t.x,r=t.y;if(l.isInViewport){var i=Di.Sub({x:n,y:r},l.originPagePoint),a=Di.Add(l.originPageCenter,i);return void o.centerOnPoint(a.x,a.y)}o.centerOnPoint(n,r)}var s=l.getPagePoint(e.clientX,e.clientY),c=o.pageToScreen(s.x,s.y),d=x(x({type:"pointer",target:"canvas",name:"pointer_move"},function(e){return e.isKilled=!0,{point:{x:e.clientX,y:e.clientY,z:e.pressure},shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey,pointerId:e.pointerId,button:e.button,isPen:"pen"===e.pointerType}}(e)),{},{point:c,isPen:o.isPenMode});o.dispatch(d)}),[o,l]),h=t.useCallback((function(e){u.current=!1}),[]),v=t.useCallback((function(e){var t=fl(e);o.dispatch({type:"wheel",name:"wheel",delta:t,shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey})}),[o]);$s("update dpr",(function(){var e=o.devicePixelRatio;l.setDpr(e);var t=a.current,n=t.getBoundingClientRect(),r=n.width*e,i=n.height*e;t.width=r,t.height=i,l.canvasScreenBounds.set(n.x,n.y,r,i),l.cvs=a.current}),[o,l]);var g=function(){var e=ma(),n=ha("time",Date.now());return t.useEffect((function(){var e=setInterval((function(){return n.set(Date.now())}),5e3);return function(){return clearInterval(e)}}),[n]),t.useMemo((function(){return e.store.query.records("user_presence",(function(){return{lastActivityTimestamp:{gt:n.value-1e4},userId:{neq:e.userId}}}))}),[e,n])}();return $s("minimap render when pagebounds or collaborators changes",(function(){o.devicePixelRatio;var e=o.viewportPageBounds,t=o.allShapesCommonBounds;l.contentPageBounds=t?uo.Expand(t,e):e,l.updateContentScreenBounds();var n=[];o.shapeIds.forEach((function(e){var t=o.getPageBoundsById(e),r=o.getPageMaskById(e);if(r){var i=Do(r,t.corners);if(!i)return;t=uo.FromPoints(i)}t&&(t.id=e,n.push(t))})),l.pageBounds=n,l.collaborators=g.value,l.render()}),[o,l]),(0,Mi.jsx)("div",{className:"tlui-minimap",children:(0,Mi.jsx)("canvas",{ref:a,className:"tlui-minimap__canvas",onDoubleClick:d,onPointerMove:f,onPointerDown:p,onPointerUp:h,onWheel:v})})}));var KE=fa((function(){var e=ma(),n=lC(),r=IC(),i=e.zoomLevel,o=e.shapeIds.size>0,a=e.selectedIds.length>0,s=1===e.camera.z,u=t.useCallback((function(){e.resetZoom(e.viewportScreenCenter,{duration:Uo})}),[e]);return(0,Mi.jsxs)(b_,{id:"zoom",children:[(0,Mi.jsx)(w_,{children:(0,Mi.jsx)(PS,{title:"".concat(n("navigation-zone.zoom")),"data-wd":"minimap.zoom-menu",className:r<5?"tlui-zoom-menu__button":"tlui-zoom-menu__button__pct",onDoubleClick:u,icon:r<4?"zoom-in":void 0,children:r<4?null:(0,Mi.jsxs)("span",{style:{flexGrow:0,textAlign:"center"},children:[Math.floor(100*i),"%"]})})}),(0,Mi.jsx)(x_,{side:"top",align:"start",alignOffset:0,children:(0,Mi.jsxs)(P_,{children:[(0,Mi.jsx)(VE,{action:"zoom-in","data-wd":"minimap.zoom-menu.zoom-in",noClose:!0}),(0,Mi.jsx)(VE,{action:"zoom-out","data-wd":"minimap.zoom-menu.zoom-out",noClose:!0}),(0,Mi.jsx)(VE,{action:"zoom-to-100","data-wd":"minimap.zoom-menu.zoom-to-100",noClose:!0,disabled:s}),(0,Mi.jsx)(VE,{action:"zoom-to-fit",disabled:!o,"data-wd":"minimap.zoom-menu.zoom-to-fit",noClose:!0}),(0,Mi.jsx)(VE,{action:"zoom-to-selection",disabled:!a,"data-wd":"minimap.zoom-menu.zoom-to-selection",noClose:!0})]})})]})}));function VE(e){var t=e.action,n=e.disabled,r=void 0!==n&&n,i=e.noClose,o=void 0!==i&&i,a=_C();return(0,Mi.jsx)(C_,{label:a[t].label,kbd:a[t].kbd,"data-wd":e["data-wd"],onClick:a[t].onSelect,noClose:o,disabled:r})}var WE=(0,t.memo)((function(){var e=_C(),n=lC(),r=IC(),i=function(e,n){var r=N(t.useState(n),2),i=r[0],o=r[1];t.useLayoutEffect((function(){var t=localStorage.getItem(e);if(t)try{o(JSON.parse(t))}catch(gm){console.error("Could not restore value ".concat(e," from local storage."))}}),[e]);var a=t.useCallback((function(t){o((function(n){var r="function"===typeof t?t(n):t;return localStorage.setItem(e,JSON.stringify(r)),r}))}),[e]);return[i,a]}("minimap",!0),o=N(i,2),a=o[0],s=o[1],u=(0,t.useCallback)((function(){s((function(e){return!e}))}),[s]);return r<4?null:(0,Mi.jsxs)("div",{className:"tlui-navigation-zone",children:[(0,Mi.jsx)("div",{className:"tlui-navigation-zone__controls",children:r<6?(0,Mi.jsx)(KE,{}):a?(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsx)(KE,{}),(0,Mi.jsx)(PS,{title:n("navigation-zone.toggle-minimap"),className:"tlui-navigation-zone__toggle","data-wd":"minimap.toggle",onClick:u,icon:a?"chevrons-ne":"chevrons-sw"})]}):(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsx)(PS,{icon:"minus","data-wd":"minimap.zoom-out",title:"".concat(n(e["zoom-out"].label)," ").concat(kS(e["zoom-out"].kbd)),onClick:e["zoom-out"].onSelect}),(0,Mi.jsx)(KE,{}),(0,Mi.jsx)(PS,{icon:"plus","data-wd":"minimap.zoom-in",title:"".concat(n(e["zoom-in"].label)," ").concat(kS(e["zoom-in"].kbd)),onClick:e["zoom-in"].onSelect}),(0,Mi.jsx)(PS,{title:n("navigation-zone.toggle-minimap"),className:"tlui-navigation-zone__toggle",onClick:u,icon:a?"chevrons-ne":"chevrons-sw"})]})}),r>=6&&!a&&(0,Mi.jsx)(UE,{viewportFill:"--color-muted-1",selectFill:"--color-selected",shapeFill:"--color-text-3"})]})})),HE=t.memo((function(e){var n=e["data-wd"],r=e.label,i=e.labelA,o=e.labelB,a=e.itemsA,s=e.itemsB,u=e.styleTypeA,l=e.styleTypeB,c=e.valueA,d=e.valueB,p=e.onValueChange,f=lC(),h=t.useMemo((function(){var e,t;return null!==(e=null===(t=a.find((function(e){return e.id===c})))||void 0===t?void 0:t.icon)&&void 0!==e?e:"mixed"}),[a,c]),v=t.useMemo((function(){var e,t;return null!==(e=null===(t=s.find((function(e){return e.id===d})))||void 0===t?void 0:t.icon)&&void 0!==e?e:"mixed"}),[s,d]);if(void 0===c&&void 0===d)return null;var g="".concat(n,".start"),m="".concat(n,".end");return(0,Mi.jsxs)("div",{className:"tlui-style-panel__double-select-picker",children:[(0,Mi.jsx)("div",{title:f(r),className:"tlui-style-panel__double-select-picker-label",children:f(r)}),(0,Mi.jsxs)(b_,{id:"style panel ".concat(u),children:[(0,Mi.jsx)(a_,{asChild:!0,children:(0,Mi.jsx)(PS,{"data-wd":g,title:f(i)+" \u2014 "+f(null===c?"style-panel.mixed":"".concat(u,"-style.").concat(c)),icon:h,invertIcon:!0,smallIcon:!0})}),(0,Mi.jsx)(x_,{side:"bottom",align:"end",sideOffset:0,alignOffset:-2,children:(0,Mi.jsx)("div",{className:yf("tlui-button-grid",{"tlui-button-grid__two":a.length<4,"tlui-button-grid__four":a.length>=4}),children:a.map((function(e){return(0,Mi.jsx)(C_,{className:"tlui-button-grid__button",title:f(i)+" \u2014 "+f("".concat(u,"-style.").concat(e.id)),"data-wd":"".concat(g,".").concat(e.id),icon:e.icon,onClick:function(){return p(e,!1)},invertIcon:!0},e.id)}))})})]}),(0,Mi.jsxs)(b_,{id:"style panel ".concat(l),children:[(0,Mi.jsx)(a_,{asChild:!0,children:(0,Mi.jsx)(PS,{"data-wd":m,title:f(o)+" \u2014 "+f(null===d?"style-panel.mixed":"".concat(l,"-style.").concat(d)),icon:v,smallIcon:!0})}),(0,Mi.jsx)(x_,{side:"bottom",align:"end",sideOffset:0,alignOffset:-2,children:(0,Mi.jsx)("div",{className:yf("tlui-button-grid",{"tlui-button-grid__two":a.length<4,"tlui-button-grid__four":a.length>=4}),children:s.map((function(e){return(0,Mi.jsx)(C_,{className:"tlui-button-grid__button",title:f(o)+" \u2014 "+f("".concat(l,"-style.").concat(e.id)),"data-wd":"".concat(m,".").concat(e.id),icon:e.icon,onClick:function(){return p(e,!1)}},e.id)}))})})]})]})})),YE=t.memo((function(e){var n=e.id,r=e.items,i=e.styleType,o=e.label,a=e.value,s=e.onValueChange,u=e["data-wd"],l=lC(),c=t.useMemo((function(){var e;return null===(e=r.find((function(e){return e.id===a})))||void 0===e?void 0:e.icon}),[r,a]);return(0,Mi.jsxs)(b_,{id:"style panel ".concat(n),children:[(0,Mi.jsx)(a_,{asChild:!0,children:(0,Mi.jsx)(PS,{"data-wd":u,title:l(null===a?"style-panel.mixed":"".concat(i,"-style.").concat(a)),label:o,icon:null!==c&&void 0!==c?c:"mixed"})}),(0,Mi.jsx)(x_,{side:"left",align:"center",alignOffset:0,children:(0,Mi.jsx)("div",{className:yf("tlui-button-grid",{"tlui-button-grid__two":r.length<4,"tlui-button-grid__four":r.length>=4}),children:r.map((function(e){return(0,Mi.jsx)(C_,{className:"tlui-button-grid__button","data-wd":"".concat(u,".").concat(e.id),title:l("".concat(i,"-style.").concat(e.id)),icon:e.icon,onClick:function(){return s(e,!1)}},e.id)}))})})]})})),XE=fa((function(e){var n=e.isMobile,r=ma(),i=r.props,o=(0,t.useCallback)((function(){n||(r.isChangingStyle=!1)}),[r,n]);if(!i)return null;var a=i.geo,s=i.arrowheadEnd,u=i.arrowheadStart,l=void 0===a,c=void 0===s&&void 0===u,d=void 0===i.spline,p=void 0===i.font;return(0,Mi.jsxs)("div",{className:"tlui-style-panel","data-ismobile":n,onPointerLeave:o,children:[(0,Mi.jsx)(GE,{props:i}),!p&&(0,Mi.jsx)(QE,{props:i}),!(l&&c&&d)&&(0,Mi.jsxs)("div",{className:"tlui-style-panel__section","aria-label":"style panel styles",children:[(0,Mi.jsx)(ZE,{props:i}),(0,Mi.jsx)(eI,{props:i}),(0,Mi.jsx)(JE,{props:i})]})]})})),qE=ff.styles;function $E(){var e=ma();return t.useCallback((function(t,n){e.batch((function(){e.setProp(t.type,t.id,!1,n),e.isChangingStyle=!0}))}),[e])}function GE(e){var n=e.props,r=ma(),i=lC(),o=$E(),a=t.useCallback((function(e,t){var n=qE.opacity[e];r.setProp(n.type,n.id,t),r.isChangingStyle=!0}),[r]),s=n.color,u=n.fill,l=n.dash,c=n.size,d=n.opacity;if(void 0===s&&void 0===u&&void 0===l&&void 0===c&&void 0===d)return null;var p=u||l||c,f=qE.opacity.findIndex((function(e){return e.id===d}));return(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsxs)("div",{className:"tlui-style-panel__section__common","aria-label":"style panel styles",children:[void 0===s?null:(0,Mi.jsx)(M_,{title:i("style-panel.color"),styleType:"color","data-wd":"style.color",items:qE.color,value:s,onValueChange:o}),void 0===d?null:(0,Mi.jsx)(bP,{"data-wd":"style.opacity",value:f>=0?f:qE.opacity.length-1,label:d?"opacity-style.".concat(d):"style-panel.mixed",onValueChange:a,steps:qE.opacity.length-1,title:i("style-panel.opacity")})]}),p&&(0,Mi.jsxs)("div",{className:"tlui-style-panel__section","aria-label":"style panel styles",children:[void 0===u?null:(0,Mi.jsx)(M_,{title:i("style-panel.fill"),styleType:"fill","data-wd":"style.fill",items:qE.fill,value:u,onValueChange:o}),void 0===l?null:(0,Mi.jsx)(M_,{title:i("style-panel.dash"),styleType:"dash","data-wd":"style.dash",items:qE.dash,value:l,onValueChange:o}),void 0===c?null:(0,Mi.jsx)(M_,{title:i("style-panel.size"),styleType:"size","data-wd":"style.size",items:qE.size,value:c,onValueChange:o})]})]})}function QE(e){var t=e.props,n=lC(),r=$E(),i=t.font,o=t.align;return void 0===i&&void 0===o?null:(0,Mi.jsxs)("div",{className:"tlui-style-panel__section","aria-label":"style panel text",children:[void 0===i?null:(0,Mi.jsx)(M_,{title:n("style-panel.font"),styleType:"font","data-wd":"font",items:qE.font,value:i,onValueChange:r}),void 0===o?null:(0,Mi.jsx)(M_,{title:n("style-panel.align"),styleType:"align","data-wd":"align",items:qE.align,value:o,onValueChange:r})]})}function ZE(e){var t=e.props,n=$E(),r=t.geo;return void 0===r?null:(0,Mi.jsx)(YE,{id:"geo",label:"style-panel.geo",styleType:"geo","data-wd":"style-panel.geo",items:qE.geo,value:r,onValueChange:n})}function JE(e){var t=e.props,n=$E(),r=t.spline;return void 0===r?null:(0,Mi.jsx)(YE,{id:"spline",label:"style-panel.spline",styleType:"spline","data-wd":"style.spline",items:qE.spline,value:r,onValueChange:n})}function eI(e){var t=e.props,n=$E(),r=t.arrowheadEnd,i=t.arrowheadStart;return void 0===r&&void 0===i?null:(0,Mi.jsx)(HE,{label:"style-panel.arrowheads",styleTypeA:"arrowheadStart","data-wd":"style.arrowheads",itemsA:qE.arrowheadStart,valueA:i,styleTypeB:"arrowheadEnd",itemsB:qE.arrowheadEnd,valueB:r,onValueChange:n,labelA:"style-panel.arrowhead-start",labelB:"style-panel.arrowhead-end"})}function tI(){var e=ma(),n=_C()["back-to-content"],r=N((0,t.useState)(!1),2),i=r[0],o=r[1];return(0,t.useEffect)((function(){var t=!1,n=setInterval((function(){var n=e.renderingShapes.filter((function(e){return e.isInViewport})),r=0===n.length&&e.shapesArray.length>0;t!==r&&(o(r),t=r)}),1e3);return function(){clearInterval(n)}}),[e]),i?(0,Mi.jsx)(PS,{iconLeft:n.icon,label:n.label,onClick:function(){n.onSelect(),o(!1)}}):null}var nI=function(e){var n=e.id,r=e.component,i=e.onClose,o=wC().removeDialog,a=qs(),s=(0,t.useCallback)((function(e){if(!e){if(i)try{i()}catch(yM){console.warn(yM)}o(n)}}),[n,i,o]);return(0,Mi.jsx)(pS,{onOpenChange:s,defaultOpen:!0,children:(0,Mi.jsx)(fS,{container:a,children:(0,Mi.jsx)(hS,{dir:"ltr",className:"tlui-dialog__overlay",children:(0,Mi.jsx)(vS,{dir:"ltr",className:"tlui-dialog__content",children:(0,Mi.jsx)(r,{onClose:function(){return s(!1)}})})})})})};var rI=t.memo((function(){var e=wC().dialogs;return(0,Mi.jsx)(Mi.Fragment,{children:e.map((function(e){return(0,Mi.jsx)(nI,x({},e),e.id)}))})})),iI=fa((function(){var e=ma().isPenMode,t=_C();if(!e)return null;var n=t["exit-pen-mode"];return(0,Mi.jsx)(PS,{label:n.label,iconLeft:n.icon,onClick:n.onSelect})})),oI=["__scopePopover"],aI=["forceMount"],sI=["__scopePopover","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside"],uI="Popover",lI=N(mv(uI,[My]),2),cI=lI[0],dI=(lI[1],My()),pI=N(cI(uI),2),fI=pI[0],hI=pI[1],vI=function(e){var n=e.__scopePopover,r=e.children,i=e.open,o=e.defaultOpen,a=e.onOpenChange,s=e.modal,u=void 0!==s&&s,l=dI(n),c=(0,t.useRef)(null),d=N((0,t.useState)(!1),2),p=d[0],f=d[1],h=N(qv({prop:i,defaultProp:o,onChange:a}),2),v=h[0],g=void 0!==v&&v,m=h[1];return(0,t.createElement)(qy,l,(0,t.createElement)(fI,{scope:n,contentId:cm(),triggerRef:c,open:g,onOpenChange:m,onOpenToggle:(0,t.useCallback)((function(){return m((function(e){return!e}))}),[m]),hasCustomAnchor:p,onCustomAnchorAdd:(0,t.useCallback)((function(){return f(!0)}),[]),onCustomAnchorRemove:(0,t.useCallback)((function(){return f(!1)}),[]),modal:u},r))},gI="PopoverTrigger",mI=(0,t.forwardRef)((function(e,n){var r=e.__scopePopover,i=Ye(e,oI),o=hI(gI,r),a=dI(r),s=hv(n,o.triggerRef),u=(0,t.createElement)(Iv.button,dv({type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":II(o.open)},i,{ref:s,onClick:pv(e.onClick,o.onOpenToggle)}));return o.hasCustomAnchor?u:(0,t.createElement)($y,dv({asChild:!0},a),u)})),yI="PopoverPortal",bI=N(cI(yI,{forceMount:void 0}),2),wI=bI[0],xI=bI[1],kI=function(e){var n=e.__scopePopover,r=e.forceMount,i=e.children,o=e.container,a=hI(yI,n);return(0,t.createElement)(wI,{scope:n,forceMount:r},(0,t.createElement)(Yv,{present:r||a.open},(0,t.createElement)(Wv,{asChild:!0,container:o},i)))},SI="PopoverContent",_I=(0,t.forwardRef)((function(e,n){var r=xI(SI,e.__scopePopover),i=e.forceMount,o=void 0===i?r.forceMount:i,a=Ye(e,aI),s=hI(SI,e.__scopePopover);return(0,t.createElement)(Yv,{present:o||s.open},s.modal?(0,t.createElement)(PI,dv({},a,{ref:n})):(0,t.createElement)(CI,dv({},a,{ref:n})))})),PI=(0,t.forwardRef)((function(e,n){var r=hI(SI,e.__scopePopover),i=(0,t.useRef)(null),o=hv(n,i),a=(0,t.useRef)(!1);return(0,t.useEffect)((function(){var e=i.current;if(e)return Cb(e)}),[]),(0,t.createElement)(cw,{as:xv,allowPinchZoom:!0},(0,t.createElement)(EI,dv({},e,{ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:pv(e.onCloseAutoFocus,(function(e){var t;e.preventDefault(),a.current||null===(t=r.triggerRef.current)||void 0===t||t.focus()})),onPointerDownOutside:pv(e.onPointerDownOutside,(function(e){var t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;a.current=r}),{checkForDefaultPrevented:!1}),onFocusOutside:pv(e.onFocusOutside,(function(e){return e.preventDefault()}),{checkForDefaultPrevented:!1})})))})),CI=(0,t.forwardRef)((function(e,n){var r=hI(SI,e.__scopePopover),i=(0,t.useRef)(!1);return(0,t.createElement)(EI,dv({},e,{ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:function(t){var n,o;(null===(n=e.onCloseAutoFocus)||void 0===n||n.call(e,t),t.defaultPrevented)||(i.current||null===(o=r.triggerRef.current)||void 0===o||o.focus(),t.preventDefault());i.current=!1},onInteractOutside:function(t){var n,o;null===(n=e.onInteractOutside)||void 0===n||n.call(e,t),t.defaultPrevented||(i.current=!0);var a=t.target;(null===(o=r.triggerRef.current)||void 0===o?void 0:o.contains(a))&&t.preventDefault()}}))})),EI=(0,t.forwardRef)((function(e,n){var r=e.__scopePopover,i=e.trapFocus,o=e.onOpenAutoFocus,a=e.onCloseAutoFocus,s=e.disableOutsidePointerEvents,u=e.onEscapeKeyDown,l=e.onPointerDownOutside,c=e.onFocusOutside,d=e.onInteractOutside,p=Ye(e,sI),f=hI(SI,r),h=dI(r);return $g(),(0,t.createElement)(tm,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:o,onUnmountAutoFocus:a},(0,t.createElement)(Rv,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:d,onEscapeKeyDown:u,onPointerDownOutside:l,onFocusOutside:c,onDismiss:function(){return f.onOpenChange(!1)}},(0,t.createElement)(Gy,dv({"data-state":II(f.open),role:"dialog",id:f.contentId},h,p,{ref:n,style:x(x({},p.style),{},{"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"})}))))}));function II(e){return e?"open":"closed"}var MI=vI,TI=mI,jI=kI,AI=_I,OI=function(e){var t=e.id,n=e.open,r=e.children,i=xE(t,e.onOpenChange);return(0,Mi.jsx)(MI,{onOpenChange:i,open:n,children:(0,Mi.jsx)("div",{className:"tlui-popover",children:r})})},zI=function(e){var t=e.children,n=e.disabled,r=e["data-wd"];return(0,Mi.jsx)(TI,{"data-wd":r,disabled:n,asChild:!0,dir:"ltr",children:t})},DI=function(e){var t=e.side,n=e.children,r=e.align,i=void 0===r?"center":r,o=e.sideOffset,a=void 0===o?8:o,s=e.alignOffset,u=void 0===s?0:s,l=qs();return(0,Mi.jsx)(jI,{dir:"ltr",container:l,children:(0,Mi.jsx)(AI,{className:"tlui-popover__content",side:t,sideOffset:a,align:i,alignOffset:u,dir:"ltr",children:n})})},NI=(0,t.memo)((function(){var e=lC(),n=qs(),r=function(){var e=t.useContext(TC);if(!e)throw new Error("useActionsMenuSchema must be used inside of a ActionsMenuSchemaProvider.");return e}(),i=pE();return(0,Mi.jsxs)(OI,{id:"actions menu",children:[(0,Mi.jsx)(zI,{children:(0,Mi.jsx)(PS,{className:"tlui-menu__trigger","data-wd":"main.action-menu",icon:"dots-vertical",title:e("actions-menu.title"),smallIcon:!0})}),(0,Mi.jsx)(jI,{dir:"ltr",container:n,children:(0,Mi.jsx)(AI,{className:"tlui-popover__content",side:"bottom",dir:"ltr",sideOffset:6,children:(0,Mi.jsx)("div",{className:"tlui-actions-menu tlui-button-grid__four",children:r.map((function(t){if(i&&!t.readonlyOk)return null;if("item"===t.type){var n=t.actionItem,r=n.id,o=n.icon,a=n.label,s=n.kbd,u=n.onSelect;return(0,Mi.jsx)(PS,{className:"tlui-button-grid__button","data-wd":"menu-item.".concat(t.id),icon:o,title:a?s?"".concat(e(a)," ").concat(kS(s)):"".concat(e(a)):s?"".concat(kS(s)):"",onClick:u,disabled:t.disabled},r)}}))})})})]})})),RI=fa((function(){var e=ma(),t=_C(),n=lC(),r=t.duplicate,i=e.selectedIds.length<=0;return(0,Mi.jsx)(PS,{icon:r.icon,onClick:r.onSelect,disabled:i,title:"".concat(n(r.label)," ").concat(kS(r.kbd)),smallIcon:!0})})),LI=t.memo((function(){var e=lC();return(0,Mi.jsxs)(b_,{id:"main menu",children:[(0,Mi.jsx)(w_,{children:(0,Mi.jsx)(PS,{className:"tlui-menu__trigger","data-wd":"main.menu",title:e("menu.title"),icon:"menu"})}),(0,Mi.jsx)(x_,{alignOffset:0,sideOffset:6,children:(0,Mi.jsx)(BI,{})})]})}));function BI(){var e=ma(),n=lC(),r=function(){var e=t.useContext(kE);if(!e)throw new Error("useMenuSchema must be used inside of a MenuSchemaProvider.");return e}(),i=IC(),o=pE(),a=HP().paste;function s(e,t,r,u){switch(t.type){case"custom":return o&&!t.readonlyOk?null:"LANGUAGE_MENU"===t.id?(0,Mi.jsx)(RE,{},"item"):"MENU_PASTE"===t.id?(0,Mi.jsx)(C_,{"data-wd":"menu-item.".concat(t.id),kbd:"$v",label:"action.paste",disabled:t.disabled,onMouseDown:function(){var t;e.isSafari&&null!==(t=navigator.clipboard)&&void 0!==t&&t.read&&navigator.clipboard.read().then((function(e){a(e)}))},onClick:function(){var t;e.isSafari||null!==(t=navigator.clipboard)&&void 0!==t&&t.read&&navigator.clipboard.read().then((function(e){a(e)}))},onPointerUp:ss},t.id):null;case"group":return o&&!t.readonlyOk?null:(0,Mi.jsx)(P_,{size:u<=1?"medium":i<3||"submenu"===(null===r||void 0===r?void 0:r.type)&&u>2?"tiny":"medium",children:t.children.map((function(n){return s(e,n,t,u+1)}))},t.id);case"submenu":return o&&!t.readonlyOk?null:(0,Mi.jsxs)(k_,{id:"main menu ".concat(r?r.id+" ":"").concat(t.id),children:[(0,Mi.jsx)(S_,{label:t.label,"data-wd":"menu-item.".concat(t.id)}),(0,Mi.jsx)(__,{sideOffset:-4,alignOffset:-1,children:t.children.map((function(n){return s(e,n,t,u+1)}))})]},t.id);case"item":if(o&&!t.readonlyOk)return null;var l=t.actionItem,c=l.id,d=l.checkbox,p=l.menuLabel,f=l.label,h=l.onSelect,v=l.kbd,g=null!==p&&void 0!==p?p:f,m=g?n(g):void 0;return d?(0,Mi.jsxs)(E_,{onSelect:h,title:m||"",checked:t.checked,disabled:t.disabled,children:[m&&(0,Mi.jsx)("span",{children:m}),v&&(0,Mi.jsx)(SS,{children:v})]},c):(0,Mi.jsx)(C_,{"data-wd":"menu-item.".concat(t.id),kbd:v,label:g,onClick:h,disabled:t.disabled},c)}}return(0,Mi.jsx)(Mi.Fragment,{children:r.map((function(t){return s(e,t,null,0)}))})}var FI=function(e){var n=e.name,r=e.id,i=e.isCurrentPage,o=ma(),a=(0,t.useRef)(null),s=(0,t.useCallback)((function(e){o.renamePage(r,e||"New Page",!0)}),[o,r]),u=(0,t.useCallback)((function(e){o.mark("rename page"),o.renamePage(r,e||"New Page",!1)}),[o,r]);return(0,Mi.jsx)(T_,{className:"tlui-page-menu__item__input",ref:function(e){return a.current=e},defaultValue:n,onValueChange:s,onComplete:u,onCancel:u,shouldManuallyMaintainScrollPositionWhenFocused:!0,autofocus:i,autoselect:!0})},UI=function(e,t,n,r){var i,o=e.pages,a=n>r?o[r-1]:o[r],s=n>r?o[r]:o[r+1];(i=a&&!s?Os(a.index):!a&&s?function(e){return Ms(void 0,e,1)[0]}(o[0].index):As(a.index,s.index))!==o[n].index&&(e.mark("moving page"),e.updatePage({id:t,index:i}))},KI=fa((function(e){var n=e.index,r=e.listSize,i=e.item,o=e.onRename,a=ma(),s=lC(),u=a.pages,l=(0,t.useCallback)((function(){a.mark("creating page");var e=Dn.createId();a.duplicatePage(i.id,e)}),[a,i]),c=(0,t.useCallback)((function(){UI(a,i.id,n,n-1)}),[a,i,n]),d=(0,t.useCallback)((function(){UI(a,i.id,n,n+1)}),[a,i,n]),p=(0,t.useCallback)((function(){a.mark("deleting page"),a.deletePage(i.id)}),[a,i]);return(0,Mi.jsxs)(b_,{id:"page item submenu",children:[(0,Mi.jsx)(w_,{children:(0,Mi.jsx)(PS,{title:s("page-menu.submenu.title"),icon:"dots-vertical"})}),(0,Mi.jsxs)(x_,{alignOffset:0,children:[(0,Mi.jsxs)(P_,{children:[o&&(0,Mi.jsx)(c_,{dir:"ltr",onSelect:o,asChild:!0,children:(0,Mi.jsx)(PS,{className:"tlui-menu__button",label:"page-menu.submenu.rename"})}),(0,Mi.jsx)(c_,{dir:"ltr",onSelect:l,disabled:u.length>=40,asChild:!0,children:(0,Mi.jsx)(PS,{className:"tlui-menu__button",label:"page-menu.submenu.duplicate-page"})}),n>0&&(0,Mi.jsx)(c_,{dir:"ltr",onSelect:c,asChild:!0,children:(0,Mi.jsx)(PS,{className:"tlui-menu__button",label:"page-menu.submenu.move-up"})}),n<r-1&&(0,Mi.jsx)(c_,{dir:"ltr",onSelect:d,asChild:!0,children:(0,Mi.jsx)(PS,{className:"tlui-menu__button",label:"page-menu.submenu.move-down"})})]}),r>1&&(0,Mi.jsx)(P_,{children:(0,Mi.jsx)(c_,{dir:"ltr",onSelect:p,asChild:!0,children:(0,Mi.jsx)(PS,{className:"tlui-menu__button",label:"page-menu.submenu.delete"})})})]})]})})),VI=fa((function(){var e=ma(),n=lC(),r=IC(),i=r<5?36:40,o=(0,t.useRef)(null),a=e.pages,s=e.currentPage,u=e.isReadOnly,l=e.pages.length>=40,c=N((0,t.useState)(!1),2),d=c[0],p=c[1],f=(0,t.useCallback)((function(){u||p((function(e){return!e}))}),[u]),h=N((0,t.useState)(!1),2),v=h[0],g=h[1],m=(0,t.useCallback)((function(e){g(e),p(!1)}),[]),y=(0,t.useRef)({isPointing:!1,status:"idle",pointing:null,startY:0,startIndex:0,dragIndex:0}),b=(0,t.useState)(Object.fromEntries(a.map((function(e,t){return[e.id,{y:t*i,offsetY:0,isSelected:!1}]})))),w=N(b,2),k=w[0],S=w[1];(0,t.useLayoutEffect)((function(){S(Object.fromEntries(a.map((function(e,t){return[e.id,{y:t*i,offsetY:0,isSelected:!1}]}))))}),[i,a]),(0,t.useEffect)((function(){v&&requestAnimationFrame((function(){var e=document.querySelector('[data-wd="page-menu-item-'.concat(s.id,'"]'));if(e){var t=o.current;if(!t)return;var n=e.offsetTop;n<t.scrollTop&&t.scrollTo({top:n});var r=n+i;r>t.scrollTop+t.offsetHeight&&t.scrollTo({top:r-t.offsetHeight})}}))}),[i,s,v]);var _=(0,t.useCallback)((function(e){var t=e.clientY,n=e.currentTarget.dataset,r=n.id,o=n.index;if(r&&o){var s=y.current;e.currentTarget.setPointerCapture(e.pointerId),s.status="pointing",s.pointing={id:r,index:+o};var u=k[r].y;s.startY=t,s.startIndex=Math.max(0,Math.min(Math.round(u/i),a.length-1))}}),[i,a.length,k]),P=(0,t.useCallback)((function(e){var t=y.current;if("pointing"===t.status){var n=e.clientY-t.startY;Math.abs(n)>5&&(t.status="dragging")}if("dragging"===t.status){var r=e.clientY-t.startY,o=k[t.pointing.id],s=t.startIndex,u=t.pointing,l=o.y+r,c=Math.max(0,Math.min(Math.round(l/i),a.length-1)),d=x({},k);if(d[u.id]={y:o.y,offsetY:r,isSelected:!0},c!==t.dragIndex){t.dragIndex=c;for(var p=0;p<a.length;p++){var f=a[p];if(f.id!==t.pointing.id){var h=d[f.id].y;c===s?h=p*i:c<s?h=c<=p&&p<s?(p+1)*i:p*i:c>s&&(h=c>=p&&p>s?(p-1)*i:p*i),h!==d[f.id].y&&(d[f.id]={y:h,offsetY:0,isSelected:!0})}}}S(d)}}),[i,a,k]),C=(0,t.useCallback)((function(t){var n=y.current;if("dragging"===n.status){var r=n.pointing,i=r.id,o=r.index;UI(e,i,o,n.dragIndex)}t.currentTarget.releasePointerCapture(t.pointerId),n.status="idle"}),[e]),E=(0,t.useCallback)((function(e){var t=y.current;"Escape"===e.key&&("dragging"===t.status&&S(Object.fromEntries(a.map((function(e,t){return[e.id,{y:t*i,offsetY:0,isSelected:!1}]})))),t.status="idle")}),[i,a]),I=(0,t.useCallback)((function(){if(!u){e.mark("creating page");var t=Dn.createId();e.createPage(n("page-menu.new-page-initial-name"),t),p(!0)}}),[e,n,u]);return(0,Mi.jsxs)(OI,{id:"page menu",onOpenChange:m,open:v,children:[(0,Mi.jsx)(zI,{children:(0,Mi.jsx)(PS,{className:"tlui-page-menu__trigger tlui-menu__trigger","data-wd":"main.page-menu",icon:"chevron-down",title:s.name,children:(0,Mi.jsx)("div",{className:"tlui-page-menu__name",children:s.name})})}),(0,Mi.jsx)(DI,{side:"bottom",align:"start",sideOffset:6,children:(0,Mi.jsxs)("div",{className:"tlui-page-menu__wrapper",children:[(0,Mi.jsxs)("div",{className:"tlui-page-menu__header",children:[(0,Mi.jsx)("div",{className:"tlui-page-menu__header__title",children:n("page-menu.title")}),!u&&(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsx)(PS,{"data-wd":"page-menu.edit",title:n(d?"page-menu.edit-done":"page-menu.edit-start"),icon:d?"check":"edit",onClick:f}),(0,Mi.jsx)(PS,{"data-wd":"page-menu.create",icon:"plus",title:n(l?"page-menu.max-page-count-reached":"page-menu.create-new-page"),disabled:l,onClick:I})]})]}),(0,Mi.jsx)("div",{className:"tlui-page-menu__list tlui-menu__group",style:{height:i*a.length+4},ref:o,children:a.map((function(t,n){var o,l=null!==(o=k[t.id])&&void 0!==o?o:{position:40*n,offsetY:0};return d?(0,Mi.jsxs)("div",{"data-wd":"page-menu-item-".concat(t.id),className:"tlui-page_menu__item__sortable",style:{zIndex:t.id===s.id?888:n,transform:"translate(0px, ".concat(l.y+l.offsetY,"px)")},children:[(0,Mi.jsx)(PS,{tabIndex:-1,className:"tlui-page_menu__item__sortable__handle",icon:"drag-handle-dots",onPointerDown:_,onPointerUp:C,onPointerMove:P,onKeyDown:E,"data-id":t.id,"data-index":n}),r<5&&e.isCoarsePointer?(0,Mi.jsx)(PS,{className:"tlui-page-menu__item__button",onClick:function(){var n=window.prompt("Rename page",t.name);n&&n!==t.name&&e.renamePage(t.id,n)},onDoubleClick:f,isChecked:t.id===s.id,children:(0,Mi.jsx)("span",{children:t.name})}):(0,Mi.jsx)("div",{id:"page-menu-item-".concat(t.id),"data-wd":"page-menu-item-".concat(t.id),className:"tlui-page_menu__item__sortable__title",style:{height:i},children:(0,Mi.jsx)(FI,{id:t.id,name:t.name,isCurrentPage:t.id===s.id})}),!u&&(0,Mi.jsx)("div",{className:"tlui-page_menu__item__submenu","data-isediting":d,children:(0,Mi.jsx)(KI,{index:n,item:t,listSize:a.length})})]},t.id+"_editing"):(0,Mi.jsxs)("div",{"data-wd":"page-menu-item-".concat(t.id),className:"tlui-page-menu__item",children:[(0,Mi.jsxs)(PS,{className:"tlui-page-menu__item__button tlui-page-menu__item__button__checkbox",onClick:function(){return e.setCurrentPageId(t.id)},onDoubleClick:f,isChecked:t.id===s.id,children:[(0,Mi.jsx)("div",{className:"tlui-page-menu__item__button__check",children:t.id===s.id&&(0,Mi.jsx)(yS,{icon:"check"})}),(0,Mi.jsx)("span",{children:t.name})]}),!u&&(0,Mi.jsx)("div",{className:"tlui-page_menu__item__submenu",children:(0,Mi.jsx)(KI,{index:n,item:t,listSize:a.length,onRename:function(){if(e.isIos){var n=window.prompt("Rename page",t.name);n&&n!==t.name&&e.renamePage(t.id,n)}else p(!0),e.setCurrentPageId(t.id)}})})]},t.id)}))})]})})]})})),WI=(0,t.memo)((function(){var e=lC(),t=AC(),n=_C().redo;return(0,Mi.jsx)(PS,{"data-wd":"main.redo",icon:n.icon,title:"".concat(e(n.label)," ").concat(kS(n.kbd)),disabled:!t,onClick:n.onSelect,smallIcon:!0})})),HI=fa((function(){var e=ma(),t=_C(),n=lC(),r=t.delete;if(pE())return null;var i=e.selectedIds.length<=0;return(0,Mi.jsx)(PS,{icon:r.icon,onClick:r.onSelect,disabled:i,title:"".concat(n(r.label)," ").concat(kS(r.kbd)),smallIcon:!0})})),YI=(0,t.memo)((function(){var e=lC(),t=OC(),n=_C().undo;return(0,Mi.jsx)(PS,{"data-wd":"main.undo",icon:n.icon,title:"".concat(e(n.label)," ").concat(kS(n.kbd)),disabled:!t,onClick:n.onSelect,smallIcon:!0})})),XI=fa((function(){var e=IC(),t=pE();return(0,Mi.jsx)("div",{className:"tlui-menu-zone",children:(0,Mi.jsxs)("div",{className:"tlui-menu-zone__controls",children:[(0,Mi.jsx)(LI,{}),(0,Mi.jsx)("div",{className:"tlui-menu-zone__divider"}),(0,Mi.jsx)(VI,{}),e>=5&&!t&&(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsx)("div",{className:"tlui-menu-zone__divider"}),(0,Mi.jsx)(YI,{}),(0,Mi.jsx)(WI,{}),(0,Mi.jsx)(HI,{}),(0,Mi.jsx)(RI,{}),(0,Mi.jsx)(NI,{})]})]})})}));function qI(e){var t,n,r=e.toast,i=qP().removeToast,o=lC(),a=r.actions&&r.actions.length>0;return(0,Mi.jsxs)(Ug,{onOpenChange:function(e){e||i(r.id)},className:"tlui-toast__container",duration:r.keepOpen?1/0:5e3,children:[r.icon&&(0,Mi.jsx)("div",{className:"tlui-toast__icon",children:(0,Mi.jsx)(yS,{icon:r.icon})}),(0,Mi.jsxs)("div",{className:"tlui-toast__main",children:[(0,Mi.jsxs)("div",{className:"tlui-toast__content",children:[(0,Mi.jsx)(Kg,{className:"tlui-toast__title",children:r.title}),(0,Mi.jsx)(Vg,{className:"tlui-toast__description",children:r.description})]}),r.actions&&(0,Mi.jsxs)("div",{className:"tlui-toast__actions",children:[r.actions.map((function(e,t){return(0,Mi.jsx)(Wg,{altText:e.label,asChild:!0,onClick:e.onClick,children:(0,Mi.jsx)(PS,{className:"warn"===e.type?"tlui-button__warning":"tlui-button__primary",children:e.label})},t)})),a&&(0,Mi.jsx)(Hg,{asChild:!0,children:(0,Mi.jsx)(PS,{className:"tlui-toast__close",style:{marginLeft:"auto"},children:null!==(t=r.closeLabel)&&void 0!==t?t:o("toast.close")})})]})]}),!a&&(0,Mi.jsx)(Hg,{asChild:!0,children:(0,Mi.jsx)(PS,{className:"tlui-toast__close",children:null!==(n=r.closeLabel)&&void 0!==n?n:o("toast.close")})})]})}var $I=t.memo((function(){var e=qP().toasts;return(0,Mi.jsx)(Mi.Fragment,{children:e.map((function(e){return(0,Mi.jsx)(qI,{toast:e},e.id)}))})}));function GI(){var e=qP().toasts,n=N(t.useState(!1),2),r=n[0],i=n[1];return t.useEffect((function(){var t=!1;return e.length?i(!0):setTimeout((function(){t||i(!1)}),1e3),function(){t=!0}}),[e.length,i]),r?(0,Mi.jsx)(wg,{className:"tlui-toast__viewport"}):null}function QI(){var e=ma(),n=va("current color",(function(){var t=e.props;return t?t.color?e.getCssColor(t.color):null:"var(--color-muted-1)"}),[e]),r=va("isHandOrEraserToolActive",(function(){return"hand"===e.currentToolId||"eraser"===e.currentToolId}),[e]),i=(0,t.useCallback)((function(t){t||(e.isChangingStyle=!1)}),[e]);return(0,Mi.jsxs)(OI,{id:"style menu",onOpenChange:i,children:[(0,Mi.jsx)(zI,{disabled:r,children:(0,Mi.jsx)(PS,{className:"tlui-toolbar__tools__button tlui-toolbar__styles__button tlui-popover__trigger","data-wd":"mobile.styles",style:{color:null!==n&&void 0!==n?n:"var(--color-text)"},children:(0,Mi.jsx)(yS,{icon:n?"blob":"mixed"})})}),(0,Mi.jsx)(DI,{side:"top",align:"end",children:(0,Mi.jsx)(XE,{isMobile:!0})})]})}var ZI=fa((function(e){var t=e.activeToolId,n=ma(),r=IC(),i=lC(),o=n.instanceState.isToolLocked;return!("select"===t||"hand"===t||"draw"===t||"eraser"===t||"text"===t)?(0,Mi.jsx)(PS,{title:i("action.toggle-tool-lock"),className:yf("tlui-toolbar__lock-button",{"tlui-toolbar__lock-button__mobile":r<5}),icon:n.instanceState.isToolLocked?"lock":"unlock",onClick:function(){return n.updateInstanceState({isToolLocked:!o})},smallIcon:!0}):null})),JI=fa((function(){var e=ma(),n=lC(),r=IC(),i=t.useRef(void 0),o=e.isReadOnly,a=function(){var e=t.useContext(PE);if(!e)throw new Error("useToolbarSchema must be used within a ToolbarSchemaProvider");return e}(),s=e.currentToolId,u=e.props?e.props.geo:void 0,l=function(e){return e.label?"".concat(n(e.label)," ").concat(e.kbd?kS(e.kbd):""):""},c=a.find((function(e){return Ak(e.toolItem,s,u)})),d=t.useMemo((function(){for(var e,t=[],n=[],o=Math.min(8,5+r),s=4;s<a.length;s++){var u=a[s];s<o?t.push(u):(u===c&&(e=u),n.push(u))}return e||(i.current||(i.current=n[0]),e=i.current,n.includes(e)||(e=n[0])),i.current=e,n.length<=2&&(t.push.apply(t,n),n.length=0),{itemsInPanel:t,itemsInDropdown:n,dropdownFirstItem:e}}),[a,c,r]),p=d.itemsInPanel,f=d.itemsInDropdown,h=d.dropdownFirstItem;return(0,Mi.jsx)("div",{className:"tlui-toolbar",children:(0,Mi.jsxs)("div",{className:"tlui-toolbar__inner",children:[(0,Mi.jsxs)("div",{className:"tlui-toolbar__left",children:[!o&&(0,Mi.jsxs)("div",{className:"tlui-toolbar__extras",children:[r<5&&(0,Mi.jsxs)("div",{className:"tlui-toolbar__extras__controls",children:[(0,Mi.jsx)(YI,{}),(0,Mi.jsx)(WI,{}),(0,Mi.jsx)(HI,{}),(0,Mi.jsx)(RI,{}),(0,Mi.jsx)(NI,{})]}),(0,Mi.jsx)(ZI,{activeToolId:s})]}),(0,Mi.jsxs)("div",{className:yf("tlui-toolbar__tools",{"tlui-toolbar__tools__mobile":r<5}),children:[a.slice(0,2).map((function(e){var t=e.toolItem;return(0,Mi.jsx)(tM,{item:t,title:l(t),isSelected:Ak(t,s,u)},t.id)})),!o&&(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsx)("div",{className:"tlui-toolbar__divider"}),a.slice(2,4).map((function(e){var t=e.toolItem;return(0,Mi.jsx)(tM,{item:t,title:l(t),isSelected:Ak(t,s,u)},t.id)})),(0,Mi.jsx)("div",{className:"tlui-toolbar__divider"}),p.map((function(e){var t=e.toolItem;return(0,Mi.jsx)(tM,{item:t,title:l(t),isSelected:Ak(t,s,u)},t.id)})),f.length?(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsx)(tM,{item:h.toolItem,title:l(h.toolItem),isSelected:Ak(h.toolItem,s,u)},h.toolItem.id),(0,Mi.jsxs)(b_,{id:"toolbar overflow",modal:!1,children:[(0,Mi.jsx)(w_,{children:(0,Mi.jsx)(PS,{className:"tlui-toolbar__tools__button tlui-toolbar__overflow",icon:"chevron-up","data-wd":"tools.more"})}),(0,Mi.jsx)(x_,{side:"top",align:"center",children:(0,Mi.jsx)(eM,{toolbarItems:f})})]})]}):null]})]})]}),r<5&&!o&&(0,Mi.jsx)("div",{className:"tlui-toolbar__tools",children:(0,Mi.jsx)(QI,{})})]})})})),eM=fa((function(e){var t=e.toolbarItems,n=lC();return(0,Mi.jsx)("div",{className:"tlui-button-grid__four tlui-button-grid__reverse",children:t.map((function(e){var t,r=e.toolItem,i=r.id,o=r.meta,a=r.kbd,s=r.label,u=r.onSelect,l=r.icon;return(0,Mi.jsx)(C_,{className:"tlui-button-grid__button","data-wd":"tools.".concat(i),"data-tool":i,"data-geo":null!==(t=null===o||void 0===o?void 0:o.geo)&&void 0!==t?t:"","aria-label":s,onClick:u,title:s?"".concat(n(s)," ").concat(a?kS(a):""):"",icon:l},i)}))})}));function tM(e){var t,n,r=e.item,i=e.title,o=e.isSelected;return(0,Mi.jsx)(PS,{className:"tlui-toolbar__tools__button","data-wd":"tools.".concat(r.id),"data-tool":r.id,"data-geo":null!==(t=null===(n=r.meta)||void 0===n?void 0:n.geo)&&void 0!==t?t:"","aria-label":r.label,title:i,icon:r.icon,"data-state":o?"selected":void 0,onClick:r.onSelect,onTouchStart:function(e){e.preventDefault(),r.onSelect()}},r.id)}var nM=["align-bottom","align-center-horizontal","align-center-vertical","align-left","align-right","align-top","arrow-left","arrowhead-arrow","arrowhead-bar","arrowhead-diamond","arrowhead-dot","arrowhead-none","arrowhead-square","arrowhead-triangle-inverted","arrowhead-triangle","aspect-ratio","avatar","blob","bring-forward","bring-to-front","check","checkbox-checked","checkbox-empty","chevron-down","chevron-left","chevron-right","chevron-up","chevrons-ne","chevrons-sw","clipboard-copy","code","collab","color","comment","cross-2","cross","dash-dashed","dash-dotted","dash-draw","dash-solid","discord","distribute-horizontal","distribute-vertical","dot","dots-horizontal","dots-vertical","drag-handle-dots","duplicate","edit","external-link","file","fill-none","fill-pattern","fill-semi","fill-solid","font-draw","font-mono","font-sans","font-serif","geo-arrow-down","geo-arrow-left","geo-arrow-right","geo-arrow-up","geo-diamond","geo-ellipse","geo-hexagon","geo-octagon","geo-oval","geo-pentagon","geo-rectangle","geo-rhombus-2","geo-rhombus","geo-star","geo-trapezoid","geo-triangle","geo-x-box","github","group","hidden","image","info-circle","link","lock-small","lock","menu","minus","mixed","pack","page","plus","question-mark-circle","question-mark","redo","reset-zoom","rotate-ccw","rotate-cw","ruler","search","send-backward","send-to-back","settings-horizontal","settings-vertical-1","settings-vertical","share-1","share-2","size-extra-large","size-large","size-medium","size-small","spline-cubic","spline-line","stack-horizontal","stack-vertical","stretch-horizontal","stretch-vertical","text-align-center","text-align-justify","text-align-left","text-align-right","tool-arrow","tool-embed","tool-eraser","tool-frame","tool-hand","tool-highlighter","tool-line","tool-media","tool-note","tool-pencil","tool-pointer","tool-text","trash","triangle-down","triangle-up","twitter","undo","ungroup","unlock-small","unlock","visible","warning-triangle","zoom-in","zoom-out"];var rM=x(x({},vf),{},{icons:Object.fromEntries(nM.map((function(e){return[e,"./icons/icon/".concat(e,".svg")]}))),translations:Object.fromEntries(GP.map((function(e){return[e.locale,"./translations/".concat(e.locale,".json")]}))),embedIcons:Object.fromEntries(Gr.map((function(e){return[e.type,"./embed-icons/".concat(e.type,".png")]})))});function iM(e){return(0,t.useMemo)((function(){return e}),e)}function oM(e){var n=iM(null==e?[]:Array.isArray(e)?e:[e]);return(0,t.useMemo)((function(){var e,t={},r=y(n);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(i.translations){var o,a=y(V(i.translations));try{for(a.s();!(o=a.n()).done;){var s=N(o.value,2),u=s[0],l=s[1],c=t[u];c||(c=t[u]={}),Object.assign(c,l)}}catch(yM){a.e(yM)}finally{a.f()}}}}catch(yM){r.e(yM)}finally{r.f()}return t}),[n])}function aM(e){var n=function(){var e=qP(),n=e.addToast,r=e.removeToast,i=e.clearToasts,o=wC(),a=o.addDialog,s=o.clearDialogs,u=o.removeDialog,l=o.updateDialog,c=IC()<5,d=lC();return(0,t.useMemo)((function(){return{addToast:n,removeToast:r,clearToasts:i,addDialog:a,clearDialogs:s,removeDialog:u,updateDialog:l,msg:d,isMobile:c}}),[a,n,s,i,d,u,r,l,c])}(),r=iM(null==e?[]:Array.isArray(e)?e:[e]);return(0,t.useMemo)((function(){return function(e,t){var n,r={},i=y(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.translations){var a,s=y(V(o.translations));try{for(s.s();!(a=s.n()).done;){var u=N(a.value,2),l=u[0],c=u[1],d=r[l];d||(d=r[l]={}),Object.assign(d,c)}}catch(yM){s.e(yM)}finally{s.f()}}}}catch(yM){i.e(yM)}finally{i.f()}return{actionsMenu:function(n,r,i){var o,a=y(e);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.actionsMenu&&(r=s.actionsMenu(n,r,x(x({},t),i)))}}catch(yM){a.e(yM)}finally{a.f()}return r},actions:function(n,r){var i,o=y(e);try{for(o.s();!(i=o.n()).done;){var a=i.value;a.actions&&(r=a.actions(n,r,t))}}catch(yM){o.e(yM)}finally{o.f()}return r},contextMenu:function(n,r,i){var o,a=y(e);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.contextMenu&&(r=s.contextMenu(n,r,x(x({},t),i)))}}catch(yM){a.e(yM)}finally{a.f()}return r},helpMenu:function(n,r,i){var o,a=y(e);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.helpMenu&&(r=s.helpMenu(n,r,x(x({},t),i)))}}catch(yM){a.e(yM)}finally{a.f()}return r},menu:function(n,r,i){var o,a=y(e);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.menu&&(r=s.menu(n,r,x(x({},t),i)))}}catch(yM){a.e(yM)}finally{a.f()}return r},toolbar:function(n,r,i){var o,a=y(e);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.toolbar&&(r=s.toolbar(n,r,x(x({},t),i)))}}catch(yM){a.e(yM)}finally{a.f()}return r},keyboardShortcutsMenu:function(n,r,i){var o,a=y(e);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.keyboardShortcutsMenu&&(r=s.keyboardShortcutsMenu(n,r,x(x({},t),i)))}}catch(yM){a.e(yM)}finally{a.f()}return r},tools:function(n,r,i){var o,a=y(e);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.tools&&(r=s.tools(n,r,x(x({},t),i)))}}catch(yM){a.e(yM)}finally{a.f()}return r},translations:r}}(r,n)}),[r,n])}function sM(e){var t=e.overrides,n=e.assetUrls,r=e.children;return(0,Mi.jsx)(iC,{assetUrls:null!==n&&void 0!==n?n:rM,children:(0,Mi.jsx)(uC,{overrides:oM(t),children:(0,Mi.jsx)(XP,{children:(0,Mi.jsx)(bC,{children:(0,Mi.jsx)(EC,{children:(0,Mi.jsx)(uM,{overrides:t,children:r})})})})})})}function uM(e){var t=e.overrides,n=e.children,r=aM(t);return(0,Mi.jsx)(SC,{overrides:r.actions,children:(0,Mi.jsx)(vE,{overrides:r.tools,children:(0,Mi.jsx)(CE,{overrides:r.toolbar,children:(0,Mi.jsx)(jC,{overrides:r.actionsMenu,children:(0,Mi.jsx)(wE,{overrides:r.keyboardShortcutsMenu,children:(0,Mi.jsx)(RC,{overrides:r.contextMenu,children:(0,Mi.jsx)(UC,{overrides:r.helpMenu,children:(0,Mi.jsx)(SE,{overrides:r.menu,children:n})})})})})})})})}var lM=["shareZone","renderDebugMenuItems","children"],cM=["children"],dM=t.memo((function(e){var t=e.shareZone,n=e.renderDebugMenuItems,r=e.children,i=Ye(e,lM);return(0,Mi.jsx)(sM,x(x({},i),{},{children:(0,Mi.jsx)(pM,{shareZone:t,renderDebugMenuItems:n,children:r})}))})),pM=t.memo((function(e){var n=e.children,r=Ye(e,cM),i=function(){var e=N((0,t.useState)(!1),2),n=e[0],r=e[1],i=oC();return(0,t.useEffect)((function(){var e=!1;function t(){return(t=Ai(Ti().mark((function t(){return Ti().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.allSettled(nM.map((function(e){var t=new Image;return t.src=i.icons[e],t.decode()})));case 2:if(!e){t.next=4;break}return t.abrupt("return");case 4:r(!0);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e=!0}}),[n,i]),n}();return i?(0,Mi.jsxs)(Mi.Fragment,{children:[n,(0,Mi.jsx)(fM,x({},r))]}):(0,Mi.jsx)(mh,{children:"Loading assets..."})})),fM=t.memo((function(e){var n=e.shareZone,r=e.renderDebugMenuItems,i=ma(),o=lC(),a=IC(),s=va("isReadOnlyMode",(function(){return i.isReadOnly}),[]),u=va("isFocusMode",(function(){return i.instanceState.isFocusMode}),[]),l=va("isDebugMode",(function(){return i.instanceState.isDebugMode}),[]);!function(){var e=ma(),n=pE(),r=_C(),i=gE();(0,t.useEffect)((function(){for(var t=function(){return e.isMenuOpen||null!==e.editingId||e.crashingError},o=function(){var e=s[a];return e.kbd?n&&!e.readonlyOk||mE.includes(e.id)?"continue":void uE(yE(e.kbd),(function(n){t()||(ss(n),e.onSelect())})):"continue"},a=0,s=Object.values(r);a<s.length;a++)o();for(var u=function(){var e=c[l];return e.kbd?mE.includes(e.id)?"continue":void uE(yE(e.kbd),(function(n){t()||(ss(n),e.onSelect())})):"continue"},l=0,c=Object.values(i);l<c.length;l++)u();return uE("g",(function(){t()||e.setSelectedTool("geo")})),uE("backspace,del",(function(){t()||r.delete.onSelect()})),uE("=",(function(){t()||r["zoom-in"].onSelect()})),uE("-",(function(){t()||r["zoom-out"].onSelect()})),function(){uE.unbind()}}),[r,i,n,e])}(),function(){var e=ma();(0,t.useEffect)((function(){var t=function(){0===e.selectedIds.length||null!==e.editingId||MP(e)||NP(e)};function n(){0===e.selectedIds.length||null!==e.editingId||MP(e)||(NP(e),e.deleteShapes())}var r=function(t){null!==e.editingId||MP(e)||(t.clipboardData&&!e.inputs.shiftKey?VP(e,t.clipboardData):navigator.clipboard.read().then((function(t){Array.isArray(t)&&t[0]instanceof ClipboardItem&&WP(e,t,e.inputs.currentPagePoint)})))};return document.addEventListener("copy",t),document.addEventListener("cut",n),document.addEventListener("paste",r),function(){document.removeEventListener("copy",t),document.removeEventListener("cut",n),document.removeEventListener("paste",r)}}),[e])}(),function(){var e=ma(),n=qP().addToast;(0,t.useEffect)((function(){function t(e){var t=e.name,r=e.count;n({title:"Maximum Shapes Reached",description:"You've reached the maximum number of shapes allowed on ".concat(t," (").concat(r,"). Please delete some shapes or move to a different page to continue.")})}function r(t){var r=t.name,i=t.fromId;n({title:"Changed Page",description:"Moved to ".concat(r,"."),actions:[{label:"Go Back",type:"primary",onClick:function(){e.mark("change-page"),e.setCurrentPageId(i)}}]})}return e.addListener("max-shapes",t),e.addListener("moved-to-page",r),function(){e.removeListener("max-shapes",t),e.removeListener("moved-to-page",r)}}),[e,n])}();var c=_C()["toggle-focus-mode"];return(0,Mi.jsx)(vg,{children:(0,Mi.jsx)("main",{"data-wd":"desktop-ui",className:yf("tlui-layout",{"tlui-layout__mobile":a<5}),children:u?(0,Mi.jsx)("div",{className:"tlui-layout__top",children:(0,Mi.jsx)(PS,{className:"tlui-focus-button",title:"".concat(o("focus-mode.toggle-focus-mode")),icon:"dot",onClick:c.onSelect})}):(0,Mi.jsxs)(Mi.Fragment,{children:[(0,Mi.jsxs)("div",{className:"tlui-layout__top",children:[(0,Mi.jsx)(XI,{}),(0,Mi.jsx)("div",{className:"tlui-spacer"}),(0,Mi.jsx)("div",{className:"tlui-share-zone",draggable:!1,children:n})]}),(0,Mi.jsxs)("div",{className:"tlui-layout__middle","data-wd":"active-area","data-tldraw-area":"active-drawing",children:[(0,Mi.jsxs)("div",{className:"tlui-helper-buttons",children:[(0,Mi.jsx)(iI,{}),(0,Mi.jsx)(tI,{})]}),a>=5&&!s&&(0,Mi.jsx)("div",{className:"tlui-style-panel__wrapper",children:(0,Mi.jsx)(XE,{})})]}),(0,Mi.jsxs)("div",{className:"tlui-layout__bottom",children:[(0,Mi.jsxs)("div",{className:"tlui-layout__bottom__main",children:[(0,Mi.jsx)(WE,{}),(0,Mi.jsx)(JI,{}),a>=4&&(0,Mi.jsx)(LE,{})]}),l&&(0,Mi.jsx)(jE,{renderDebugMenuItems:null!==r&&void 0!==r?r:null})]}),(0,Mi.jsx)($I,{}),(0,Mi.jsx)(rI,{}),(0,Mi.jsx)(GI,{})]})})})})),hM=["children","persistenceKey","instanceId"];function vM(e){var t=e.children,n=e.persistenceKey,r=void 0===n?Xh:n,i=e.instanceId,o=void 0===i?$h:i,a=Ye(e,hM),s=Hh.value,u=cv({instanceId:o,userId:s.id,universalPersistenceKey:r,config:e.config});return(0,Mi.jsx)(hh,x(x({},a),{},{instanceId:o,userId:s.id,store:u,children:(0,Mi.jsxs)(dM,x(x({},a),{},{children:[(0,Mi.jsx)(IE,{children:(0,Mi.jsx)(Qf,{})}),t]}))}))}var gM=function(e){d(n,e);var t=v(n);function n(){return o(this,n),t.apply(this,arguments)}return l(n,[{key:"render",value:function(){return(0,Mi.jsxs)("div",{className:"App",children:[(0,Mi.jsx)("p",{className:"App-intro",children:"Welcome to TLDraw 4 Salesforce"}),(0,Mi.jsx)("div",{className:"tldraw__editor",children:(0,Mi.jsx)(vM,{autoFocus:!0})})]})}}]),n}(t.Component),mM=gM;i.render((0,Mi.jsx)(mM,{}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.e74821c7.js.map